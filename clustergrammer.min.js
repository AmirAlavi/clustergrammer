var Clustergrammer=function(t){function e(n){if(r[n])return r[n].exports;var o=r[n]={exports:{},id:n,loaded:!1};return t[n].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var r={};return e.m=t,e.c=r,e.p="",e(0)}([function(t,e,r){"use strict";function n(t){function e(){d3.select(S.params.viz.viz_svg).style("opacity",.5);var t=500;this.params.viz.run_trans===!0&&(t=2500),setTimeout(n,t,this)}function n(t){s(t)}function b(t){d(this,t)}function z(t,e,r){p(this,t,e,r)}function M(){return y}function k(t,e){"sum"===e&&(e="rank"),"var"===e&&(e="rankvar"),w(this,e,t)}function A(){return x(this.params)}function E(t,e){v(this,t,e)}var N=o(t),S={};if(S.params=i(N),S.config=N,S.params.zoom_behavior=d3.behavior.zoom().scaleExtent([1,S.params.viz.square_zoom*S.params.viz.zoom_ratio.x]).on("zoom",function(){g(S)}),S.params.zoom_behavior.translate([S.params.viz.clust.margin.left,S.params.viz.clust.margin.top]),S.params.use_sidebar){var C=r(263);C(S)}return a(S),S.update_view=v,S.resize_viz=e,S.play_demo=l,S.ini_demo=u,S.filter_viz_using_nodes=c,S.filter_viz_using_names=f,S.update_cats=b,S.reset_cats=h,S.zoom=z,S.save_matrix=_,S.brush_crop_matrix=m,S.d3_tip_custom=M,S.reorder=k,S.export_matrix_string=A,S.update_view=E,S}var o=r(1),i=r(10),a=r(89),s=r(154),l=r(197),u=r(237),c=r(240),f=r(241),d=r(242),h=r(243),p=r(146),v=r(245),_=r(248),m=r(252),g=r(155),y=r(100),w=r(145),x=r(250);d3.slider=r(254);r(256);r(257),r(261),t.exports=n},function(t,e,r){"use strict";var n=r(2),o=r(4),i=r(5),a=r(6),s=r(7),l=r(8),u=r(9),c=r(3);t.exports=function(t){var e=s(),r=n.extend(e,t);r.network_data=t.network_data;var f=": ";c.each(["row","col"],function(t){var e=r.network_data[t+"_nodes"],n=u(e);e.forEach(function(e,o){e[t+"_index"]=o,n&&(r.super_labels=!0,r.super[t]=e.name.split(f)[0],e.name=e.name.split(f)[1]),e.name=String(e.name),e.name=e.name.replace(/_/g," ")})}),r.network_data.row_nodes_names=n.pluck(r.network_data.row_nodes,"name"),r.network_data.col_nodes_names=n.pluck(r.network_data.col_nodes,"name"),r.sim_mat=l(r);var d=i(r.network_data.views),h={};c.each(c.keys(d.possible_filters),function(t){var e=a(d.filter_data,t);h[t]=e}),_.has(r.network_data,"views")&&r.network_data.views.forEach(function(t){c.each(c.keys(d.possible_filters),function(e){_.has(t,e)||(t[e]=h[e])});var e=t.nodes;c.each(["row","col"],function(t){var r=u(e[t+"_nodes"]);e[t+"_nodes"].forEach(function(e,n){e[t+"_index"]=n,r&&(e.name=e.name.split(f)[1]),e.name=String(e.name),e.name=e.name.replace(/_/g," ")})})});var p=r.network_data.col_nodes,v=r.network_data.row_nodes;if(_.has(r.network_data,"mat")){for(var m=[],g=r.network_data.mat,y={},w=0;w<g.length;w++)for(var x=0;x<g[0].length;x++)y={},y.source=w,y.target=x,y.value=g[w][x],m.push(y);r.network_data.links=m}if(r.network_data.links.forEach(function(t){t.name=v[t.source].name+"_"+p[t.target].name,t.row_name=v[t.source].name,t.col_name=p[t.target].name}),r.transpose){r.network_data=o(r.network_data);var b=t.col_label,z=t.row_label;t.row_label=b,t.col_label=z}n.is_undefined(t.row_label)||n.is_undefined(t.col_label)||(r.super_labels=!0,r.super={},r.super.row=t.row_label,r.super.col=t.col_label),r.inst_order={},!n.is_undefined(t.order)&&n.is_supported_order(t.order)?(r.inst_order.row=t.order,r.inst_order.col=t.order):(r.inst_order.row="clust",r.inst_order.col="clust"),!n.is_undefined(t.row_order)&&n.is_supported_order(t.row_order)&&(r.inst_order.col=t.row_order),!n.is_undefined(t.col_order)&&n.is_supported_order(t.col_order)&&(r.inst_order.row=t.col_order);var M=n.has(r.network_data.row_nodes[0],"group"),k=n.has(r.network_data.col_nodes[0],"group");return r.show_dendrogram=M||k,n.has(r.network_data.links[0],"value_orig")?r.keep_orig=!0:r.keep_orig=!1,r}},function(t,e,r){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=r(3);t.exports={normal_name:function(t){var e=t.name.replace(/_/g," ").split("#")[0];return e},is_supported_order:function(t){return"ini"===t||"clust"===t||"rank_var"===t||"rank"===t||"class"===t||"alpha"==t},has:function(t,e){return null!=t&&hasOwnProperty.call(t,e)},property:function(t){return function(e){return null==e?void 0:e[t]}},pluck:function(t,e){var r=this;if(window._){if("function"==typeof o.pluck)return o.pluck(t,e);if("function"==typeof o.map)return o.map(t,r.property(e))}else if(t.map&&"function"==typeof t.map)return t.map(r.property(e))},is_undefined:function(t){return void 0===t},extend:function(t,e){t=t||{};for(var r in e)"object"===n(e[r])?t[r]=this.extend(t[r],e[r]):t[r]=e[r];return t}}},function(t,e,r){var n,o;(function(){function r(t){function e(e,r,n,o,i,a){for(;i>=0&&i<a;i+=t){var s=o?o[i]:i;n=r(n,e[s],s,e)}return n}return function(r,n,o,i){n=z(n,i,4);var a=!C(r)&&b.keys(r),s=(a||r).length,l=t>0?0:s-1;return arguments.length<3&&(o=r[a?a[l]:l],l+=t),e(r,n,o,a,l,s)}}function i(t){return function(e,r,n){r=M(r,n);for(var o=S(e),i=t>0?0:o-1;i>=0&&i<o;i+=t)if(r(e[i],i,e))return i;return-1}}function a(t,e,r){return function(n,o,i){var a=0,s=S(n);if("number"==typeof i)t>0?a=i>=0?i:Math.max(i+s,a):s=i>=0?Math.min(i+1,s):i+s+1;else if(r&&i&&s)return i=r(n,o),n[i]===o?i:-1;if(o!==o)return i=e(p.call(n,a,s),b.isNaN),i>=0?i+a:-1;for(i=t>0?a:s-1;i>=0&&i<s;i+=t)if(n[i]===o)return i;return-1}}function s(t,e){var r=j.length,n=t.constructor,o=b.isFunction(n)&&n.prototype||f,i="constructor";for(b.has(t,i)&&!b.contains(e,i)&&e.push(i);r--;)i=j[r],i in t&&t[i]!==o[i]&&!b.contains(e,i)&&e.push(i)}var l=this,u=l._,c=Array.prototype,f=Object.prototype,d=Function.prototype,h=c.push,p=c.slice,v=f.toString,_=f.hasOwnProperty,m=Array.isArray,g=Object.keys,y=d.bind,w=Object.create,x=function(){},b=function(t){return t instanceof b?t:this instanceof b?void(this._wrapped=t):new b(t)};"undefined"!=typeof t&&t.exports&&(e=t.exports=b),e._=b,b.VERSION="1.8.3";var z=function(t,e,r){if(void 0===e)return t;switch(null==r?3:r){case 1:return function(r){return t.call(e,r)};case 2:return function(r,n){return t.call(e,r,n)};case 3:return function(r,n,o){return t.call(e,r,n,o)};case 4:return function(r,n,o,i){return t.call(e,r,n,o,i)}}return function(){return t.apply(e,arguments)}},M=function(t,e,r){return null==t?b.identity:b.isFunction(t)?z(t,e,r):b.isObject(t)?b.matcher(t):b.property(t)};b.iteratee=function(t,e){return M(t,e,1/0)};var k=function(t,e){return function(r){var n=arguments.length;if(n<2||null==r)return r;for(var o=1;o<n;o++)for(var i=arguments[o],a=t(i),s=a.length,l=0;l<s;l++){var u=a[l];e&&void 0!==r[u]||(r[u]=i[u])}return r}},A=function(t){if(!b.isObject(t))return{};if(w)return w(t);x.prototype=t;var e=new x;return x.prototype=null,e},E=function(t){return function(e){return null==e?void 0:e[t]}},N=Math.pow(2,53)-1,S=E("length"),C=function(t){var e=S(t);return"number"==typeof e&&e>=0&&e<=N};b.each=b.forEach=function(t,e,r){e=z(e,r);var n,o;if(C(t))for(n=0,o=t.length;n<o;n++)e(t[n],n,t);else{var i=b.keys(t);for(n=0,o=i.length;n<o;n++)e(t[i[n]],i[n],t)}return t},b.map=b.collect=function(t,e,r){e=M(e,r);for(var n=!C(t)&&b.keys(t),o=(n||t).length,i=Array(o),a=0;a<o;a++){var s=n?n[a]:a;i[a]=e(t[s],s,t)}return i},b.reduce=b.foldl=b.inject=r(1),b.reduceRight=b.foldr=r(-1),b.find=b.detect=function(t,e,r){var n;if(n=C(t)?b.findIndex(t,e,r):b.findKey(t,e,r),void 0!==n&&n!==-1)return t[n]},b.filter=b.select=function(t,e,r){var n=[];return e=M(e,r),b.each(t,function(t,r,o){e(t,r,o)&&n.push(t)}),n},b.reject=function(t,e,r){return b.filter(t,b.negate(M(e)),r)},b.every=b.all=function(t,e,r){e=M(e,r);for(var n=!C(t)&&b.keys(t),o=(n||t).length,i=0;i<o;i++){var a=n?n[i]:i;if(!e(t[a],a,t))return!1}return!0},b.some=b.any=function(t,e,r){e=M(e,r);for(var n=!C(t)&&b.keys(t),o=(n||t).length,i=0;i<o;i++){var a=n?n[i]:i;if(e(t[a],a,t))return!0}return!1},b.contains=b.includes=b.include=function(t,e,r,n){return C(t)||(t=b.values(t)),("number"!=typeof r||n)&&(r=0),b.indexOf(t,e,r)>=0},b.invoke=function(t,e){var r=p.call(arguments,2),n=b.isFunction(e);return b.map(t,function(t){var o=n?e:t[e];return null==o?o:o.apply(t,r)})},b.pluck=function(t,e){return b.map(t,b.property(e))},b.where=function(t,e){return b.filter(t,b.matcher(e))},b.findWhere=function(t,e){return b.find(t,b.matcher(e))},b.max=function(t,e,r){var n,o,i=-(1/0),a=-(1/0);if(null==e&&null!=t){t=C(t)?t:b.values(t);for(var s=0,l=t.length;s<l;s++)n=t[s],n>i&&(i=n)}else e=M(e,r),b.each(t,function(t,r,n){o=e(t,r,n),(o>a||o===-(1/0)&&i===-(1/0))&&(i=t,a=o)});return i},b.min=function(t,e,r){var n,o,i=1/0,a=1/0;if(null==e&&null!=t){t=C(t)?t:b.values(t);for(var s=0,l=t.length;s<l;s++)n=t[s],n<i&&(i=n)}else e=M(e,r),b.each(t,function(t,r,n){o=e(t,r,n),(o<a||o===1/0&&i===1/0)&&(i=t,a=o)});return i},b.shuffle=function(t){for(var e,r=C(t)?t:b.values(t),n=r.length,o=Array(n),i=0;i<n;i++)e=b.random(0,i),e!==i&&(o[i]=o[e]),o[e]=r[i];return o},b.sample=function(t,e,r){return null==e||r?(C(t)||(t=b.values(t)),t[b.random(t.length-1)]):b.shuffle(t).slice(0,Math.max(0,e))},b.sortBy=function(t,e,r){return e=M(e,r),b.pluck(b.map(t,function(t,r,n){return{value:t,index:r,criteria:e(t,r,n)}}).sort(function(t,e){var r=t.criteria,n=e.criteria;if(r!==n){if(r>n||void 0===r)return 1;if(r<n||void 0===n)return-1}return t.index-e.index}),"value")};var T=function(t){return function(e,r,n){var o={};return r=M(r,n),b.each(e,function(n,i){var a=r(n,i,e);t(o,n,a)}),o}};b.groupBy=T(function(t,e,r){b.has(t,r)?t[r].push(e):t[r]=[e]}),b.indexBy=T(function(t,e,r){t[r]=e}),b.countBy=T(function(t,e,r){b.has(t,r)?t[r]++:t[r]=1}),b.toArray=function(t){return t?b.isArray(t)?p.call(t):C(t)?b.map(t,b.identity):b.values(t):[]},b.size=function(t){return null==t?0:C(t)?t.length:b.keys(t).length},b.partition=function(t,e,r){e=M(e,r);var n=[],o=[];return b.each(t,function(t,r,i){(e(t,r,i)?n:o).push(t)}),[n,o]},b.first=b.head=b.take=function(t,e,r){if(null!=t)return null==e||r?t[0]:b.initial(t,t.length-e)},b.initial=function(t,e,r){return p.call(t,0,Math.max(0,t.length-(null==e||r?1:e)))},b.last=function(t,e,r){if(null!=t)return null==e||r?t[t.length-1]:b.rest(t,Math.max(0,t.length-e))},b.rest=b.tail=b.drop=function(t,e,r){return p.call(t,null==e||r?1:e)},b.compact=function(t){return b.filter(t,b.identity)};var O=function(t,e,r,n){for(var o=[],i=0,a=n||0,s=S(t);a<s;a++){var l=t[a];if(C(l)&&(b.isArray(l)||b.isArguments(l))){e||(l=O(l,e,r));var u=0,c=l.length;for(o.length+=c;u<c;)o[i++]=l[u++]}else r||(o[i++]=l)}return o};b.flatten=function(t,e){return O(t,e,!1)},b.without=function(t){return b.difference(t,p.call(arguments,1))},b.uniq=b.unique=function(t,e,r,n){b.isBoolean(e)||(n=r,r=e,e=!1),null!=r&&(r=M(r,n));for(var o=[],i=[],a=0,s=S(t);a<s;a++){var l=t[a],u=r?r(l,a,t):l;e?(a&&i===u||o.push(l),i=u):r?b.contains(i,u)||(i.push(u),o.push(l)):b.contains(o,l)||o.push(l)}return o},b.union=function(){return b.uniq(O(arguments,!0,!0))},b.intersection=function(t){for(var e=[],r=arguments.length,n=0,o=S(t);n<o;n++){var i=t[n];if(!b.contains(e,i)){for(var a=1;a<r&&b.contains(arguments[a],i);a++);a===r&&e.push(i)}}return e},b.difference=function(t){var e=O(arguments,!0,!0,1);return b.filter(t,function(t){return!b.contains(e,t)})},b.zip=function(){return b.unzip(arguments)},b.unzip=function(t){for(var e=t&&b.max(t,S).length||0,r=Array(e),n=0;n<e;n++)r[n]=b.pluck(t,n);return r},b.object=function(t,e){for(var r={},n=0,o=S(t);n<o;n++)e?r[t[n]]=e[n]:r[t[n][0]]=t[n][1];return r},b.findIndex=i(1),b.findLastIndex=i(-1),b.sortedIndex=function(t,e,r,n){r=M(r,n,1);for(var o=r(e),i=0,a=S(t);i<a;){var s=Math.floor((i+a)/2);r(t[s])<o?i=s+1:a=s}return i},b.indexOf=a(1,b.findIndex,b.sortedIndex),b.lastIndexOf=a(-1,b.findLastIndex),b.range=function(t,e,r){null==e&&(e=t||0,t=0),r=r||1;for(var n=Math.max(Math.ceil((e-t)/r),0),o=Array(n),i=0;i<n;i++,t+=r)o[i]=t;return o};var B=function(t,e,r,n,o){if(!(n instanceof e))return t.apply(r,o);var i=A(t.prototype),a=t.apply(i,o);return b.isObject(a)?a:i};b.bind=function(t,e){if(y&&t.bind===y)return y.apply(t,p.call(arguments,1));if(!b.isFunction(t))throw new TypeError("Bind must be called on a function");var r=p.call(arguments,2),n=function(){return B(t,n,e,this,r.concat(p.call(arguments)))};return n},b.partial=function(t){var e=p.call(arguments,1),r=function(){for(var n=0,o=e.length,i=Array(o),a=0;a<o;a++)i[a]=e[a]===b?arguments[n++]:e[a];for(;n<arguments.length;)i.push(arguments[n++]);return B(t,r,this,this,i)};return r},b.bindAll=function(t){var e,r,n=arguments.length;if(n<=1)throw new Error("bindAll must be passed function names");for(e=1;e<n;e++)r=arguments[e],t[r]=b.bind(t[r],t);return t},b.memoize=function(t,e){var r=function(n){var o=r.cache,i=""+(e?e.apply(this,arguments):n);return b.has(o,i)||(o[i]=t.apply(this,arguments)),o[i]};return r.cache={},r},b.delay=function(t,e){var r=p.call(arguments,2);return setTimeout(function(){return t.apply(null,r)},e)},b.defer=b.partial(b.delay,b,1),b.throttle=function(t,e,r){var n,o,i,a=null,s=0;r||(r={});var l=function(){s=r.leading===!1?0:b.now(),a=null,i=t.apply(n,o),a||(n=o=null)};return function(){var u=b.now();s||r.leading!==!1||(s=u);var c=e-(u-s);return n=this,o=arguments,c<=0||c>e?(a&&(clearTimeout(a),a=null),s=u,i=t.apply(n,o),a||(n=o=null)):a||r.trailing===!1||(a=setTimeout(l,c)),i}},b.debounce=function(t,e,r){var n,o,i,a,s,l=function(){var u=b.now()-a;u<e&&u>=0?n=setTimeout(l,e-u):(n=null,r||(s=t.apply(i,o),n||(i=o=null)))};return function(){i=this,o=arguments,a=b.now();var u=r&&!n;return n||(n=setTimeout(l,e)),u&&(s=t.apply(i,o),i=o=null),s}},b.wrap=function(t,e){return b.partial(e,t)},b.negate=function(t){return function(){return!t.apply(this,arguments)}},b.compose=function(){var t=arguments,e=t.length-1;return function(){for(var r=e,n=t[e].apply(this,arguments);r--;)n=t[r].call(this,n);return n}},b.after=function(t,e){return function(){if(--t<1)return e.apply(this,arguments)}},b.before=function(t,e){var r;return function(){return--t>0&&(r=e.apply(this,arguments)),t<=1&&(e=null),r}},b.once=b.partial(b.before,2);var F=!{toString:null}.propertyIsEnumerable("toString"),j=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];b.keys=function(t){if(!b.isObject(t))return[];if(g)return g(t);var e=[];for(var r in t)b.has(t,r)&&e.push(r);return F&&s(t,e),e},b.allKeys=function(t){if(!b.isObject(t))return[];var e=[];for(var r in t)e.push(r);return F&&s(t,e),e},b.values=function(t){for(var e=b.keys(t),r=e.length,n=Array(r),o=0;o<r;o++)n[o]=t[e[o]];return n},b.mapObject=function(t,e,r){e=M(e,r);for(var n,o=b.keys(t),i=o.length,a={},s=0;s<i;s++)n=o[s],a[n]=e(t[n],n,t);return a},b.pairs=function(t){for(var e=b.keys(t),r=e.length,n=Array(r),o=0;o<r;o++)n[o]=[e[o],t[e[o]]];return n},b.invert=function(t){for(var e={},r=b.keys(t),n=0,o=r.length;n<o;n++)e[t[r[n]]]=r[n];return e},b.functions=b.methods=function(t){var e=[];for(var r in t)b.isFunction(t[r])&&e.push(r);return e.sort()},b.extend=k(b.allKeys),b.extendOwn=b.assign=k(b.keys),b.findKey=function(t,e,r){e=M(e,r);for(var n,o=b.keys(t),i=0,a=o.length;i<a;i++)if(n=o[i],e(t[n],n,t))return n},b.pick=function(t,e,r){var n,o,i={},a=t;if(null==a)return i;b.isFunction(e)?(o=b.allKeys(a),n=z(e,r)):(o=O(arguments,!1,!1,1),n=function(t,e,r){return e in r},a=Object(a));for(var s=0,l=o.length;s<l;s++){var u=o[s],c=a[u];n(c,u,a)&&(i[u]=c)}return i},b.omit=function(t,e,r){if(b.isFunction(e))e=b.negate(e);else{var n=b.map(O(arguments,!1,!1,1),String);e=function(t,e){return!b.contains(n,e)}}return b.pick(t,e,r)},b.defaults=k(b.allKeys,!0),b.create=function(t,e){var r=A(t);return e&&b.extendOwn(r,e),r},b.clone=function(t){return b.isObject(t)?b.isArray(t)?t.slice():b.extend({},t):t},b.tap=function(t,e){return e(t),t},b.isMatch=function(t,e){var r=b.keys(e),n=r.length;if(null==t)return!n;for(var o=Object(t),i=0;i<n;i++){var a=r[i];if(e[a]!==o[a]||!(a in o))return!1}return!0};var L=function(t,e,r,n){if(t===e)return 0!==t||1/t===1/e;if(null==t||null==e)return t===e;t instanceof b&&(t=t._wrapped),e instanceof b&&(e=e._wrapped);var o=v.call(t);if(o!==v.call(e))return!1;switch(o){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!==+t?+e!==+e:0===+t?1/+t===1/e:+t===+e;case"[object Date]":case"[object Boolean]":return+t===+e}var i="[object Array]"===o;if(!i){if("object"!=typeof t||"object"!=typeof e)return!1;var a=t.constructor,s=e.constructor;if(a!==s&&!(b.isFunction(a)&&a instanceof a&&b.isFunction(s)&&s instanceof s)&&"constructor"in t&&"constructor"in e)return!1}r=r||[],n=n||[];for(var l=r.length;l--;)if(r[l]===t)return n[l]===e;if(r.push(t),n.push(e),i){if(l=t.length,l!==e.length)return!1;for(;l--;)if(!L(t[l],e[l],r,n))return!1}else{var u,c=b.keys(t);if(l=c.length,b.keys(e).length!==l)return!1;for(;l--;)if(u=c[l],!b.has(e,u)||!L(t[u],e[u],r,n))return!1}return r.pop(),n.pop(),!0};b.isEqual=function(t,e){return L(t,e)},b.isEmpty=function(t){return null==t||(C(t)&&(b.isArray(t)||b.isString(t)||b.isArguments(t))?0===t.length:0===b.keys(t).length)},b.isElement=function(t){return!(!t||1!==t.nodeType)},b.isArray=m||function(t){return"[object Array]"===v.call(t)},b.isObject=function(t){var e=typeof t;return"function"===e||"object"===e&&!!t},b.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(t){b["is"+t]=function(e){return v.call(e)==="[object "+t+"]"}}),b.isArguments(arguments)||(b.isArguments=function(t){return b.has(t,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(b.isFunction=function(t){return"function"==typeof t||!1}),b.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},b.isNaN=function(t){return b.isNumber(t)&&t!==+t},b.isBoolean=function(t){return t===!0||t===!1||"[object Boolean]"===v.call(t)},b.isNull=function(t){return null===t},b.isUndefined=function(t){return void 0===t},b.has=function(t,e){return null!=t&&_.call(t,e)},b.noConflict=function(){return l._=u,this},b.identity=function(t){return t},b.constant=function(t){return function(){return t}},b.noop=function(){},b.property=E,b.propertyOf=function(t){return null==t?function(){}:function(e){return t[e]}},b.matcher=b.matches=function(t){return t=b.extendOwn({},t),function(e){return b.isMatch(e,t)}},b.times=function(t,e,r){var n=Array(Math.max(0,t));e=z(e,r,1);for(var o=0;o<t;o++)n[o]=e(o);return n},b.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))},b.now=Date.now||function(){return(new Date).getTime()};var R={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},I=b.invert(R),D=function(t){var e=function(e){return t[e]},r="(?:"+b.keys(t).join("|")+")",n=RegExp(r),o=RegExp(r,"g");return function(t){return t=null==t?"":""+t,n.test(t)?t.replace(o,e):t}};b.escape=D(R),b.unescape=D(I),b.result=function(t,e,r){var n=null==t?void 0:t[e];return void 0===n&&(n=r),b.isFunction(n)?n.call(t):n};var q=0;b.uniqueId=function(t){var e=++q+"";return t?t+e:e},b.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var P=/(.)^/,U={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},H=/\\|'|\r|\n|\u2028|\u2029/g,$=function(t){return"\\"+U[t]};b.template=function(t,e,r){!e&&r&&(e=r),e=b.defaults({},e,b.templateSettings);var n=RegExp([(e.escape||P).source,(e.interpolate||P).source,(e.evaluate||P).source].join("|")+"|$","g"),o=0,i="__p+='";t.replace(n,function(e,r,n,a,s){return i+=t.slice(o,s).replace(H,$),o=s+e.length,r?i+="'+\n((__t=("+r+"))==null?'':_.escape(__t))+\n'":n?i+="'+\n((__t=("+n+"))==null?'':__t)+\n'":a&&(i+="';\n"+a+"\n__p+='"),e}),i+="';\n",e.variable||(i="with(obj||{}){\n"+i+"}\n"),i="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+i+"return __p;\n";try{var a=new Function(e.variable||"obj","_",i)}catch(t){throw t.source=i,t}var s=function(t){return a.call(this,t,b)},l=e.variable||"obj";return s.source="function("+l+"){\n"+i+"}",s},b.chain=function(t){var e=b(t);return e._chain=!0,e};var Z=function(t,e){return t._chain?b(e).chain():e};b.mixin=function(t){b.each(b.functions(t),function(e){var r=b[e]=t[e];b.prototype[e]=function(){var t=[this._wrapped];return h.apply(t,arguments),Z(this,r.apply(b,t))}})},b.mixin(b),b.each(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=c[t];b.prototype[t]=function(){var r=this._wrapped;return e.apply(r,arguments),"shift"!==t&&"splice"!==t||0!==r.length||delete r[0],Z(this,r)}}),b.each(["concat","join","slice"],function(t){var e=c[t];b.prototype[t]=function(){return Z(this,e.apply(this._wrapped,arguments))}}),b.prototype.value=function(){return this._wrapped},b.prototype.valueOf=b.prototype.toJSON=b.prototype.value,b.prototype.toString=function(){return""+this._wrapped},n=[],o=function(){return b}.apply(e,n),!(void 0!==o&&(t.exports=o))}).call(this)},function(t,e,r){"use strict";var n=r(2);t.exports=function(t){var e,r,o={};for(o.row_nodes=t.col_nodes,o.col_nodes=t.row_nodes,o.links=[],r=0;r<t.links.length;r++)e={},e.source=t.links[r].target,e.target=t.links[r].source,e.value=t.links[r].value,n.has(t.links[r],"highlight")&&(e.highlight=t.links[r].highlight),n.has(t.links[r],"value_up")&&(e.value_up=t.links[r].value_up),n.has(t.links[r],"value_dn")&&(e.value_dn=t.links[r].value_dn),n.has(t.links[r],"info")&&(e.info=t.links[r].info),o.links.push(e);return o}},function(t,e,r){"use strict";var n=r(3);t.exports=function(t){var e={},r={};n.each(t,function(t){var e=n.keys(t);n.each(e,function(e){"nodes"!=e&&(_.has(r,e)||(r[e]=[]),r[e].push(t[e]),r[e]=n.uniq(r[e]))})});var o=n.keys(r);n.each(o,function(t){var o=r[t],i=o.length,a="categorical";n.each(o,function(t){"number"==typeof t&&(a="numerical")}),i>1&&(e[t]=a)});var i={};return i.possible_filters=e,i.filter_data=r,i}},function(t,e){"use strict";t.exports=function(t,e){var r=t[e].sort(function(t,e){return e-t})[0];return r=String(r)}},function(t,e){"use strict";t.exports=function(){var t={row_label_scale:1,col_label_scale:1,super_labels:!1,super:{},show_label_tooltips:!0,show_tile_tooltips:!0,transpose:!1,tile_colors:["#FF0000","#1C86EE"],bar_colors:["#FF0000","#1C86EE"],cat_value_colors:["#2F4F4F","#9370DB"],outline_colors:["orange","black"],highlight_color:"#FFFF00",tile_title:!1,input_domain:0,opacity_scale:"linear",do_zoom:!0,is_zoom:0,is_slider_drag:!1,is_cropping:!1,background_color:"#FFFFFF",super_border_color:"#F5F5F5",outer_margins:{top:0,bottom:0,left:0,right:0},ini_expand:!1,grey_border_width:2,tile_click_hlight:!1,super_label_scale:1,make_tile_tooltip:function(t){return t.info},ini_view:null,requested_view:null,use_sidebar:!0,title:null,about:null,sidebar_width:160,sidebar_icons:!0,row_search_placeholder:"Row",buffer_width:10,show_sim_mat:!1,cat_colors:null,resize:!0,clamp_opacity:.85,expand_button:!0,max_allow_fs:20,dendro_filter:{row:!1,col:!1},cat_filter:{row:!1,col:!1},crop_filter_nodes:{row:!1,col:!1},row_tip_callback:null,col_tip_callback:null,tile_tip_callback:null,matrix_update_callback:null,cat_update_callback:null,dendro_callback:null,dendro_click_callback:null,new_row_cats:null,make_modals:!0,show_viz_border:!1};return t}},function(t,e,r){"use strict";var n=r(3);t.exports=function(t){var e=!1,r=t.network_data.row_nodes_names.length,o=t.network_data.col_nodes_names.length;if(r==o){var i=t.network_data.row_nodes_names,a=t.network_data.col_nodes_names;e=!0,n.each(i,function(t){var r=i.indexOf(t);t!==a[r]&&(e=!1)})}return e&&(t.expand_button=!1),e}},function(t,e,r){"use strict";var n=r(3);t.exports=function(t){var e=": ",r=!0;return n.each(t,function(t){var n=String(t.name);n.indexOf(e)<0&&(r=!1)}),r}},function(t,e,r){"use strict";var n=r(11),o=r(65),i=r(66),a=r(5),s=r(67),l=r(88);t.exports=function(t){var e=$.extend(!0,{},t),r=e;if(r.inst_nodes={},r.inst_nodes.row_nodes=r.network_data.row_nodes,r.inst_nodes.col_nodes=r.network_data.col_nodes,null!==r.ini_view){var u=r.ini_view,c=a(r.network_data.views);r.viz={},r.viz.possible_filters=c.possible_filters,r.viz.filter_data=c.filter_data,u=i(r,u),r.network_data=n(e,r,u),r.requested_view=u}return r=s(r),r.use_sidebar&&(r.sidebar=o(r)),r.zoom_info=l(),r}},function(t,e,r){"use strict";var n=r(12),o=r(64);t.exports=function(t,e,r){var i=t.network_data.views,a=!1;_.has(i[0],"enr_score_type")&&(a=!0);var s=o(e,i,r);a&&0==s.length&&(r={N_row_sum:"all",N_col_sum:"10"},s=o(e,i,r));var l,u=s[0];if("undefined"!=typeof u){var c=u.nodes;l=n(t,c)}else l=t.network_data;return l}},function(t,e,r){"use strict";var n=r(2),o=r(13),i=r(3),a=o.create();a.import(r(26)),a.import(r(63)),t.exports=function(t,e){var r=t.network_data.links,o=n.pluck(e.row_nodes,"name"),s=n.pluck(e.col_nodes,"name"),l=a.matrix(a.zeros([e.row_nodes.length,e.col_nodes.length]));l=l.toArray();var u=i.filter(r,function(t){var e=t.name.split("_")[0],r=t.name.split("_")[1],n=i.indexOf(o,e),a=i.indexOf(s,r);if(n>-1&a>-1)return t.source=n,t.target=a,l[n][a]=t.value,t}),c={};return c.row_nodes=e.row_nodes,c.row_nodes_names=o,c.col_nodes=e.col_nodes,c.col_nodes_names=s,c.links=u,c.all_links=r,c.mat=l,c.views=t.network_data.views,_.has(t.network_data,"cat_colors")&&(c.cat_colors=t.network_data.cat_colors),c}},function(t,e,r){t.exports=r(14)},function(t,e,r){var n=r(15).isFactory,o=r(17),i=r(21),a=r(23),s=r(25);e.create=function(t){function e(t){if(!n(t))throw new Error("Factory object with properties `type`, `name`, and `factory` expected");var o,i=r.indexOf(t);return i===-1?(o=t.math===!0?t.factory(u.type,c,e,u.typed,u):t.factory(u.type,c,e,u.typed),r.push(t),l.push(o)):o=l[i],o}if("function"!=typeof Object.create)throw new Error("ES5 not supported by this JavaScript engine. Please load the es5-shim and es5-sham library for compatibility.");var r=[],l=[],u=i.mixin({});u.type={},u.expression={transform:{},mathWithTransform:{}},u.typed=o.create(u.type);var c={epsilon:1e-12,matrix:"Matrix",number:"number",precision:64,predictable:!1,randomSeed:null};return u.import=e(a),u.config=e(s),u.expression.mathWithTransform.config=u.config,t&&u.config(t),u}},function(t,e,r){"use strict";var n=r(16);e.clone=function t(r){var o=typeof r;if("number"===o||"string"===o||"boolean"===o||null===r||void 0===r)return r;if("function"==typeof r.clone)return r.clone();if(Array.isArray(r))return r.map(function(e){return t(e)});if(r instanceof Number)return new Number(r.valueOf());if(r instanceof String)return new String(r.valueOf());if(r instanceof Boolean)return new Boolean(r.valueOf());if(r instanceof Date)return new Date(r.valueOf());if(n(r))return r;if(r instanceof RegExp)throw new TypeError("Cannot clone "+r);return e.map(r,t)},e.map=function(t,r){var n={};for(var o in t)e.hasOwnProperty(t,o)&&(n[o]=r(t[o]));return n},e.extend=function(t,r){for(var n in r)e.hasOwnProperty(r,n)&&(t[n]=r[n]);return t},e.deepExtend=function t(r,n){if(Array.isArray(n))throw new TypeError("Arrays are not supported by deepExtend");for(var o in n)if(e.hasOwnProperty(n,o))if(n[o]&&n[o].constructor===Object)void 0===r[o]&&(r[o]={}),r[o].constructor===Object?t(r[o],n[o]):r[o]=n[o];else{if(Array.isArray(n[o]))throw new TypeError("Arrays are not supported by deepExtend");r[o]=n[o]}return r},e.deepEqual=function(t,r){var n,o,i;if(Array.isArray(t)){if(!Array.isArray(r))return!1;if(t.length!=r.length)return!1;for(o=0,i=t.length;o<i;o++)if(!e.deepEqual(t[o],r[o]))return!1;return!0}if(t instanceof Object){if(Array.isArray(r)||!(r instanceof Object))return!1;for(n in t)if(!e.deepEqual(t[n],r[n]))return!1;for(n in r)if(!e.deepEqual(t[n],r[n]))return!1;return!0}return typeof t==typeof r&&t==r},e.canDefineProperty=function(){try{if(Object.defineProperty)return Object.defineProperty({},"x",{get:function(){}}),!0}catch(t){}return!1},e.lazy=function(t,r,n){if(e.canDefineProperty()){var o,i=!0;Object.defineProperty(t,r,{get:function(){return i&&(o=n(),i=!1),o},set:function(t){o=t,i=!1},configurable:!0,enumerable:!0})}else t[r]=n()},e.traverse=function(t,e){var r=t;if(e)for(var n=e.split("."),o=0;o<n.length;o++){var i=n[o];i in r||(r[i]={}),r=r[i]}return r},e.hasOwnProperty=function(t,e){return t&&Object.hasOwnProperty.call(t,e)},e.isFactory=function(t){return t&&"function"==typeof t.factory}},function(t,e){t.exports=function(t){return t&&t.constructor.prototype.isBigNumber||!1}},function(t,e,r){var n=r(18),o=r(19).digits,i=r(16),a=r(20),s=function(){return s=n.create,n};e.create=function(t){t.isNumber=function(t){return"number"==typeof t},t.isComplex=function(e){return t.Complex&&e instanceof t.Complex||!1},t.isBigNumber=i,t.isFraction=function(e){return t.Fraction&&e instanceof t.Fraction||!1},t.isUnit=function(t){return t&&t.constructor.prototype.isUnit||!1},t.isString=function(t){return"string"==typeof t},t.isArray=Array.isArray,t.isMatrix=a,t.isDenseMatrix=function(t){return t&&t.isDenseMatrix&&t.constructor.prototype.isMatrix||!1},t.isSparseMatrix=function(t){return t&&t.isSparseMatrix&&t.constructor.prototype.isMatrix||!1},t.isRange=function(t){return t&&t.constructor.prototype.isRange||!1},t.isIndex=function(t){return t&&t.constructor.prototype.isIndex||!1},t.isBoolean=function(t){return"boolean"==typeof t},t.isResultSet=function(t){return t&&t.constructor.prototype.isResultSet||!1},t.isHelp=function(t){return t&&t.constructor.prototype.isHelp||!1},t.isFunction=function(t){return"function"==typeof t},t.isDate=function(t){return t instanceof Date},t.isRegExp=function(t){return t instanceof RegExp},t.isObject=function(t){return"object"==typeof t},t.isNull=function(t){return null===t},t.isUndefined=function(t){return void 0===t},t.isAccessorNode=function(t){return t&&t.isAccessorNode&&t.constructor.prototype.isNode||!1},t.isArrayNode=function(t){return t&&t.isArrayNode&&t.constructor.prototype.isNode||!1},t.isAssignmentNode=function(t){return t&&t.isAssignmentNode&&t.constructor.prototype.isNode||!1},t.isBlockNode=function(t){return t&&t.isBlockNode&&t.constructor.prototype.isNode||!1},t.isConditionalNode=function(t){return t&&t.isConditionalNode&&t.constructor.prototype.isNode||!1},t.isConstantNode=function(t){return t&&t.isConstantNode&&t.constructor.prototype.isNode||!1},t.isFunctionAssignmentNode=function(t){return t&&t.isFunctionAssignmentNode&&t.constructor.prototype.isNode||!1},t.isFunctionNode=function(t){return t&&t.isFunctionNode&&t.constructor.prototype.isNode||!1},t.isIndexNode=function(t){return t&&t.isIndexNode&&t.constructor.prototype.isNode||!1},t.isNode=function(t){return t&&t.isNode&&t.constructor.prototype.isNode||!1},t.isObjectNode=function(t){return t&&t.isObjectNode&&t.constructor.prototype.isNode||!1},t.isOperatorNode=function(t){return t&&t.isOperatorNode&&t.constructor.prototype.isNode||!1},t.isParenthesisNode=function(t){return t&&t.isParenthesisNode&&t.constructor.prototype.isNode||!1},t.isRangeNode=function(t){return t&&t.isRangeNode&&t.constructor.prototype.isNode||!1},t.isSymbolNode=function(t){return t&&t.isSymbolNode&&t.constructor.prototype.isNode||!1},t.isChain=function(t){return t&&t.constructor.prototype.isChain||!1};var e=s();return e.types=[{name:"number",test:t.isNumber},{name:"Complex",test:t.isComplex},{name:"BigNumber",test:t.isBigNumber},{name:"Fraction",test:t.isFraction},{name:"Unit",test:t.isUnit},{name:"string",test:t.isString},{name:"Array",test:t.isArray},{name:"Matrix",test:t.isMatrix},{name:"DenseMatrix",test:t.isDenseMatrix},{name:"SparseMatrix",test:t.isSparseMatrix},{name:"Range",test:t.isRange},{name:"Index",test:t.isIndex},{name:"boolean",test:t.isBoolean},{name:"ResultSet",test:t.isResultSet},{name:"Help",test:t.isHelp},{name:"function",test:t.isFunction},{name:"Date",test:t.isDate},{name:"RegExp",test:t.isRegExp},{name:"Object",test:t.isObject},{name:"null",test:t.isNull},{name:"undefined",test:t.isUndefined},{name:"OperatorNode",test:t.isOperatorNode},{name:"ConstantNode",test:t.isConstantNode},{name:"SymbolNode",test:t.isSymbolNode},{name:"ParenthesisNode",test:t.isParenthesisNode},{name:"FunctionNode",test:t.isFunctionNode},{name:"FunctionAssignmentNode",test:t.isFunctionAssignmentNode},{name:"ArrayNode",test:t.isArrayNode},{name:"AssignmentNode",test:t.isAssignmentNode},{name:"BlockNode",
test:t.isBlockNode},{name:"ConditionalNode",test:t.isConditionalNode},{name:"IndexNode",test:t.isIndexNode},{name:"RangeNode",test:t.isRangeNode},{name:"Node",test:t.isNode}],e.conversions=[{from:"number",to:"BigNumber",convert:function(e){if(o(e)>15)throw new TypeError("Cannot implicitly convert a number with >15 significant digits to BigNumber (value: "+e+"). Use function bignumber(x) to convert to BigNumber.");return new t.BigNumber(e)}},{from:"number",to:"Complex",convert:function(e){return new t.Complex(e,0)}},{from:"number",to:"string",convert:function(t){return t+""}},{from:"BigNumber",to:"Complex",convert:function(e){return new t.Complex(e.toNumber(),0)}},{from:"Fraction",to:"BigNumber",convert:function(t){throw new TypeError("Cannot implicitly convert a Fraction to BigNumber or vice versa. Use function bignumber(x) to convert to BigNumber or fraction(x) to convert to Fraction.")}},{from:"Fraction",to:"Complex",convert:function(e){return new t.Complex(e.valueOf(),0)}},{from:"number",to:"Fraction",convert:function(e){var r=new t.Fraction(e);if(r.valueOf()!==e)throw new TypeError("Cannot implicitly convert a number to a Fraction when there will be a loss of precision (value: "+e+"). Use function fraction(x) to convert to Fraction.");return new t.Fraction(e)}},{from:"string",to:"number",convert:function(t){var e=Number(t);if(isNaN(e))throw new Error('Cannot convert "'+t+'" to a number');return e}},{from:"string",to:"BigNumber",convert:function(e){try{return new t.BigNumber(e)}catch(t){throw new Error('Cannot convert "'+e+'" to BigNumber')}}},{from:"string",to:"Fraction",convert:function(e){try{return new t.Fraction(e)}catch(t){throw new Error('Cannot convert "'+e+'" to Fraction')}}},{from:"string",to:"Complex",convert:function(e){try{return new t.Complex(e)}catch(t){throw new Error('Cannot convert "'+e+'" to Complex')}}},{from:"boolean",to:"number",convert:function(t){return+t}},{from:"boolean",to:"BigNumber",convert:function(e){return new t.BigNumber(+e)}},{from:"boolean",to:"Fraction",convert:function(e){return new t.Fraction(+e)}},{from:"boolean",to:"string",convert:function(t){return+t}},{from:"null",to:"number",convert:function(){return 0}},{from:"null",to:"string",convert:function(){return"null"}},{from:"null",to:"BigNumber",convert:function(){return new t.BigNumber(0)}},{from:"null",to:"Fraction",convert:function(){return new t.Fraction(0)}},{from:"Array",to:"Matrix",convert:function(e){return new t.DenseMatrix(e)}},{from:"Matrix",to:"Array",convert:function(t){return t.valueOf()}}],e}},function(t,e,r){var n,o,i;!function(r,a){o=[],n=a,i="function"==typeof n?n.apply(e,o):n,!(void 0!==i&&(t.exports=i))}(this,function(){function t(){function e(t){for(var e,r=0;r<M.types.length;r++){var n=M.types[r];if(n.name===t){e=n.test;break}}if(!e){var o;for(r=0;r<M.types.length;r++)if(n=M.types[r],n.name.toLowerCase()==t.toLowerCase()){o=n.name;break}throw new Error('Unknown type "'+t+'"'+(o?'. Did you mean "'+o+'"?':""))}return e}function r(t){for(var e="",r=0;r<t.length;r++){var n=t[r];if(n.signatures&&""!=n.name)if(""==e)e=n.name;else if(e!=n.name){var o=new Error("Function names do not match (expected: "+e+", actual: "+n.name+")");throw o.data={actual:n.name,expected:e},o}}return e}function n(t,e,r,n,o){var i,a=v(n),s=o?o.split(","):null,l=t||"unnamed",u=s&&_(s,"any"),c={fn:t,index:r,actual:n,expected:s};i=s?e>r&&!u?"Unexpected type of argument in function "+l+" (expected: "+s.join(" or ")+", actual: "+a+", index: "+r+")":"Too few arguments in function "+l+" (expected: "+s.join(" or ")+", index: "+r+")":"Too many arguments in function "+l+" (expected: "+r+", actual: "+e+")";var f=new TypeError(i);return f.data=c,f}function o(t){this.name=t||"refs",this.categories={}}function i(t,e){if("string"==typeof t){var r=t.trim(),n="..."===r.substr(0,3);if(n&&(r=r.substr(3)),""===r)this.types=["any"];else{this.types=r.split("|");for(var o=0;o<this.types.length;o++)this.types[o]=this.types[o].trim()}}else{if(!Array.isArray(t)){if(t instanceof i)return t.clone();throw new Error("String or Array expected")}this.types=t}this.conversions=[],this.varArgs=n||e||!1,this.anyType=this.types.indexOf("any")!==-1}function a(t,e){var r;if("string"==typeof t)r=""!==t?t.split(","):[];else{if(!Array.isArray(t))throw new Error("string or Array expected");r=t}this.params=new Array(r.length),this.anyType=!1,this.varArgs=!1;for(var n=0;n<r.length;n++){var o=new i(r[n]);if(this.params[n]=o,o.anyType&&(this.anyType=!0),n===r.length-1)this.varArgs=o.varArgs;else if(o.varArgs)throw new SyntaxError('Unexpected variable arguments operator "..."')}this.fn=e}function s(t,e,r,n){this.path=t||[],this.param=t[t.length-1]||null,this.signature=e||null,this.childs=r||[],this.fallThrough=n||!1}function l(t){var e,r,n={},o=[];for(var i in t)if(t.hasOwnProperty(i)){var s=t[i];if(e=new a(i,s),e.ignore())continue;var l=e.expand();for(r=0;r<l.length;r++){var u=l[r],c=u.toString(),f=n[c];if(f){var d=a.compare(u,f);if(d<0)n[c]=u;else if(0===d)throw new Error('Signature "'+c+'" is defined twice')}else n[c]=u}}for(c in n)n.hasOwnProperty(c)&&o.push(n[c]);for(o.sort(function(t,e){return a.compare(t,e)}),r=0;r<o.length;r++)if(e=o[r],e.varArgs)for(var h=e.params.length-1,p=e.params[h],v=0;v<p.types.length;){if(p.conversions[v])for(var m=p.types[v],g=0;g<o.length;g++){var y=o[g],w=y.params[h];if(y!==e&&w&&_(w.types,m)&&!w.conversions[h]){p.types.splice(v,1),p.conversions.splice(v,1),v--;break}}v++}return o}function u(t){for(var e=[],r=0;r<t.length;r++)t[r].anyType&&e.push(t[r]);return e}function c(t){for(var e={},r=0;r<t.length;r++){var n=t[r];if(n.fn&&!n.hasConversions()){var o=n.params.join(",");e[o]=n.fn}}return e}function f(t,e,r){var n,o,a,l=e.length,u=[];for(n=0;n<t.length;n++)o=t[n],o.params.length!==l||a||(a=o),void 0!=o.params[l]&&u.push(o);u.sort(function(t,e){return i.compare(t.params[l],e.params[l])});var c=[];for(n=0;n<u.length;n++){o=u[n];var d=o.params[l],h=c.filter(function(t){return t.param.overlapping(d)})[0];if(h){if(h.param.varArgs)throw new Error('Conflicting types "'+h.param+'" and "'+d+'"');h.signatures.push(o)}else c.push({param:d,signatures:[o]})}var p=[];for(n=0;n<r.length;n++)r[n].paramsStartWith(e)&&p.push(r[n]);var v=!1;for(n=0;n<p.length;n++)if(!_(t,p[n])){v=!0;break}var m=new Array(c.length);for(n=0;n<c.length;n++){var g=c[n];m[n]=f(g.signatures,e.concat(g.param),p)}return new s(e,a,m,v)}function d(t){for(var e=[],r=0;r<t;r++)e[r]="arg"+r;return e}function h(t,e){var r=new o,i=l(e);if(0==i.length)throw new Error("No signatures provided");var a=u(i),s=f(i,[],a),h=[],v=(t||"").replace(/[^a-zA-Z0-9_$]/g,"_"),_=d(p(i));h.push("function "+v+"("+_.join(", ")+") {"),h.push('  "use strict";'),h.push("  var name = "+JSON.stringify(t||"")+";"),h.push(s.toCode(r,"  ",!1)),h.push("}");var m=[r.toCode(),"return "+h.join("\n")].join("\n"),g=new Function(r.name,"createError",m),y=g(r,n);return y.signatures=c(i),y}function p(t){for(var e=0,r=0;r<t.length;r++){var n=t[r].params.length;n>e&&(e=n)}return e}function v(t){for(var e,r=0;r<M.types.length;r++){var n=M.types[r];if("Object"===n.name)e=n;else if(n.test(t))return n.name}return e&&e.test(t)?e.name:"unknown"}function _(t,e){return t.indexOf(e)!==-1}function m(t){return t[t.length-1]}function g(t,e){if(!t.signatures)throw new TypeError("Function is no typed-function");var r;if("string"==typeof e){r=e.split(",");for(var n=0;n<r.length;n++)r[n]=r[n].trim()}else{if(!Array.isArray(e))throw new TypeError("String array or a comma separated string expected");r=e}var o=r.join(","),i=t.signatures[o];if(i)return i;throw new TypeError("Signature not found (signature: "+(t.name||"unnamed")+"("+r.join(", ")+"))")}function y(t,e){var r=v(t);if(e===r)return t;for(var n=0;n<M.conversions.length;n++){var o=M.conversions[n];if(o.from===r&&o.to===e)return o.convert(t)}throw new Error("Cannot convert from "+r+" to "+e)}o.prototype.add=function(t,e){var r=e||"fn";this.categories[r]||(this.categories[r]=[]);var n=this.categories[r].indexOf(t);return n==-1&&(n=this.categories[r].length,this.categories[r].push(t)),r+n},o.prototype.toCode=function(){var t=[],e=this.name+".categories",r=this.categories;for(var n in r)if(r.hasOwnProperty(n))for(var o=r[n],i=0;i<o.length;i++)t.push("var "+n+i+" = "+e+"['"+n+"']["+i+"];");return t.join("\n")},i.compare=function(t,e){if(t.anyType)return 1;if(e.anyType)return-1;if(_(t.types,"Object"))return 1;if(_(e.types,"Object"))return-1;if(t.hasConversions()){if(e.hasConversions()){var r,n,o;for(r=0;r<t.conversions.length;r++)if(void 0!==t.conversions[r]){n=t.conversions[r];break}for(r=0;r<e.conversions.length;r++)if(void 0!==e.conversions[r]){o=e.conversions[r];break}return M.conversions.indexOf(n)-M.conversions.indexOf(o)}return 1}if(e.hasConversions())return-1;var i,a;for(r=0;r<M.types.length;r++)if(M.types[r].name===t.types[0]){i=r;break}for(r=0;r<M.types.length;r++)if(M.types[r].name===e.types[0]){a=r;break}return i-a},i.prototype.overlapping=function(t){for(var e=0;e<this.types.length;e++)if(_(t.types,this.types[e]))return!0;return!1},i.prototype.matches=function(t){return this.anyType||t.anyType||this.overlapping(t)},i.prototype.clone=function(){var t=new i(this.types.slice(),this.varArgs);return t.conversions=this.conversions.slice(),t},i.prototype.hasConversions=function(){return this.conversions.length>0},i.prototype.contains=function(t){for(var e=0;e<this.types.length;e++)if(t[this.types[e]])return!0;return!1},i.prototype.toString=function(t){for(var e=[],r={},n=0;n<this.types.length;n++){var o=this.conversions[n],i=t&&o?o.to:this.types[n];i in r||(r[i]=!0,e.push(i))}return(this.varArgs?"...":"")+e.join("|")},a.prototype.clone=function(){return new a(this.params.slice(),this.fn)},a.prototype.expand=function(){function t(r,n){if(n.length<r.params.length){var o,s,l,u=r.params[n.length];if(u.varArgs){for(s=u.clone(),o=0;o<M.conversions.length;o++)if(l=M.conversions[o],!_(u.types,l.from)&&_(u.types,l.to)){var c=s.types.length;s.types[c]=l.from,s.conversions[c]=l}t(r,n.concat(s))}else{for(o=0;o<u.types.length;o++)t(r,n.concat(new i(u.types[o])));for(o=0;o<M.conversions.length;o++)l=M.conversions[o],!_(u.types,l.from)&&_(u.types,l.to)&&(s=new i(l.from),s.conversions[0]=l,t(r,n.concat(s)))}}else e.push(new a(n,r.fn))}var e=[];return t(this,[]),e},a.compare=function(t,e){if(t.params.length>e.params.length)return 1;if(t.params.length<e.params.length)return-1;var r,n=t.params.length,o=0,a=0;for(r=0;r<n;r++)t.params[r].hasConversions()&&o++,e.params[r].hasConversions()&&a++;if(o>a)return 1;if(o<a)return-1;for(r=0;r<t.params.length;r++){var s=i.compare(t.params[r],e.params[r]);if(0!==s)return s}return 0},a.prototype.hasConversions=function(){for(var t=0;t<this.params.length;t++)if(this.params[t].hasConversions())return!0;return!1},a.prototype.ignore=function(){for(var t={},e=0;e<M.ignore.length;e++)t[M.ignore[e]]=!0;for(e=0;e<this.params.length;e++)if(this.params[e].contains(t))return!0;return!1},a.prototype.paramsStartWith=function(t){if(0===t.length)return!0;for(var e=m(this.params),r=m(t),n=0;n<t.length;n++){var o=this.params[n]||(e.varArgs?e:null),i=t[n]||(r.varArgs?r:null);if(!o||!i||!o.matches(i))return!1}return!0},a.prototype.toCode=function(t,e){for(var r=[],n=new Array(this.params.length),o=0;o<this.params.length;o++){var i=this.params[o],a=i.conversions[0];i.varArgs?n[o]="varArgs":a?n[o]=t.add(a.convert,"convert")+"(arg"+o+")":n[o]="arg"+o}var s=this.fn?t.add(this.fn,"signature"):void 0;return s?e+"return "+s+"("+n.join(", ")+"); // signature: "+this.params.join(", "):r.join("\n")},a.prototype.toString=function(){return this.params.join(", ")},s.prototype.toCode=function(t,r){var n=[];if(this.param){var o=this.path.length-1,i=this.param.conversions[0],a="// type: "+(i?i.from+" (convert to "+i.to+")":this.param);if(this.param.varArgs)if(this.param.anyType)n.push(r+"if (arguments.length > "+o+") {"),n.push(r+"  var varArgs = [];"),n.push(r+"  for (var i = "+o+"; i < arguments.length; i++) {"),n.push(r+"    varArgs.push(arguments[i]);"),n.push(r+"  }"),n.push(this.signature.toCode(t,r+"  ")),n.push(r+"}");else{for(var s=function(r,n){for(var o=[],i=0;i<r.length;i++)o[i]=t.add(e(r[i]),"test")+"("+n+")";return o.join(" || ")}.bind(this),l=this.param.types,u=[],c=0;c<l.length;c++)void 0===this.param.conversions[c]&&u.push(l[c]);n.push(r+"if ("+s(l,"arg"+o)+") { "+a),n.push(r+"  var varArgs = [arg"+o+"];"),n.push(r+"  for (var i = "+(o+1)+"; i < arguments.length; i++) {"),n.push(r+"    if ("+s(u,"arguments[i]")+") {"),n.push(r+"      varArgs.push(arguments[i]);");for(var c=0;c<l.length;c++){var f=this.param.conversions[c];if(f){var d=t.add(e(l[c]),"test"),h=t.add(f.convert,"convert");n.push(r+"    }"),n.push(r+"    else if ("+d+"(arguments[i])) {"),n.push(r+"      varArgs.push("+h+"(arguments[i]));")}}n.push(r+"    } else {"),n.push(r+"      throw createError(name, arguments.length, i, arguments[i], '"+u.join(",")+"');"),n.push(r+"    }"),n.push(r+"  }"),n.push(this.signature.toCode(t,r+"  ")),n.push(r+"}")}else if(this.param.anyType)n.push(r+"// type: any"),n.push(this._innerCode(t,r));else{var p=this.param.types[0],d="any"!==p?t.add(e(p),"test"):null;n.push(r+"if ("+d+"(arg"+o+")) { "+a),n.push(this._innerCode(t,r+"  ")),n.push(r+"}")}}else n.push(this._innerCode(t,r));return n.join("\n")},s.prototype._innerCode=function(t,e){var r,n=[];for(this.signature&&(n.push(e+"if (arguments.length === "+this.path.length+") {"),n.push(this.signature.toCode(t,e+"  ")),n.push(e+"}")),r=0;r<this.childs.length;r++)n.push(this.childs[r].toCode(t,e));if(!this.fallThrough||this.param&&this.param.anyType){var o=this._exceptions(t,e);o&&n.push(o)}return n.join("\n")},s.prototype._exceptions=function(t,e){var r=this.path.length;if(0===this.childs.length)return[e+"if (arguments.length > "+r+") {",e+"  throw createError(name, arguments.length, "+r+", arguments["+r+"]);",e+"}"].join("\n");for(var n={},o=[],i=0;i<this.childs.length;i++){var a=this.childs[i];if(a.param)for(var s=0;s<a.param.types.length;s++){var l=a.param.types[s];l in n||a.param.conversions[s]||(n[l]=!0,o.push(l))}}return e+"throw createError(name, arguments.length, "+r+", arguments["+r+"], '"+o.join(",")+"');"};var w=[{name:"number",test:function(t){return"number"==typeof t}},{name:"string",test:function(t){return"string"==typeof t}},{name:"boolean",test:function(t){return"boolean"==typeof t}},{name:"Function",test:function(t){return"function"==typeof t}},{name:"Array",test:Array.isArray},{name:"Date",test:function(t){return t instanceof Date}},{name:"RegExp",test:function(t){return t instanceof RegExp}},{name:"Object",test:function(t){return"object"==typeof t}},{name:"null",test:function(t){return null===t}},{name:"undefined",test:function(t){return void 0===t}}],x={},b=[],z=[],M={config:x,types:w,conversions:b,ignore:z};return M=h("typed",{Object:function(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(t[n]);var o=r(e);return h(o,t)},"string, Object":h,"...Function":function(t){for(var e,n=r(t),o={},i=0;i<t.length;i++){var a=t[i];if("object"!=typeof a.signatures)throw e=new TypeError("Function is no typed-function (index: "+i+")"),e.data={index:i},e;for(var s in a.signatures)if(a.signatures.hasOwnProperty(s))if(o.hasOwnProperty(s)){if(a.signatures[s]!==o[s])throw e=new Error('Signature "'+s+'" is defined twice'),e.data={signature:s},e}else o[s]=a.signatures[s]}return h(n,o)}}),M.config=x,M.types=w,M.conversions=b,M.ignore=z,M.create=t,M.find=g,M.convert=y,M.addType=function(t){if(!t||"string"!=typeof t.name||"function"!=typeof t.test)throw new TypeError("Object with properties {name: string, test: function} expected");M.types.push(t)},M.addConversion=function(t){if(!t||"string"!=typeof t.from||"string"!=typeof t.to||"function"!=typeof t.convert)throw new TypeError("Object with properties {from: string, to: string, convert: function} expected");M.conversions.push(t)},M}return t()})},function(t,e){"use strict";function r(t){for(var e=[],r=0;r<t;r++)e.push(0);return e}e.isNumber=function(t){return"number"==typeof t},e.isInteger=function(t){return!!isFinite(t)&&t==Math.round(t)},e.sign=Math.sign||function(t){return t>0?1:t<0?-1:0},e.format=function(t,r){if("function"==typeof r)return r(t);if(t===1/0)return"Infinity";if(t===-(1/0))return"-Infinity";if(isNaN(t))return"NaN";var n="auto",o=void 0;switch(r&&(r.notation&&(n=r.notation),e.isNumber(r)?o=r:r.precision&&(o=r.precision)),n){case"fixed":return e.toFixed(t,o);case"exponential":return e.toExponential(t,o);case"engineering":return e.toEngineering(t,o);case"auto":return e.toPrecision(t,o,r&&r.exponential).replace(/((\.\d*?)(0+))($|e)/,function(){var t=arguments[2],e=arguments[4];return"."!==t?t+e:e});default:throw new Error('Unknown notation "'+n+'". Choose "auto", "exponential", or "fixed".')}},e.splitNumber=function(t){var e=String(t).toLowerCase().match(/^0*?(-?)(\d+\.?\d*)(e([+-]?\d+))?$/);if(!e)throw new SyntaxError("Invalid number "+t);var r=e[1],n=e[2],o=parseFloat(e[4]||"0"),i=n.indexOf(".");o+=i!==-1?i-1:n.length-1;var a=n.replace(".","").replace(/^0*/,function(t){return o-=t.length,""}).replace(/0*$/,"").split("").map(function(t){return parseInt(t)});return 0===a.length&&(a.push(0),o++),{sign:r,coefficients:a,exponent:o}},e.toEngineering=function(t,n){if(isNaN(t)||!isFinite(t))return String(t);var o=e.roundDigits(e.splitNumber(t),n),i=o.exponent,a=o.coefficients,s=i%3===0?i:i<0?i-3-i%3:i-i%3,l=i>=0?i:Math.abs(s);a.length-1<l&&(a=a.concat(r(l-(a.length-1))));for(var u=Math.abs(i-s),c=1;--u>=0;)c++;var f=a.slice(c).join(""),d=f.match(/[1-9]/)?"."+f:"",h=a.slice(0,c).join("")+d+"e"+(i>=0?"+":"")+s.toString();return o.sign+h},e.toFixed=function(t,n){if(isNaN(t)||!isFinite(t))return String(t);var o=e.splitNumber(t),i=e.roundDigits(o,o.exponent+1+(n||0)),a=i.coefficients,s=i.exponent+1,l=s+(n||0);return a.length<l&&(a=a.concat(r(l-a.length))),s<0&&(a=r(-s+1).concat(a),s=1),n&&a.splice(s,0,0===s?"0.":"."),i.sign+a.join("")},e.toExponential=function(t,n){if(isNaN(t)||!isFinite(t))return String(t);var o=e.splitNumber(t),i=n?e.roundDigits(o,n):o,a=i.coefficients,s=i.exponent;a.length<n&&(a=a.concat(r(n-a.length)));var l=a.shift();return i.sign+l+(a.length>0?"."+a.join(""):"")+"e"+(s>=0?"+":"")+s},e.toPrecision=function(t,n,o){if(isNaN(t)||!isFinite(t))return String(t);var i=o&&void 0!==o.lower?o.lower:.001,a=o&&void 0!==o.upper?o.upper:1e5,s=e.splitNumber(t),l=Math.abs(Math.pow(10,s.exponent));if(l<i||l>=a)return e.toExponential(t,n);var u=n?e.roundDigits(s,n):s,c=u.coefficients,f=u.exponent;c.length<n&&(c=c.concat(r(n-c.length))),c=c.concat(r(f-c.length+1+(c.length<n?n-c.length:0))),c=r(-f).concat(c);var d=f>0?f:0;return d<c.length-1&&c.splice(d+1,0,"."),u.sign+c.join("")},e.roundDigits=function(t,e){for(var r={sign:t.sign,coefficients:t.coefficients,exponent:t.exponent},n=r.coefficients;e<=0;)n.unshift(0),r.exponent++,e++;if(n.length>e){var o=n.splice(e,n.length-e);if(o[0]>=5){var i=e-1;for(n[i]++;10===n[i];)n.pop(),0===i&&(n.unshift(0),r.exponent++,i++),i--,n[i]++}}return r},e.digits=function(t){return t.toExponential().replace(/e.*$/,"").replace(/^0\.?0*|\./,"").length},e.DBL_EPSILON=Number.EPSILON||2.220446049250313e-16,e.nearlyEqual=function(t,r,n){if(null==n)return t==r;if(t==r)return!0;if(isNaN(t)||isNaN(r))return!1;if(isFinite(t)&&isFinite(r)){var o=Math.abs(t-r);return o<e.DBL_EPSILON||o<=Math.max(Math.abs(t),Math.abs(r))*n}return!1}},function(t,e){"use strict";t.exports=function(t){return t&&t.constructor.prototype.isMatrix||!1}},function(t,e,r){var n=r(22);e.mixin=function(t){var e=new n;return t.on=e.on.bind(e),t.off=e.off.bind(e),t.once=e.once.bind(e),t.emit=e.emit.bind(e),t}},function(t,e){function r(){}r.prototype={on:function(t,e,r){var n=this.e||(this.e={});return(n[t]||(n[t]=[])).push({fn:e,ctx:r}),this},once:function(t,e,r){function n(){o.off(t,n),e.apply(r,arguments)}var o=this;return n._=e,this.on(t,n,r)},emit:function(t){var e=[].slice.call(arguments,1),r=((this.e||(this.e={}))[t]||[]).slice(),n=0,o=r.length;for(n;n<o;n++)r[n].fn.apply(r[n].ctx,e);return this},off:function(t,e){var r=this.e||(this.e={}),n=r[t],o=[];if(n&&e)for(var i=0,a=n.length;i<a;i++)n[i].fn!==e&&n[i].fn._!==e&&o.push(n[i]);return o.length?r[t]=o:delete r[t],this}},t.exports=r},function(t,e,r){"use strict";function n(t,e,r,n,l){function u(t,e){var r=arguments.length;if(1!==r&&2!==r)throw new s("import",r,1,2);if(e||(e={}),i(t))h(t,e);else if(Array.isArray(t))t.forEach(function(t){u(t,e)});else if("object"==typeof t){for(var n in t)if(t.hasOwnProperty(n)){var o=t[n];p(o)?c(n,o,e):i(t)?h(t,e):u(o,e)}}else if(!e.silent)throw new TypeError("Factory, Object, or Array expected")}function c(t,e,r){if(r.wrap&&"function"==typeof e&&(e=d(e)),v(l[t])&&v(e))return e=r.override?n(t,e.signatures):n(l[t],e),l[t]=e,f(t,e),void l.emit("import",t,function(){return e});if(void 0===l[t]||r.override)return l[t]=e,f(t,e),void l.emit("import",t,function(){return e});if(!r.silent)throw new Error('Cannot import "'+t+'": already exists')}function f(t,e){e&&"function"==typeof e.transform?(l.expression.transform[t]=e.transform,_(t)&&(l.expression.mathWithTransform[t]=e.transform)):(delete l.expression.transform[t],_(t)&&(l.expression.mathWithTransform[t]=e))}function d(t){var e=function(){for(var e=[],r=0,n=arguments.length;r<n;r++){var o=arguments[r];e[r]=o&&o.valueOf()}return t.apply(l,e)};return t.transform&&(e.transform=t.transform),e}function h(t,e){if("string"==typeof t.name){var i=t.name,s=i in l.expression.transform,u=t.path?a(l,t.path):l,c=u.hasOwnProperty(i)?u[i]:void 0,f=function(){var o=r(t);if(o&&"function"==typeof o.transform)throw new Error('Transforms cannot be attached to factory functions. Please create a separate function for it with exports.path="expression.transform"');if(v(c)&&v(o))return e.override||(o=n(c,o)),o;if(void 0===c||e.override)return o;if(!e.silent)throw new Error('Cannot import "'+i+'": already exists')};t.lazy!==!1?(o(u,i,f),s||("expression.transform"===t.path||m(t))&&o(l.expression.mathWithTransform,i,f)):(u[i]=f(),s||("expression.transform"===t.path||m(t))&&(l.expression.mathWithTransform[i]=f())),l.emit("import",i,f,t.path)}else r(t)}function p(e){return"function"==typeof e||"number"==typeof e||"string"==typeof e||"boolean"==typeof e||null===e||e&&t.isUnit(e)||e&&t.isComplex(e)||e&&t.isBigNumber(e)||e&&t.isFraction(e)||e&&t.isMatrix(e)||e&&Array.isArray(e)}function v(t){return"function"==typeof t&&"object"==typeof t.signatures}function _(t){return!g.hasOwnProperty(t)}function m(t){return void 0===t.path&&!g.hasOwnProperty(t.name)}var g={expression:!0,type:!0,docs:!0,error:!0,json:!0,chain:!0};return u}var o=r(15).lazy,i=r(15).isFactory,a=r(15).traverse,s=r(24);e.math=!0,e.name="import",e.factory=n,e.lazy=!0},function(t,e){"use strict";function r(t,e,n,o){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");this.fn=t,this.count=e,this.min=n,this.max=o,this.message="Wrong number of arguments in function "+t+" ("+e+" provided, "+n+(void 0!=o?"-"+o:"")+" expected)",this.stack=(new Error).stack}r.prototype=new Error,r.prototype.constructor=Error,r.prototype.name="ArgumentsError",r.prototype.isArgumentsError=!0,t.exports=r},function(t,e,r){"use strict";function n(t,e,r,n,o){function i(t){if(t){var r=s.map(e,s.clone);a(t,"matrix",l),a(t,"number",u),s.deepExtend(e,t);var n=s.map(e,s.clone),i=s.map(t,s.clone);return o.emit("config",n,r,i),n}return s.map(e,s.clone)}var l=["Matrix","Array"],u=["number","BigNumber","Fraction"];return i.MATRIX=l,i.NUMBER=u,i}function o(t,e){return t.indexOf(e)!==-1}function i(t,e){return t.map(function(t){return t.toLowerCase()}).indexOf(e.toLowerCase())}function a(t,e,r){if(void 0!==t[e]&&!o(r,t[e])){var n=i(r,t[e]);n!==-1?(console.warn('Warning: Wrong casing for configuration option "'+e+'", should be "'+r[n]+'" instead of "'+t[e]+'".'),t[e]=r[n]):console.warn('Warning: Unknown value "'+t[e]+'" for configuration option "'+e+'". Available options: '+r.map(JSON.stringify).join(", ")+".")}}var s=r(15);e.name="config",e.math=!0,e.factory=n},function(t,e,r){t.exports=[r(27),r(37),r(39),r(42),r(52),r(58),r(59),r(60),r(61),r(44),r(62)]},function(t,e,r){"use strict";function n(t,e,r,n){function o(){if(!(this instanceof o))throw new SyntaxError("Constructor must be called with the new operator")}return o.prototype.type="Matrix",o.prototype.isMatrix=!0,o.storage=function(t){if(!a(t))throw new TypeError("format must be a string value");var e=o._storage[t];if(!e)throw new SyntaxError("Unsupported matrix storage format: "+t);return e},o._storage={},o.prototype.storage=function(){throw new Error("Cannot invoke storage on a Matrix interface")},o.prototype.datatype=function(){throw new Error("Cannot invoke datatype on a Matrix interface")},o.prototype.create=function(t,e){throw new Error("Cannot invoke create on a Matrix interface")},o.prototype.subset=function(t,e,r){throw new Error("Cannot invoke subset on a Matrix interface")},o.prototype.get=function(t){throw new Error("Cannot invoke get on a Matrix interface")},o.prototype.set=function(t,e,r){throw new Error("Cannot invoke set on a Matrix interface")},o.prototype.resize=function(t,e){throw new Error("Cannot invoke resize on a Matrix interface")},o.prototype.reshape=function(t,e){throw new Error("Cannot invoke reshape on a Matrix interface")},o.prototype.clone=function(){throw new Error("Cannot invoke clone on a Matrix interface")},o.prototype.size=function(){throw new Error("Cannot invoke size on a Matrix interface")},o.prototype.map=function(t,e){throw new Error("Cannot invoke map on a Matrix interface")},o.prototype.forEach=function(t){throw new Error("Cannot invoke forEach on a Matrix interface")},o.prototype.toArray=function(){throw new Error("Cannot invoke toArray on a Matrix interface")},o.prototype.valueOf=function(){throw new Error("Cannot invoke valueOf on a Matrix interface")},o.prototype.format=function(t){throw new Error("Cannot invoke format on a Matrix interface")},o.prototype.toString=function(){throw new Error("Cannot invoke toString on a Matrix interface")},o}var o=r(28),i=o.string,a=i.isString;e.name="Matrix",e.path="type",e.factory=n},function(t,e,r){"use strict";e.array=r(29),e.boolean=r(35),e.function=r(36),e.number=r(19),e.object=r(15),e.string=r(30),e.types=r(32),e.emitter=r(21)},function(t,e,r){"use strict";function n(t,e,r){var o,i=t.length;if(i!=e[r])throw new c(i,e[r]);if(r<e.length-1){var a=r+1;for(o=0;o<i;o++){var s=t[o];if(!Array.isArray(s))throw new c(e.length-1,e.length,"<");n(t[o],e,a)}}else for(o=0;o<i;o++)if(Array.isArray(t[o]))throw new c(e.length+1,e.length,">")}function o(t,r,n,i){var a,s,l=t.length,u=r[n],c=Math.min(l,u);if(t.length=u,n<r.length-1){var f=n+1;for(a=0;a<c;a++)s=t[a],Array.isArray(s)||(s=[s],t[a]=s),o(s,r,f,i);for(a=c;a<u;a++)s=[],t[a]=s,o(s,r,f,i)}else{for(a=0;a<c;a++)for(;Array.isArray(t[a]);)t[a]=t[a][0];if(i!==e.UNINITIALIZED)for(a=c;a<u;a++)t[a]=i}}function i(t,e){var r,n=[];if(0===e.length){if(0===t.length)throw new c(null,null,"!=");return t.shift()}for(r=0;r<e[0];r+=1)n.push(i(t,e.slice(1)));return n}function a(t,e,r){var n,o;if(r<e){var i=r+1;for(n=0,o=t.length;n<o;n++)t[n]=a(t[n],e,i)}else for(;Array.isArray(t);)t=t[0];return t}function s(t,e,r){var n,o;if(Array.isArray(t)){var i=r+1;for(n=0,o=t.length;n<o;n++)t[n]=s(t[n],e,i)}else for(var a=r;a<e;a++)t=[t];return t}var l=r(19),u=r(30),c=(r(15),r(32),r(33)),f=r(34);e.size=function(t){for(var e=[];Array.isArray(t);)e.push(t.length),t=t[0];return e},e.validate=function(t,e){var r=0==e.length;if(r){if(Array.isArray(t))throw new c(t.length,0)}else n(t,e,0)},e.validateIndex=function(t,e){if(!l.isNumber(t)||!l.isInteger(t))throw new TypeError("Index must be an integer (value: "+t+")");if(t<0||"number"==typeof e&&t>=e)throw new f(t,e)},e.UNINITIALIZED={},e.resize=function(t,e,r){if(!Array.isArray(t)||!Array.isArray(e))throw new TypeError("Array expected");if(0===e.length)throw new Error("Resizing to scalar is not supported");e.forEach(function(t){if(!l.isNumber(t)||!l.isInteger(t)||t<0)throw new TypeError("Invalid size, must contain positive integers (size: "+u.format(e)+")")});var n=void 0!==r?r:0;return o(t,e,0,n),t},e.reshape=function(t,r){var n,o=e.flatten(t),a=function(t){return t.reduce(function(t,e){return t*e})};if(!Array.isArray(t)||!Array.isArray(r))throw new TypeError("Array expected");if(0===r.length)throw new c(0,a(e.size(t)),"!=");try{n=i(o,r)}catch(n){if(n instanceof c)throw new c(a(r),a(e.size(t)),"!=");throw n}if(o.length>0)throw new c(a(r),a(e.size(t)),"!=");return n},e.squeeze=function(t,r){for(var n=r||e.size(t);Array.isArray(t)&&1===t.length;)t=t[0],n.shift();for(var o=n.length;1===n[o-1];)o--;return o<n.length&&(t=a(t,o,0),n.length=o),t},e.unsqueeze=function(t,r,n,o){var i=o||e.size(t);if(n)for(var a=0;a<n;a++)t=[t],i.unshift(1);for(t=s(t,r,0);i.length<r;)i.push(1);return t},e.flatten=function(t){if(!Array.isArray(t))return t;var e=[];return t.forEach(function t(r){Array.isArray(r)?r.forEach(t):e.push(r)}),e},e.map=function(t,e){return Array.prototype.map.call(t,e)},e.forEach=function(t,e){Array.prototype.forEach.call(t,e)},e.filter=function(t,r){if(1!==e.size(t).length)throw new Error("Only one dimensional matrices supported");return Array.prototype.filter.call(t,r)},e.filterRegExp=function(t,r){if(1!==e.size(t).length)throw new Error("Only one dimensional matrices supported");return Array.prototype.filter.call(t,function(t){return r.test(t)})},e.join=function(t,e){return Array.prototype.join.call(t,e)},e.identify=function(t){if(!Array.isArray(t))throw new TypeError("Array input expected");if(0===t.length)return t;var e=[],r=0;e[0]={value:t[0],identifier:0};for(var n=1;n<t.length;n++)t[n]===t[n-1]?r++:r=0,e.push({value:t[n],identifier:r});return e},e.generalize=function(t){if(!Array.isArray(t))throw new TypeError("Array input expected");if(0===t.length)return t;for(var e=[],r=0;r<t.length;r++)e.push(t[r].value);return e},e.isArray=Array.isArray},function(t,e,r){"use strict";function n(t,r){if(Array.isArray(t)){for(var o="[",i=t.length,a=0;a<i;a++)0!=a&&(o+=", "),o+=n(t[a],r);return o+="]"}return e.format(t,r)}function o(t){return t&&"object"==typeof t&&"number"==typeof t.s&&"number"==typeof t.n&&"number"==typeof t.d||!1}var i=r(19).format,a=r(31).format,s=r(16);e.isString=function(t){return"string"==typeof t},e.endsWith=function(t,e){var r=t.length-e.length,n=t.length;return t.substring(r,n)===e},e.format=function(t,r){if("number"==typeof t)return i(t,r);if(s(t))return a(t,r);if(o(t))return r&&"decimal"===r.fraction?t.toString():t.s*t.n+"/"+t.d;if(Array.isArray(t))return n(t,r);if(e.isString(t))return'"'+t+'"';if("function"==typeof t)return t.syntax?String(t.syntax):"function";if(t&&"object"==typeof t){if("function"==typeof t.format)return t.format(r);if(t&&t.toString()!=={}.toString())return t.toString();var l=[];for(var u in t)t.hasOwnProperty(u)&&l.push('"'+u+'": '+e.format(t[u],r));return"{"+l.join(", ")+"}"}return String(t)},e.stringify=function(t){for(var e=String(t),r="",n=0;n<e.length;){var o=e.charAt(n);"\\"===o?(r+=o,n++,o=e.charAt(n),""!==o&&'"\\/bfnrtu'.indexOf(o)!==-1||(r+="\\"),r+=o):r+='"'===o?'\\"':o,n++}return'"'+r+'"'},e.escape=function(t){var e=String(t);return e=e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}},function(t,e){e.format=function(t,r){if("function"==typeof r)return r(t);if(!t.isFinite())return t.isNaN()?"NaN":t.gt(0)?"Infinity":"-Infinity";var n="auto",o=void 0;switch(void 0!==r&&(r.notation&&(n=r.notation),"number"==typeof r?o=r:r.precision&&(o=r.precision)),n){case"fixed":return e.toFixed(t,o);case"exponential":return e.toExponential(t,o);case"auto":var i=.001,a=1e5;r&&r.exponential&&(void 0!==r.exponential.lower&&(i=r.exponential.lower),void 0!==r.exponential.upper&&(a=r.exponential.upper));({toExpNeg:t.constructor.toExpNeg,toExpPos:t.constructor.toExpPos});if(t.constructor.config({toExpNeg:Math.round(Math.log(i)/Math.LN10),toExpPos:Math.round(Math.log(a)/Math.LN10)}),t.isZero())return"0";var s,l=t.abs();return s=l.gte(i)&&l.lt(a)?t.toSignificantDigits(o).toFixed():e.toExponential(t,o),
s.replace(/((\.\d*?)(0+))($|e)/,function(){var t=arguments[2],e=arguments[4];return"."!==t?t+e:e});default:throw new Error('Unknown notation "'+n+'". Choose "auto", "exponential", or "fixed".')}},e.toExponential=function(t,e){return void 0!==e?t.toExponential(e-1):t.toExponential()},e.toFixed=function(t,e){return t.toFixed(e||0)}},function(t,e){"use strict";e.type=function(t){var e=typeof t;return"object"===e?null===t?"null":Array.isArray(t)?"Array":t instanceof Date?"Date":t instanceof RegExp?"RegExp":t instanceof Boolean?"boolean":t instanceof Number?"number":t instanceof String?"string":"Object":"function"===e?"Function":e}},function(t,e){"use strict";function r(t,e,n){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");this.actual=t,this.expected=e,this.relation=n,this.message="Dimension mismatch ("+(Array.isArray(t)?"["+t.join(", ")+"]":t)+" "+(this.relation||"!=")+" "+(Array.isArray(e)?"["+e.join(", ")+"]":e)+")",this.stack=(new Error).stack}r.prototype=new RangeError,r.prototype.constructor=RangeError,r.prototype.name="DimensionError",r.prototype.isDimensionError=!0,t.exports=r},function(t,e){"use strict";function r(t,e,n){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");this.index=t,arguments.length<3?(this.min=0,this.max=e):(this.min=e,this.max=n),void 0!==this.min&&this.index<this.min?this.message="Index out of range ("+this.index+" < "+this.min+")":void 0!==this.max&&this.index>=this.max?this.message="Index out of range ("+this.index+" > "+(this.max-1)+")":this.message="Index out of range ("+this.index+")",this.stack=(new Error).stack}r.prototype=new RangeError,r.prototype.constructor=RangeError,r.prototype.name="IndexError",r.prototype.isIndexError=!0,t.exports=r},function(t,e){"use strict";e.isBoolean=function(t){return"boolean"==typeof t}},function(t,e){e.memoize=function(t,e){return function r(){"object"!=typeof r.cache&&(r.cache={});for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];var i=e?e(n):JSON.stringify(n);return i in r.cache?r.cache[i]:r.cache[i]=t.apply(t,n)}},e.maxArgumentCount=function(t){return Object.keys(t.signatures||{}).reduce(function(t,e){var r=(e.match(/,/g)||[]).length+1;return Math.max(t,r)},-1)},e.callWithRightArgumentCount=function(t,e,r){return Object.keys(t.signatures||{}).reduce(function(t,e){var r=(e.match(/,/g)||[]).length+1;return Math.max(t,r)},-1)}},function(t,e,r){"use strict";function n(t,e,n,u){function v(e,r){if(!(this instanceof v))throw new SyntaxError("Constructor must be called with the new operator");if(r&&!h(r))throw new Error("Invalid datatype: "+r);if(t.isMatrix(e))"DenseMatrix"===e.type?(this._data=l.clone(e._data),this._size=l.clone(e._size),this._datatype=r||e._datatype):(this._data=e.toArray(),this._size=e.size(),this._datatype=r||e._datatype);else if(e&&c(e.data)&&c(e.size))this._data=e.data,this._size=e.size,this._datatype=r||e.datatype;else if(c(e))this._data=x(e),this._size=s.size(this._data),s.validate(this._data,this._size),this._datatype=r;else{if(e)throw new TypeError("Unsupported type of data ("+o.types.type(e)+")");this._data=[],this._size=[0],this._datatype=r}}function _(e,r){if(!t.isIndex(r))throw new TypeError("Invalid index");var n=r.isScalar();if(n)return e.get(r.min());var o=r.size();if(o.length!=e._size.length)throw new i(o.length,e._size.length);for(var a=r.min(),s=r.max(),l=0,u=e._size.length;l<u;l++)p(a[l],e._size[l]),p(s[l],e._size[l]);return new v(m(e._data,r,o.length,0),e._datatype)}function m(t,e,r,n){var o=n===r-1,i=e.dimension(n);return o?i.map(function(e){return p(e,t.length),t[e]}).valueOf():i.map(function(o){p(o,t.length);var i=t[o];return m(i,e,r,n+1)}).valueOf()}function g(e,r,n,o){if(!r||r.isIndex!==!0)throw new TypeError("Invalid index");var a,u=r.size(),c=r.isScalar();if(t.isMatrix(n)?(a=n.size(),n=n.valueOf()):a=s.size(n),c){if(0!==a.length)throw new TypeError("Scalar expected");e.set(r.min(),n,o)}else{if(u.length<e._size.length)throw new i(u.length,e._size.length,"<");if(a.length<u.length){for(var f=0,d=0;1===u[f]&&1===a[f];)f++;for(;1===u[f];)d++,f++;n=s.unsqueeze(n,u.length,d,a)}if(!l.deepEqual(u,a))throw new i(u,a,">");var h=r.max().map(function(t){return t+1});w(e,h,o);var p=u.length,v=0;y(e._data,r,n,p,v)}return e}function y(t,e,r,n,o){var i=o===n-1,a=e.dimension(o);i?a.forEach(function(e,n){p(e),t[e]=r[n[0]]}):a.forEach(function(i,a){p(i),y(t[i],e,r[a[0]],n,o+1)})}function w(t,e,r){for(var n=t._size.slice(0),o=!1;n.length<e.length;)n.push(0),o=!0;for(var i=0,a=e.length;i<a;i++)e[i]>n[i]&&(n[i]=e[i],o=!0);o&&z(t,n,r)}function x(t){for(var e=0,r=t.length;e<r;e++){var n=t[e];c(n)?t[e]=x(n):n&&n.isMatrix===!0&&(t[e]=x(n.valueOf()))}return t}var b=n(r(27));v.prototype=new b,v.prototype.type="DenseMatrix",v.prototype.isDenseMatrix=!0,v.prototype.storage=function(){return"dense"},v.prototype.datatype=function(){return this._datatype},v.prototype.create=function(t,e){return new v(t,e)},v.prototype.subset=function(t,e,r){switch(arguments.length){case 1:return _(this,t);case 2:case 3:return g(this,t,e,r);default:throw new SyntaxError("Wrong number of arguments")}},v.prototype.get=function(t){if(!c(t))throw new TypeError("Array expected");if(t.length!=this._size.length)throw new i(t.length,this._size.length);for(var e=0;e<t.length;e++)p(t[e],this._size[e]);for(var r=this._data,n=0,o=t.length;n<o;n++){var a=t[n];p(a,r.length),r=r[a]}return r},v.prototype.set=function(t,e,r){if(!c(t))throw new TypeError("Array expected");if(t.length<this._size.length)throw new i(t.length,this._size.length,"<");var n,o,a,s=t.map(function(t){return t+1});w(this,s,r);var l=this._data;for(n=0,o=t.length-1;n<o;n++)a=t[n],p(a,l.length),l=l[a];return a=t[t.length-1],p(a,l.length),l[a]=e,this},v.prototype.resize=function(t,e,r){if(!c(t))throw new TypeError("Array expected");var n=r?this.clone():this;return z(n,t,e)};var z=function(t,e,r){if(0===e.length){for(var n=t._data;c(n);)n=n[0];return n}return t._size=e.slice(0),t._data=s.resize(t._data,t._size,r),t};return v.prototype.reshape=function(t,e){var r=e?this.clone():this;return r._data=s.reshape(r._data,t),r._size=t.slice(0),r},v.prototype.clone=function(){var t=new v({data:l.clone(this._data),size:l.clone(this._size),datatype:this._datatype});return t},v.prototype.size=function(){return this._size.slice(0)},v.prototype.map=function(t){var e=this,r=function(n,o){return c(n)?n.map(function(t,e){return r(t,o.concat(e))}):t(n,o,e)};return new v({data:r(this._data,[]),size:l.clone(this._size),datatype:this._datatype})},v.prototype.forEach=function(t){var e=this,r=function(n,o){c(n)?n.forEach(function(t,e){r(t,o.concat(e))}):t(n,o,e)};r(this._data,[])},v.prototype.toArray=function(){return l.clone(this._data)},v.prototype.valueOf=function(){return this._data},v.prototype.format=function(t){return a.format(this._data,t)},v.prototype.toString=function(){return a.format(this._data)},v.prototype.toJSON=function(){return{mathjs:"DenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},v.prototype.diagonal=function(e){if(e){if(t.isBigNumber(e)&&(e=e.toNumber()),!f(e)||!d(e))throw new TypeError("The parameter k must be an integer number")}else e=0;for(var r=e>0?e:0,n=e<0?-e:0,o=this._size[0],i=this._size[1],a=Math.min(o-n,i-r),s=[],l=0;l<a;l++)s[l]=this._data[l+n][l+r];return new v({data:s,size:[a],datatype:this._datatype})},v.diagonal=function(e,r,n,o,i){if(!c(e))throw new TypeError("Array expected, size parameter");if(2!==e.length)throw new Error("Only two dimensions matrix are supported");if(e=e.map(function(e){if(t.isBigNumber(e)&&(e=e.toNumber()),!f(e)||!d(e)||e<1)throw new Error("Size values must be positive integers");return e}),n){if(t.isBigNumber(n)&&(n=n.toNumber()),!f(n)||!d(n))throw new TypeError("The parameter k must be an integer number")}else n=0;o&&h(i)&&(o=u.convert(o,i));var a,l=n>0?n:0,p=n<0?-n:0,_=e[0],m=e[1],g=Math.min(_-p,m-l);if(c(r)){if(r.length!==g)throw new Error("Invalid value array length");a=function(t){return r[t]}}else if(t.isMatrix(r)){var y=r.size();if(1!==y.length||y[0]!==g)throw new Error("Invalid matrix length");a=function(t){return r.get([t])}}else a=function(){return r};o||(o=t.isBigNumber(a(0))?new t.BigNumber(0):0);var w=[];if(e.length>0){w=s.resize(w,e,o);for(var x=0;x<g;x++)w[x+p][x+l]=a(x)}return new v({data:w,size:[_,m]})},v.fromJSON=function(t){return new v(t)},v.prototype.swapRows=function(t,e){if(!(f(t)&&d(t)&&f(e)&&d(e)))throw new Error("Row index must be positive integers");if(2!==this._size.length)throw new Error("Only two dimensional matrix is supported");return p(t,this._size[0]),p(e,this._size[0]),v._swapRows(t,e,this._data),this},v._swapRows=function(t,e,r){var n=r[t];r[t]=r[e],r[e]=n},t.Matrix._storage.dense=v,t.Matrix._storage.default=v,v}var o=r(28),i=r(33),a=(r(38).getSafeProperty,r(38).setSafeProperty,o.string),s=o.array,l=o.object,u=o.number,c=Array.isArray,f=u.isNumber,d=u.isInteger,h=a.isString,p=s.validateIndex;e.name="DenseMatrix",e.path="type",e.factory=n,e.lazy=!1},function(t,e,r){"use strict";function n(t,e){if(l(t)&&i(t,e))return t[e];if("function"==typeof t[e]&&s(t,e))throw new Error('Cannot access method "'+e+'" as a property');throw new Error('No access to property "'+e+'"')}function o(t,e,r){if(l(t)&&i(t,e))return t[e]=r;throw new Error('No access to property "'+e+'"')}function i(t,e){return!(!t||"object"!=typeof t)&&(!!u(c,e)||!(e in Object.prototype)&&!(e in Function.prototype))}function a(t,e){if(!s(t,e))throw new Error('No access to method "'+e+'"')}function s(t,e){return!(!t||"function"!=typeof t[e])&&(!(u(t,e)&&t.__proto__&&e in t.__proto__)&&(!!u(f,e)||!(e in Object.prototype)&&!(e in Function.prototype)))}function l(t){return"object"==typeof t&&t&&t.constructor===Object}var u=r(15).hasOwnProperty,c={length:!0,name:!0},f={toString:!0,valueOf:!0,toLocaleString:!0};e.getSafeProperty=n,e.setSafeProperty=o,e.isSafeProperty=i,e.validateSafeMethod=a,e.isSafeMethod=s,e.isPlainObject=l},function(t,e,r){"use strict";function n(t,e,n,v){function _(e,r){if(!(this instanceof _))throw new SyntaxError("Constructor must be called with the new operator");if(r&&!h(r))throw new Error("Invalid datatype: "+r);if(t.isMatrix(e))y(this,e,r);else if(e&&c(e.index)&&c(e.ptr)&&c(e.size))this._values=e.values,this._index=e.index,this._ptr=e.ptr,this._size=e.size,this._datatype=r||e.datatype;else if(c(e))w(this,e,r);else{if(e)throw new TypeError("Unsupported type of data ("+o.types.type(e)+")");this._values=[],this._index=[],this._ptr=[0],this._size=[0,0],this._datatype=r}}var m=n(r(27)),g=n(r(40)),y=function(t,e,r){"SparseMatrix"===e.type?(t._values=e._values?s.clone(e._values):void 0,t._index=s.clone(e._index),t._ptr=s.clone(e._ptr),t._size=s.clone(e._size),t._datatype=r||e._datatype):w(t,e.valueOf(),r||e._datatype)},w=function(t,e,r){t._values=[],t._index=[],t._ptr=[],t._datatype=r;var n=e.length,o=0,i=g,a=0;if(h(r)&&(i=v.find(g,[r,r])||g,a=v.convert(0,r)),n>0){var s=0;do{t._ptr.push(t._index.length);for(var l=0;l<n;l++){var u=e[l];if(c(u)){if(0===s&&o<u.length&&(o=u.length),s<u.length){var f=u[s];i(f,a)||(t._values.push(f),t._index.push(l))}}else 0===s&&o<1&&(o=1),i(u,a)||(t._values.push(u),t._index.push(l))}s++}while(s<o)}t._ptr.push(t._index.length),t._size=[n,o]};_.prototype=new m,_.prototype.type="SparseMatrix",_.prototype.isSparseMatrix=!0,_.prototype.storage=function(){return"sparse"},_.prototype.datatype=function(){return this._datatype},_.prototype.create=function(t,e){return new _(t,e)},_.prototype.density=function(){var t=this._size[0],e=this._size[1];return 0!==t&&0!==e?this._index.length/(t*e):0},_.prototype.subset=function(t,e,r){if(!this._values)throw new Error("Cannot invoke subset on a Pattern only matrix");switch(arguments.length){case 1:return x(this,t);case 2:case 3:return b(this,t,e,r);default:throw new SyntaxError("Wrong number of arguments")}};var x=function(e,r){if(!t.isIndex(r))throw new TypeError("Invalid index");var n=r.isScalar();if(n)return e.get(r.min());var o=r.size();if(o.length!=e._size.length)throw new i(o.length,e._size.length);var a,s,l,u,c=r.min(),f=r.max();for(a=0,s=e._size.length;a<s;a++)p(c[a],e._size[a]),p(f[a],e._size[a]);var d=e._values,h=e._index,v=e._ptr,m=r.dimension(0),g=r.dimension(1),y=[],w=[];m.forEach(function(t,e){w[t]=e[0],y[t]=!0});var x=d?[]:void 0,b=[],z=[];return g.forEach(function(t){for(z.push(b.length),l=v[t],u=v[t+1];l<u;l++)a=h[l],y[a]===!0&&(b.push(w[a]),x&&x.push(d[l]))}),z.push(b.length),new _({values:x,index:b,ptr:z,size:o,datatype:e._datatype})},b=function(e,r,n,o){if(!r||r.isIndex!==!0)throw new TypeError("Invalid index");var l,u=r.size(),c=r.isScalar();if(t.isMatrix(n)?(l=n.size(),n=n.toArray()):l=a.size(n),c){if(0!==l.length)throw new TypeError("Scalar expected");e.set(r.min(),n,o)}else{if(1!==u.length&&2!==u.length)throw new i(u.length,e._size.length,"<");if(l.length<u.length){for(var f=0,d=0;1===u[f]&&1===l[f];)f++;for(;1===u[f];)d++,f++;n=a.unsqueeze(n,u.length,d,l)}if(!s.deepEqual(u,l))throw new i(u,l,">");for(var h=r.min()[0],p=r.min()[1],v=l[0],_=l[1],m=0;m<v;m++)for(var g=0;g<_;g++){var y=n[m][g];e.set([m+h,g+p],y,o)}}return e};_.prototype.get=function(t){if(!c(t))throw new TypeError("Array expected");if(t.length!=this._size.length)throw new i(t.length,this._size.length);if(!this._values)throw new Error("Cannot invoke get on a Pattern only matrix");var e=t[0],r=t[1];p(e,this._size[0]),p(r,this._size[1]);var n=z(e,this._ptr[r],this._ptr[r+1],this._index);return n<this._ptr[r+1]&&this._index[n]===e?this._values[n]:0},_.prototype.set=function(t,e,r){if(!c(t))throw new TypeError("Array expected");if(t.length!=this._size.length)throw new i(t.length,this._size.length);if(!this._values)throw new Error("Cannot invoke set on a Pattern only matrix");var n=t[0],o=t[1],a=this._size[0],s=this._size[1],l=g,u=0;h(this._datatype)&&(l=v.find(g,[this._datatype,this._datatype])||g,u=v.convert(0,this._datatype)),(n>a-1||o>s-1)&&(A(this,Math.max(n+1,a),Math.max(o+1,s),r),a=this._size[0],s=this._size[1]),p(n,a),p(o,s);var f=z(n,this._ptr[o],this._ptr[o+1],this._index);return f<this._ptr[o+1]&&this._index[f]===n?l(e,u)?M(f,o,this._values,this._index,this._ptr):this._values[f]=e:k(f,n,o,e,this._values,this._index,this._ptr),this};var z=function(t,e,r,n){if(r-e===0)return r;for(var o=e;o<r;o++)if(n[o]===t)return o;return e},M=function(t,e,r,n,o){r.splice(t,1),n.splice(t,1);for(var i=e+1;i<o.length;i++)o[i]--},k=function(t,e,r,n,o,i,a){o.splice(t,0,n),i.splice(t,0,e);for(var s=r+1;s<a.length;s++)a[s]++};_.prototype.resize=function(t,e,r){if(!c(t))throw new TypeError("Array expected");if(2!==t.length)throw new Error("Only two dimensions matrix are supported");t.forEach(function(e){if(!u.isNumber(e)||!u.isInteger(e)||e<0)throw new TypeError("Invalid size, must contain positive integers (size: "+l.format(t)+")")});var n=r?this.clone():this;return A(n,t[0],t[1],e)};var A=function(t,e,r,n){var o=n||0,i=g,a=0;h(t._datatype)&&(i=v.find(g,[t._datatype,t._datatype])||g,a=v.convert(0,t._datatype),o=v.convert(o,t._datatype));var s,l,u,c=!i(o,a),f=t._size[0],d=t._size[1];if(r>d){for(l=d;l<r;l++)if(t._ptr[l]=t._values.length,c)for(s=0;s<f;s++)t._values.push(o),t._index.push(s);t._ptr[r]=t._values.length}else r<d&&(t._ptr.splice(r+1,d-r),t._values.splice(t._ptr[r],t._values.length),t._index.splice(t._ptr[r],t._index.length));if(d=r,e>f){if(c){var p=0;for(l=0;l<d;l++){t._ptr[l]=t._ptr[l]+p,u=t._ptr[l+1]+p;var _=0;for(s=f;s<e;s++,_++)t._values.splice(u+_,0,o),t._index.splice(u+_,0,s),p++}t._ptr[d]=t._values.length}}else if(e<f){var m=0;for(l=0;l<d;l++){t._ptr[l]=t._ptr[l]-m;var y=t._ptr[l],w=t._ptr[l+1]-m;for(u=y;u<w;u++)s=t._index[u],s>e-1&&(t._values.splice(u,1),t._index.splice(u,1),m++)}t._ptr[l]=t._values.length}return t._size[0]=e,t._size[1]=r,t};_.prototype.reshape=function(t,e){if(!c(t))throw new TypeError("Array expected");if(2!==t.length)throw new Error("Sparse matrices can only be reshaped in two dimensions");if(t.forEach(function(e){if(!u.isNumber(e)||!u.isInteger(e)||e<0)throw new TypeError("Invalid size, must contain positive integers (size: "+l.format(t)+")")}),this._size[0]*this._size[1]!==t[0]*t[1])throw new Error("Reshaping sparse matrix will result in the wrong number of elements");var r=e?this.clone():this;if(this._size[0]===t[0]&&this._size[1]===t[1])return r;for(var n=[],o=0;o<r._ptr.length;o++)for(var i=0;i<r._ptr[o+1]-r._ptr[o];i++)n.push(o);for(var a=r._values.slice(),s=r._index.slice(),o=0;o<r._index.length;o++){var f=s[o],d=n[o],h=f*r._size[1]+d;n[o]=h%t[1],s[o]=Math.floor(h/t[1])}r._values.length=0,r._index.length=0,r._ptr.length=t[1]+1,r._size=t.slice();for(var o=0;o<r._ptr.length;o++)r._ptr[o]=0;for(var p=0;p<a.length;p++){var o=s[p],i=n[p],v=a[p],_=z(o,r._ptr[i],r._ptr[i+1],r._index);k(_,o,i,v,r._values,r._index,r._ptr)}return r},_.prototype.clone=function(){var t=new _({values:this._values?s.clone(this._values):void 0,index:s.clone(this._index),ptr:s.clone(this._ptr),size:s.clone(this._size),datatype:this._datatype});return t},_.prototype.size=function(){return this._size.slice(0)},_.prototype.map=function(t,e){if(!this._values)throw new Error("Cannot invoke map on a Pattern only matrix");var r=this,n=this._size[0],o=this._size[1],i=function(e,n,o){return t(e,[n,o],r)};return E(this,0,n-1,0,o-1,i,e)};var E=function(t,e,r,n,o,i,a){var s=[],l=[],u=[],c=g,f=0;h(t._datatype)&&(c=v.find(g,[t._datatype,t._datatype])||g,f=v.convert(0,t._datatype));for(var d=function(t,e,r){t=i(t,e,r),c(t,f)||(s.push(t),l.push(e))},p=n;p<=o;p++){u.push(s.length);for(var m=t._ptr[p],y=t._ptr[p+1],w=e,x=m;x<y;x++){var b=t._index[x];if(b>=e&&b<=r){if(!a)for(var z=w;z<b;z++)d(0,z-e,p-n);d(t._values[x],b-e,p-n)}w=b+1}if(!a)for(var M=w;M<=r;M++)d(0,M-e,p-n)}return u.push(s.length),new _({values:s,index:l,ptr:u,size:[r-e+1,o-n+1]})};_.prototype.forEach=function(t,e){if(!this._values)throw new Error("Cannot invoke forEach on a Pattern only matrix");for(var r=this,n=this._size[0],o=this._size[1],i=0;i<o;i++){for(var a=this._ptr[i],s=this._ptr[i+1],l=0,u=a;u<s;u++){var c=this._index[u];if(!e)for(var f=l;f<c;f++)t(0,[f,i],r);t(this._values[u],[c,i],r),l=c+1}if(!e)for(var d=l;d<n;d++)t(0,[d,i],r)}},_.prototype.toArray=function(){return N(this._values,this._index,this._ptr,this._size,!0)},_.prototype.valueOf=function(){return N(this._values,this._index,this._ptr,this._size,!1)};var N=function(t,e,r,n,o){var i,a,l=n[0],u=n[1],c=[];for(i=0;i<l;i++)for(c[i]=[],a=0;a<u;a++)c[i][a]=0;for(a=0;a<u;a++)for(var f=r[a],d=r[a+1],h=f;h<d;h++)i=e[h],c[i][a]=t?o?s.clone(t[h]):t[h]:1;return c};return _.prototype.format=function(t){for(var e=this._size[0],r=this._size[1],n=this.density(),o="Sparse Matrix ["+l.format(e,t)+" x "+l.format(r,t)+"] density: "+l.format(n,t)+"\n",i=0;i<r;i++)for(var a=this._ptr[i],s=this._ptr[i+1],u=a;u<s;u++){var c=this._index[u];o+="\n    ("+l.format(c,t)+", "+l.format(i,t)+") ==> "+(this._values?l.format(this._values[u],t):"X")}return o},_.prototype.toString=function(){return l.format(this.toArray())},_.prototype.toJSON=function(){return{mathjs:"SparseMatrix",values:this._values,index:this._index,ptr:this._ptr,size:this._size,datatype:this._datatype}},_.prototype.diagonal=function(e){if(e){if(t.isBigNumber(e)&&(e=e.toNumber()),!f(e)||!d(e))throw new TypeError("The parameter k must be an integer number")}else e=0;var r=e>0?e:0,n=e<0?-e:0,o=this._size[0],i=this._size[1],a=Math.min(o-n,i-r),s=[],l=[],u=[];u[0]=0;for(var c=r;c<i&&s.length<a;c++)for(var h=this._ptr[c],p=this._ptr[c+1],v=h;v<p;v++){var m=this._index[v];if(m===c-r+n){s.push(this._values[v]),l[s.length-1]=m-n;break}}return u.push(s.length),new _({values:s,index:l,ptr:u,size:[a,1]})},_.fromJSON=function(t){return new _(t)},_.diagonal=function(e,r,n,o,i){if(!c(e))throw new TypeError("Array expected, size parameter");if(2!==e.length)throw new Error("Only two dimensions matrix are supported");if(e=e.map(function(e){if(t.isBigNumber(e)&&(e=e.toNumber()),!f(e)||!d(e)||e<1)throw new Error("Size values must be positive integers");return e}),n){if(t.isBigNumber(n)&&(n=n.toNumber()),!f(n)||!d(n))throw new TypeError("The parameter k must be an integer number")}else n=0;var a=g,s=0;h(i)&&(a=v.find(g,[i,i])||g,s=v.convert(0,i));var l,u=n>0?n:0,p=n<0?-n:0,m=e[0],y=e[1],w=Math.min(m-p,y-u);if(c(r)){if(r.length!==w)throw new Error("Invalid value array length");l=function(t){return r[t]}}else if(t.isMatrix(r)){var x=r.size();if(1!==x.length||x[0]!==w)throw new Error("Invalid matrix length");l=function(t){return r.get([t])}}else l=function(){return r};for(var b=[],z=[],M=[],k=0;k<y;k++){M.push(b.length);var A=k-u;if(A>=0&&A<w){var E=l(A);a(E,s)||(z.push(A+p),b.push(E))}}return M.push(b.length),new _({values:b,index:z,ptr:M,size:[m,y]})},_.prototype.swapRows=function(t,e){if(!(f(t)&&d(t)&&f(e)&&d(e)))throw new Error("Row index must be positive integers");if(2!==this._size.length)throw new Error("Only two dimensional matrix is supported");return p(t,this._size[0]),p(e,this._size[0]),_._swapRows(t,e,this._size[1],this._values,this._index,this._ptr),this},_._forEachRow=function(t,e,r,n,o){for(var i=n[t],a=n[t+1],s=i;s<a;s++)o(r[s],e[s])},_._swapRows=function(t,e,r,n,o,i){for(var a=0;a<r;a++){var s=i[a],l=i[a+1],u=z(t,s,l,o),c=z(e,s,l,o);if(u<l&&c<l&&o[u]===t&&o[c]===e){if(n){var f=n[u];n[u]=n[c],n[c]=f}}else if(u<l&&o[u]===t&&(c>=l||o[c]!==e)){var d=n?n[u]:void 0;o.splice(c,0,e),n&&n.splice(c,0,d),o.splice(c<=u?u+1:u,1),n&&n.splice(c<=u?u+1:u,1)}else if(c<l&&o[c]===e&&(u>=l||o[u]!==t)){var h=n?n[c]:void 0;o.splice(u,0,t),n&&n.splice(u,0,h),o.splice(u<=c?c+1:c,1),n&&n.splice(u<=c?c+1:c,1)}}},t.Matrix._storage.sparse=_,_}var o=r(28),i=r(33),a=o.array,s=o.object,l=o.string,u=o.number,c=Array.isArray,f=u.isNumber,d=u.isInteger,h=l.isString,p=a.validateIndex;e.name="SparseMatrix",e.path="type",e.factory=n,e.lazy=!1},function(t,e,r){"use strict";function n(t,e,r,n){var a=n("equalScalar",{"boolean, boolean":function(t,e){return t===e},"number, number":function(t,r){return t===r||o(t,r,e.epsilon)},"BigNumber, BigNumber":function(t,r){return t.eq(r)||i(t,r,e.epsilon)},"Fraction, Fraction":function(t,e){return t.equals(e)},"Complex, Complex":function(t,e){return t.equals(e)},"Unit, Unit":function(t,e){if(!t.equalBase(e))throw new Error("Cannot compare units with different base");return a(t.value,e.value)},"string, string":function(t,e){return t===e}});return a}var o=r(19).nearlyEqual,i=r(41);e.factory=n},function(t,e){"use strict";t.exports=function(t,e,r){if(null==r)return t.eq(e);if(t.eq(e))return!0;if(t.isNaN()||e.isNaN())return!1;if(t.isFinite()&&e.isFinite()){var n=t.minus(e).abs();if(n.isZero())return!0;var o=t.constructor.max(t.abs(),e.abs());return n.lte(o.times(r))}return!1}},function(t,e,r){"use strict";function n(t,e,n){function o(){if(!(this instanceof o))throw new SyntaxError("Constructor must be called with the new operator");this._values=[],this._heap=new t.FibonacciHeap}var i=n(r(43)),a=n(r(40));return o.prototype.type="Spa",o.prototype.isSpa=!0,o.prototype.set=function(t,e){if(this._values[t])this._values[t].value=e;else{var r=this._heap.insert(t,e);this._values[t]=r}},o.prototype.get=function(t){var e=this._values[t];return e?e.value:0},o.prototype.accumulate=function(t,e){var r=this._values[t];r?r.value=i(r.value,e):(r=this._heap.insert(t,e),this._values[t]=r)},o.prototype.forEach=function(t,e,r){var n=this._heap,o=this._values,i=[],s=n.extractMinimum();for(s&&i.push(s);s&&s.key<=e;)s.key>=t&&(a(s.value,0)||r(s.key,s.value,this)),s=n.extractMinimum(),s&&i.push(s);for(var l=0;l<i.length;l++){var u=i[l];s=n.insert(u.key,u.value),o[s.key]=s}},o.prototype.swap=function(t,e){var r=this._values[t],n=this._values[e];if(!r&&n)r=this._heap.insert(t,n.value),this._heap.remove(n),this._values[t]=r,this._values[e]=void 0;else if(r&&!n)n=this._heap.insert(e,r.value),this._heap.remove(r),this._values[e]=n,this._values[t]=void 0;else if(r&&n){var o=r.value;r.value=n.value,n.value=o}},o}e.name="Spa",e.path="type",e.factory=n},function(t,e,r){"use strict";function n(t,e,n,i){var a=n(r(44)),s=n(r(45)),l=r(46),u=n(r(47)),c=n(r(48)),f=n(r(49)),d=n(r(50)),h=n(r(51)),p=i("add",o({"Matrix, Matrix":function(t,e){var r;switch(t.storage()){case"sparse":switch(e.storage()){case"sparse":r=c(t,e,s);break;default:r=u(e,t,s,!0)}break;default:switch(e.storage()){case"sparse":r=u(t,e,s,!1);break;default:r=d(t,e,s)}}return r},"Array, Array":function(t,e){return p(a(t),a(e)).valueOf()},"Array, Matrix":function(t,e){return p(a(t),e)},"Matrix, Array":function(t,e){return p(t,a(e))},"Matrix, any":function(t,e){var r;switch(t.storage()){case"sparse":r=f(t,e,s,!1);break;default:r=h(t,e,s,!1)}return r},"any, Matrix":function(t,e){var r;switch(e.storage()){case"sparse":r=f(e,t,s,!0);break;default:r=h(e,t,s,!0)}return r},"Array, any":function(t,e){return h(a(t),e,s,!1).valueOf()},"any, Array":function(t,e){return h(a(e),t,s,!0).valueOf()},"any, any":s,"Array | Matrix | any, Array | Matrix | any, ...any":function(t,e,r){for(var n=p(t,e),o=0;o<r.length;o++)n=p(n,r[o]);return n}},s.signatures));return p.toTex={2:"\\left(${args[0]}"+l.operators.add+"${args[1]}\\right)"},p}var o=r(15).extend;e.name="add",e.factory=n},function(t,e){"use strict";function r(t,e,r,n){function o(e,r,n){var o=t.Matrix.storage(r||"default");return new o(e,n)}var i=n("matrix",{"":function(){return o([])},string:function(t){return o([],t)},"string, string":function(t,e){return o([],t,e)},Array:function(t){return o(t)},Matrix:function(t){return o(t,t.storage())},"Array | Matrix, string":o,"Array | Matrix, string, string":o});return i.toTex={0:"\\begin{bmatrix}\\end{bmatrix}",1:"\\left(${args[0]}\\right)",2:"\\left(${args[0]}\\right)"},i}e.name="matrix",e.factory=r},function(t,e){"use strict";function r(t,e,r,n){var o=n("add",{"number, number":function(t,e){return t+e},"Complex, Complex":function(t,e){return t.add(e)},"BigNumber, BigNumber":function(t,e){return t.plus(e)},"Fraction, Fraction":function(t,e){return t.add(e)},"Unit, Unit":function(t,e){if(null==t.value)throw new Error("Parameter x contains a unit with undefined value");if(null==e.value)throw new Error("Parameter y contains a unit with undefined value");if(!t.equalBase(e))throw new Error("Units do not match");var r=t.clone();return r.value=o(r.value,e.value),r.fixPrefix=!1,r}});return o}e.factory=r},function(t,e){"use strict";e.symbols={Alpha:"A",alpha:"\\alpha",Beta:"B",beta:"\\beta",Gamma:"\\Gamma",gamma:"\\gamma",Delta:"\\Delta",delta:"\\delta",Epsilon:"E",epsilon:"\\epsilon",varepsilon:"\\varepsilon",Zeta:"Z",zeta:"\\zeta",Eta:"H",eta:"\\eta",Theta:"\\Theta",theta:"\\theta",vartheta:"\\vartheta",Iota:"I",iota:"\\iota",Kappa:"K",kappa:"\\kappa",varkappa:"\\varkappa",Lambda:"\\Lambda",lambda:"\\lambda",Mu:"M",mu:"\\mu",Nu:"N",nu:"\\nu",Xi:"\\Xi",xi:"\\xi",Omicron:"O",omicron:"o",Pi:"\\Pi",pi:"\\pi",varpi:"\\varpi",Rho:"P",rho:"\\rho",varrho:"\\varrho",Sigma:"\\Sigma",sigma:"\\sigma",varsigma:"\\varsigma",Tau:"T",tau:"\\tau",Upsilon:"\\Upsilon",upsilon:"\\upsilon",Phi:"\\Phi",phi:"\\phi",varphi:"\\varphi",Chi:"X",chi:"\\chi",Psi:"\\Psi",psi:"\\psi",Omega:"\\Omega",omega:"\\omega",true:"\\mathrm{True}",false:"\\mathrm{False}",i:"i",inf:"\\infty",Inf:"\\infty",infinity:"\\infty",Infinity:"\\infty",oo:"\\infty",lim:"\\lim",undefined:"\\mathbf{?}"},e.operators={transpose:"^\\top",factorial:"!",pow:"^",dotPow:".^\\wedge",unaryPlus:"+",unaryMinus:"-",bitNot:"~",not:"\\neg",multiply:"\\cdot",divide:"\\frac",dotMultiply:".\\cdot",dotDivide:".:",mod:"\\mod",add:"+",subtract:"-",to:"\\rightarrow",leftShift:"<<",rightArithShift:">>",rightLogShift:">>>",equal:"=",unequal:"\\neq",smaller:"<",larger:">",smallerEq:"\\leq",largerEq:"\\geq",bitAnd:"\\&",bitXor:"\\underline{|}",bitOr:"|",and:"\\wedge",xor:"\\veebar",or:"\\vee"},e.defaultTemplate="\\mathrm{${name}}\\left(${args}\\right)";var r={deg:"^\\circ"};e.toSymbol=function(t,n){if(n="undefined"!=typeof n&&n)return r.hasOwnProperty(t)?r[t]:"\\mathrm{"+t+"}";if(e.symbols.hasOwnProperty(t))return e.symbols[t];if(t.indexOf("_")!==-1){var o=t.indexOf("_");return e.toSymbol(t.substring(0,o))+"_{"+e.toSymbol(t.substring(o+1))+"}"}return t}},function(t,e,r){"use strict";function n(t,e,r,n){var i=t.DenseMatrix,a=function(t,e,r,a){var s=t._data,l=t._size,u=t._datatype,c=e._values,f=e._index,d=e._ptr,h=e._size,p=e._datatype;if(l.length!==h.length)throw new o(l.length,h.length);if(l[0]!==h[0]||l[1]!==h[1])throw new RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+h+")");if(!c)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var v,_,m=l[0],g=l[1],y="string"==typeof u&&u===p?u:void 0,w=y?n.find(r,[y,y]):r,x=[];for(v=0;v<m;v++)x[v]=[];var b=[],z=[];for(_=0;_<g;_++){for(var M=_+1,k=d[_],A=d[_+1],E=k;E<A;E++)v=f[E],b[v]=a?w(c[E],s[v][_]):w(s[v][_],c[E]),z[v]=M;for(v=0;v<m;v++)z[v]===M?x[v][_]=b[v]:x[v][_]=s[v][_]}return new i({data:x,size:[m,g],datatype:y})};return a}var o=r(33);e.name="algorithm01",e.factory=n},function(t,e,r){"use strict";function n(t,e,n,i){var a=n(r(40)),s=t.SparseMatrix,l=function(t,e,r){var n=t._values,l=t._index,u=t._ptr,c=t._size,f=t._datatype,d=e._values,h=e._index,p=e._ptr,v=e._size,_=e._datatype;if(c.length!==v.length)throw new o(c.length,v.length);if(c[0]!==v[0]||c[1]!==v[1])throw new RangeError("Dimension mismatch. Matrix A ("+c+") must match Matrix B ("+v+")");var m,g=c[0],y=c[1],w=a,x=0,b=r;"string"==typeof f&&f===_&&(m=f,w=i.find(a,[m,m]),x=i.convert(0,m),b=i.find(r,[m,m]));var z,M,k,A,E,N=n&&d?[]:void 0,S=[],C=[],T=new s({values:N,index:S,ptr:C,size:[g,y],datatype:m}),O=n&&d?[]:void 0,B=n&&d?[]:void 0,F=[],j=[];for(M=0;M<y;M++){C[M]=S.length;var L=M+1;for(A=u[M],E=u[M+1],k=A;k<E;k++)z=l[k],S.push(z),F[z]=L,O&&(O[z]=n[k]);for(A=p[M],E=p[M+1],k=A;k<E;k++)if(z=h[k],F[z]===L){if(O){var R=b(O[z],d[k]);w(R,x)?F[z]=null:O[z]=R}}else S.push(z),j[z]=L,B&&(B[z]=d[k]);if(O&&B)for(k=C[M];k<S.length;)z=S[k],F[z]===L?(N[k]=O[z],k++):j[z]===L?(N[k]=B[z],k++):S.splice(k,1)}return C[y]=S.length,T};return l}var o=r(33);e.name="algorithm04",e.factory=n},function(t,e){"use strict";function r(t,e,r,n){var o=t.DenseMatrix,i=function(t,e,r,i){var a=t._values,s=t._index,l=t._ptr,u=t._size,c=t._datatype;if(!a)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var f,d=u[0],h=u[1],p=r;"string"==typeof c&&(f=c,e=n.convert(e,f),p=n.find(r,[f,f]));for(var v=[],_=new o({data:v,size:[d,h],datatype:f}),m=[],g=[],y=0;y<h;y++){for(var w=y+1,x=l[y],b=l[y+1],z=x;z<b;z++){var M=s[z];m[M]=a[z],g[M]=w}for(var k=0;k<d;k++)0===y&&(v[k]=[]),g[k]===w?v[k][y]=i?p(e,m[k]):p(m[k],e):v[k][y]=e}return _};return i}e.name="algorithm10",e.factory=r},function(t,e,r){"use strict";function n(t,e,r,n){var o=t.DenseMatrix,a=function(t,e,r){var a=t._data,l=t._size,u=t._datatype,c=e._data,f=e._size,d=e._datatype,h=[];if(l.length!==f.length)throw new i(l.length,f.length);for(var p=0;p<l.length;p++){if(l[p]!==f[p])throw new RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+f+")");h[p]=l[p]}var v,_=r;"string"==typeof u&&u===d&&(v=u,e=n.convert(e,v),_=n.find(r,[v,v]));var m=h.length>0?s(_,0,h,h[0],a,c):[];return new o({data:m,size:h,datatype:v})},s=function(t,e,r,n,o,i){var a=[];if(e===r.length-1)for(var l=0;l<n;l++)a[l]=t(o[l],i[l]);else for(var u=0;u<n;u++)a[u]=s(t,e+1,r,r[e+1],o[u],i[u]);return a};return a}var o=r(28),i=r(33),a=o.string;a.isString;e.name="algorithm13",e.factory=n},function(t,e,r){"use strict";function n(t,e,r,n){var i=t.DenseMatrix,a=function(t,e,r,a){var l,u=t._data,c=t._size,f=t._datatype,d=r;"string"==typeof f&&(l=f,e=n.convert(e,l),d=n.find(r,[l,l]));var h=c.length>0?s(d,0,c,c[0],u,e,a):[];return new i({data:h,size:o(c),datatype:l})},s=function(t,e,r,n,o,i,a){var l=[];if(e===r.length-1)for(var u=0;u<n;u++)l[u]=a?t(i,o[u]):t(o[u],i);else for(var c=0;c<n;c++)l[c]=s(t,e+1,r,r[e+1],o[c],i,a);return l};return a}var o=r(15).clone;e.name="algorithm14",e.factory=n},function(t,e,r){"use strict";function n(t,e,n,o){function i(){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");
this._minimum=null,this._size=0}var a=n(r(53)),s=n(r(57)),l=1/Math.log((1+Math.sqrt(5))/2);i.prototype.type="FibonacciHeap",i.prototype.isFibonacciHeap=!0,i.prototype.insert=function(t,e){var r={key:t,value:e,degree:0};if(this._minimum){var n=this._minimum;r.left=n,r.right=n.right,n.right=r,r.right.left=r,a(t,n.key)&&(this._minimum=r)}else r.left=r,r.right=r,this._minimum=r;return this._size++,r},i.prototype.size=function(){return this._size},i.prototype.clear=function(){this._minimum=null,this._size=0},i.prototype.isEmpty=function(){return 0===this._size},i.prototype.extractMinimum=function(){var t=this._minimum;if(null===t)return t;for(var e=this._minimum,r=t.degree,n=t.child;r>0;){var o=n.right;n.left.right=n.right,n.right.left=n.left,n.left=e,n.right=e.right,e.right=n,n.right.left=n,n.parent=null,n=o,r--}return t.left.right=t.right,t.right.left=t.left,t==t.right?e=null:(e=t.right,e=h(e,this._size)),this._size--,this._minimum=e,t},i.prototype.remove=function(t){this._minimum=u(this._minimum,t,-1),this.extractMinimum()};var u=function(t,e,r){e.key=r;var n=e.parent;return n&&a(e.key,n.key)&&(c(t,e,n),f(t,n)),a(e.key,t.key)&&(t=e),t},c=function(t,e,r){e.left.right=e.right,e.right.left=e.left,r.degree--,r.child==e&&(r.child=e.right),0===r.degree&&(r.child=null),e.left=t,e.right=t.right,t.right=e,e.right.left=e,e.parent=null,e.mark=!1},f=function(t,e){var r=e.parent;r&&(e.mark?(c(t,e,r),f(r)):e.mark=!0)},d=function(t,e){t.left.right=t.right,t.right.left=t.left,t.parent=e,e.child?(t.left=e.child,t.right=e.child.right,e.child.right=t,t.right.left=t):(e.child=t,t.right=t,t.left=t),e.degree++,t.mark=!1},h=function(t,e){var r=Math.floor(Math.log(e)*l)+1,n=new Array(r),o=0,i=t;if(i)for(o++,i=i.right;i!==t;)o++,i=i.right;for(var u;o>0;){for(var c=i.degree,f=i.right;;){if(u=n[c],!u)break;if(s(i.key,u.key)){var h=u;u=i,i=h}d(u,i),n[c]=null,c++}n[c]=i,i=f,o--}t=null;for(var p=0;p<r;p++)u=n[p],u&&(t?(u.left.right=u.right,u.right.left=u.left,u.left=t,u.right=t.right,t.right=u,u.right.left=u,a(u.key,t.key)&&(t=u)):t=u);return t};return i}e.name="FibonacciHeap",e.path="type",e.factory=n},function(t,e,r){"use strict";function n(t,e,n,a){var s=n(r(44)),l=n(r(54)),u=n(r(55)),c=n(r(56)),f=n(r(50)),d=n(r(51)),h=r(46),p=a("smaller",{"boolean, boolean":function(t,e){return t<e},"number, number":function(t,r){return t<r&&!o(t,r,e.epsilon)},"BigNumber, BigNumber":function(t,r){return t.lt(r)&&!i(t,r,e.epsilon)},"Fraction, Fraction":function(t,e){return t.compare(e)===-1},"Complex, Complex":function(t,e){throw new TypeError("No ordering relation is defined for complex numbers")},"Unit, Unit":function(t,e){if(!t.equalBase(e))throw new Error("Cannot compare units with different base");return p(t.value,e.value)},"string, string":function(t,e){return t<e},"Matrix, Matrix":function(t,e){var r;switch(t.storage()){case"sparse":switch(e.storage()){case"sparse":r=u(t,e,p);break;default:r=l(e,t,p,!0)}break;default:switch(e.storage()){case"sparse":r=l(t,e,p,!1);break;default:r=f(t,e,p)}}return r},"Array, Array":function(t,e){return p(s(t),s(e)).valueOf()},"Array, Matrix":function(t,e){return p(s(t),e)},"Matrix, Array":function(t,e){return p(t,s(e))},"Matrix, any":function(t,e){var r;switch(t.storage()){case"sparse":r=c(t,e,p,!1);break;default:r=d(t,e,p,!1)}return r},"any, Matrix":function(t,e){var r;switch(e.storage()){case"sparse":r=c(e,t,p,!0);break;default:r=d(e,t,p,!0)}return r},"Array, any":function(t,e){return d(s(t),e,p,!1).valueOf()},"any, Array":function(t,e){return d(s(e),t,p,!0).valueOf()}});return p.toTex={2:"\\left(${args[0]}"+h.operators.smaller+"${args[1]}\\right)"},p}var o=r(19).nearlyEqual,i=r(41);e.name="smaller",e.factory=n},function(t,e,r){"use strict";function n(t,e,r,n){var i=t.DenseMatrix,a=function(t,e,r,a){var s=t._data,l=t._size,u=t._datatype,c=e._values,f=e._index,d=e._ptr,h=e._size,p=e._datatype;if(l.length!==h.length)throw new o(l.length,h.length);if(l[0]!==h[0]||l[1]!==h[1])throw new RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+h+")");if(!c)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var v,_=l[0],m=l[1],g=0,y=r;"string"==typeof u&&u===p&&(v=u,g=n.convert(0,v),y=n.find(r,[v,v]));for(var w=[],x=0;x<_;x++)w[x]=[];for(var b=[],z=[],M=0;M<m;M++){for(var k=M+1,A=d[M],E=d[M+1],N=A;N<E;N++){var S=f[N];b[S]=a?y(c[N],s[S][M]):y(s[S][M],c[N]),z[S]=k}for(var C=0;C<_;C++)z[C]===k?w[C][M]=b[C]:w[C][M]=a?y(g,s[C][M]):y(s[C][M],g)}return new i({data:w,size:[_,m],datatype:v})};return a}var o=r(33);e.name="algorithm03",e.factory=n},function(t,e,r){"use strict";function n(t,e,r,n){var i=t.DenseMatrix,a=function(t,e,r){var a=t._size,l=t._datatype,u=e._size,c=e._datatype;if(a.length!==u.length)throw new o(a.length,u.length);if(a[0]!==u[0]||a[1]!==u[1])throw new RangeError("Dimension mismatch. Matrix A ("+a+") must match Matrix B ("+u+")");var f,d=a[0],h=a[1],p=0,v=r;"string"==typeof l&&l===c&&(f=l,p=n.convert(0,f),v=n.find(r,[f,f]));var _,m,g=[];for(_=0;_<d;_++)g[_]=[];var y=new i({data:g,size:[d,h],datatype:f}),w=[],x=[],b=[],z=[];for(m=0;m<h;m++){var M=m+1;for(s(t,m,b,w,M),s(e,m,z,x,M),_=0;_<d;_++){var k=b[_]===M?w[_]:p,A=z[_]===M?x[_]:p;g[_][m]=v(k,A)}}return y},s=function(t,e,r,n,o){for(var i=t._values,a=t._index,s=t._ptr,l=s[e],u=s[e+1];l<u;l++){var c=a[l];r[c]=o,n[c]=i[l]}};return a}var o=r(33);e.name="algorithm07",e.factory=n},function(t,e){"use strict";function r(t,e,r,n){var o=t.DenseMatrix,i=function(t,e,r,i){var a=t._values,s=t._index,l=t._ptr,u=t._size,c=t._datatype;if(!a)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var f,d=u[0],h=u[1],p=r;"string"==typeof c&&(f=c,e=n.convert(e,f),p=n.find(r,[f,f]));for(var v=[],_=new o({data:v,size:[d,h],datatype:f}),m=[],g=[],y=0;y<h;y++){for(var w=y+1,x=l[y],b=l[y+1],z=x;z<b;z++){var M=s[z];m[M]=a[z],g[M]=w}for(var k=0;k<d;k++)0===y&&(v[k]=[]),g[k]===w?v[k][y]=i?p(e,m[k]):p(m[k],e):v[k][y]=i?p(e,0):p(0,e)}return _};return i}e.name="algorithm12",e.factory=r},function(t,e,r){"use strict";function n(t,e,n,a){var s=n(r(44)),l=n(r(54)),u=n(r(55)),c=n(r(56)),f=n(r(50)),d=n(r(51)),h=r(46),p=a("larger",{"boolean, boolean":function(t,e){return t>e},"number, number":function(t,r){return t>r&&!o(t,r,e.epsilon)},"BigNumber, BigNumber":function(t,r){return t.gt(r)&&!i(t,r,e.epsilon)},"Fraction, Fraction":function(t,e){return 1===t.compare(e)},"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")},"Unit, Unit":function(t,e){if(!t.equalBase(e))throw new Error("Cannot compare units with different base");return p(t.value,e.value)},"string, string":function(t,e){return t>e},"Matrix, Matrix":function(t,e){var r;switch(t.storage()){case"sparse":switch(e.storage()){case"sparse":r=u(t,e,p);break;default:r=l(e,t,p,!0)}break;default:switch(e.storage()){case"sparse":r=l(t,e,p,!1);break;default:r=f(t,e,p)}}return r},"Array, Array":function(t,e){return p(s(t),s(e)).valueOf()},"Array, Matrix":function(t,e){return p(s(t),e)},"Matrix, Array":function(t,e){return p(t,s(e))},"Matrix, any":function(t,e){var r;switch(t.storage()){case"sparse":r=c(t,e,p,!1);break;default:r=d(t,e,p,!1)}return r},"any, Matrix":function(t,e){var r;switch(e.storage()){case"sparse":r=c(e,t,p,!0);break;default:r=d(e,t,p,!0)}return r},"Array, any":function(t,e){return d(s(t),e,p,!1).valueOf()},"any, Array":function(t,e){return d(s(e),t,p,!0).valueOf()}});return p.toTex={2:"\\left(${args[0]}"+h.operators.larger+"${args[1]}\\right)"},p}var o=r(19).nearlyEqual,i=r(41);e.name="larger",e.factory=n},function(t,e,r){"use strict";function n(t,e,n){function i(e,r){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");if(r&&!l(r))throw new Error("Invalid datatype: "+r);if(t.isMatrix(e)||s(e)){var n=new u(e,r);this._data=n._data,this._size=n._size,this._datatype=n._datatype,this._min=null,this._max=null}else if(e&&s(e.data)&&s(e.size))this._data=e.data,this._size=e.size,this._datatype=e.datatype,this._min="undefined"!=typeof e.min?e.min:null,this._max="undefined"!=typeof e.max?e.max:null;else{if(e)throw new TypeError("Unsupported type of data ("+o.types.type(e)+")");this._data=[],this._size=[0],this._datatype=r,this._min=null,this._max=null}}var u=n(r(37)),c=n(r(53));return i.prototype=new u,i.prototype.type="ImmutableDenseMatrix",i.prototype.isImmutableDenseMatrix=!0,i.prototype.subset=function(e){switch(arguments.length){case 1:var r=u.prototype.subset.call(this,e);return t.isMatrix(r)?new i({data:r._data,size:r._size,datatype:r._datatype}):r;case 2:case 3:throw new Error("Cannot invoke set subset on an Immutable Matrix instance");default:throw new SyntaxError("Wrong number of arguments")}},i.prototype.set=function(){throw new Error("Cannot invoke set on an Immutable Matrix instance")},i.prototype.resize=function(){throw new Error("Cannot invoke resize on an Immutable Matrix instance")},i.prototype.reshape=function(){throw new Error("Cannot invoke reshape on an Immutable Matrix instance")},i.prototype.clone=function(){var t=new i({data:a.clone(this._data),size:a.clone(this._size),datatype:this._datatype});return t},i.prototype.toJSON=function(){return{mathjs:"ImmutableDenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},i.fromJSON=function(t){return new i(t)},i.prototype.swapRows=function(){throw new Error("Cannot invoke swapRows on an Immutable Matrix instance")},i.prototype.min=function(){if(null===this._min){var t=null;this.forEach(function(e){(null===t||c(e,t))&&(t=e)}),this._min=null!==t?t:void 0}return this._min},i.prototype.max=function(){if(null===this._max){var t=null;this.forEach(function(e){(null===t||c(t,e))&&(t=e)}),this._max=null!==t?t:void 0}return this._max},i}var o=r(28),i=o.string,a=o.object,s=Array.isArray,l=i.isString;e.name="ImmutableDenseMatrix",e.path="type",e.factory=n},function(t,e,r){"use strict";function n(t){function e(n){if(!(this instanceof e))throw new SyntaxError("Constructor must be called with the new operator");this._dimensions=[],this._isScalar=!0;for(var o=0,i=arguments.length;o<i;o++){var a=arguments[o];if(t.isRange(a))this._dimensions.push(a),this._isScalar=!1;else if(Array.isArray(a)||t.isMatrix(a)){var s=r(a.valueOf());this._dimensions.push(s);var l=s.size();1===l.length&&1===l[0]||(this._isScalar=!1)}else if("number"==typeof a)this._dimensions.push(r([a]));else{if("string"!=typeof a)throw new TypeError("Dimension must be an Array, Matrix, number, string, or Range");this._dimensions.push(a)}}}function r(e){for(var r=0,n=e.length;r<n;r++)if("number"!=typeof e[r]||!i(e[r]))throw new TypeError("Index parameters must be positive integer numbers");return new t.ImmutableDenseMatrix(e)}return e.prototype.type="Index",e.prototype.isIndex=!0,e.prototype.clone=function(){var t=new e;return t._dimensions=o(this._dimensions),t._isScalar=this._isScalar,t},e.create=function(t){var r=new e;return e.apply(r,t),r},e.prototype.size=function(){for(var t=[],e=0,r=this._dimensions.length;e<r;e++){var n=this._dimensions[e];t[e]="string"==typeof n?1:n.size()[0]}return t},e.prototype.max=function(){for(var t=[],e=0,r=this._dimensions.length;e<r;e++){var n=this._dimensions[e];t[e]="string"==typeof n?n:n.max()}return t},e.prototype.min=function(){for(var t=[],e=0,r=this._dimensions.length;e<r;e++){var n=this._dimensions[e];t[e]="string"==typeof n?n:n.min()}return t},e.prototype.forEach=function(t){for(var e=0,r=this._dimensions.length;e<r;e++)t(this._dimensions[e],e,this)},e.prototype.dimension=function(t){return this._dimensions[t]||null},e.prototype.isObjectProperty=function(){return 1===this._dimensions.length&&"string"==typeof this._dimensions[0]},e.prototype.getObjectProperty=function(){return this.isObjectProperty()?this._dimensions[0]:null},e.prototype.isScalar=function(){return this._isScalar},e.prototype.toArray=function(){for(var t=[],e=0,r=this._dimensions.length;e<r;e++){var n=this._dimensions[e];t.push("string"==typeof n?n:n.toArray())}return t},e.prototype.valueOf=e.prototype.toArray,e.prototype.toString=function(){for(var t=[],e=0,r=this._dimensions.length;e<r;e++){var n=this._dimensions[e];"string"==typeof n?t.push(JSON.stringify(n)):t.push(n.toString())}return"["+t.join(", ")+"]"},e.prototype.toJSON=function(){return{mathjs:"Index",dimensions:this._dimensions}},e.fromJSON=function(t){return e.create(t.dimensions)},e}var o=r(15).clone,i=r(19).isInteger;e.name="Index",e.path="type",e.factory=n},function(t,e,r){"use strict";function n(t,e,r,n){function i(e,r,n){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");if(null!=e)if(t.isBigNumber(e))e=e.toNumber();else if("number"!=typeof e)throw new TypeError("Parameter start must be a number");if(null!=r)if(t.isBigNumber(r))r=r.toNumber();else if("number"!=typeof r)throw new TypeError("Parameter end must be a number");if(null!=n)if(t.isBigNumber(n))n=n.toNumber();else if("number"!=typeof n)throw new TypeError("Parameter step must be a number");this.start=null!=e?parseFloat(e):0,this.end=null!=r?parseFloat(r):0,this.step=null!=n?parseFloat(n):1}return i.prototype.type="Range",i.prototype.isRange=!0,i.parse=function(t){if("string"!=typeof t)return null;var e=t.split(":"),r=e.map(function(t){return parseFloat(t)}),n=r.some(function(t){return isNaN(t)});if(n)return null;switch(r.length){case 2:return new i(r[0],r[1]);case 3:return new i(r[0],r[2],r[1]);default:return null}},i.prototype.clone=function(){return new i(this.start,this.end,this.step)},i.prototype.size=function(){var t=0,e=this.start,r=this.step,n=this.end,i=n-e;return o.sign(r)==o.sign(i)?t=Math.ceil(i/r):0==i&&(t=0),isNaN(t)&&(t=0),[t]},i.prototype.min=function(){var t=this.size()[0];return t>0?this.step>0?this.start:this.start+(t-1)*this.step:void 0},i.prototype.max=function(){var t=this.size()[0];return t>0?this.step>0?this.start+(t-1)*this.step:this.start:void 0},i.prototype.forEach=function(t){var e=this.start,r=this.step,n=this.end,o=0;if(r>0)for(;e<n;)t(e,[o],this),e+=r,o++;else if(r<0)for(;e>n;)t(e,[o],this),e+=r,o++},i.prototype.map=function(t){var e=[];return this.forEach(function(r,n,o){e[n[0]]=t(r,n,o)}),e},i.prototype.toArray=function(){var t=[];return this.forEach(function(e,r){t[r[0]]=e}),t},i.prototype.valueOf=function(){return this.toArray()},i.prototype.format=function(t){var e=o.format(this.start,t);return 1!=this.step&&(e+=":"+o.format(this.step,t)),e+=":"+o.format(this.end,t)},i.prototype.toString=function(){return this.format()},i.prototype.toJSON=function(){return{mathjs:"Range",start:this.start,end:this.end,step:this.step}},i.fromJSON=function(t){return new i(t.start,t.end,t.step)},i}var o=r(19);e.name="Range",e.path="type",e.factory=n},function(t,e){"use strict";function r(t,e,r,n){return n("index",{"...number | string | BigNumber | Range | Array | Matrix":function(e){var r=e.map(function(e){return t.isBigNumber(e)?e.toNumber():Array.isArray(e)||t.isMatrix(e)?e.map(function(e){return t.isBigNumber(e)?e.toNumber():e}):e}),n=new t.Index;return t.Index.apply(n,r),n}})}e.name="index",e.factory=r},function(t,e){"use strict";function r(t,e,r,n){var o=t.SparseMatrix,i=n("sparse",{"":function(){return new o([])},string:function(t){return new o([],t)},"Array | Matrix":function(t){return new o(t)},"Array | Matrix, string":function(t,e){return new o(t,e)}});return i.toTex={0:"\\begin{bsparse}\\end{bsparse}",1:"\\left(${args[0]}\\right)"},i}e.name="sparse",e.factory=r},function(t,e,r){"use strict";function n(t,e,n,a){function s(e,r){var n=l(e),o=n?new t.BigNumber(0):0;if(u(e),r){var a=c(r);return e.length>0?a.resize(e,o):a}var s=[];return e.length>0?i(s,e,o):s}function l(e){var r=!1;return e.forEach(function(e,n,o){t.isBigNumber(e)&&(r=!0,o[n]=e.toNumber())}),r}function u(t){t.forEach(function(t){if("number"!=typeof t||!o(t)||t<0)throw new Error("Parameters in function zeros must be positive integers")})}var c=n(r(44)),f=a("zeros",{"":function(){return"Array"===e.matrix?s([]):s([],"default")},"...number | BigNumber | string":function(t){var r=t[t.length-1];if("string"==typeof r){var n=t.pop();return s(t,n)}return"Array"===e.matrix?s(t):s(t,"default")},Array:s,Matrix:function(t){var e=t.storage();return s(t.valueOf(),e)},"Array | Matrix, string":function(t,e){return s(t.valueOf(),e)}});return f.toTex=void 0,f}var o=r(19).isInteger,i=r(29).resize;e.name="zeros",e.factory=n},function(t,e,r){"use strict";var n=r(2),o=r(6),i=r(3);t.exports=function(t,e,r){var a,s,l=i.keys(r);i.each(l,function(t){a=r[t],/[^a-z_]/i.test(a)&&(a=parseInt(a,10)),s=!1,i.each(e,function(e){n.has(e,t)&&(s=!0)}),s&&(e=i.filter(e,function(e){return e[t]==a}))});var u,c,f=[],d=!1;return i.each(e,function(e){u=!0,i.each(i.keys(t.viz.possible_filters),function(r){c=o(t.viz.filter_data,r),e[r]!=c&&(u=!1)}),u?d===!1&&(d=!0,f.push(e)):f.push(e)}),f}},function(t,e){"use strict";t.exports=function(t){var e={};return e.wrapper={},e.row_search={},e.row_search.box={},e.row_search.box.height=34,e.row_search.box.width=95,e.row_search.placeholder=t.row_search_placeholder,e.row_search.margin_left=7,e.slider={},e.slider.width=t.sidebar_width-30,e.slider.margin_left=15,e.key_cat={},e.key_cat.width=t.sidebar_width-15,e.key_cat.margin_left=5,e.key_cat.max_height=100,e.title=t.title,e.title_margin_left=7,e.about=t.about,e.width=t.sidebar_width,e.buttons={},e.buttons.width=t.sidebar_width-15,e.text={},e.icons=t.sidebar_icons,e.icon_margin_left=-5,e}},function(t,e,r){"use strict";var n=r(3);t.exports=function(t,e){var r=n.keys(e)[0];return n.each(n.keys(t.viz.possible_filters),function(n){if(n!=r&&!d3.select(t.root+" .slider_"+n).empty()){var o=d3.select(t.root+" .slider_"+n).attr("current_state");e[n]=o}}),e}},function(t,e,r){"use strict";var n=r(68),o=r(69),i=r(71),a=r(72),s=r(73),l=r(74),u=r(75),c=r(76),f=r(81),d=r(83),h=r(2),p=r(5),v=r(84);t.exports=function(t){function e(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r={};r.root=t.root,r.root_tips=t.root.replace("#",".")+"_d3-tip",r.viz_wrapper=t.root+" .viz_wrapper",r.do_zoom=t.do_zoom,r.background_color=t.background_color,r.super_border_color=t.super_border_color,r.outer_margins=t.outer_margins,r.is_expand=t.ini_expand,r.grey_border_width=t.grey_border_width,r.show_dendrogram=t.show_dendrogram,r.tile_click_hlight=t.tile_click_hlight,r.inst_order=t.inst_order,r.expand_button=t.expand_button,r.sim_mat=t.sim_mat,r.dendro_filter=t.dendro_filter,r.cat_filter=t.cat_filter,r.cat_value_colors=t.cat_value_colors,r.cat_bar_width=180,r.cat_bar_height=20,r.tree_menu_width=400,r.tree_menu_height=237,r.tree_menu_x_offset=20,r.filter_menu_width=500,r.filter_menu_height=237,r.filter_menu_x_offset=20,r.update_button_width=100,r.viz_svg=r.viz_wrapper+" .viz_svg",r.zoom_element=r.viz_wrapper+" .viz_svg",r.uni_duration=1e3,r.bottom_space=10,r.run_trans=!1,r.duration=1e3,r.resize=t.resize,h.has(t,"size")?r.fixed_size=t.size:r.fixed_size=!1,r.border_fraction=65,r.uni_margin=5,r.super_labels={},r.super_labels.margin={},r.super_labels.dim={},r.super_labels.margin.left=r.grey_border_width,r.super_labels.margin.top=r.grey_border_width,r.super_labels.dim.width=0,t.labels.super_labels&&(r.super_labels.dim.width=15*t.labels.super_label_scale),r.triangle_opacity=.6,r.norm_labels={},r.norm_labels.width={},r.dendro_room={},r.show_dendrogram?r.dendro_room.symbol_width=10:r.dendro_room.symbol_width=0,r.cat_colors=t.cat_colors,r=v(t,r,e),0==_.has(t,"group_level")&&(r.show_dendrogram&&(t.group_level={}),0==_.has(t,"group_level")&&(t.group_level={}),t.group_level.row=5,t.group_level.col=5),r.dendro_opacity=.35,r.spillover_col_slant=r.norm_labels.width.col;var n=p(t.network_data.views);return r.possible_filters=n.possible_filters,r.filter_data=n.filter_data,r.viz_nodes={},r.viz_nodes.row=t.network_data.row_nodes_names,r.viz_nodes.col=t.network_data.col_nodes_names,r.viz_nodes.curr_row=t.network_data.row_nodes_names,r.viz_nodes.curr_col=t.network_data.col_nodes_names,r.x_offset=0,r}var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return t.labels=n(t),t.viz=e(t,r),o(t),t=i(t),t.viz=a(t.viz),t.viz=s(t.viz),t.viz=l(t.viz),t.sim_mat&&(t.viz.clust.dim.width<=t.viz.clust.dim.height?t.viz.clust.dim.height=t.viz.clust.dim.width:t.viz.clust.dim.width=t.viz.clust.dim.height),t=u(t),t=c(t),t=f(t),t=d(t)}},function(t,e,r){"use strict";var n=r(3);t.exports=function(t){var e={};return e.super_label_scale=t.super_label_scale,e.super_labels=t.super_labels,e.super_label_fs=13.8,e.super_labels&&(e.super={},e.super.row=t.super.row,e.super.col=t.super.col),e.show_label_tooltips=t.show_label_tooltips,e.row_max_char=n.max(t.network_data.row_nodes,function(t){return t.name.length}).name.length,e.col_max_char=n.max(t.network_data.col_nodes,function(t){return t.name.length}).name.length,e.max_allow_fs=t.max_allow_fs,e}},function(t,e,r){"use strict";var n=r(70);t.exports=function(t){d3.select(t.root+" .viz_wrapper").empty()&&(d3.select(t.root).append("div").classed("sidebar_wrapper",!0),d3.select(t.root).append("div").classed("viz_wrapper",!0));var e=n(t);d3.select(t.root+" .sidebar_wrapper").style("float","left").style("width",t.sidebar_width+"px").style("height",e.height+"px").style("overflow","hidden"),d3.select(t.viz.viz_wrapper).style("float","left").style("width",e.width+"px").style("height",e.height+"px")}},function(t,e){"use strict";t.exports=function(t){var e,r={},n=t.buffer_width,o=d3.select(t.root).style("width").replace("px",""),i=d3.select(t.root).style("height").replace("px","");return t.viz.is_expand===!1?(e=t.viz.outer_margins,r.width=o-t.sidebar_width-n):(e=t.viz.outer_margins,r.width=o-n),r.top=e.top,r.left=e.left,t.viz.resize?r.height=i:(t.viz.is_expand?r.width=t.viz.fixed_size.width:r.width=t.viz.fixed_size.width-t.sidebar_width,r.height=t.viz.fixed_size.height),r}},function(t,e){"use strict";t.exports=function(t){return t.viz.svg_dim={},t.viz.svg_dim.width=Number(d3.select(t.viz.viz_wrapper).style("width").replace("px","")),t.viz.svg_dim.height=Number(d3.select(t.viz.viz_wrapper).style("height").replace("px","")),t}},function(t,e){"use strict";t.exports=function(t){return t.norm_labels.margin={},t.norm_labels.margin.left=t.super_labels.margin.left+t.super_labels.dim.width,t.norm_labels.margin.top=t.super_labels.margin.top+t.super_labels.dim.width,t.label_background={},t.label_background.row=t.norm_labels.width.row+t.cat_room.row+t.uni_margin,t.label_background.col=t.norm_labels.width.col+t.cat_room.col+t.uni_margin,t}},function(t,e){"use strict";t.exports=function(t){t.clust={},t.clust.margin={},t.clust.margin.left=t.norm_labels.margin.left+t.norm_labels.width.row+t.cat_room.row+t.uni_margin,t.clust.margin.top=t.norm_labels.margin.top+t.norm_labels.width.col+t.cat_room.col+t.uni_margin;var e=t.svg_dim.width-t.clust.margin.left-t.spillover_col_slant,r=d3.scale.ordinal().rangeBands([0,e]).domain(_.range(t.num_col_nodes)),n=r.rangeBand()/2;if(n>t.norm_labels.width.col){var o=t.norm_labels.width.col/n;e*=o}return t.clust.dim={},t.clust.dim.width=e,t}},function(t,e){"use strict";t.exports=function(t){var e=t.svg_dim.height-t.clust.margin.top-t.dendro_room.col-t.bottom_space;return t.clust.dim.height=e,t}},function(t,e,r){"use strict";var n=r(3);t.exports=function(t){var e=Math.abs(n.max(t.network_data.col_nodes,function(t){return Math.abs(t.value)}).value);return t.labels.bar_scale_col=d3.scale.linear().domain([0,e]).range([0,.75*t.viz.norm_labels.width.col]),e=Math.abs(n.max(t.network_data.row_nodes,function(t){return Math.abs(t.value)}).value),t.labels.bar_scale_row=d3.scale.linear().domain([0,e]).range([0,t.viz.norm_labels.width.row]),t}},function(t,e,r){"use strict";var n=r(77),o=r(79),i=r(3);t.exports=function(t){t.matrix=n(t),t.viz.x_scale=d3.scale.ordinal().rangeBands([0,t.viz.clust.dim.width]),t.viz.y_scale=d3.scale.ordinal().rangeBands([0,t.viz.clust.dim.height]);var e;return i.each(["row","col"],function(r){e=t.viz.inst_order[r],"custom"===e&&(e="clust"),"row"===r?t.viz.x_scale.domain(t.matrix.orders[e+"_"+r]):t.viz.y_scale.domain(t.matrix.orders[e+"_"+r])}),t.viz.border_width={},t.viz.border_width.x=t.viz.x_scale.rangeBand()/t.viz.border_fraction,t.viz.border_width.y=t.viz.y_scale.rangeBand()/t.viz.border_fraction,t.viz.rect_width=t.viz.x_scale.rangeBand()-t.viz.border_width.x,t.viz.rect_height=t.viz.y_scale.rangeBand()-t.viz.border_width.y,o(t),t}},function(t,e,r){"use strict";var n=r(2),o=r(78),i=r(3);t.exports=function(t){var e={},r=t.network_data;e.tile_colors=t.tile_colors,e.bar_colors=t.bar_colors,e.outline_colors=t.outline_colors,e.hlight_color=t.highlight_color,e.tile_title=t.tile_title,e.show_tile_tooltips=t.show_tile_tooltips,e.make_tile_tooltip=t.make_tile_tooltip,e.distance_metric="cosine",e.linkage_type="average",e.filter_state="no-filter",e.normalization_state="no-normalization",e.click_hlight_x=-666,e.click_hlight_y=-666,e.click_hlight_row=-666,e.click_hlight_col=-666,e.def_large_matrix=2e4,e.opacity_function=t.opacity_scale,e.orders={},i.each(["row","col"],function(o){var a;a="row"===o?"col":"row";var s=r[a+"_nodes"],l=s.length,u=n.pluck(s,"name"),c=u.sort(),f=i.map(c,function(t){return r[a+"_nodes_names"].indexOf(t)});e.orders["alpha_"+o]=f;var d=["clust","rank"];_.has(s[0],"rankvar")&&d.push("rankvar"),t.viz.all_cats[a].length>0&&i.each(t.viz.all_cats[a],function(t){t=t.replace("-","_"),d.push(t+"_index")}),i.each(d,function(t){var r=d3.range(l).sort(function(e,r){return s[r][t]-s[e][t]});e.orders[t+"_"+o]=r})}),n.has(r,"all_links")?e.max_link=i.max(r.all_links,function(t){return Math.abs(t.value)}).value:e.max_link=i.max(r.links,function(t){return Math.abs(t.value)}).value,e.abs_max_val=Math.abs(e.max_link)*t.clamp_opacity,0===t.input_domain?"linear"===e.opacity_function?e.opacity_scale=d3.scale.linear().domain([0,e.abs_max_val]).clamp(!0).range([0,1]):"log"===e.opacity_function&&(e.opacity_scale=d3.scale.log().domain([.001,e.abs_max_val]).clamp(!0).range([0,1])):"linear"===e.opacity_function?e.opacity_scale=d3.scale.linear().domain([0,t.input_domain]).clamp(!0).range([0,1]):"log"===e.opacity_function&&(e.opacity_scale=d3.scale.log().domain([.001,t.input_domain]).clamp(!0).range([0,1]));var a=n.has(r.links[0],"value_up"),s=n.has(r.links[0],"value_dn");return a||s?e.tile_type="updn":e.tile_type="simple",n.has(r.links[0],"highlight")?e.highlight=1:e.highlight=0,e.matrix=o(r),e.wait_tooltip=0,e}},function(t,e,r){"use strict";var n=r(2);t.exports=function(t){var e,r,o=[];return r=!!n.has(t.links[0],"value_orig"),t.row_nodes.forEach(function(i,a){o[a]={},o[a].name=t.row_nodes[a].name,o[a].row_index=a,o[a].row_data=d3.range(t.col_nodes.length).map(function(o){return e=n.has(t.links[0],"value_up")||n.has(t.links[0],"value_dn")?{pos_x:o,pos_y:a,value:0,value_up:0,value_dn:0,highlight:0}:{pos_x:o,pos_y:a,value:0,highlight:0},r&&(e.value_orig=0),e})}),t.links.forEach(function(t){o[t.source].row_data[t.target].value=t.value,o[t.source].row_data[t.target].row_name=t.row_name,o[t.source].row_data[t.target].col_name=t.col_name,(n.has(t,"value_up")||n.has(t,"value_dn"))&&(o[t.source].row_data[t.target].value_up=t.value_up,o[t.source].row_data[t.target].value_dn=t.value_dn),r&&(o[t.source].row_data[t.target].value_orig=t.value_orig),t.highlight&&(o[t.source].row_data[t.target].highlight=t.highlight),t.info&&(o[t.source].row_data[t.target].info=t.info)}),o}},function(t,e,r){"use strict";var n=r(80);t.exports=function(t){var e=3,r=2,o=e/t.viz.rect_height,i=2;t.viz.ds_zt=i;var a=Math.floor(Math.log(o)/Math.log(i));if(t.viz.rect_height<r&&a>0){var s=2;t.viz.ds_opacity_scale=d3.scale.linear().domain([1,100]).range([1,s]).clamp(!0);var l;t.viz.ds_num_levels=a,t.viz.ds=[],t.matrix.ds_matrix=[];for(var u=t.viz.inst_order.row,c=$.extend(!0,{},t.matrix.matrix),f=0;f<a;f++){t.viz.ds_level=0,l={},l.height=e,l.num_levels=a;var d=Math.pow(i,f);l.zt=d,l.num_rows=Math.round(t.viz.clust.dim.height/(l.height/d)),l.x_scale=d3.scale.ordinal().rangeBands([0,t.viz.clust.dim.width]),l.x_scale.domain(t.matrix.orders[u+"_row"]),l.y_scale=d3.scale.ordinal().rangeBands([0,t.viz.clust.dim.height]),l.y_scale.domain(d3.range(l.num_rows+1)),l.rect_height=l.y_scale.rangeBand()-t.viz.border_width.y,t.viz.ds.push(l);var h=n(t,c,f);t.matrix.ds_matrix.push(h)}t.viz.viz_nodes.row=d3.range(t.matrix.ds_matrix[0].length).map(String)}else t.viz.ds=null,t.viz.ds_level=-1,t.viz.ds_num_levels=0}},function(t,e,r){"use strict";var n=r(3);t.exports=function(t,e,r){var o,i,a,s=t.viz.ds[r].num_rows,l=t.network_data.row_nodes.length/s,u=t.viz.ds_opacity_scale(l),c=t.viz.clust.dim.height/s,f=[],d=s+1;for(i=0;i<d;i++)o={},o.row_index=i,o.name=String(i),o.all_names=[],f.push(o);n.each(e,function(e){var r=t.viz.y_scale(e.row_index),n=Math.round(r/c),o=e.row_data;if(f[n].all_names.push(e.name),_.has(f[n],"row_data"))for(a=0;a<o.length;a++)f[n].row_data[a].value=f[n].row_data[a].value+o[a].value;else{var i=[];for(a=0;a<o.length;a++)i[a]=o[a];f[n].row_data=i}}),n.each(f,function(t){var e=t.row_data,r=t.all_names.length;n.each(e,function(t){t.value=t.value/r*u})});var h=[];return n.each(f,function(t){h=h.concat(t.all_names)}),f}},function(t,e,r){"use strict";var n=r(82);t.exports=function(t){t.viz.zoom_scale_font={},t.viz.zoom_scale_font.row=1,t.viz.zoom_scale_font.col=1;var e=.75,r=t.viz.x_scale.rangeBand()/2;return t.viz.square_zoom=t.viz.norm_labels.width.col/r*e,t.viz=n(t.viz),t}},function(t,e){"use strict";t.exports=function(t){var e=t.clust.dim.width/t.num_col_nodes,r=t.clust.dim.height/t.num_row_nodes;return t.zoom_ratio={},t.zoom_ratio.x=e/r,t.zoom_ratio.y=1,t.zoom_ratio.x<1&&(t.zoom_ratio.y=1/t.zoom_ratio.x,t.zoom_ratio.x=1),t}},function(t,e){"use strict";t.exports=function(t){return t.labels.default_fs_row=1.01*t.viz.y_scale.rangeBand(),t.labels.default_fs_col=.87*t.viz.x_scale.rangeBand(),t.labels.default_fs_row>t.labels.max_allow_fs&&(t.labels.default_fs_row=t.labels.max_allow_fs),t.labels.default_fs_col>t.labels.max_allow_fs&&(t.labels.default_fs_col=t.labels.max_allow_fs),t}},function(t,e,r){"use strict";var n=r(85),o=r(2),i=r(86),a=r(87),s=r(3);t.exports=function(t,e){var r,l,u,c=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],f=": ";e.show_categories={},e.all_cats={},e.cat_names={},e.cat_info={};var d={};d.row=null,d.col=null,e.cat_colors={},e.cat_colors.value_opacity=d;var h=0;return s.each(["row","col"],function(n){e.show_categories[n]=!1,e.all_cats[n]=[];var d=s.keys(t.network_data[n+"_nodes"][0]);d=d.sort(),s.each(d,function(t){t.indexOf("cat-")>=0&&(e.show_categories[n]=!0,e.all_cats[n].push(t))}),e.cat_info[n]=null,e.show_categories[n]&&(e.cat_colors[n]={},e.cat_info[n]={},e.cat_names[n]={},s.each(e.all_cats[n],function(c){var d=t.network_data[n+"_nodes"][0];"string"==typeof d[c]&&d[c].indexOf(f)>0?(r=d[c].split(f)[0],e.cat_names[n][c]=r):e.cat_names[n][c]=c;var p=o.pluck(t.network_data[n+"_nodes"],c),v=[];s.each(p,function(t){var e;e=t.indexOf(": ")>0?t.split(": ")[1]:t,v.push(e)});var _=s.uniq(p).sort();if(l=a(_),"cat_strings"===l.type){var m=s.countBy(v);l.cat_hist=m}else l.cat_hist=null;e.cat_info[n][c]=l,e.cat_colors[n][c]={},s.each(_,function(t,r){u=i.get_random_color(r+h),e.cat_colors[n][c][t]=u,"string"==typeof t&&(t.indexOf("Not ")>=0||t.indexOf(": false")>0)&&(e.cat_colors[n][c][t]="#eee"),h+=1})})),_.has(t.network_data,"cat_colors")&&c===!0&&(e.cat_colors[n]=t.network_data.cat_colors[n]),t.sim_mat&&(e.cat_colors.col=e.cat_colors.row)}),e.cat_colors=e.cat_colors,e.cat_colors.opacity=.6,e.cat_colors.active_opacity=.9,e=n(t,e)}},function(t,e,r){"use strict";var n=r(3);t.exports=function(t,e){var r,o=d3.scale.linear().domain([5,15]).range([85,120]).clamp("true");return e.cat_room={},e.cat_room.symbol_width=12,e.cat_room.separation=3,n.each(["row","col"],function(n){e.norm_labels.width[n]=o(t.labels[n+"_max_char"])*t[n+"_label_scale"],e["num_"+n+"_nodes"]=t.network_data[n+"_nodes"].length,"row"===n?e.dendro_room[n]=e.dendro_room.symbol_width:e.dendro_room[n]=e.dendro_room.symbol_width+3*e.uni_margin;var i=e.all_cats[n].length;if(e.show_categories[n]){r=(i-1)*e.cat_room.separation;var a;a="row"===n?i+1:i,e.cat_room[n]=a*e.cat_room.symbol_width+r;
}else"row"==n?e.cat_room[n]=e.cat_room.symbol_width:e.cat_room[n]=0}),e}},function(t,e){"use strict";function r(){return"#EEE"}function n(t){return i[t%o()]}function o(){return i.length}var i;i=["#393b79","#aec7e8","#ff7f0e","#ffbb78","#98df8a","#bcbd22","#404040","#ff9896","#c5b0d5","#8c564b","#1f77b4","#5254a3","#FFDB58","#c49c94","#e377c2","#7f7f7f","#2ca02c","#9467bd","#dbdb8d","#17becf","#637939","#6b6ecf","#9c9ede","#d62728","#8ca252","#8c6d31","#bd9e39","#e7cb94","#843c39","#ad494a","#d6616b","#7b4173","#a55194","#ce6dbd","#de9ed6"],t.exports={get_default_color:r,get_random_color:n,get_num_colors:o}},function(t,e,r){"use strict";var n=r(3);t.exports=function(t){var e=t[0],r=!1,o=!1,i="cat_strings",a=NaN,s=[],l=null,u=": ";if("string"==typeof e&&e.indexOf(u)>-1&&(r=!0,e=e.split(u)[1]),0==isNaN(e)&&(o=!0),o&&(i="cat_values",n.each(t,function(t){r&&(t=t.split(u)[1]),isNaN(t)===!0?i="cat_strings":(t=parseFloat(t),s.push(t))})),"cat_values"===i){var c=n.max(s,function(t){return Math.abs(t)});a=Math.abs(c),l=d3.scale.linear().domain([0,a]).range([0,1])}var f={};return f.type=i,f.max_abs_val=a,f.cat_scale=l,f}},function(t,e){"use strict";t.exports=function(){var t={};return t.zoom_x=1,t.zoom_y=1,t.trans_x=0,t.trans_y=0,t}},function(t,e,r){"use strict";var n=r(90),o=r(101),i=r(133),a=r(141),s=r(142),l=r(153),u=r(163),c=r(185),f=r(190),d=r(148),h=r(191),p=r(192),v=r(193),_=r(196),m=r(3);t.exports=function(t){function e(){var t=r.viz.super_border_color;return(r.viz.is_expand||0==r.show_viz_border)&&(t="white"),t}var r=t.params;d3.select(r.viz.viz_wrapper+" svg").remove();var g=d3.select(r.viz.viz_wrapper).append("svg").attr("class","viz_svg").attr("id","svg_"+r.root.replace("#","")).attr("width",r.viz.svg_dim.width).attr("height",r.viz.svg_dim.height).attr("is_zoom",0).attr("stopped_zoom",1);g.append("rect").attr("class","super_background").style("width",r.viz.svg_dim.width).style("height",r.viz.svg_dim.height).style("fill","white"),n(r,g),o(t),r.viz.show_dendrogram&&(h(t),p(t),_(t)),i(t),r.viz.ds_level===-1&&m.each(["row","col"],function(t){var e=Number(d3.select("."+t+"_label_group").select("text").style("font-size").replace("px","")),n=8;e>n&&d3.selectAll(r.root+" ."+t+"_label_group").each(function(){d(r,this,t)})}),f(t),r.viz.show_categories.col&&c(t),s(t),r.labels.super_labels&&a(r),v(t),d3.select(r.viz.viz_svg).append("rect").classed("left_border",!0).classed("borders",!0).attr("fill",e).attr("width",r.viz.grey_border_width).attr("height",r.viz.svg_dim.height).attr("transform","translate(0,0)"),d3.select(r.viz.viz_svg).append("rect").classed("right_border",!0).classed("borders",!0).attr("fill",e).attr("width",r.viz.grey_border_width).attr("height",r.viz.svg_dim.height).attr("transform",function(){var t=r.viz.svg_dim.width-r.viz.grey_border_width;return"translate("+t+",0)"}),d3.select(r.viz.viz_svg).append("rect").classed("top_border",!0).classed("borders",!0).attr("fill",e).attr("width",r.viz.svg_dim.width).attr("height",r.viz.grey_border_width).attr("transform",function(){var t=0;return"translate("+t+",0)"}),d3.select(r.viz.viz_svg).append("rect").classed("bottom_border",!0).classed("borders",!0).attr("fill",e).attr("width",r.viz.svg_dim.width).attr("height",r.viz.grey_border_width).attr("transform",function(){var t=r.viz.svg_dim.height-r.viz.grey_border_width;return"translate(0,"+t+")"}),l(t),u(t),r.viz.do_zoom&&d3.select(r.viz.zoom_element).call(r.zoom_behavior),d3.select(r.viz.zoom_element).on("dblclick.zoom",null)}},function(t,e,r){"use strict";var n=r(2),o=r(91),i=r(92),a=r(93);t.exports=function(t,e){var r,s=t.network_data,l=[];r=e.append("g").attr("class","clust_container").attr("transform","translate("+t.viz.clust.margin.left+","+t.viz.clust.margin.top+")").append("g").attr("class","clust_group").classed("clust_group",!0),r.append("rect").classed("background",!0).classed("grey_background",!0).style("fill","#eee").style("opacity",.25).attr("width",t.viz.clust.dim.width).attr("height",t.viz.clust.dim.height),null===t.viz.ds?a(t,t.matrix.matrix,"all",t.viz.ds_level):a(t,t.matrix.ds_matrix[0],"all",t.viz.ds_level),"function"==typeof t.click_tile?d3.selectAll(t.root+" .tile").on("click",function(e){var r={};r.row=t.network_data.row_nodes[e.pos_y].name,r.col=t.network_data.col_nodes[e.pos_x].name,r.value=e.value,n.has(e,"value_up")&&(r.value_up=e.value_up),n.has(e,"value_dn")&&(r.value_dn=e.value_dn),n.has(e,"info")&&(r.info=e.info),t.click_tile(r),i(t,this)}):t.tile_click_hlight&&d3.selectAll(t.root+" .tile").on("click",function(){i(t,this)});var u={},c=0;return u.enter=0,o(t,u,c),{get_clust_group:function(){return r},get_matrix:function(){return l},get_nodes:function(t){return"row"===t?s.row_nodes:s.col_nodes}}}},function(t,e){"use strict";t.exports=function(t,e,r){}},function(t,e){"use strict";t.exports=function(t,e){d3.select(e).each(function(r){var n=r.pos_x,o=r.pos_y;if(d3.selectAll(t.root+" .click_hlight").remove(),n!=t.matrix.click_hlight_x||o!=t.matrix.click_hlight_y){t.matrix.click_hlight_x=n,t.matrix.click_hlight_y=o;var i=6,a=.85,s=i*t.viz.border_width.x,l=i*t.viz.border_width.y;d3.select(e.parentNode).append("rect").classed("click_hlight",!0).classed("top_hlight",!0).attr("width",t.viz.x_scale.rangeBand()).attr("height",l).attr("fill",t.matrix.hlight_color).attr("transform",function(){return"translate("+t.viz.x_scale(n)+",0)"}).attr("opacity",a),d3.select(e.parentNode).append("rect").classed("click_hlight",!0).classed("left_hlight",!0).attr("width",s).attr("height",t.viz.y_scale.rangeBand()-.99*l).attr("fill",t.matrix.hlight_color).attr("transform",function(){return"translate("+t.viz.x_scale(n)+","+.99*l+")"}).attr("opacity",a),d3.select(e.parentNode).append("rect").classed("click_hlight",!0).classed("right_hlight",!0).attr("width",s).attr("height",t.viz.y_scale.rangeBand()-.99*l).attr("fill",t.matrix.hlight_color).attr("transform",function(){var e=t.viz.x_scale(n)+t.viz.x_scale.rangeBand()-s;return"translate("+e+","+.99*l+")"}).attr("opacity",a),d3.select(e.parentNode).append("rect").classed("click_hlight",!0).classed("bottom_hlight",!0).attr("width",function(){return t.viz.x_scale.rangeBand()-1.98*s}).attr("height",l).attr("fill",t.matrix.hlight_color).attr("transform",function(){var e=t.viz.x_scale(n)+.99*s,r=t.viz.y_scale.rangeBand()-l;return"translate("+e+","+r+")"}).attr("opacity",a)}else t.matrix.click_hlight_x=-666,t.matrix.click_hlight_y=-666})}},function(t,e,r){"use strict";var n=r(94),o=r(100),i=r(3);t.exports=function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"all",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,s=t.viz.y_scale,l=!0,u="row";if(a>=0&&(s=t.viz.ds[a].y_scale,l=!1,u="ds"+String(a)+"_row"),l)var c=o().attr("class",function(){var e=t.viz.root_tips.replace(".",""),r=e+" d3-tip "+e+"_tile_tip";return r}).style("display","none").direction("nw").offset([0,0]).html(function(e){var r,n=String(e.value.toFixed(3));if(t.keep_orig){var o=String(e.value_orig.toFixed(3));r="<p>"+e.row_name+" and "+e.col_name+"</p><p> normalized value: "+n+"</p><div> original value: "+o+"</div>"}else r="<p>"+e.row_name+" and "+e.col_name+"</p><div> value: "+n+"</div>";return r});else c=null;var f=[];"all"===r?f=e:i.each(e,function(t){i.contains(r,t.name)&&f.push(t)}),d3.select(t.root+" .clust_group").selectAll(".row").data(f,function(t){return t.name}).enter().append("g").classed(u,!0).attr("transform",function(t){return"translate(0,"+s(t.row_index)+")"}).each(function(e){n(t,e,c,this,a)}),t.viz.ds_level===-1&&null!=c&&d3.selectAll(t.root+" .row").call(c)}},function(t,e,r){"use strict";var n=r(95),o=r(96),i=r(97),a=r(98),s=r(99),l=r(3);t.exports=function(t,e,r,u){var c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:-1,f=e.row_data,d=!0,h=t.viz.rect_height;c>=0&&(h=t.viz.ds[c].rect_height);var p;p=!!_.has(t.network_data.links[0],"value_orig");var v;v=p===!1?l.filter(f,function(t){return 0!==t.value}):f;var m=d3.select(u).selectAll("rect").data(v,function(t){return t.col_name}).enter().append("rect").attr("class","tile row_tile").attr("width",t.viz.rect_width).attr("height",h).style("fill",function(e){var r;return r="NaN"===e.value_orig?"#000000":e.value>0?t.matrix.tile_colors[0]:t.matrix.tile_colors[1]}).style("fill-opacity",function(e){var r;return r="NaN"===e.value_orig?.175:t.matrix.opacity_scale(Math.abs(e.value))}).attr("transform",function(e){return s(t,e)});if(d&&m.on("mouseover",function(){for(var e=arguments.length,n=Array(e),o=0;o<e;o++)n[o]=arguments[o];i(t,this,r,n)}).on("mouseout",function(){a(t,this,r)}),"updn"==t.matrix.tile_type){var g=l.filter(f,function(t){return 0!=t.value_up||0!=t.value_dn});d3.select(u).selectAll(".tile_up").data(g,function(t){return t.col_name}).enter().append("path").attr("class","tile_up").attr("d",function(){return n(t)}).attr("transform",function(e){s(t,e)}).style("fill",function(){return t.matrix.tile_colors[0]}).style("fill-opacity",function(e){var r=0;return Math.abs(e.value_dn)>0&&(r=t.matrix.opacity_scale(Math.abs(e.value_up))),r}).on("mouseover",function(){for(var e=arguments.length,n=Array(e),o=0;o<e;o++)n[o]=arguments[o];i(t,this,r,n)}).on("mouseout",function(){a(t,this,r)}),d3.select(u).selectAll(".tile_dn").data(g,function(t){return t.col_name}).enter().append("path").attr("class","tile_dn").attr("d",function(){return o(t)}).attr("transform",function(e){s(t,e)}).style("fill",function(){return t.matrix.tile_colors[1]}).style("fill-opacity",function(e){var r=0;return Math.abs(e.value_up)>0&&(r=t.matrix.opacity_scale(Math.abs(e.value_dn))),r}).on("mouseover",function(){for(var e=arguments.length,n=Array(e),o=0;o<e;o++)n[o]=arguments[o];i(t,this,r,n)}).on("mouseout",function(){a(t,this,r)}),m.each(function(t){Math.abs(t.value_up)>0&&Math.abs(t.value_dn)>0&&d3.select(this).remove()})}t.matrix.tile_title&&m.append("title").text(function(t){var e="value: "+t.value;return e})}},function(t,e){"use strict";t.exports=function(t){var e=0,r=t.viz.x_scale.rangeBand()-t.viz.border_width.x,n=0,o=t.viz.y_scale.rangeBand()-t.viz.border_width.y,i="M"+e+","+n+" L"+e+", "+o+" L"+r+",0 Z";return i}},function(t,e){"use strict";t.exports=function(t){var e=0,r=t.viz.x_scale.rangeBand()-t.viz.border_width.x,n=t.viz.y_scale.rangeBand()-t.viz.border_width.y,o=t.viz.y_scale.rangeBand()-t.viz.border_width.y,i="M"+e+", "+n+"   L"+r+", "+o+" L"+r+",0 Z";return i}},function(t,e,r){"use strict";var n=r(3);t.exports=function(t,e,r,o){function i(){if(d3.select(e).classed("hovering")){var n=Number(d3.select(t.root+" .viz_svg").attr("is_zoom"));if(0===n&&t.matrix.show_tile_tooltips&&null!==r&&(d3.selectAll(t.viz.root_tips+"_tile_tip").style("display","block"),r.show.apply(e,l),null!=t.tile_tip_callback)){var o=l[0];t.tile_tip_callback(o)}}}var a,s=o[0],l=[].slice.call(o),u=1e3;d3.select(e).classed("hovering",!0),n.each(["row","col"],function(e){d3.selectAll(t.root+" ."+e+"_label_group text").style("font-weight",function(t){var r,n=s[e+"_name"].replace(/_/g," ")===t.name;return r=n?"bold":"normal"})}),l.push(e),clearTimeout(a),a=setTimeout(i,u,e)}},function(t,e,r){"use strict";var n=r(3);t.exports=function(t,e,r){d3.select(e).classed("hovering",!1),d3.selectAll(t.viz.root_tips+"_tile_tip").style("display","none"),n.each(["row","col"],function(e){d3.selectAll(t.root+" ."+e+"_label_group text").style("font-weight","normal")}),null!=r&&r.hide()}},function(t,e){"use strict";t.exports=function(t,e){var r;r=e.pos_x in t.viz.x_scale.domain()?t.viz.x_scale(e.pos_x):0;var n=r+.5*t.viz.border_width.x,o=.5*t.viz.border_width.y;return"translate("+n+","+o+")"}},function(t,e){"use strict";t.exports=function(){function t(t){b=p(t),z=b.createSVGPoint(),document.body.appendChild(x)}function e(){return"n"}function r(){return[0,0]}function n(){return" "}function o(){var t=v();return{top:t.s.y,left:t.s.x}}function i(){var t=v();return{top:t.n.y-x.offsetHeight,left:t.n.x-x.offsetWidth/2}}function a(){var t=v();return{top:t.s.y,left:t.s.x-x.offsetWidth/2}}function s(){var t=v();return{top:t.e.y-x.offsetHeight/2,left:t.e.x}}function l(){var t=v();return{top:t.w.y-x.offsetHeight/2,left:t.w.x-x.offsetWidth}}function u(){var t=v();return{top:t.nw.y-x.offsetHeight,left:t.nw.x-x.offsetWidth}}function c(){var t=v();return{top:t.ne.y-x.offsetHeight,left:t.ne.x}}function f(){var t=v();return{top:t.sw.y,left:t.sw.x-x.offsetWidth}}function d(){var t=v();return{top:t.se.y,left:t.e.x}}function h(){var t=d3.select(document.createElement("div"));return t.style({position:"absolute",opacity:0,pointerEvents:"none",boxSizing:"border-box"}),t.node()}function p(t){return t=t.node(),"svg"==t.tagName.toLowerCase()?t:t.ownerSVGElement}function v(){var t=M||d3.event.target,e={},r=t.getScreenCTM(),n=t.getBBox(),o=n.width,i=n.height,a=n.x,s=n.y,l=document.documentElement.scrollTop||document.body.scrollTop,u=document.documentElement.scrollLeft||document.body.scrollLeft;return r.a=1,r.d=1,r.e=r.e+u,r.f=r.f+l,z.x=a,z.y=s,e.nw=z.matrixTransform(r),z.x=z.x+o,e.ne=z.matrixTransform(r),z.y=z.y+i,e.se=z.matrixTransform(r),z.x=z.x-o,e.sw=z.matrixTransform(r),z.y=z.y-i/2,e.w=z.matrixTransform(r),z.x=z.x+o,e.e=z.matrixTransform(r),z.x=z.x-o/2,z.y=z.y-i/2,e.n=z.matrixTransform(r),z.y=z.y+i,e.s=z.matrixTransform(r),e}function _(t){var e=d3.select(t).classed("hovering");e&&d3.selectAll(".d3-tip").transition().duration(250).style("opacity",0).style("display","none")}function m(t){var e={};return t&&"[object Function]"===e.toString.call(t)}var g=e,y=r,w=n,x=h(),b=null,z=null,M=null;t.show=function(){var e=Array.prototype.slice.call(arguments);e[e.length-1]instanceof SVGElement&&(M=e.pop());var r,n=w.apply(this,e),o=y.apply(this,e),i=g.apply(this,e),a=d3.select(x),s=0;for(a.html(n).style({opacity:1,"pointer-events":"all"}).style("z-index",99);s--;)a.classed(A[s],!1);if(r=k.get(i).apply(this),a.classed(i,!0).style({top:r.top+o[0]+"px",left:r.left+o[1]+"px"}),m(this)===!1){var l=d3.select(this).attr("class");l.indexOf("tile")>=0&&setTimeout(_,5e3,this)}return t},t.hide=function(){var e=d3.select(x);return e.style({opacity:0,"pointer-events":"none"}),t},t.attr=function(e){if(arguments.length<2&&"string"==typeof e)return d3.select(x).attr(e);var r=Array.prototype.slice.call(arguments);return d3.selection.prototype.attr.apply(d3.select(x),r),t},t.style=function(e){if(arguments.length<2&&"string"==typeof e)return d3.select(x).style(e);var r=Array.prototype.slice.call(arguments);return d3.selection.prototype.style.apply(d3.select(x),r),t},t.direction=function(e){return arguments.length?(g=null==e?e:d3.functor(e),t):g},t.offset=function(e){return arguments.length?(y=null==e?e:d3.functor(e),t):y},t.html=function(e){return arguments.length?(w=null==e?e:d3.functor(e),t):w};var k=d3.map({n:i,s:a,e:s,w:l,nw:u,ne:c,sw:f,se:d,south_custom:o}),A=k.keys();return t}},function(t,e,r){"use strict";var n=r(102);t.exports=function(t,e){var r,o=t.params;r=d3.select(o.viz.viz_svg+" .row_container").empty()?d3.select(o.viz.viz_svg).append("g").classed("row_container",!0).attr("transform","translate("+o.viz.norm_labels.margin.left+","+o.viz.clust.margin.top+")"):d3.select(o.viz.viz_svg).select(".row_container").attr("transform","translate("+o.viz.norm_labels.margin.left+","+o.viz.clust.margin.top+")"),d3.select(o.root+" .row_white_background").empty()&&r.append("rect").classed("row_white_background",!0).classed("white_bars",!0).attr("fill",o.viz.background_color).attr("width",o.viz.label_background.row).attr("height",30*o.viz.clust.dim.height+"px"),d3.select(o.root+" .row_label_container").empty()?r.append("g").classed("row_label_container",!0).attr("transform","translate("+o.viz.norm_labels.width.row+",0)").append("g").classed("row_label_zoom_container",!0):r.select(o.root+" .row_label_container").attr("transform","translate("+o.viz.norm_labels.width.row+",0)"),o.viz.ds_level===-1&&n(t,"all",e)}},function(t,e,r){"use strict";var n=r(2),o=r(103),i=r(104),a=r(132),s=r(3);t.exports=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"all",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,l=t.params,u=[];"all"===e?u=l.network_data.row_nodes:s.each(l.network_data.row_nodes,function(t){s.contains(e,t.name)&&u.push(t)});var c=d3.select(l.root+" .row_label_zoom_container").selectAll("g").data(u,function(t){return t.name}).enter().append("g").classed("row_label_group",!0),f=l.network_data.row_nodes_names;c.attr("transform",function(t){var e=s.indexOf(f,t.name);return"translate(0,"+l.viz.y_scale(e)+")"}),c.on("dblclick",function(e){var r="__data__",n=this[r].name;i(t,this,n),l.tile_click_hlight&&o(this,e.ini)}),a(l),c.insert("rect").style("opacity",0),c.append("text").attr("y",.5*l.viz.rect_height+.35*l.labels.default_fs_row).attr("text-anchor","end").style("font-size",l.labels.default_fs_row+"px").text(function(t){return n.normal_name(t)}).attr("pointer-events","none").style("opacity",0).style("cursor","default").transition().delay(r).duration(r).style("opacity",1),c.each(function(){var t=d3.select(this).select("text")[0][0].getBBox();d3.select(this).select("rect").attr("x",t.x).attr("y",0).attr("width",t.width).attr("height",l.viz.y_scale.rangeBand()).style("fill",function(){var t="yellow";return t}).style("opacity",function(t){var e=0;return 1===t.target&&(e=1),e})}),n.has(l.network_data.row_nodes[0],"value")&&c.append("rect").classed("row_bars",!0).attr("width",function(t){var e=0;return e=l.labels.bar_scale_row(Math.abs(t.value))}).attr("x",function(t){var e=0;return e=-l.labels.bar_scale_row(Math.abs(t.value))}).attr("height",l.viz.y_scale.rangeBand()).attr("fill",function(t){return t.value>0?l.matrix.bar_colors[0]:l.matrix.bar_colors[1]}).attr("opacity",.4)}},function(t,e){"use strict";t.exports=function(t,e,r){if(r!=t.click_hlight_row){var n=6,o=.85,i=n*t.viz.border_width.x;d3.selectAll(t.root+" .click_hlight").remove(),d3.select(e).append("rect").classed("click_hlight",!0).classed("row_top_hlight",!0).attr("width",t.viz.svg_dim.width).attr("height",i).attr("fill",t.matrix.hlight_color).attr("opacity",o),d3.select(e).append("rect").classed("click_hlight",!0).classed("row_bottom_hlight",!0).attr("width",t.viz.svg_dim.width).attr("height",i).attr("fill",t.matrix.hlight_color).attr("opacity",o).attr("transform",function(){var e=t.viz.y_scale.rangeBand()-i;return"translate(0,"+e+")"})}else d3.selectAll(t.root+" .click_hlight").remove(),t.click_hlight_row=-666}},function(t,e,r){"use strict";var n=r(105),o=r(106),i=r(88),a=r(131),s=r(79),l=r(3);t.exports=function(t,e,r){var u=t.params,c=a(u);if(1===c.zoom_y&&1===c.zoom_x){u.viz.inst_order.row="custom",o(t,"col"),d3.selectAll(u.root+" .toggle_col_order .btn").classed("active",!1),u.viz.run_trans=!0;var f=$.extend(!0,{},u.matrix.matrix),d=u.network_data.row_nodes,h=u.network_data.col_nodes,p=[];d.forEach(function(t){p.push(t.name)}),r=l.indexOf(p,r),p=[],h.forEach(function(t,e){p.push(f[r].row_data[e].value)});var v=d3.range(p.length).sort(function(t,e){return p[e]-p[t]});u.viz.x_scale.domain(v),u.matrix.orders.custom_row=v;var _;_=u.network_data.links.length>u.matrix.def_large_matrix?d3.select(u.root+" .viz_svg"):d3.select(u.root+" .viz_svg").transition().duration(2500);var m=u.network_data.col_nodes_names;_.select(".col_zoom_container").selectAll(".col_label_text").attr("transform",function(t){var e=l.indexOf(m,t.name);return"translate("+u.viz.x_scale(e)+")rotate(-90)"}),_.selectAll(".col_cat_group").attr("transform",function(t){var e=l.indexOf(m,t.name);return"translate("+u.viz.x_scale(e)+",0)"}),u.viz.ds_level===-1&&(_.selectAll(".tile").attr("transform",function(t){return"translate("+u.viz.x_scale(t.pos_x)+",0)"}),_.selectAll(".tile_up").attr("transform",function(t){return"translate("+u.viz.x_scale(t.pos_x)+",0)"}),_.selectAll(".tile_dn").attr("transform",function(t){return"translate("+u.viz.x_scale(t.pos_x)+",0)"})),d3.selectAll(u.root+" .row_label_group").select("rect").style("opacity",0),d3.select(e).select("rect").style("opacity",1),n(u),u.network_data.links.forEach(function(t){t.x=u.viz.x_scale(t.target),t.y=u.viz.y_scale(t.source)}),u.zoom_info=i(),setTimeout(function(){u.viz.run_trans=!1},2500),u.viz.ds_num_levels>0&&u.viz.ds_level>=0&&s(u)}}},function(t,e){"use strict";t.exports=function(t){var e=6,r=e*t.viz.border_width.x,n=e*t.viz.border_width.y;d3.select(t.root+" .top_hlight").attr("width",t.viz.x_scale.rangeBand()).attr("height",n).transition().duration(2500).attr("transform",function(){return"translate("+t.viz.x_scale(t.matrix.click_hlight_x)+",0)"}),d3.select(t.root+" .left_hlight").attr("width",r).attr("height",t.viz.y_scale.rangeBand()-.99*n).transition().duration(2500).attr("transform",function(){return"translate("+t.viz.x_scale(t.matrix.click_hlight_x)+","+.99*n+")"}),d3.select(t.root+" .right_hlight").attr("width",r).attr("height",t.viz.y_scale.rangeBand()-.99*n).transition().duration(2500).attr("transform",function(){var e=t.viz.x_scale(t.matrix.click_hlight_x)+t.viz.x_scale.rangeBand()-r;return"translate("+e+","+.99*n+")"}),d3.select(t.root+" .bottom_hlight").attr("width",function(){return t.viz.x_scale.rangeBand()-1.98*r}).attr("height",n).transition().duration(2500).attr("transform",function(){var e=t.viz.x_scale(t.matrix.click_hlight_x)+.99*r,o=t.viz.y_scale.rangeBand()-n;return"translate("+e+","+o+")"})}},function(t,e,r){"use strict";var n=r(107);t.exports=function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1500,o=t.params;"row"===e&&"clust"===o.viz.inst_order.col&&setTimeout(n,r,t,"row",!0),"col"===e&&"clust"===o.viz.inst_order.row&&setTimeout(n,r,t,"col",!0),"clust"!=o.viz.inst_order.row&&o.viz.dendro_filter.col===!1&&(d3.selectAll(o.root+" .col_dendro_group").style("opacity",0).on("mouseover",null).on("mouseout",null),d3.select(o.root+" .col_slider_group").style("opacity",0),d3.selectAll(o.root+" .col_dendro_crop_buttons").style("opacity",0).on("mouseover",null).on("mouseout",null)),"clust"!=o.viz.inst_order.col&&o.viz.dendro_filter.row===!1&&(d3.selectAll(o.root+" .row_dendro_group").style("opacity",0).on("mouseover",null).on("mouseout",null).on("click",null),d3.select(o.root+" .row_slider_group").style("opacity",0),d3.selectAll(o.root+" .row_dendro_crop_buttons").style("opacity",0).on("mouseover",null).on("mouseout",null))}},function(t,e,r){"use strict";var n=r(108),o=r(109),i=r(110),a=r(100),s=r(112),l=r(115);t.exports=function(t,e){function r(t,r,n){if(d3.select(t).classed("hovering")){var o=c.viz.root_tips+"_"+e+"_dendro_tip";d3.select(o+" .cat_graph").empty()&&null!==c.viz.cat_info[e]&&l(c,e,r,d[n],o,!0),d3.selectAll(c.viz.root_tips+"_"+e+"_dendro_tip").style("opacity",1)}}var u=arguments.length>2&&void 0!==arguments[2]&&arguments[2],c=t.params;"both"===e&&(e="row");var f;f="row"===e?"col":"row","clust"===c.viz.inst_order[f]&&d3.select(c.root+" ."+e+"_slider_group").style("opacity",1);var d;c.viz.show_dendrogram&&(d="row"===e?n(c):o(c),d3.select(t.params.root+" ."+e+"_dendro_crop_buttons").empty()===!1&&s(t,e));var h=c.viz.dendro_opacity,p=500;d3.selectAll(t.params.viz.root_tips+"_"+e+"_dendro_tip").remove();var v;d3.selectAll(c.root+" ."+e+"_dendro_group").empty()?v=!1:(v=!0,d3.selectAll(c.root+" ."+e+"_dendro_group").remove());var _=0,m=-5,g=a().attr("class",function(){var t=c.viz.root_tips.replace(".",""),r=t+" d3-tip "+t+"_"+e+"_dendro_tip";return r}).direction("nw").offset([_,m]).style("display","none").style("opacity",0);g.html(function(){var t='<div class="cluster_info_container"></div>Click for cluster information <br>and additional options.';return t}),u&&(v=!1);var y,w,x,b,z,M,k=d3.select(c.root+" ."+e+"_dendro_container").selectAll("path").data(d,function(t){return t.name}).enter().append("path").style("opacity",0).attr("class",e+"_dendro_group").style("fill","black");k.attr("d",function(t){"row"===e?(y=0,w=t.pos_top,x=30,b=t.pos_mid,z=0,M=t.pos_bot):(y=t.pos_top,w=0,x=t.pos_mid,b=30,z=t.pos_bot,M=0);var r="M"+y+","+w+" L"+x+", "+b+" L"+z+","+M+" Z";return r}),k.on("mouseover",function(n,o){d3.select(this).classed("hovering",!0),null!=t.params.dendro_callback&&t.params.dendro_callback(this),d3.select(c.viz.root_tips+"_"+e+"_dendro_tip").style("display","block"),i(c,this,n,e),g.show(n),d3.select(c.viz.root_tips+"_"+e+"_dendro_tip").style("opacity",0),setTimeout(r,p,this,n,o)}).on("mouseout",function(){"clust"===c.viz.inst_order[f]&&d3.select(this).style("opacity",h),d3.selectAll(c.root+" .dendro_shadow").remove(),d3.select(this).classed("hovering",!1),g.hide(this)}).on("click",function(r,n){$(c.root+" .dendro_info").modal("toggle");var o=r.all_names.join(", ");d3.select(c.root+" .dendro_info input").attr("value",o);var i=c.root+" .dendro_info";d3.selectAll(".dendro_info .cluster_info_container .cat_graph").remove(),null!==c.viz.cat_info[e]&&l(c,e,r,d[n],i),null!=t.params.dendro_click_callback&&t.params.dendro_click_callback(this)}).call(g);var A;A="clust"===c.viz.inst_order[f]?h:0,v?d3.select(c.root+" ."+e+"_dendro_container").selectAll("path").transition().delay(1e3).duration(1e3).style("opacity",A):d3.select(c.root+" ."+e+"_dendro_container").selectAll("path").style("opacity",A)}},function(t,e,r){"use strict";var n=r(3);t.exports=function(t){var e={},r=t.group_level.row,o=t.network_data.row_nodes,i=t.network_data.row_nodes_names;n.each(o,function(o){var a=o.group[r],s=n.indexOf(i,o.name),l=t.viz.y_scale(s),u=l+t.viz.y_scale.rangeBand();n.has(e,a)===!1&&(e[a]={},e[a].name_top=o.name,e[a].name_bot=o.name,e[a].pos_top=l,e[a].pos_bot=u,e[a].pos_mid=(l+u)/2,e[a].name=a,e[a].all_names=[],e[a].inst_rc="row"),e[a].all_names.push(o.name),l<e[a].pos_top&&(e[a].name_top=o.name,e[a].pos_top=l,e[a].pos_mid=(l+e[a].pos_bot)/2),u>e[a].pos_bot&&(e[a].name_bot=o.name,e[a].pos_bot=u,e[a].pos_mid=(e[a].pos_top+u)/2)});var a=[];return n.each(e,function(t){a.push(t)}),a}},function(t,e,r){"use strict";var n=r(3);t.exports=function(t){var e={},r=t.group_level.col,o=t.network_data.col_nodes,i=t.network_data.col_nodes_names;n.each(o,function(o){var a=o.group[r],s=n.indexOf(i,o.name),l=t.viz.x_scale(s),u=l+t.viz.x_scale.rangeBand();n.has(e,a)===!1&&(e[a]={},e[a].name_top=o.name,e[a].name_bot=o.name,e[a].pos_top=l,e[a].pos_bot=u,e[a].pos_mid=(l+u)/2,e[a].name=a,e[a].all_names=[],e[a].inst_rc="col"),e[a].all_names.push(o.name),l<e[a].pos_top&&(e[a].name_top=o.name,e[a].pos_top=l,e[a].pos_mid=(l+e[a].pos_bot)/2),u>e[a].pos_bot&&(e[a].name_bot=o.name,e[a].pos_bot=u,e[a].pos_mid=(e[a].pos_top+u)/2)});var a=[];return n.each(e,function(t){a.push(t)}),a}},function(t,e,r){"use strict";var n=r(111);t.exports=function(t,e,r,o){function i(){d3.select(e).classed("hovering")&&t.is_slider_drag===!1&&(d3.select(e).style("opacity",.7),d3.select(t.viz.viz_svg).classed("running_update")===!1&&a())}function a(){"row"===o?"clust"===t.viz.inst_order.col&&n(t,e,o,r):"col"===o?"clust"===t.viz.inst_order.row&&n(t,e,o,r):"both"===o&&("clust"===t.viz.inst_order.col&&n(t,e,"row",r),"clust"===t.viz.inst_order.row&&n(t,e,"col",r))}d3.selectAll(t.root+" ."+o+"_dendro_crop_buttons")[0].length>1?setTimeout(i,500):d3.selectAll(t.root+" .dendro_shadow").remove()}},function(t,e){"use strict";t.exports=function(t,e,r,n){var o,i=.2;d3.selectAll(t.root+" .dendro_shadow").remove(),"row"==r?(d3.select(t.root+" .clust_group").append("rect").attr("width",t.viz.clust.dim.width+"px").attr("height",n.pos_top+"px").attr("fill","black").classed("dendro_shadow",!0).attr("opacity",i),o=t.viz.clust.dim.height-n.pos_bot,d3.select(t.root+" .clust_group").append("rect").attr("width",t.viz.clust.dim.width+"px").attr("height",o+"px").attr("transform","translate(0,"+n.pos_bot+")").attr("fill","black").classed("dendro_shadow",!0).attr("opacity",i)):"col"===r&&(d3.select(t.root+" .clust_group").append("rect").attr("width",n.pos_top+"px").attr("height",t.viz.clust.dim.height+"px").attr("fill","black").classed("dendro_shadow",!0).attr("opacity",i),o=t.viz.clust.dim.width-n.pos_bot,d3.select(t.root+" .clust_group").append("rect").attr("width",o+"px").attr("height",t.viz.clust.dim.height+"px").attr("transform","translate("+n.pos_bot+",0)").attr("fill","black").classed("dendro_shadow",!0).attr("opacity",i))}},function(t,e,r){"use strict";var n=r(108),o=r(109),i=r(100),a=r(110),s=r(113),l=r(114);t.exports=function(t,e){function r(t){d3.select(t).classed("hovering")&&d3.selectAll(f.viz.root_tips+"_"+e+"_dendro_crop_tip").style("opacity",1).style("display","block")}var u,c,f=t.params,d=.6*f.viz.dendro_opacity;"row"===e?(u=n(f),c="col"):(u=o(f),c="row");var h=5,p=-5,v=i().attr("class",function(){var t=f.viz.root_tips.replace(".",""),r=t+" d3-tip "+t+"_"+e+"_dendro_crop_tip";return r}).direction("nw").style("display","none").offset([h,p]),_=500;d3.selectAll(f.viz.root_tips+"_"+e+"_dendro_crop_tip").remove(),d3.selectAll(f.root+" ."+e+"_dendro_crop_buttons").remove();var m,g,y,w,x,b,z,M,k,A,E=45,N=.25,S=e+"_dendro_crop_buttons";d3.select(t.params.root+" ."+e+"_dendro_icons_group").classed("ran_filter")===!1?(m=d3.select(f.root+" ."+e+"_dendro_icons_group").selectAll("path").data(u,function(t){return t.name}).enter().append("path").classed(S,!0).attr("d",function(t){M=10,k=10;var r=t.pos_bot-t.pos_top;"row"===e?(r<E&&(M=r*N),g=k,y=-M,w=0,x=0,b=k,z=M,A=M):(r<E&&(k=r*N),g=-k,y=M,w=0,x=0,b=k,z=M,A=k);var n="__data__";d3.select(this)[0][0][n].tri_dim=A;var o="M"+g+","+y+" L"+w+", "+x+" L"+b+","+z+" Z";return o}),v.html(function(){var t="Click to crop cluster";return t})):(m=d3.select(f.root+" ."+e+"_dendro_icons_group").selectAll("path").data(u,function(t){return t.name}).enter().append("path").classed(S,!0).attr("d",function(t){M=10,k=12;var r=t.pos_bot-t.pos_top;"row"===e?(r<E&&(M=r*N),g=0,y=-M,w=k,x=0,b=0,z=M):(r<E&&(k=r*N),g=-k,y=0,w=0,x=M,b=k,z=0);var n="__data__";d3.select(this)[0][0][n].tri_dim=10;var o="M"+g+","+y+" L"+w+", "+x+" L"+b+","+z+" Z";return o}),v.html(function(){var t="Click to undo crop";return t})),m.style("cursor","pointer").style("opacity",function(){var t;return t=d}).attr("transform",function(t){var r,n,o;return"row"===e?(n=f.viz.uni_margin,o=t.pos_mid):(n=t.pos_mid,o=f.viz.uni_margin),r="translate("+n+","+o+")"}).on("mouseover",function(t){d3.select(this).classed("hovering",!0),v.show(t),a(f,this,t,e),d3.selectAll(f.viz.root_tips+"_"+e+"_dendro_crop_tip").style("opacity",0).style("display","block"),setTimeout(r,_,this)}).on("mouseout",function(){d3.select(this).classed("hovering",!1),d3.selectAll(f.root+" .dendro_shadow").remove(),d3.select(this).style("opacity",d),v.hide(this)}).on("click",function(r){d3.select(this).style("opacity",.9).transition().duration(1e3).style("opacity",0),d3.selectAll(f.root+" .dendro_shadow").remove(),t.params.dendro_filter.row===!1&&t.params.dendro_filter.col===!1&&t.params.cat_filter.row===!1&&t.params.cat_filter.col===!1?(d3.select(t.params.root+" ."+e+"_dendro_icons_group").attr("transform","translate(0,0), scale(1,1)").classed("ran_filter",!0),d3.select(t.params.root+" ."+c+"_dendro_icons_group").attr("transform","translate(0,0), scale(1,1)"),d3.select(t.params.root+" ."+e+"_slider_group").style("display","none"),d3.select(t.params.root+" ."+c+"_dendro_icons_container").style("display","none"),d3.select(t.params.root+" .crop_button").style("opacity",.2)):(d3.select(t.params.root+" ."+e+"_dendro_icons_group").attr("transform","translate(0,0), scale(1,1)").classed("ran_filter",!1),d3.select(t.params.root+" ."+c+"_dendro_icons_group").attr("transform","translate(0,0), scale(1,1)"),"clust"===f.viz.inst_order[c]&&d3.select(t.params.root+" ."+e+"_slider_group").style("display","block"),d3.select(t.params.root+" ."+c+"_dendro_icons_container").style("display","block"),d3.select(t.params.root+" .crop_button").style("opacity",1)),s(t,r,e)}).call(v),"clust"!=f.viz.inst_order[c]&&d3.select(f.root+" ."+e+"_dendro_icons_group").selectAll("path").style("display","none"),l(f,f.zoom_info,e)}},function(t,e){"use strict";t.exports=function(t,e,r){var n={};if(t.params.dendro_filter.row===!1&&t.params.dendro_filter.col===!1&&t.params.cat_filter.row===!1&&t.params.cat_filter.col===!1){d3.select(t.params.root+" ."+r+"_slider_group").style("opacity",.35).style("pointer-events","none"),n[r]=e.all_names;var o=t.params.network_data[r+"_nodes_names"],i=t.params.network_data.row_nodes,a=t.params.network_data.col_nodes;
t.filter_viz_using_names(n),t.params.inst_nodes.row_nodes=i,t.params.inst_nodes.col_nodes=a,d3.selectAll(t.params.root+" .dendro_shadow").transition().duration(1e3).style("opacity",0).remove(),t.params.dendro_filter[r]=o}else n[r]=t.params.dendro_filter[r],t.filter_viz_using_names(n),t.params.dendro_filter[r]=!1}},function(t,e){"use strict";t.exports=function(t,e,r){function n(t,e){var r,n=10;if(e*t<n)r=1;else{var o=n/e;r=t/o}return r}"row"===r?d3.select(t.root+" .row_dendro_icons_group").selectAll("path").attr("transform",function(r){var o=t.viz.uni_margin,i=r.pos_mid,a=e.zoom_y,s=d3.select(this).data()[0].tri_dim,l=n(a,s);return"translate("+o+","+i+") scale(1, "+1/l+")"}):d3.select(t.root+" .col_dendro_icons_group").selectAll("path").attr("transform",function(r){var o=r.pos_mid,i=t.viz.uni_margin,a=e.zoom_x,s=d3.select(this).data()[0].tri_dim,l=n(a,s);return"translate("+o+","+i+") scale("+1/l+", 1)"})}},function(t,e,r){"use strict";var n=r(116),o=r(3),i=r(129),a=r(130);t.exports=function(t,e,r,s,l){var u=arguments.length>5&&void 0!==arguments[5]&&arguments[5];"both"===e&&(e="row");var c=n(t,r,e);if(c.length>0){var f=d3.select(l+" .cluster_info_container"),d=370,h=27,p=177,v=23,_=4,m=5,g=150,y=!1;null!=c[0].bar_data[0][m]&&(d+=100,p=p+g-47,y=!0);var w=s.all_names.length,x=_;if(y){x=m;var b=c[0].bar_data;w=0,o.each(b,function(t){w+=t[m]})}var z=3,M=25,k=20;o.each(c.slice(0,z),function(t){var e=t.bar_data.length;e>M&&(e=M),k+=h*(e+1)}),u&&f.append("text").text("Cluster Information");var A=f.append("div").style("margin-top","5px").classed("cat_graph",!0).append("svg").style("height",k+"px").style("width",d+"px");f.style("margin-bottom","5px"),A.append("rect").classed("cat_background",!0).attr("height",k+"px").attr("width",d+"px").attr("fill","white").attr("opacity",1),c=c.slice(0,z);var E=d3.scale.linear().domain([0,1e5]).range([20,30]),N=h;if(o.each(c,function(e){var r=e.bar_data[0][x],n=E(r),o=A.append("g").classed("cat_graph_group",!0).attr("transform","translate(10, "+N+")"),s=o.append("g").classed("cat_bar_container",!0).attr("transform","translate(0, 10)"),l=s.selectAll("g").data(e.bar_data).enter().append("g").attr("transform",function(t,e){var r=e*v;return"translate(0,"+r+")"});i(t,e,o,h,x,M,l),a(t,o,l,_,y,n,x,w),N+=h*(e.bar_data.length+1)}),u){var S=d3.select(l),C=S.style("top").split(".px")[0],T=S.style("left").split(".px")[0],O=0,B=0;"row"===e?(O=0,B=p):(O=k+32,B=30),S.style("top",function(){var t=String(parseInt(C,10)-O)+"px";return t}).style("left",function(){var t=String(parseInt(T,10)-B)+"px";return t})}}}},function(t,e,r){"use strict";var n=r(117),o=r(3);t.exports=function(t,e,r){"both"===r&&(r="row");var i,a=e.all_names,s=[],l=t.network_data[r+"_nodes"],u=null,c=!1;o.each(l,function(t){i=t.name,a.indexOf(i)>=0&&s.push(t)});var f=[];if(null!==t.viz.cat_info[r]){for(var d,h,p,v=t.viz.cat_info[r],m=o.keys(v),g=[],y=[],w=0;w<m.length;w++)p="cat-"+String(w),"cat_strings"===t.viz.cat_info[r][p].type?(d=t.viz.cat_names[r][p],y.push(d),g.push(p)):"number in clust"===t.viz.cat_names[r][p]&&(u=p,c=!0);var x,b={},z={},M=10,k=4;c&&(k=5);var A;if(A=d===p,y.length>0){var E,N=a.length;o.each(g,function(e){if(h=e.split("-")[1],d=y[h],A)if(e.indexOf("-")>=0){var i=parseInt(e.split("-")[1],M)+1;d="Category "+String(i)}else d="Category";b[d]={},o.each(s,function(t){E=t[e],E.indexOf(": ")>=0&&(E=E.split(": ")[1]),E in b[d]?(b[d][E].num_nodes=b[d][E].num_nodes+1,null!=u&&(b[d][E].num_nodes_ds=b[d][E].num_nodes_ds+parseInt(t[u].split(": ")[1],M))):(b[d][E]={},b[d][E].num_nodes=1,null!=u&&(b[d][E].num_nodes_ds=parseInt(t[u].split(": ")[1],M)))}),z={},z.type_name=d,z.num_in_clust=N,x=[];var a,l,c=b[d];for(var p in c){var v=t.viz.cat_info[r][e].cat_hist[p],m=t.network_data[r+"_nodes"].length,g=v/m;l=A?p:d+": "+p;var w=c[p].num_nodes,S=w,C=n(S,N,g);if(_.has(c[p],"num_nodes_ds"))var T=c[p].num_nodes_ds;else T=null;a=t.viz.cat_colors[r][e][l],x.push([e,l,c[p],a,w,T,C])}x.sort(function(t,e){return e[k]-t[k]}),z.bar_data=x,f.push(z)})}}return f}},function(t,e,r){"use strict";var n=r(118),o=r(13),i=o.create();i.import(r(119)),t.exports=function(t,e,r){function o(t,e,r){var n=u(e)/(u(t)*u(e-t));return r=n*(Math.pow(r,t)*Math.pow(1-r,e-t))}function a(t,e,r){for(var n,i,a=0,s=t;s<e+1;s++)n=s,i=o(n,e,r),a+=i;return a}function s(t,e,r){for(var o=e*r,i=Math.sqrt(e*r*(1-r)),a=(t-o)/i,s=n.z,u=n.p,c=-1,f=!1,d=0;d<s.length;d++){var h=s[d];a<h&&f===!1&&(c=d,f=!0)}return c===-1&&(c=s.length-1),l=u[c]}var l,u=i.factorial;return l=a(t,e,r),isNaN(l)&&(l=s(t,e,r)),l}},function(t,e){"use strict";t.exports={p:[.5,.4800611941616275,.460172162722971,.4403823076297575,.42074029056089696,.4012936743170763,.3820885778110473,.3631693488243809,.3445782583896758,.32635522028791997,.3085375387259869,.29115968678834636,.27425311775007355,.2578461108058647,.24196365222307303,.2266273523768682,.2118553985833967,.19766254312269238,.18406012534675947,.17105612630848183,.15865525393145707,.1468590563758959,.13566606094638267,.12507193563715024,.11506967022170828,.10564977366685535,.09680048458561036,.08850799143740196,.08075665923377107,.0735292596096483,.06680720126885807,.06057075800205901,.054799291699557974,.049471468033648075,.044565462758543006,.040059156863817086,.03593031911292579,.03215677479561371,.028716559816001783,.02558805952163861,.022750131948179195,.020182215405704383,.017864420562816542,.0157776073910905,.013903447513498595,.012224472655044696,.010724110021675795,.009386705534838566,.008197535924596114,.007142810735271415,.006209665325776132,.005386145954066684,.004661188023718747,.004024588542758303,.0034669738030406647,.002979763235054555,.002555130330427929,.0021859614549132405,.0018658133003840339,.0015888696473648667,.0013498980316300933,.0011442068310226977,.0009676032132183563,.0008163523128285604,.0006871379379158471,.0005770250423907659,.00048342414238377663,.0004040578018640207,.0003369292656768799,.00028029327681617744,.00023262907903552502,.00019261557563563279,.00015910859015753364,.00013112015442048433,.00010779973347738823,8841728520080377e-20,7234804392511979e-20,59058912418922374e-21,48096344017602614e-21,39075596597787456e-21,3167124183311986e-20,2560881647404149e-20,20657506912546683e-21,16623763729652213e-21,1334574901590631e-20,10688525774934402e-21,8539905470991794e-21,6806876599334031e-21,5412543907703841e-21,4293514469971858e-21,33976731247300535e-22,26822957796388472e-22,2112454702502842e-21,16596751443714555e-22,13008074539172771e-22,10170832425687032e-22,7.933281519755892e-7,6.173073720091925e-7,4.791832765903185e-7,3.710674079633327e-7,2.8665157187919333e-7,2.2090503226954194e-7,1.6982674071475937e-7,1.3024322953320117e-7,9.96442631693347e-8,7.6049605164887e-8,5.790134039964557e-8,4.397711594005869e-8,3.332044848542845e-8,2.518491005446105e-8,1.898956246588768e-8,1.4283479893922661e-8,1.0717590258310852e-8,8.022391850663474e-9,5.99037140106353e-9,4.462172453901611e-9,3.3157459783261365e-9,2.4578650618080152e-9,1.8175078630994235e-9,1.3407124440918662e-9,9.865876450376946e-10,7.242291705137605e-10,5.303423262948808e-10,3.8741473466756636e-10,2.823158037043268e-10,2.0522634252189396e-10,1.4882282217622966e-10,1.0765746385121517e-10,7.768847581709776e-11,5.592507575942645e-11,4.016000583859088e-11,2.876854173604311e-11,2.055788909399508e-11,1.4654650977302715e-11,1.0420976987965154e-11,7.392257778017794e-12,5.230957544144525e-12,3.692499427235561e-12,2.600126965638173e-12,1.826431061976961e-12,1.279812543885835e-12,8.945889558769844e-13,6.23784446333152e-13,4.3388950271780343e-13,3.010627981117422e-13,2.0838581586720548e-13,1.4388386381575764e-13,9.910342749547509e-14,6.809224890620016e-14,4.6670115887190274e-14,3.1908916729108844e-14,2.1762912097085575e-14,1.4806537490047908e-14,1.0048965656526223e-14,6.803311540773901e-15,4.594627435778562e-15,3.095358771958668e-15,2.0801863521393674e-15,1.394517146659261e-15,9.325575771681205e-16,6.22096057427174e-16,4.139701816273122e-16,2.747959392398221e-16,1.8196213635266084e-16,1.2019351542735647e-16,7.919726314642476e-17,5.2055697448902465e-17,3.413148326458146e-17,2.232393197288031e-17,1.456514112590909e-17,9.47953482220325e-18,6.154425590850395e-18,3.985804962848151e-18,2.5749715380118873e-18,1.6594208699647519e-18,1.0667637375474856e-18,6.840807685935497e-19,4.375964799309017e-19,2.7923343749396233e-19,1.7774117841455144e-19,1.1285884059538324e-19,7.148417011269684e-20,4.516591491435403e-20,2.846677408460209e-20,1.7897488120140146e-20,1.1224633591327901e-20,7.022284240441541e-21,4.38238629906646e-21,2.7281535713460872e-21,1.6941535024881097e-21,1.0494515075362604e-21,6.484814453077208e-22,3.9972212057261192e-22,2.4577864834723153e-22,1.507493168810159e-22,9.223413524939353e-23,5.629282311376514e-23,3.4271987941135974e-23,2.0813752194932085e-23,1.2609160670206559e-23],z:[0,.05,.1,.15000000000000002,.2,.25,.30000000000000004,.35000000000000003,.4,.45,.5,.55,.6000000000000001,.65,.7000000000000001,.75,.8,.8500000000000001,.9,.9500000000000001,1,1.05,1.1,1.1500000000000001,1.2000000000000002,1.25,1.3,1.35,1.4000000000000001,1.4500000000000002,1.5,1.55,1.6,1.6500000000000001,1.7000000000000002,1.75,1.8,1.85,1.9000000000000001,1.9500000000000002,2,2.0500000000000003,2.1,2.15,2.2,2.25,2.3000000000000003,2.35,2.4000000000000004,2.45,2.5,2.5500000000000003,2.6,2.6500000000000004,2.7,2.75,2.8000000000000003,2.85,2.9000000000000004,2.95,3,3.0500000000000003,3.1,3.1500000000000004,3.2,3.25,3.3000000000000003,3.35,3.4000000000000004,3.45,3.5,3.5500000000000003,3.6,3.6500000000000004,3.7,3.75,3.8000000000000003,3.85,3.9000000000000004,3.95,4,4.05,4.1000000000000005,4.15,4.2,4.25,4.3,4.3500000000000005,4.4,4.45,4.5,4.55,4.6000000000000005,4.65,4.7,4.75,4.800000000000001,4.8500000000000005,4.9,4.95,5,5.050000000000001,5.1000000000000005,5.15,5.2,5.25,5.300000000000001,5.3500000000000005,5.4,5.45,5.5,5.550000000000001,5.6000000000000005,5.65,5.7,5.75,5.800000000000001,5.8500000000000005,5.9,5.95,6,6.050000000000001,6.1000000000000005,6.15,6.2,6.25,6.300000000000001,6.3500000000000005,6.4,6.45,6.5,6.550000000000001,6.6000000000000005,6.65,6.7,6.75,6.800000000000001,6.8500000000000005,6.9,6.95,7,7.050000000000001,7.1000000000000005,7.15,7.2,7.25,7.300000000000001,7.3500000000000005,7.4,7.45,7.5,7.550000000000001,7.6000000000000005,7.65,7.7,7.75,7.800000000000001,7.8500000000000005,7.9,7.95,8,8.05,8.1,8.15,8.200000000000001,8.25,8.3,8.35,8.4,8.450000000000001,8.5,8.55,8.6,8.65,8.700000000000001,8.75,8.8,8.85,8.9,8.950000000000001,9,9.05,9.1,9.15,9.200000000000001,9.25,9.3,9.35,9.4,9.450000000000001,9.5,9.55,9.600000000000001,9.65,9.700000000000001,9.75,9.8,9.850000000000001,9.9,9.950000000000001]}},function(t,e,r){"use strict";function n(t,e,n,i){var a=n(r(121)),s=r(46),l=i("factorial",{number:function(t){if(t<0)throw new Error("Value must be non-negative");return a(t+1)},BigNumber:function(t){if(t.isNegative())throw new Error("Value must be non-negative");return a(t.plus(1))},"Array | Matrix":function(t){return o(t,l)}});return l.toTex={1:"\\left(${args[0]}\\right)"+s.operators.factorial},l}var o=r(120);e.name="factorial",e.factory=n},function(t,e){"use strict";t.exports=function t(e,r,n){return e&&"function"==typeof e.map?e.map(function(e){return t(e,r,n)}):r(e)}},function(t,e,r){"use strict";function n(t,e,n,l){function u(r){if(r.isZero())return new t.BigNumber(1);for(var n=e.precision+(0|Math.log(r.toNumber())),o=t.BigNumber.clone({precision:n}),i=new o(r),a=r.toNumber()-1;a>1;)i=i.times(a),a--;return new t.BigNumber(i.toPrecision(t.BigNumber.precision))}var c=n(r(122)),f=n(r(125)),d=l("gamma",{number:function(t){var e,r;if(i(t)){if(t<=0)return isFinite(t)?1/0:NaN;if(t>171)return 1/0;for(var n=t-2,o=t-1;n>1;)o*=n,n--;return 0==o&&(o=1),o}if(t<.5)return Math.PI/(Math.sin(Math.PI*t)*d(1-t));if(t>=171.35)return 1/0;if(t>85){var l=t*t,u=l*t,c=u*t,f=c*t;return Math.sqrt(2*Math.PI/t)*Math.pow(t/Math.E,t)*(1+1/(12*t)+1/(288*l)-139/(51840*u)-571/(2488320*c)+163879/(209018880*f)+5246819/(75246796800*f*t))}--t,r=s[0];for(var h=1;h<s.length;++h)r+=s[h]/(t+h);return e=t+a+.5,Math.sqrt(2*Math.PI)*Math.pow(e,t+.5)*Math.exp(-e)*r},Complex:function(e){var r,n;if(0==e.im)return d(e.re);e=new t.Complex(e.re-1,e.im),n=new t.Complex(s[0],0);for(var o=1;o<s.length;++o){var i=e.re+o,l=i*i+e.im*e.im;0!=l?(n.re+=s[o]*i/l,n.im+=-(s[o]*e.im)/l):n.re=s[o]<0?-(1/0):1/0}r=new t.Complex(e.re+a+.5,e.im);var u=Math.sqrt(2*Math.PI);e.re+=.5;var h=f(r,e);0==h.im?h.re*=u:0==h.re?h.im*=u:(h.re*=u,h.im*=u);var p=Math.exp(-r.re);return r.re=p*Math.cos(-r.im),r.im=p*Math.sin(-r.im),c(c(h,r),n)},BigNumber:function(e){if(e.isInteger())return e.isNegative()||e.isZero()?new t.BigNumber(1/0):u(e.minus(1));if(!e.isFinite())return new t.BigNumber(e.isNegative()?NaN:1/0);throw new Error("Integer BigNumber expected")},"Array | Matrix":function(t){return o(t,d)}});return d.toTex={1:"\\Gamma\\left(${args[0]}\\right)"},d}var o=r(120),i=r(19).isInteger,a=4.7421875,s=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-9837447530487956e-20,.0001580887032249125,-.00021026444172410488,.00021743961811521265,-.0001643181065367639,8441822398385275e-20,-26190838401581408e-21,36899182659531625e-22];e.name="gamma",e.factory=n},function(t,e,r){"use strict";function n(t,e,n,a){var s=r(46),l=n(r(44)),u=n(r(45)),c=n(r(123)),f=n(r(40)),d=n(r(124)),h=n(r(51)),p=t.DenseMatrix,v=t.SparseMatrix,_=a("multiply",o({"Array, Array":function(e,r){m(i.size(e),i.size(r));var n=_(l(e),l(r));return t.isMatrix(n)?n.valueOf():n},"Matrix, Matrix":function(t,e){var r=t.size(),n=e.size();return m(r,n),1===r.length?1===n.length?g(t,e,r[0]):y(t,e):1===n.length?x(t,e):b(t,e)},"Matrix, Array":function(t,e){return _(t,l(e))},"Array, Matrix":function(t,e){return _(l(t,e.storage()),e)},"Matrix, any":function(t,e){var r;switch(t.storage()){case"sparse":r=d(t,e,c,!1);break;case"dense":r=h(t,e,c,!1)}return r},"any, Matrix":function(t,e){var r;switch(e.storage()){case"sparse":r=d(e,t,c,!0);break;case"dense":r=h(e,t,c,!0)}return r},"Array, any":function(t,e){return h(l(t),e,c,!1).valueOf()},"any, Array":function(t,e){return h(l(e),t,c,!0).valueOf()},"any, any":c,"Array | Matrix | any, Array | Matrix | any, ...any":function(t,e,r){for(var n=_(t,e),o=0;o<r.length;o++)n=_(n,r[o]);return n}},c.signatures)),m=function(t,e){switch(t.length){case 1:switch(e.length){case 1:if(t[0]!==e[0])throw new RangeError("Dimension mismatch in multiplication. Vectors must have the same length");break;case 2:if(t[0]!==e[0])throw new RangeError("Dimension mismatch in multiplication. Vector length ("+t[0]+") must match Matrix rows ("+e[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+e.length+" dimensions)")}break;case 2:switch(e.length){case 1:if(t[1]!==e[0])throw new RangeError("Dimension mismatch in multiplication. Matrix columns ("+t[1]+") must match Vector length ("+e[0]+")");break;case 2:if(t[1]!==e[0])throw new RangeError("Dimension mismatch in multiplication. Matrix A columns ("+t[1]+") must match Matrix B rows ("+e[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+e.length+" dimensions)")}break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix A has "+t.length+" dimensions)")}},g=function(t,e,r){if(0===r)throw new Error("Cannot multiply two empty vectors");var n,o=t._data,i=t._datatype,s=e._data,l=e._datatype,f=u,d=c;i&&l&&i===l&&"string"==typeof i&&(n=i,f=a.find(u,[n,n]),d=a.find(c,[n,n]));for(var h=d(o[0],s[0]),p=1;p<r;p++)h=f(h,d(o[p],s[p]));return h},y=function(t,e){switch(e.storage()){case"dense":return w(t,e)}throw new Error("Not implemented")},w=function(t,e){var r,n=t._data,o=t._size,i=t._datatype,s=e._data,l=e._size,f=e._datatype,d=o[0],h=l[1],v=u,_=c;i&&f&&i===f&&"string"==typeof i&&(r=i,v=a.find(u,[r,r]),_=a.find(c,[r,r]));for(var m=[],g=0;g<h;g++){for(var y=_(n[0],s[0][g]),w=1;w<d;w++)y=v(y,_(n[w],s[w][g]));m[g]=y}return new p({data:m,size:[h],datatype:r})},x=function(t,e){switch(t.storage()){case"dense":return z(t,e);case"sparse":return A(t,e)}},b=function(t,e){switch(t.storage()){case"dense":switch(e.storage()){case"dense":return M(t,e);case"sparse":return k(t,e)}break;case"sparse":switch(e.storage()){case"dense":return E(t,e);case"sparse":return N(t,e)}}},z=function(t,e){var r,n=t._data,o=t._size,i=t._datatype,s=e._data,l=e._datatype,f=o[0],d=o[1],h=u,v=c;i&&l&&i===l&&"string"==typeof i&&(r=i,h=a.find(u,[r,r]),v=a.find(c,[r,r]));for(var _=[],m=0;m<f;m++){for(var g=n[m],y=v(g[0],s[0]),w=1;w<d;w++)y=h(y,v(g[w],s[w]));_[m]=y}return new p({data:_,size:[f],datatype:r})},M=function(t,e){var r,n=t._data,o=t._size,i=t._datatype,s=e._data,l=e._size,f=e._datatype,d=o[0],h=o[1],v=l[1],_=u,m=c;i&&f&&i===f&&"string"==typeof i&&(r=i,_=a.find(u,[r,r]),m=a.find(c,[r,r]));for(var g=[],y=0;y<d;y++){var w=n[y];g[y]=[];for(var x=0;x<v;x++){for(var b=m(w[0],s[0][x]),z=1;z<h;z++)b=_(b,m(w[z],s[z][x]));g[y][x]=b}}return new p({data:g,size:[d,v],datatype:r})},k=function(t,e){var r=t._data,n=t._size,o=t._datatype,i=e._values,s=e._index,l=e._ptr,d=e._size,h=e._datatype;if(!i)throw new Error("Cannot multiply Dense Matrix times Pattern only Matrix");var p,_=n[0],m=d[1],g=u,y=c,w=f,x=0;o&&h&&o===h&&"string"==typeof o&&(p=o,g=a.find(u,[p,p]),y=a.find(c,[p,p]),w=a.find(f,[p,p]),x=a.convert(0,p));for(var b=[],z=[],M=[],k=new v({values:b,index:z,ptr:M,size:[_,m],datatype:p}),A=0;A<m;A++){M[A]=z.length;var E=l[A],N=l[A+1];if(N>E)for(var S=0,C=0;C<_;C++){for(var T,O=C+1,B=E;B<N;B++){var F=s[B];S!==O?(T=y(r[C][F],i[B]),S=O):T=g(T,y(r[C][F],i[B]))}S!==O||w(T,x)||(z.push(C),b.push(T))}}return M[m]=z.length,k},A=function(t,e){var r=t._values,n=t._index,o=t._ptr,i=t._datatype;if(!r)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var s,l=e._data,d=e._datatype,h=t._size[0],p=e._size[0],_=[],m=[],g=[],y=u,w=c,x=f,b=0;i&&d&&i===d&&"string"==typeof i&&(s=i,y=a.find(u,[s,s]),w=a.find(c,[s,s]),x=a.find(f,[s,s]),b=a.convert(0,s));var z=[],M=[];g[0]=0;for(var k=0;k<p;k++){var A=l[k];if(!x(A,b))for(var E=o[k],N=o[k+1],S=E;S<N;S++){var C=n[S];M[C]?z[C]=y(z[C],w(A,r[S])):(M[C]=!0,m.push(C),z[C]=w(A,r[S]))}}for(var T=m.length,O=0;O<T;O++){var B=m[O];_[O]=z[B]}return g[1]=m.length,new v({values:_,index:m,ptr:g,size:[h,1],datatype:s})},E=function(t,e){var r=t._values,n=t._index,o=t._ptr,i=t._datatype;if(!r)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var s,l=e._data,d=e._datatype,h=t._size[0],p=e._size[0],_=e._size[1],m=u,g=c,y=f,w=0;i&&d&&i===d&&"string"==typeof i&&(s=i,m=a.find(u,[s,s]),g=a.find(c,[s,s]),y=a.find(f,[s,s]),w=a.convert(0,s));for(var x=[],b=[],z=[],M=new v({values:x,index:b,ptr:z,size:[h,_],datatype:s}),k=[],A=[],E=0;E<_;E++){z[E]=b.length;for(var N=E+1,S=0;S<p;S++){var C=l[S][E];if(!y(C,w))for(var T=o[S],O=o[S+1],B=T;B<O;B++){var F=n[B];A[F]!==N?(A[F]=N,b.push(F),k[F]=g(C,r[B])):k[F]=m(k[F],g(C,r[B]))}}for(var j=z[E],L=b.length,R=j;R<L;R++){var I=b[R];x[R]=k[I]}}return z[_]=b.length,M},N=function(t,e){var r,n=t._values,o=t._index,i=t._ptr,s=t._datatype,l=e._values,f=e._index,d=e._ptr,h=e._datatype,p=t._size[0],_=e._size[1],m=n&&l,g=u,y=c;s&&h&&s===h&&"string"==typeof s&&(r=s,g=a.find(u,[r,r]),y=a.find(c,[r,r]));for(var w,x,b,z,M,k,A,E,N=m?[]:void 0,S=[],C=[],T=new v({values:N,index:S,ptr:C,size:[p,_],datatype:r}),O=m?[]:void 0,B=[],F=0;F<_;F++){C[F]=S.length;var j=F+1;for(M=d[F],k=d[F+1],z=M;z<k;z++)if(E=f[z],m)for(x=i[E],b=i[E+1],w=x;w<b;w++)A=o[w],B[A]!==j?(B[A]=j,S.push(A),O[A]=y(l[z],n[w])):O[A]=g(O[A],y(l[z],n[w]));else for(x=i[E],b=i[E+1],w=x;w<b;w++)A=o[w],B[A]!==j&&(B[A]=j,S.push(A));if(m)for(var L=C[F],R=S.length,I=L;I<R;I++){var D=S[I];N[I]=O[D]}}return C[_]=S.length,T};return _.toTex={2:"\\left(${args[0]}"+s.operators.multiply+"${args[1]}\\right)"},_}var o=r(15).extend,i=r(29);e.name="multiply",e.factory=n},function(t,e){"use strict";function r(t,e,r,n){var o=n("multiplyScalar",{"number, number":function(t,e){return t*e},"Complex, Complex":function(t,e){return t.mul(e)},"BigNumber, BigNumber":function(t,e){return t.times(e)},"Fraction, Fraction":function(t,e){return t.mul(e)},"number | Fraction | BigNumber | Complex, Unit":function(t,e){var r=e.clone();return r.value=null===r.value?r._normalize(t):o(r.value,t),r},"Unit, number | Fraction | BigNumber | Complex":function(t,e){var r=t.clone();return r.value=null===r.value?r._normalize(e):o(r.value,e),r},"Unit, Unit":function(t,e){return t.multiply(e)}});return o}e.factory=r},function(t,e,r){"use strict";function n(t,e,n,o){var i=n(r(40)),a=t.SparseMatrix,s=function(t,e,r,n){var s=t._values,l=t._index,u=t._ptr,c=t._size,f=t._datatype;if(!s)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var d,h=c[0],p=c[1],v=i,_=0,m=r;"string"==typeof f&&(d=f,v=o.find(i,[d,d]),_=o.convert(0,d),e=o.convert(e,d),m=o.find(r,[d,d]));for(var g=[],y=[],w=[],x=new a({values:g,index:y,ptr:w,size:[h,p],datatype:d}),b=0;b<p;b++){w[b]=y.length;for(var z=u[b],M=u[b+1],k=z;k<M;k++){var A=l[k],E=n?m(e,s[k]):m(s[k],e);v(E,_)||(y.push(A),g.push(E))}}return w[p]=y.length,x};return s}e.name="algorithm11",e.factory=n},function(t,e,r){"use strict";function n(t,e,n,a){function s(r,n){if(e.predictable&&!o(n)&&r<0)try{var i=p(n),a=v(i);if((n===a||Math.abs((n-a)/n)<1e-14)&&i.d%2===1)return(i.n%2===0?1:-1)*Math.pow(-r,n)}catch(t){}return r*r<1&&n===1/0||r*r>1&&n===-(1/0)?0:e.predictable&&(r<-1&&n===1/0||r>-1&&r<0&&n===-(1/0))?NaN:o(n)||r>=0||e.predictable?Math.pow(r,n):new t.Complex(r,0).pow(n,0)}function l(t,e){if(!o(e)||e<0)throw new TypeError("For A^b, b must be a positive integer (value is "+e+")");var r=i(t);if(2!=r.length)throw new Error("For A^b, A must be 2 dimensional (A has "+r.length+" dimensions)");if(r[0]!=r[1])throw new Error("For A^b, A must be square (size is "+r[0]+"x"+r[1]+")");for(var n=f(r[0]).valueOf(),a=t;e>=1;)1==(1&e)&&(n=d(a,n)),e>>=1,a=d(a,a);return n}function u(t,e){return h(l(t.valueOf(),e))}var c=r(46),f=n(r(126)),d=n(r(122)),h=n(r(44)),p=n(r(127)),v=n(r(128)),_=a("pow",{"number, number":s,"Complex, Complex":function(t,e){return t.pow(e)},"BigNumber, BigNumber":function(r,n){return n.isInteger()||r>=0||e.predictable?r.pow(n):new t.Complex(r.toNumber(),0).pow(n.toNumber(),0)},"Fraction, Fraction":function(t,r){if(1!==r.d){if(e.predictable)throw new Error("Function pow does not support non-integer exponents for fractions.");return s(t.valueOf(),r.valueOf())}return t.pow(r)},"Array, number":l,"Array, BigNumber":function(t,e){return l(t,e.toNumber())},"Matrix, number":u,"Matrix, BigNumber":function(t,e){return u(t,e.toNumber())},"Unit, number":function(t,e){return t.pow(e)}});return _.toTex={2:"\\left(${args[0]}\\right)"+c.operators.pow+"{${args[1]}}"},_}var o=r(19).isInteger,i=r(29).size;e.name="pow",e.factory=n},function(t,e,r){"use strict";function n(t,e,n,a){function s(t,e){switch(t.length){case 0:return e?u(e):[];case 1:return l(t[0],t[0],e);case 2:return l(t[0],t[1],e);default:throw new Error("Vector containing two values expected")}}function l(e,r,n){var a=t.isBigNumber(e)||t.isBigNumber(r)?t.BigNumber:null;if(t.isBigNumber(e)&&(e=e.toNumber()),t.isBigNumber(r)&&(r=r.toNumber()),!i(e)||e<1)throw new Error("Parameters in function eye must be positive integers");if(!i(r)||r<1)throw new Error("Parameters in function eye must be positive integers");var s=a?new t.BigNumber(1):1,l=a?new a(0):0,u=[e,r];if(n){var c=t.Matrix.storage(n);return c.diagonal(u,s,0,l)}for(var f=o.resize([],u,l),d=e<r?e:r,h=0;h<d;h++)f[h][h]=s;return f}var u=n(r(44)),c=a("eye",{"":function(){return"Matrix"===e.matrix?u([]):[]},string:function(t){return u(t)},"number | BigNumber":function(t){return l(t,t,"Matrix"===e.matrix?"default":void 0)},"number | BigNumber, string":function(t,e){return l(t,t,e)},"number | BigNumber, number | BigNumber":function(t,r){return l(t,r,"Matrix"===e.matrix?"default":void 0)},"number | BigNumber, number | BigNumber, string":function(t,e,r){return l(t,e,r)},Array:function(t){return s(t)},"Array, string":function(t,e){return s(t,e)},Matrix:function(t){return s(t.valueOf(),t.storage())},"Matrix, string":function(t,e){return s(t.valueOf(),e)}});return c.toTex=void 0,c}var o=r(29),i=r(19).isInteger;e.name="eye",e.factory=n},function(t,e,r){"use strict";function n(t,e,r,n){var i=n("fraction",{number:function(e){if(!isFinite(e)||isNaN(e))throw new Error(e+" cannot be represented as a fraction");return new t.Fraction(e)},string:function(e){return new t.Fraction(e)},"number, number":function(e,r){return new t.Fraction(e,r)},BigNumber:function(e){return new t.Fraction(e.toString())},Fraction:function(t){return t},Object:function(e){return new t.Fraction(e)},"Array | Matrix":function(t){return o(t,i)}});return i}var o=r(120);e.name="fraction",e.factory=n},function(t,e,r){"use strict";function n(t,e,r,n){var i=n("number",{"":function(){return 0},number:function(t){return t},string:function(t){var e=Number(t);if(isNaN(e))throw new SyntaxError('String "'+t+'" is no valid number');return e},BigNumber:function(t){return t.toNumber()},Fraction:function(t){return t.valueOf()},Unit:function(t){throw new Error("Second argument with valueless unit expected")},"Unit, string | Unit":function(t,e){return t.toNumber(e)},"Array | Matrix":function(t){return o(t,i)}});return i.toTex={0:"0",1:"\\left(${args[0]}\\right)",2:"\\left(\\left(${args[0]}\\right)${args[1]}\\right)"},i}var o=r(120);e.name="number",e.factory=n},function(t,e){"use strict";t.exports=function(t,e,r,n,o,i,a){var s="<p>",l=": ",u=t.viz.cat_bar_width,c=t.viz.cat_bar_height,f=25,d=e.bar_data[0][o];e.bar_data=e.bar_data.slice(0,i);var h=e.type_name;h.length>=f&&(h=h.slice(0,f)+".."),r.append("text").classed("cat_graph_title",!0).text(h).style("font-family",'"Helvetica Neue", Helvetica, Arial, sans-serif').style("font-weight",800);var p=4;r.append("line").attr("x1",0).attr("x2",u).attr("y1",p).attr("y2",p).attr("stroke","blue").attr("stroke-width",1).attr("opacity",1);var v=d3.scale.linear().domain([0,d]).range([0,u]);a.append("rect").attr("height",c+"px").attr("width",function(t){var e=v(t[o]);return e+"px"}).attr("fill",function(t){return t[3]}).attr("opacity",t.viz.cat_colors.opacity).attr("stroke","grey").attr("stroke-width","0.5px"),a.append("text").classed("bar_labels",!0).text(function(t){var e=t[1];return e.indexOf(l)>0&&(e=e.split(l)[1]),e.indexOf(s)>0&&(e=e.split(s)[0]),e.length>=f&&(e=e.slice(0,f)+".."),e}).attr("transform",function(){return"translate(5, "+.75*c+")"}).attr("font-family",'"Helvetica Neue", Helvetica, Arial, sans-serif').attr("font-weight",400).attr("text-anchor","right")}},function(t,e){"use strict";t.exports=function(t,e,r,n,o,i,a,s){var l=t.viz.cat_bar_width,u=t.viz.cat_bar_height,c=150,f=6;e.append("text").text("Count").attr("transform",function(){var t=l+i,e="translate("+t+", 0)";return e}),e.append("text").text("Pct").attr("transform",function(){var t=l+i+60,e="translate("+t+", 0)";return e}),e.append("text").text("P-val").attr("transform",function(){var t=l+i+115,e="translate("+t+", 0)";return e}),o&&e.append("text").text("Clusters").attr("transform",function(){var t=l+c,e="translate("+t+", 0)";return e});var d=35;r.append("text").classed("count_labels",!0).text(function(t){var e=t[a];return e=e.toLocaleString(),String(e)}).attr("transform",function(){var t=l+i+d,e=.75*u;return"translate("+t+", "+e+")"}).attr("font-family",'"Helvetica Neue", Helvetica, Arial, sans-serif').attr("font-weight",400).attr("text-anchor","end"),r.append("text").classed("count_labels",!0).text(function(t){var e=t[a]/s*100;return e=Math.round(10*e)/10,e=e.toLocaleString(),String(e)}).attr("transform",function(){var t=l+i+d+47,e=.75*u;return"translate("+t+", "+e+")"}).attr("font-family",'"Helvetica Neue", Helvetica, Arial, sans-serif').attr("font-weight",400).attr("text-anchor","end"),r.append("text").classed("count_labels",!0).text(function(t){var e=t[f];return e<.001?(e=parseFloat(e.toPrecision(3)),e=e.toExponential()):e=parseFloat(e.toPrecision(2)),e}).attr("transform",function(){var t=l+i+d+112,e=.75*u;return"translate("+t+", "+e+")"}).attr("font-family",'"Helvetica Neue", Helvetica, Arial, sans-serif').attr("font-weight",400).attr("text-anchor","end"),o&&r.append("text").classed("count_labels",!0).text(function(t){return String(t[n].toLocaleString())}).attr("transform",function(){var t=l+d+c+20,e=.75*u;return"translate("+t+", "+e+")"}).attr("font-family",'"Helvetica Neue", Helvetica, Arial, sans-serif').attr("font-weight",400).attr("text-anchor","end")}},function(t,e){"use strict";t.exports=function(t){var e={},r=d3.select(t.root+" .clust_group").attr("transform");return null!=r&&r.indexOf("scale")>0?(e.zoom_x=parseFloat(r.split("scale")[1].replace("(","").replace(")","").split(",")[0]),e.zoom_y=parseFloat(r.split("scale")[1].replace("(","").replace(")","").split(",")[1])):(e.zoom_x=1,e.zoom_y=1),e}},function(t,e,r){"use strict";var n=r(100);t.exports=function(t){if(t.labels.show_label_tooltips){d3.selectAll(t.viz.root_tips+"_row_tip").remove();var e=t.viz.root_tips.replace(".",""),r=n().attr("class",function(){var t=e+" d3-tip "+e+"_row_tip";return t}).direction("e").offset([0,10]).style("display","none").html(function(t){var e=t.name.replace(/_/g," ").split("#")[0];return"<span>"+e+"</span>"});d3.select(t.viz.viz_wrapper).select(t.root+" .row_container").call(r),d3.select(t.root+" .row_label_zoom_container").selectAll("g").on("mouseover",function(e){d3.select(t.viz.root_tips+"_row_tip").classed(e.name,!0),d3.selectAll(t.viz.root_tips+"_row_tip").style("display","block"),d3.select(this).select("text").classed("active",!0),r.show(e),null!=t.row_tip_callback&&t.row_tip_callback(t.viz.root_tips,e)}).on("mouseout",function(e){d3.selectAll(t.viz.root_tips+"_row_tip").style("display","none").classed(e.name,!1),d3.select(this).select("text").classed("active",!1),r.hide(e)})}else d3.select(t.root+" .row_label_zoom_container").selectAll("g").on("mouseover",function(){d3.select(this).select("text").classed("active",!0)}).on("mouseout",function(){d3.select(this).select("text").classed("active",!1)})}},function(t,e,r){"use strict";var n=r(2),o=r(134),i=r(135),a=r(104),s=r(139),l=r(140);t.exports=function(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,u=t.params,c=u.network_data.col_nodes,f=u.viz.x_scale.rangeBand()/2+u.viz.border_width.x;d3.select(u.root+" .col_container").empty()?(e=d3.select(u.viz.viz_svg).append("g").attr("class","col_container").attr("transform","translate("+u.viz.clust.margin.left+","+u.viz.norm_labels.margin.top+")"),e.append("rect").attr("fill",u.viz.background_color).attr("width",30*u.viz.clust.dim.width+"px").attr("height",u.viz.label_background.col).attr("class","white_bars"),e.append("g").attr("class","col_label_outer_container").attr("transform","translate(0,"+u.viz.norm_labels.width.col+")").append("g").attr("class","col_zoom_container")):(e=d3.select(u.root+" .col_container").attr("transform","translate("+u.viz.clust.margin.left+","+u.viz.norm_labels.margin.top+")"),e.select(".white_bars").attr("fill",u.viz.background_color).attr("width",30*u.viz.clust.dim.width+"px").attr("height",u.viz.label_background.col),e.select(u.root+" .col_label_outer_container"));var d=d3.select(u.root+" .col_zoom_container").selectAll(".col_label_text").data(c,function(t){return t.name}).enter().append("g").attr("class","col_label_text").attr("transform",function(t){var e=t.col_index;return"translate("+u.viz.x_scale(e)+", 0) rotate(-90)"}),h=d.append("g").attr("class","col_label_group").attr("transform","translate("+u.viz.x_scale.rangeBand()/2+","+f+") rotate(45)").on("mouseover",function(){d3.select(this).select("text").classed("active",!0)}).on("mouseout",function(){d3.select(this).select("text").classed("active",!1)});n.has(u.network_data.col_nodes[0],"value")&&h.append("rect").attr("class","col_bars").attr("width",function(t){var e=0;return t.value>0&&(e=u.labels.bar_scale_col(t.value)),e}).attr("height",.66*u.viz.x_scale.rangeBand()).style("fill",function(t){return t.value>0?u.matrix.bar_colors[0]:u.matrix.bar_colors[1];
}).attr("opacity",.6),h.append("text").attr("x",0).attr("y",.64*u.viz.x_scale.rangeBand()).attr("dx",u.viz.border_width.x).attr("text-anchor","start").attr("full_name",function(t){return t.name}).style("font-size",u.labels.default_fs_col+"px").style("cursor","default").text(function(t){return n.normal_name(t)}).style("opacity",0).transition().delay(r).duration(r).style("opacity",1),s(u),h.append("path").style("stroke-width",0).attr("d",function(){return l(u)}).attr("fill","#eee").style("opacity",0).transition().delay(r).duration(r).style("opacity",u.viz.triangle_opacity),d3.selectAll(u.root+" .col_label_text").on("click",function(t){"function"==typeof u.click_label?(u.click_label(t.name,"col"),o(u,this,t.ini)):u.tile_click_hlight&&o(u,this,t.ini)}).on("dblclick",function(e){var r="__data__",n=this[r].name;if(u.sim_mat){i(t,this,n);var s=d3.selectAll(u.root+" .row_label_group").filter(function(t){return t.name==n})[0][0];a(t,s,n)}else i(t,this,n);u.tile_click_hlight&&o(u,this,e.ini)})}},function(t,e){"use strict";t.exports=function(t,e,r){if(r!=t.click_hlight_col){t.click_hlight_col=r;var n=6,o=.85,i=n*t.viz.border_width.x;d3.selectAll(t.root+" .click_hlight").remove(),d3.select(e).append("rect").classed("click_hlight",!0).classed("col_top_hlight",!0).attr("width",t.viz.clust.dim.height).attr("height",i).attr("fill",t.matrix.hlight_color).attr("opacity",o).attr("transform",function(){var e=0,r=-(t.viz.clust.dim.height+t.viz.cat_room.col+t.viz.uni_margin);return"translate("+r+","+e+")"}),d3.select(e).append("rect").classed("click_hlight",!0).classed("col_bottom_hlight",!0).attr("width",t.viz.clust.dim.height).attr("height",i).attr("fill",t.matrix.hlight_color).attr("opacity",o).attr("transform",function(){var e=t.viz.x_scale.rangeBand()-i,r=-(t.viz.clust.dim.height+t.viz.cat_room.col+t.viz.uni_margin);return"translate("+r+","+e+")"})}else d3.selectAll(t.root+" .click_hlight").remove(),t.click_hlight_col=-666}},function(t,e,r){"use strict";var n=r(105),o=r(106),i=r(136),a=r(88),s=r(131),l=r(79),u=r(3);t.exports=function(t,e,r){var c=t.params,f=s(c);if(1===f.zoom_y&&1===f.zoom_x){c.viz.inst_order.col="custom",o(t,"col"),d3.selectAll(c.root+" .toggle_row_order .btn").classed("active",!1),c.viz.run_trans=!0;var d=$.extend(!0,{},c.matrix.matrix),h=c.network_data.row_nodes,p=c.network_data.col_nodes,v=[];p.forEach(function(t){v.push(t.name)});var _=u.indexOf(v,r);v=[],h.forEach(function(t,e){v.push(d[e].row_data[_].value)});var m=d3.range(v.length).sort(function(t,e){return v[e]-v[t]});c.viz.y_scale.domain(m),c.matrix.orders.custom_col=m;var g,y=c.network_data.row_nodes_names;if(g=c.network_data.links.length>c.matrix.def_large_matrix?d3.select(c.root+" .viz_svg"):d3.select(c.root+" .viz_svg").transition().duration(2500),g.selectAll(".row_cat_group").attr("transform",function(t){var e=u.indexOf(y,t.name);return"translate(0,"+c.viz.y_scale(e)+")"}),g.select(".row_label_zoom_container").selectAll(".row_label_group").attr("transform",function(t){var e=u.indexOf(y,t.name);return"translate(0,"+c.viz.y_scale(e)+")"}),c.viz.ds_level===-1&&g.selectAll(".row").attr("transform",function(t){var e=u.indexOf(y,t.name);return"translate(0,"+c.viz.y_scale(e)+")"}),d3.selectAll(c.root+" .col_label_text").select(".highlight_rect").style("opacity",0),d3.select(e).select(".highlight_rect").style("opacity",1),c.network_data.links.forEach(function(t){t.x=c.viz.x_scale(t.target),t.y=c.viz.y_scale(t.source)}),n(c),c.zoom_info=a(),setTimeout(function(){c.viz.run_trans=!1},2500),c.viz.ds_num_levels>0&&c.viz.ds_level>=0){l(c);var w=!0,x=!0,b=!0;i(t,w,x,b)}}}},function(t,e,r){"use strict";var n=r(137),o=r(93),i=r(102),a=r(138),s=r(3);t.exports=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],l=arguments.length>3&&void 0!==arguments[3]&&arguments[3],u=t.params,c=u.zoom_info,f=u.viz.ds_level,d=u.viz.ds_level;null===u.viz.ds?f=-1:(f=Math.floor(Math.log(c.zoom_y)/Math.log(u.viz.ds_zt)),f>u.viz.ds_num_levels-1&&(f=-1));var h=!1;d==-1?f>=0&&(h=!0):f<d&&(h=!0);var p;e===!0||h===!0?(p=f,e=!0,u.viz.ds_level=p):p=d;var v={},_=5;v.min_x=Math.abs(c.trans_x)/c.zoom_x-(_+1)*u.viz.rect_width,v.min_y=Math.abs(c.trans_y)/c.zoom_y-(_+1)*u.viz.rect_height,v.max_x=Math.abs(c.trans_x)/c.zoom_x+u.viz.clust.dim.width/c.zoom_x+_*u.viz.rect_width,v.max_y=Math.abs(c.trans_y)/c.zoom_y+u.viz.clust.dim.height/c.zoom_y+_*u.viz.rect_height,n(u,v);var m;if(l===!1?m=s.difference(u.viz.viz_nodes.row,u.viz.viz_nodes.curr_row):(m="all",d3.selectAll(u.root+" .ds"+String(p)+"_row").remove()),null!=u.viz.ds){var g=".ds"+String(u.viz.ds_level)+"_row";d3.selectAll(g).style("display","block")}p>=0&&(d3.selectAll(u.root+" .row").remove(),d3.selectAll(u.viz.root_tips+"_tile_tip").remove(),d3.selectAll(u.viz.root_tips+"_row_tip").remove());var y;if(p<0?(y=u.matrix.matrix,a(u)):(y=u.matrix.ds_matrix[p],d3.selectAll(u.root+" .row_cat_group path").remove()),r===!0&&d3.selectAll(u.root+" .row_cat_group path").remove(),e===!0&&(p>=0?d3.selectAll(u.root+" .ds"+String(p)+"_row").each(function(t){s.contains(u.viz.viz_nodes.row,t.name)===!1&&d3.select(this).remove()}):d3.selectAll(u.root+" .row").each(function(t){s.contains(u.viz.viz_nodes.row,t.name)===!1&&d3.select(this).remove()}),d3.selectAll(u.root+" .row_label_group").each(function(t){s.contains(u.viz.viz_nodes.row,t.name)===!1&&d3.select(this).remove()}),p!=d&&(m=u.viz.viz_nodes.row,d3.selectAll(u.root+" .ds"+String(d)+"_row").remove())),(m.length>=1||"all"===m)&&o(u,y,m,p),p===-1&&(r===!1||e)){var w=[];d3.selectAll(u.root+" .row_label_group").each(function(t){w.push(t.name)});var x=s.difference(u.viz.viz_nodes.row,w),b=1;x.length>b&&i(t,x)}}},function(t,e){"use strict";t.exports=function(t,e){var r,n=[],o=[],i=t.viz.y_scale,a=t.viz.ds_level,s=t.network_data.row_nodes_names,l=".row";a>=0&&(i=t.viz.ds[a].y_scale,s=d3.range(t.matrix.ds_matrix[a].length).map(String),l=".ds"+String(a)+"_row");for(var u=0;u<s.length;u++)r=i(u),r<e.max_y&&r>e.min_y&&n.push(s[u]);d3.selectAll(t.root+" "+l).each(function(t){o.push(t.name)}),t.viz.viz_nodes.row=n,t.viz.viz_nodes.curr_row=o}},function(t,e){"use strict";t.exports=function(t){d3.select(t.root+" .row_cat_group path").empty()===!0&&d3.selectAll(t.root+" .row_cat_group").append("path").attr("d",function(){var e=t.viz.cat_room.symbol_width-1,r=0,n=1,o=t.viz.y_scale.rangeBand()/2,i=t.viz.cat_room.symbol_width-1,a=t.viz.y_scale.rangeBand(),s="M "+e+","+r+" L "+n+","+o+" L "+i+","+a+" Z";return s}).attr("fill","#eee").style("opacity",t.viz.triangle_opacity)}},function(t,e,r){"use strict";var n=r(100);t.exports=function(t){if(t.labels.show_label_tooltips){d3.selectAll(t.viz.root_tips+"_col_tip").remove();var e=n().attr("class",function(){var e=t.viz.root_tips.replace(".",""),r=e+" d3-tip "+e+"_col_tip";return r}).direction("w").offset([20,0]).style("display","none").html(function(t){var e=t.name.replace(/_/g," ").split("#")[0];return"<span>"+e+"</span>"});d3.select(t.viz.viz_wrapper).select("svg").select(t.root+" .col_zoom_container").selectAll(".col_label_group").select("text").call(e),d3.select(t.root+" .col_zoom_container").selectAll(".col_label_group").on("mouseover",function(r){d3.selectAll(t.viz.root_tips+"_col_tip").style("display","block"),e.show(r),null!=t.col_tip_callback&&t.col_tip_callback(r)}).on("mouseout",function(){e.hide(this),d3.selectAll(t.viz.root_tips+"_col_tip").style("display","none")})}}},function(t,e){"use strict";t.exports=function(t){var e=.36*t.viz.x_scale.rangeBand(),r=-t.viz.border_width.x,n=0,o=t.viz.x_scale.rangeBand()-e,i=-(t.viz.x_scale.rangeBand()-e+t.viz.border_width.x),a=-t.viz.border_width.x,s="M "+r+",0 L "+i+","+n+" L "+a+","+o+" Z";return s}},function(t,e){"use strict";t.exports=function(t){d3.select(t.viz.viz_svg).append("rect").attr("fill",t.viz.background_color).attr("height",t.viz.super_labels.dim.width+"px").attr("width","3000px").classed("super_col_bkg",!0).classed("white_bars",!0).attr("transform","translate("+t.viz.clust.margin.left+","+t.viz.super_labels.margin.top+")"),d3.select(t.viz.viz_svg).append("text").attr("class","super_col").text(t.labels.super.col).attr("text-anchor","center").attr("transform",function(){var e=d3.select(this)[0][0].getBBox().width,r=t.viz.clust.dim.width/2+t.viz.norm_labels.width.row-e/2,n=t.viz.super_labels.dim.width;return"translate("+r+","+n+")"}).style("font-size",function(){var e=t.labels.super_label_fs*t.labels.super_label_scale;return e+"px"}).style("font-weight",300),d3.select(t.viz.viz_svg).append("rect").attr("fill",t.viz.background_color).attr("width",t.viz.super_labels.dim.width+"px").attr("height","3000px").classed("super_row_bkg",!0).classed("white_bars",!0).attr("transform","translate("+t.viz.super_labels.margin.left+",0)"),d3.select(t.viz.viz_svg).append("g").classed("super_row",!0).attr("transform",function(){var e=t.viz.super_labels.dim.width,r=t.viz.clust.dim.height/2+t.viz.norm_labels.width.col;return"translate("+e+","+r+")"}),d3.select(t.root+" .super_row").append("text").text(t.labels.super.row).attr("text-anchor","center").attr("transform",function(){var e=d3.select(this)[0][0].getBBox().width,r=e/2+t.viz.norm_labels.width.col,n="translate(0,"+r+"), rotate(-90)";return n}).style("font-size",function(){var e=t.labels.super_label_fs*t.labels.super_label_scale;return e+"px"}).style("font-weight",300)}},function(t,e,r){"use strict";var n=r(143),o=r(144),i=r(152),a=r(112);t.exports=function(t){var e=t.params,r=e.viz;d3.select(r.root+" .col_container").append("path").style("stroke-width","0").attr("d","M 0,0 L 1000,-1000, L 1000,0 Z").attr("fill",r.background_color).attr("class","right_slant_triangle").attr("transform","translate("+r.clust.dim.width+","+r.norm_labels.width.col+")"),d3.select(r.root+" .col_container").append("path").style("stroke-width","0").attr("d","M 0,0 L 500,-500, L 0,-500 Z").attr("fill",r.background_color).attr("class","left_slant_triangle").attr("transform","translate(-1,"+r.norm_labels.width.col+")");var s=r.clust.margin.top+r.uni_margin/5;d3.select(r.viz_svg).append("rect").attr("fill",r.background_color).attr("width",r.clust.margin.left).attr("height",s).attr("class","top_left_white");var l=r.cat_room.col+1.5*r.uni_margin;d3.select(r.viz_svg).append("rect").attr("fill",r.background_color).attr("width",2*r.clust.dim.width).attr("height",l).attr("class","top_right_white").attr("transform",function(){var t=r.clust.margin.left+r.clust.dim.width,e=r.norm_labels.width.col+r.norm_labels.margin.top-r.uni_margin;return"translate("+t+", "+e+")"}),h=r.clust.margin.left+r.clust.dim.width+r.uni_margin,p=r.norm_labels.margin.top+r.norm_labels.width.col+2.5*r.uni_margin;var u=1.15*r.cat_room.symbol_width,c=.65,f=1.25;r.show_categories.col&&d3.select(r.viz_svg).selectAll().data(r.all_cats.col).enter().append("text").classed("col_cat_super",!0).style("font-size",u+"px").style("opacity",c).style("cursor","default").attr("transform",function(t){var e=parseInt(t.split("-")[1],10),n=p+f*r.cat_room.symbol_width*e;return"translate("+h+","+n+")"}).text(function(t){return n(r,t,"col")}),i(t),p=r.show_dendrogram?r.clust.margin.top+r.clust.dim.height+r.dendro_room.col-2*r.uni_margin:r.clust.margin.top+r.clust.dim.height;var d=d3.select(r.viz_svg).append("g").classed("bottom_spillover_container",!0).attr("transform",function(){return"translate(0,"+p+")"});d.append("rect").attr("class","bottom_spillover").attr("fill",r.background_color).attr("width",r.svg_dim.width).attr("height",2*r.svg_dim.height),h=r.clust.margin.left,p=0,d.append("g").classed("col_dendro_icons_container",!0).attr("transform","translate("+h+","+p+")").append("g").classed("col_dendro_icons_group",!0),e.viz.show_dendrogram&&a(t,"col");var h=r.clust.margin.left+r.clust.dim.width,p=r.clust.margin.top+r.clust.dim.height,v=r.cat_room.col+r.clust.dim.width,_=r.cat_room.row+10*r.uni_margin;d3.select(r.viz_svg).append("rect").attr("fill",r.background_color).attr("width",v).attr("height",_).attr("transform",function(){return"translate("+h+","+p+")"}).classed("white_bars",!0).classed("dendro_corner_spillover",!0),h=0,p=r.clust.margin.top+r.clust.dim.height,v=r.clust.margin.left,_=10*r.clust.dim.height,d3.select(r.viz_svg).append("rect").attr("fill",r.background_color).attr("width",v).attr("height",_).attr("transform",function(){return"translate("+h+","+p+")"}).classed("white_bars",!0).classed("dendro_col_spillover",!0),o(t)}},function(t,e){"use strict";t.exports=function(t,e,r){var n;if(t.cat_names[r][e]===e){var o=parseInt(e.split("-")[1],10)+1;n="Category "+o}else n=t.cat_names[r][e];return n}},function(t,e,r){"use strict";var n=r(145),o=r(3);t.exports=function(t){var e=t.params;o.each(["row","col"],function(r){e.viz.show_categories[r]&&d3.selectAll(e.root+" ."+r+"_cat_super").on("dblclick",function(){e.sim_mat&&(r="both"),d3.selectAll(e.root+" .toggle_"+r+"_order .btn").classed("active",!1);var o=this.__data__.replace("-","_")+"_index";e.viz.sim_mat?(n(t,o,"row"),n(t,o,"col")):n(t,o,r)})})}},function(t,e,r){"use strict";var n=r(106),o=r(136),i=r(88),a=r(79),s=r(146),l=r(131),u=r(3);t.exports=function(t,e,r){var c=t.params,f=l(c),d=0;1==f.zoom_y&&1==f.zoom_x||(s(t,0,0,1),d=1200);var h;"row"===r?h="col":"col"===r&&(h="row"),c.viz.run_trans=!0,"row"===h?c.viz.inst_order.row=e:"col"===h&&(c.viz.inst_order.col=e),c.viz.show_dendrogram&&n(t,r),"row"===h?c.viz.x_scale.domain(c.matrix.orders[c.viz.inst_order.row+"_row"]):"col"==h&&c.viz.y_scale.domain(c.matrix.orders[c.viz.inst_order.col+"_col"]);var p;p=d3.selectAll(c.root+" .tile")[0].length<c.matrix.def_large_matrix?d3.select(c.root+" .viz_svg").transition().duration(2500).delay(d):d3.select(c.root+" .viz_svg");var v=c.network_data.row_nodes_names,_=c.network_data.col_nodes_names;if(c.viz.ds_level===-1&&(p.selectAll(".row").attr("transform",function(t){var e=u.indexOf(v,t.name);return"translate(0,"+c.viz.y_scale(e)+")"}).selectAll(".tile").attr("transform",function(t){return"translate("+c.viz.x_scale(t.pos_x)+" , 0)"}),p.selectAll(".tile_up").attr("transform",function(t){return"translate("+c.viz.x_scale(t.pos_x)+" , 0)"}),p.selectAll(".tile_dn").attr("transform",function(t){return"translate("+c.viz.x_scale(t.pos_x)+" , 0)"})),p.select(".row_label_zoom_container").selectAll(".row_label_group").attr("transform",function(t){var e=u.indexOf(v,t.name);return"translate(0,"+c.viz.y_scale(e)+")"}),p.select(".col_zoom_container").selectAll(".col_label_text").attr("transform",function(t){var e=u.indexOf(_,t.name);return"translate("+c.viz.x_scale(e)+") rotate(-90)"}),p.selectAll(".row_cat_group").attr("transform",function(t){var e=u.indexOf(v,t.name);return"translate(0,"+c.viz.y_scale(e)+")"}),p.selectAll(".col_cat_group").attr("transform",function(t){var e=u.indexOf(_,t.name);return"translate("+c.viz.x_scale(e)+",0)"}),c.network_data.links.forEach(function(t){t.x=c.viz.x_scale(t.target),t.y=c.viz.y_scale(t.source)}),c.zoom_info=i(),c.viz.ds_num_levels>0&&c.viz.ds_level>=0){a(c);var m=!0,g=!0,y=!0;o(t,m,g,y)}setTimeout(function(){c.viz.run_trans=!1},2500)}},function(t,e,r){"use strict";var n=r(2),o=r(147),i=r(136),a=r(88),s=r(151),l=r(3);t.exports=function(t,e,r,u){function c(t,e){d3.selectAll(f.root+" ."+t+"_dendro_crop_buttons").transition().duration(g).style("opacity",e)}var f=t.params;if(d3.selectAll(f.viz.root_tips).style("display","none"),f.zoom_info=a(),i(t),!f.viz.run_trans){var d=f.viz.clust.dim.height/2,h=d/u;if(r>=d-h){var p=d-r,v=-d/u+p;r+=v}r<-(d-h)&&(p=d+r,v=d/u-p,r+=v);var _=u,m=1,g=700,y=-(_-1)*d;d3.select(f.root+" .clust_group").transition().duration(g).attr("transform","translate("+[0,0+y]+") scale("+m+","+_+")translate("+[e,r]+")"),d3.select(f.root+" .row_label_zoom_container").transition().duration(g).attr("transform","translate("+[0,y]+") scale("+_+","+_+")translate("+[0,r]+")"),d3.select(f.root+" .row_cat_container").transition().duration(g).attr("transform","translate("+[0,y]+") scale(1,"+_+")translate("+[0,r]+")"),d3.select(f.root+" .row_dendro_container").transition().duration(g).attr("transform","translate("+[0,y]+") scale("+m+","+_+")translate("+[f.viz.uni_margin/2,r]+")");var w;l.each(["row","col"],function(t){w=d3.select(f.root+" ."+t+"_dendro_crop_buttons").style("opacity"),d3.selectAll(f.root+" ."+t+"_dendro_crop_buttons").style("opacity",0),setTimeout(c,700,t,w)}),d3.select(f.root+" .col_zoom_container").transition().duration(g).attr("transform"," scale("+m+","+m+")translate("+[e,0]+")"),d3.select(f.root+" .col_cat_container").transition().duration(g).attr("transform"," scale("+m+",1)translate("+[e,0]+")"),d3.select(f.root+" .col_dendro_container").transition().duration(g).attr("transform"," scale("+m+",1)translate("+[e,f.viz.uni_margin/2]+")");var x=f.viz.clust.margin.top+y+r*_,b=f.viz.clust.margin.left+e;f.zoom_behavior.scale(_).translate([b,x]),o(f),d3.select(f.root+" .row_label_zoom_container text").empty()===!1&&d3.select(f.root+" .row_label_zoom_container").each(function(){var t=d3.select(this).select("text")[0][0].getBBox();d3.select(this).select("rect").attr("x",.5*t.x).attr("y",0).attr("width",.5*t.width).attr("height",f.viz.y_scale.rangeBand()).style("fill","yellow")}),d3.select(f.root+" .row_dendro_icons_group").attr("transform","translate("+[0,0+y]+") scale("+m+","+_+")translate("+[e,r]+")"),d3.select(f.root+" .row_dendro_icons_group").selectAll("path").attr("transform",function(t){var e=f.viz.uni_margin,r=t.pos_mid;return"translate("+e+","+r+") scale(1, "+1/_+")"}),d3.select(f.root+" .col_dendro_icons_group").attr("transform",function(){var t=" scale("+m+","+_+")";return t}),d3.select(f.root+" .col_dendro_icons_group").selectAll("path").attr("transform",function(t){var e=t.pos_mid,r=f.viz.uni_margin;return"translate("+e+","+r+") scale(1,1)"}),n.has(f.network_data.col_nodes[0],"value")&&d3.selectAll(f.root+" .col_bars").attr("width",function(t){var e=0;return t.value>0&&(e=f.labels.bar_scale_col(t.value)/m),e}),n.has(f.network_data.row_nodes[0],"value")&&d3.selectAll(f.root+" .row_bars").transition().duration(g).attr("width",function(t){var e=0;return e=f.labels.bar_scale_row(Math.abs(t.value))/_}).attr("x",function(t){var e=0;return e=-f.labels.bar_scale_row(Math.abs(t.value))/_}),s(f)}}},function(t,e,r){"use strict";var n=r(2),o=r(148),i=r(149);t.exports=function(t){d3.selectAll(t.root+" .row_label_group").select("text").text(function(t){return n.normal_name(t)}),d3.selectAll(t.root+" .col_label_text").select("text").text(function(t){return n.normal_name(t)}),i(t),d3.selectAll(t.root+" .row_label_group").each(function(){o(t,this,"row")}),d3.selectAll(t.root+" .col_label_group").each(function(){o(t,this,"col")})}},function(t,e){"use strict";t.exports=function(t,e,r){function n(){return c=d3.select(this).text(),u=c.length,d=u-3,l=c.substring(0,d)+".."}function o(t){return c=d3.select(this).text(),u=".."===c.slice(-2)?c.length-2:c.length,f=t.name,d=u+2,l=f.substring(0,d)+"..",l.length>f.length&&(l=f),l}function i(t,e){return s=e<1?t:t*e}if("none"!=d3.select(e).style("display")){var a,s,l,u,c,f,d,h,p=t.viz.norm_labels.width[r];a="row"===r?t.viz.zoom_ratio.y?t.zoom_behavior.scale()/t.viz.zoom_ratio.y:t.zoom_behavior.scale():t.viz.zoom_ratio.x>1?t.zoom_behavior.scale()/t.viz.zoom_ratio.x:t.zoom_behavior.scale();var v;d3.select(e).select("text").each(function(t){v=t.name.length});var _=d3.select(e).select("text").node().getBBox().width;if(s=i(_,a),s>p)for(h=1;h<v;h++)s>p&&(d3.select(e).select("text").text(n),_=d3.select(e).select("text").node().getBBox().width,s=i(_,a));else if(s<.75*p)for(h=1;h<v;h++)s<.75*p&&(d3.select(e).select("text").text(o),_=d3.select(e).select("text").node().getBBox().width,s=i(_,a))}}},function(t,e,r){"use strict";var n=r(150);t.exports=function(t){var e,r=t.labels.default_fs_row,o=3,i=n(t);i.row>o&&(i.row>t.labels.max_allow_fs?(e=t.viz.zoom_ratio.y?t.zoom_behavior.scale()/t.viz.zoom_ratio.y:t.zoom_behavior.scale(),e<1&&(e=1),r=t.labels.max_allow_fs/e,d3.selectAll(t.root+" .row_label_group").select("text").style("font-size",r+"px").attr("y",.5*t.viz.rect_height+.35*r)):d3.selectAll(t.root+" .row_label_group").select("text").style("font-size",t.labels.default_fs_row+"px").attr("y",.5*t.viz.rect_height+.35*t.labels.default_fs_row)),i.col>o&&(i.col>t.labels.max_allow_fs?(e=t.viz.zoom_ratio.x>1?t.zoom_behavior.scale()/t.viz.zoom_ratio.x:t.zoom_behavior.scale(),e<1&&(e=1),r=t.labels.max_allow_fs/e,r>.7*t.viz.rect_width&&(r=.7*t.viz.rect_width),d3.selectAll(t.root+" .col_label_text").select("text").style("font-size",r+"px")):d3.selectAll(t.root+" .col_label_text").select("text").style("font-size",t.labels.default_fs_col+"px"))}},function(t,e){"use strict";t.exports=function(t){var e={};return t.viz.zoom_ratio.x>1?(e.row=t.labels.default_fs_row*t.zoom_behavior.scale(),e.col=t.labels.default_fs_col*t.zoom_behavior.scale()):(e.row=t.labels.default_fs_row*t.zoom_behavior.scale()/t.viz.zoom_ratio.y,e.col=t.labels.default_fs_col*t.zoom_behavior.scale()),e}},function(t,e){"use strict";t.exports=function(t){t.zoom_info.zoom_x*t.viz.border_width.x>1?d3.selectAll(t.root+" .vert_lines").select("line").style("display","block").style("opacity",0).transition().style("opacity",1):d3.selectAll(t.root+" .vert_lines").select("line").style("display","none"),t.zoom_info.zoom_y*t.viz.border_width.y>1?d3.selectAll(t.root+" .horz_lines").select("line").style("display","block").style("opacity",0).transition().style("opacity",1):d3.selectAll(t.root+" .horz_lines").select("line").style("display","none")}},function(t,e,r){"use strict";var n=r(143),o=r(100);t.exports=function(t){var e=t.params,r=e.viz,i=2.75;d3.select(e.root+" .row_cat_label_container").empty()&&(d3.select(t.params.viz.viz_svg).append("g").classed("row_cat_label_container",!0),d3.select(t.params.viz.viz_svg+" .row_cat_label_container").append("g").classed("row_cat_label_bar_container",!0));var a=r.clust.margin.left+r.clust.dim.width+r.uni_margin,s=r.norm_labels.margin.top+r.norm_labels.width.col+2.5*r.uni_margin,l=1.15*r.cat_room.symbol_width,u=.65,c=1.25;d3.select(e.root+" .row_cat_label_container").attr("transform",function(){return a=r.norm_labels.margin.left+r.norm_labels.width.row+r.cat_room.symbol_width+i*r.uni_margin,s=r.clust.margin.top-r.uni_margin,"translate("+a+","+s+") rotate(-90)"}),d3.selectAll(e.root+" .row_cat_label_container text").remove(),d3.selectAll(e.root+" .row_cat_selection_bar").remove(),d3.selectAll(t.params.viz.root_tips+"_row_cat_super").remove();var f=50,d=-75,h=o().attr("class",function(){var t=e.viz.root_tips.replace(".",""),r=t+" d3-tip "+t+"_row_cat_super";return r}).direction("south_custom").offset([f,d]).style("display","none").style("opacity",0).html(function(t){var o,i=e.network_data.row_nodes[0][t];if(i.indexOf("<p>")>-1){var a=i.split(": ")[0],s=i.split("<p>")[1];o=a+"<p>"+s}else o=n(r,t,"row");return o}),p=c*r.cat_room.symbol_width,v=.9*p;if(d3.select(e.root+" .row_cat_label_container").selectAll().data(r.all_cats.row).enter().append("text").style("width","100px").style("height",v+"px").classed("row_cat_super",!0).style("font-size",l+"px").style("opacity",u).style("cursor","default").attr("transform",function(t){var e=c*r.cat_room.symbol_width*parseInt(t.split("-")[1],10);return"translate(0,"+e+")"}).text(function(t){return n(r,t,"row")}),d3.select(e.root+" .row_cat_label_container").selectAll().data(r.all_cats.row).enter().append("rect").classed("row_cat_super",!0).classed("row_cat_selection_bar",!0).style("height",v+"px").style("fill","green").style("width","120px").style("opacity",0).attr("transform",function(t){var e=p*(parseInt(t.split("-")[1],10)-.75);return"translate(0,"+e+")"}).on("mouseover",function(t){d3.selectAll(e.viz.root_tips+"_row_cat_super").style("display","block").style("opacity",1),h.show(t)}).on("mouseout",function(){h.hide(this),d3.selectAll(".d3-tip").style("display","none"),d3.selectAll(e.viz.root_tips+"_row_cat_super").style("display","none").style("opacity",0)}),d3.select(e.root+" .row_cat_selection_bar").empty()===!1&&d3.selectAll(e.root+" .row_cat_selection_bar").call(h),_.has(e.network_data,"row_cat_bars")){d3.select(e.root+" .enr_title").remove();var m=d3.select(e.root+" .viz_svg").append("g").classed("enr_title",!0).attr("transform",function(){var t=d3.select(e.root+" .row_cat_label_container").attr("transform").split("(")[1].split(")")[0],r=Number(t.split(",")[0])-10;return"translate("+String(r)+", 0)"});m.append("rect").attr("width",e.viz.cat_room.row).attr("height",25).attr("fill","white");var g=e.network_data.enrichrgram_lib.substring(0,40);m.append("text").attr("transform","translate(0, 17)").text(g.replace(/_/g," ")).style("font-size","15px").attr("font-family",'"Helvetica Neue", Helvetica, Arial, sans-serif'),d3.selectAll(e.root+" .enrichr_bars").remove();var y=e.viz.clust.margin.top-35,w=e.network_data.row_cat_bars[0],x=d3.scale.linear().domain([0,w]).range([0,y]);d3.select(e.root+" .row_cat_label_bar_container").selectAll().data(e.network_data.row_cat_bars).enter().append("rect").classed("enrichr_bars",!0).attr("height",v+"px").attr("fill","red").attr("width",function(t){var e=x(t);return e+"px"}).attr("opacity",.4).attr("transform",function(t,e){var r=p*(e-.75);return"translate(0, "+r+")"})}}},function(t,e,r){"use strict";var n=r(154);t.exports=function(t){var e,r=t.params;d3.select(r.root+" .expand_button").on("click",null);var o=.4;e=d3.select(r.root+" .expand_button").empty()?d3.select(r.viz.viz_svg).append("text").attr("class","expand_button"):d3.select(r.root+" .expand_button"),e.attr("text-anchor","middle").attr("dominant-baseline","central").attr("font-family","FontAwesome").attr("font-size","30px").text(function(){return r.viz.is_expand===!1?"":""}).attr("y","25px").attr("x","25px").style("cursor","pointer").style("opacity",o).on("mouseover",function(){d3.select(this).style("opacity",.75)}).on("mouseout",function(){d3.select(this).style("opacity",o)}).on("click",function(){r.viz.is_expand===!1?(d3.select(this).text(function(){return""}),r.viz.is_expand=!0,d3.selectAll(r.root+" .borders").style("fill","white"),d3.select(r.root+" .sidebar_wrapper").style("display","none")):(d3.select(this).text(function(){return""}),r.viz.is_expand=!1,d3.selectAll(r.root+" .borders").style("fill","#eee"),d3.select(r.root+" .viz_wrapper").style("width","100px"),d3.select(r.root+" .sidebar_wrapper").style("display","block")),d3.select(r.viz.viz_svg).style("opacity",.5);var e=500;1==r.viz.run_trans&&(e=2500),setTimeout(n,e,t)})}},function(t,e,r){"use strict";var n=r(2),o=r(155),i=r(163),a=r(164),s=r(165),l=r(166),u=r(167),c=r(168),f=r(169),d=r(170),h=r(171),p=r(172),v=r(173),_=r(174),m=r(175),g=r(176),y=r(177),w=r(178),x=r(147),b=r(107),z=r(106),M=r(136),k=r(70),A=r(179),E=r(152),N=r(144),S=r(180),C=r(181),T=r(182),O=r(183),B=r(88),F=r(184),j=r(3);t.exports=function(t){var e=t.params,r=k(e);d3.select(e.root+" .play_button"),d3.select(e.root+" .sidebar_wrapper").style("height",r.height+"px"),d3.select(e.viz.viz_wrapper).style("margin-top",r.top+"px").style("width",r.width+"px").style("height",r.height+"px"),e=g(e),e.zoom_info=B(),a(e);var L=d3.select(e.viz.viz_svg);j.each(e.network_data.links,function(t){t.x=e.viz.x_scale(t.target),t.y=e.viz.y_scale(t.source)}),L.on(".zoom",null),e.zoom_behavior.scaleExtent([1,e.viz.square_zoom*e.viz.zoom_ratio.x]).on("zoom",function(){o(t)}),e.viz.do_zoom&&L.call(e.zoom_behavior),i(t),L.attr("width",e.viz.svg_dim.width).attr("height",e.viz.svg_dim.height),L.select(".super_background").style("width",e.viz.svg_dim.width).style("height",e.viz.svg_dim.height),L.select(".grey_background").attr("width",e.viz.clust.dim.width).attr("height",e.viz.clust.dim.height),setTimeout(A,100,e);var R=e.network_data.row_nodes,I=n.pluck(R,"name");y(e,L),L.selectAll(".highlighting_rect").attr("width",.8*e.viz.x_scale.rangeBand()).attr("height",.8*e.viz.y_scale.rangeBand()),d(e),f(e,L),h(e,L),L.selectAll(".row_label_group").each(function(){var t=d3.select(this).select("text")[0][0].getBBox();d3.select(this).select("rect").attr("x",t.x).attr("y",0).attr("width",t.width).attr("height",e.viz.rect_height).style("fill","yellow").style("opacity",function(t){var e=0;return 1===t.target&&(e=1),e})}),L.selectAll(".row_label_group").select("text").attr("y",.5*e.viz.rect_height+.35*e.labels.default_fs_row),n.has(e.network_data.row_nodes[0],"value")&&w(t,L),L.selectAll(".row_cat_group").attr("transform",function(t){var r=j.indexOf(I,t.name);return"translate(0, "+e.viz.y_scale(r)+")"}),L.selectAll(".row_cat_group").select("path").attr("d",function(){var t=e.viz.cat_room.symbol_width-1,r=0,n=1,o=e.viz.rect_height/2,i=e.viz.cat_room.symbol_width-1,a=e.viz.rect_height,s="M "+t+","+r+" L "+n+","+o+" L "+i+","+a+" Z";return s});var D=!0;e.viz.show_dendrogram?(b(t,"row",D),b(t,"col",D),s(e,L),z(t,"row",0),z(t,"col",0)):s(e,L),p(e,L),v(e,L),_(e,L),m(e,L),l(e,L),u(e.viz,L),F(e),c(e,L),e.zoom_behavior.scale(1).translate([e.viz.clust.margin.left,e.viz.clust.margin.top]),x(e),d3.select(e.root+" .clust_container").attr("transform","translate("+e.viz.clust.margin.left+","+e.viz.clust.margin.top+")"),t.params.viz.ds_level===-1&&M(t),E(t),d3.select(e.viz.viz_svg).style("opacity",1),N(t),d3.select(t.params.root+" .row_slider_group").style("opacity",0),d3.select(t.params.root+" .col_slider_group").style("opacity",0),setTimeout(S,500,t,"row"),setTimeout(S,500,t,"col"),setTimeout(C,500,t),setTimeout(O,500,t),setTimeout(T,500,t)}},function(t,e,r){"use strict";var n=r(156),o=r(161),i=r(162);t.exports=function(t){var e=t.params,r={};if(r.zoom_x=d3.event.scale,r.zoom_y=d3.event.scale,r.trans_x=e.zoom_behavior.translate()[0]-e.viz.clust.margin.left,r.trans_y=e.zoom_behavior.translate()[1]-e.viz.clust.margin.top,d3.selectAll(e.viz.root_tips).style("display","none"),e.zoom_info=o(e,r),e.zoom_info=i(e,r),e.is_slider_drag===!1&&e.is_cropping===!1){var a=e.zoom_info.trans_x+e.viz.clust.margin.left,s=e.zoom_info.trans_y+e.viz.clust.margin.top;e.zoom_behavior.translate([a,s]),t.params=e,n(t)}}},function(t,e,r){"use strict";var n=r(149),o=r(136),i=r(157),a=r(114),s=r(131),l=r(158),u=r(160);t.exports=function(t){function e(t){var e=t.params,r=u(e);r===!0&&setTimeout(l,50,t)}var r=t.params,c=r.zoom_info,f=s(r);d3.select(r.root+" .clust_group").attr("transform","translate("+[c.trans_x,c.trans_y]+") scale("+c.zoom_x+","+c.zoom_y+")"),d3.select(r.root+" .row_label_zoom_container").attr("transform","translate("+[0,c.trans_y]+") scale("+c.zoom_y+")"),d3.select(r.root+" .col_zoom_container").attr("transform","translate("+[c.trans_x,0]+") scale("+c.zoom_x+")"),d3.select(r.root+" .row_cat_container").attr("transform","translate("+[0,c.trans_y]+") scale( 1,"+c.zoom_y+")"),d3.select(r.root+" .row_dendro_container").attr("transform","translate("+[r.viz.uni_margin/2,c.trans_y]+") scale( 1,"+c.zoom_y+")"),d3.select(r.root+" .row_dendro_icons_group").attr("transform",function(){var t=c.trans_y,e="translate("+[0,t]+") ",r="scale(1, "+c.zoom_y+")",n=e+r;return n}),d3.select(r.root+" .col_dendro_icons_group").attr("transform",function(){var t=c.trans_x,e="translate("+[t,0]+")",r="scale("+c.zoom_x+", 1)",n=e+r;return n}),a(r,c,"row"),a(r,c,"col"),d3.select(r.root+" .col_cat_container").attr("transform","translate("+[c.trans_x,0]+") scale("+c.zoom_x+",1)"),d3.select(r.root+" .col_dendro_container").attr("transform","translate("+[c.trans_x,r.viz.uni_margin/2]+") scale("+c.zoom_x+",1)"),i(r,c),d3.select(r.root+" .viz_svg").attr("is_zoom",function(){var t=Number(d3.select(r.root+" .viz_svg").attr("is_zoom"));return d3.select(r.root+" .viz_svg").attr("stopped_zoom",1),t+1});var d=function(){d3.select(r.root+" .viz_svg").attr("is_zoom",function(){var t=Number(d3.select(r.root+" .viz_svg").attr("is_zoom"));return t-1})};if(n(r),c.zoom_y<=f.zoom_y){var h=!1;c.zoom_y<f.zoom_y&&(h=!0);var p=!1;o(t,p,h)}setTimeout(d,50),setTimeout(e,100,t)}},function(t,e,r){"use strict";var n=r(2);t.exports=function(t){var e=t.zoom_info;n.has(t.network_data.row_nodes[0],"value")&&d3.selectAll(t.root+" .row_bars").attr("width",function(r){var n=0;return n=t.labels.bar_scale_row(Math.abs(r.value))/e.zoom_y}).attr("x",function(r){
var n=0;return n=-t.labels.bar_scale_row(Math.abs(r.value))/e.zoom_y}),n.has(t.network_data.col_nodes[0],"value")&&d3.selectAll(t.root+" .col_bars").attr("width",function(r){var n=0;return r.value>0&&(n=t.labels.bar_scale_col(r.value)/e.zoom_x),n})}},function(t,e,r){"use strict";var n=r(149),o=r(148),i=r(159),a=r(151),s=r(136),l=r(160),u=r(3);t.exports=function(t){function e(){u.each(["row","col"],function(t){d3.selectAll(r.root+" ."+t+"_label_group").filter(function(){return"none"!=d3.select(this).style("display")}).select("text").style("font-size",function(){var t=Number(d3.select(this).style("font-size").replace("px",""));return t})})}var r=t.params,c=l(r);if(c===!0){u.each(["row","col"],function(t){d3.selectAll(r.root+" ."+t+"_label_group").select("text").style("opacity",1),d3.selectAll(r.root+" ."+t+"_cat_group").select("path").style("display","block")}),s(t,!0),d3.selectAll(r.viz.root_tips).style("display","block"),d3.selectAll(r.root+" .row_label_group").select("text").style("display","none"),d3.selectAll(r.root+" .row_label_group").select("text").style("display","block"),d3.select(r.root+" .viz_svg").attr("stopped_zoom",0),d3.selectAll(r.root+" .row_label_group").select("text").style("display","block"),d3.selectAll(r.root+" .col_label_group").select("text").style("display","block"),a(r),t.params.viz.x_offset=0;var f=150;u.each(["row","col"],function(t){var e=i(r,t);e<f&&d3.selectAll(r.root+" ."+t+"_label_group").each(function(){o(r,this,t)})}),e(),n(r),setTimeout(e,100)}}},function(t,e){"use strict";t.exports=function(t,e){var r;return"row"===e?(r=1e4,t.viz.ds_level===-1&&(r=d3.selectAll(t.root+" .row")[0].length)):"col"===e&&(r=d3.selectAll(t.root+" ."+e+"_label_text").filter(function(){return"none"!=d3.select(this).style("display")})[0].length),r}},function(t,e){"use strict";t.exports=function(t){var e=Number(d3.select(t.root+" .viz_svg").attr("is_zoom")),r=Number(d3.select(t.root+" .viz_svg").attr("stopped_zoom")),n=!1;return 0===e&&0!=r&&(n=!0),n}},function(t,e){"use strict";t.exports=function(t,e){var r=t.viz;return r.zoom_ratio.y>1&&(e.zoom_y<r.zoom_ratio.y?(e.trans_y=0,e.zoom_y=1):e.zoom_y=e.zoom_y/r.zoom_ratio.y),e.pan_room_y=(e.zoom_y-1)*r.clust.dim.height,e.trans_y>=0?e.trans_y=0:e.trans_y<=-e.pan_room_y&&(e.trans_y=-e.pan_room_y),e}},function(t,e){"use strict";t.exports=function(t,e){var r=t.viz;return r.zoom_ratio.x>1&&(e.zoom_x<r.zoom_ratio.x?e.zoom_x=1:e.zoom_x=e.zoom_x/r.zoom_ratio.x),e.pan_room_x=(e.zoom_x-1)*r.clust.dim.width,e.trans_x>0?e.trans_x=0:e.trans_x<=-e.pan_room_x&&(e.trans_x=-e.pan_room_x),e}},function(t,e,r){"use strict";var n=r(146);t.exports=function(t){var e=t.params;d3.selectAll(e.viz.zoom_element).on("dblclick.zoom",null),d3.select(e.viz.zoom_element).on("dblclick",function(){n(t,0,0,1)})}},function(t,e){"use strict";t.exports=function(t){var e=1,r=0,n=0,o=t.viz.clust.dim.height/2,i=-(e-1)*o;d3.select(t.root+" .clust_group").attr("transform","translate("+[0,0+i]+") scale(1,"+e+")translate("+[r,n]+")"),d3.select(t.root+" .row_label_zoom_container").attr("transform","translate("+[0,i]+") scale("+e+","+e+")translate("+[0,n]+")"),d3.select(t.root+" .row_cat_container").attr("transform","translate("+[0,i]+") scale(1,"+e+")translate("+[0,n]+")"),d3.select(t.root+" .row_dendro_container").attr("transform","translate("+[0,i]+") scale("+e+","+e+")translate("+[t.viz.uni_margin/2,n]+")"),d3.select(t.root+" .col_zoom_container").attr("transform"," scale(1,1)translate("+[r,0]+")"),d3.select(t.root+" .col_cat_container").attr("transform"," scale(1,1)translate("+[r,0]+")"),d3.select(t.root+" .col_dendro_container").attr("transform"," scale(1,1)translate("+[r,t.viz.uni_margin/2]+")"),d3.select(t.root+" .row_dendro_icons_group").attr("transform",function(){return"translate(0,0) scale(1)"}),d3.select(t.root+" .row_dendro_icons_group").selectAll("path").attr("transform",function(t){var e=7,r=t.pos_mid;return"translate("+e+","+r+") scale(1, 1)"})}},function(t,e,r){"use strict";var n=r(3);t.exports=function(t,e){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o={};r===!1?o.run_transition=!1:o=r;var i,a=t.viz.duration,s=t.network_data.col_nodes,l=t.network_data.col_nodes_names;o.run_transition?(i=e.transition().delay(o.update).duration(a),e.selectAll(".col_cat_group").data(s,function(t){return t.name}).transition().delay(o.update).duration(a).attr("transform",function(e){var r=n.indexOf(l,e.name);return"translate("+t.viz.x_scale(r)+",0)"}),e.selectAll(".col_dendro_group").data(s,function(t){return t.name}).transition().delay(o.update).duration(a).attr("transform",function(e){var r=n.indexOf(l,e.name);return"translate("+t.viz.x_scale(r)+",0)"})):(i=e,e.selectAll(".col_cat_group").data(s,function(t){return t.name}).attr("transform",function(e){var r=n.indexOf(l,e.name);return"translate("+t.viz.x_scale(r)+",0)"}),d3.select(t.root).selectAll(".col_dendro_group").data(s,function(t){return t.name}).attr("transform",function(e){var r=n.indexOf(l,e.name);return"translate("+t.viz.x_scale(r)+",0)"}));var u,c;n.each(["row","col"],function(e){var r=t.viz.all_cats[e].length;for(u=0;u<r;u++)c="."+e+"_cat_rect_"+String(u),"row"===e?i.selectAll(c).attr("height",t.viz.y_scale.rangeBand()):i.selectAll(c).attr("width",t.viz.x_scale.rangeBand())});var f=t.viz.clust.margin.left+t.viz.clust.dim.width,d=t.viz.clust.margin.top,h=t.viz.dendro_room.row+t.viz.uni_margin;d3.select(t.root+" .viz_svg").select("row_dendro_outer_container").attr("transform","translate("+f+","+d+")"),d3.select(t.root+" .row_dendro_outer_container").select(".row_dendro_spillover").attr("width",h+"px").attr("height",t.viz.svg_dim.height),f=t.viz.clust.margin.left,d=t.viz.clust.margin.top+t.viz.clust.dim.height;var p=t.viz.dendro_room.col+t.viz.uni_margin;d3.select(t.root+" .col_dendro_outer_container").select(".col_dendro_spillover").attr("width",t.viz.svg_dim.width).attr("height",p+"px"),d3.select(t.root+" .col_dendro_outer_container").select(".col_dendro_spillover_top").attr("width",t.viz.svg_dim.width).attr("height",t.viz.svg_dim.height).attr("transform","translate(0,"+t.viz.dendro_room.col+")"),f=t.viz.clust.margin.left,d=0,d3.select(t.root+" .col_dendro_icons_container").attr("transform","translate("+f+","+d+")")}},function(t,e){"use strict";t.exports=function(t,e){var r,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o={},i=t.viz.duration;n===!1?o.run_transition=!1:o=n,r=o.run_transition?e.transition().delay(o.update).duration(i):e,r.select(".super_col_bkg").attr("height",t.viz.super_labels.dim.width+"px").attr("transform","translate("+t.viz.clust.margin.left+","+t.viz.grey_border_width+")"),r.select(".super_col").attr("transform",function(){var e=t.viz.clust.dim.width/2+t.viz.norm_labels.width.row,r=t.viz.super_labels.dim.width;return"translate("+e+","+r+")"}),r.select(".super_row_bkg").attr("width",t.viz.super_labels.dim.width+"px").attr("transform","translate("+t.viz.grey_border_width+",0)"),r.select(".super_row").attr("transform",function(){var e=t.viz.super_labels.dim.width,r=t.viz.clust.dim.height/2+t.viz.norm_labels.width.col;return"translate("+e+","+r+")"})}},function(t,e){"use strict";t.exports=function(t,e){var r,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o={},i=t.duration;n===!1?o.run_transition=!1:o=n,r=o.run_transition?e.transition().delay(o.update).duration(i):e,r.select(t.root+" .right_slant_triangle").attr("transform","translate("+t.clust.dim.width+","+t.norm_labels.width.col+")"),r.select(t.root+" .left_slant_triangle").attr("transform","translate(-1,"+t.norm_labels.width.col+")");var a=t.clust.margin.top+t.uni_margin/5;r.select(t.root+" .top_left_white").attr("width",t.clust.margin.left).attr("height",a);var s=t.clust.margin.left+t.clust.dim.width+t.uni_margin+t.dendro_room.row,l=t.norm_labels.margin.top+t.norm_labels.width.col;r.select(t.root+" .right_spillover_container").attr("transform",function(){return"translate("+s+", 0)"}),l=t.norm_labels.margin.top+t.norm_labels.width.col,r.select(t.root+" .right_spillover_container rect").attr("transform",function(){return"translate( 0,"+l+")"}),r.select(t.root+" .right_spillover").attr("height",t.svg_dim.height+"px");var u=t.clust.margin.left+t.clust.dim.width,c=l,f=t.dendro_room.row+t.uni_margin,d=t.cat_room.col+t.uni_margin;d3.select(t.root+" .dendro_row_spillover").attr("width",f).attr("height",d).attr("transform",function(){return"translate("+u+","+c+")"}),u=0,c=t.clust.margin.top+t.clust.dim.height,f=t.clust.margin.left,d=10*t.clust.dim.height,r.select(".dendro_col_spillover").attr("width",f).attr("height",d).attr("transform",function(){return"translate("+u+","+c+")"}),u=t.clust.margin.left+t.clust.dim.width,c=t.clust.margin.top+t.clust.dim.height,f=t.cat_room.col+t.clust.dim.width,d=t.cat_room.row+t.uni_margin,r.select(".dendro_corner_spillover").attr("width",f).attr("height",d).attr("transform",function(){return"translate("+u+","+c+")"}),u=t.clust.margin.left+t.clust.dim.width+t.uni_margin,c=t.norm_labels.margin.top+t.norm_labels.width.col+2.5*t.uni_margin;var h=2.75,p=1.2;t.show_categories.col&&d3.selectAll(t.root+" .col_cat_super").attr("transform",function(e){var r=parseInt(e.split("-")[1],10),n=c+p*t.cat_room.symbol_width*r;return"translate("+u+","+n+")"}),t.show_categories.row&&d3.select(t.root+" .row_cat_label_container").attr("transform",function(){return u=t.norm_labels.margin.left+t.norm_labels.width.row+t.cat_room.symbol_width+h*t.uni_margin,c=t.clust.margin.top-t.uni_margin,"translate("+u+","+c+") rotate(-90)"}),c=t.show_dendrogram?t.clust.margin.top+t.clust.dim.height+t.dendro_room.col-2*t.uni_margin:t.clust.margin.top+t.clust.dim.height,d3.select(t.root+" .bottom_spillover_container").attr("transform",function(){return"translate(0,"+c+")"}),r.select(t.root+" .bottom_spillover").attr("width",t.svg_dim.width).attr("height",2*t.svg_dim.height);var v=t.cat_room.col+1.5*t.uni_margin;d3.select(t.viz_svg+" .top_right_white").attr("fill",t.background_color).attr("width",2*t.clust.dim.width).attr("height",v).attr("transform",function(){var e=t.clust.margin.left+t.clust.dim.width,r=t.norm_labels.width.col+t.norm_labels.margin.top-t.uni_margin;return"translate("+e+", "+r+")"})}},function(t,e){"use strict";t.exports=function(t,e){e.select(".left_border").attr("width",t.viz.grey_border_width).attr("height",t.viz.svg_dim.height).attr("transform","translate(0,0)"),e.select(".right_border").attr("width",t.viz.grey_border_width).attr("height",t.viz.svg_dim.height).attr("transform",function(){var e=t.viz.svg_dim.width-t.viz.grey_border_width;return"translate("+e+",0)"}),e.select(".top_border").attr("width",t.viz.svg_dim.width).attr("height",t.viz.grey_border_width).attr("transform",function(){var t=0;return"translate("+t+",0)"}),e.select(".bottom_border").attr("width",t.viz.svg_dim.width).attr("height",t.viz.grey_border_width).attr("transform",function(){var e=t.viz.svg_dim.height-t.viz.grey_border_width;return"translate(0,"+e+")"})}},function(t,e,r){"use strict";var n=r(3);t.exports=function(t,e){var r,o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i={},a=t.viz.duration,s=t.network_data.row_nodes,l=t.network_data.row_nodes_names;o===!1?i.run_transition=!1:i=o,i.run_transition?(e.selectAll(".row_label_group").data(s,function(t){return t.name}).transition().delay(i.update).duration(a).attr("transform",function(e){var r=n.indexOf(l,e.name);return"translate(0,"+t.viz.y_scale(r)+")"}).attr("y",.5*t.viz.rect_height+.35*t.labels.default_fs_row),r=e.transition().delay(i.update).duration(a)):(e.selectAll(".row_label_group").data(s,function(t){return t.name}).attr("transform",function(e){var r=n.indexOf(l,e.name);return"translate(0,"+t.viz.y_scale(r)+")"}).attr("y",.5*t.viz.rect_height+.35*t.labels.default_fs_row),r=e),r.select(t.root+" .row_container").attr("transform","translate("+t.viz.norm_labels.margin.left+","+t.viz.clust.margin.top+")"),r.select(t.root+" .row_container").select(".white_bars").attr("width",t.viz.label_background.row).attr("height",30*t.viz.clust.dim.height+"px"),r.select(t.root+" .row_container").select(".row_label_container").attr("transform","translate("+t.viz.norm_labels.width.row+",0)")}},function(t,e){"use strict";t.exports=function(t){var e=6,r=e*t.viz.border_width.x,n=e*t.viz.border_width.y;d3.select(t.root+" .top_hlight").attr("width",t.viz.rect_width).attr("height",n).attr("transform",function(){return"translate("+t.viz.x_scale(t.matrix.click_hlight_x)+",0)"}),d3.select(t.root+" .left_hlight").attr("width",r).attr("height",t.viz.rect_width-.99*n).attr("transform",function(){return"translate("+t.viz.x_scale(t.matrix.click_hlight_x)+","+.99*n+")"}),d3.select(t.root+" .right_hlight").attr("width",r).attr("height",t.viz.rect_height-.99*n).attr("transform",function(){var e=t.viz.x_scale(t.matrix.click_hlight_x)+t.viz.rect_width-r;return"translate("+e+","+.99*n+")"}),d3.select(t.root+" .bottom_hlight").attr("width",function(){return t.viz.rect_width-1.98*r}).attr("height",n).attr("transform",function(){var e=t.viz.x_scale(t.matrix.click_hlight_x)+.99*r,o=t.viz.rect_height-n;return"translate("+e+","+o+")"}),d3.select(t.root+" .row_top_hlight").attr("width",t.viz.svg_dim.width).attr("height",n),d3.select(t.root+" .row_bottom_hlight").attr("width",t.viz.svg_dim.width).attr("height",n).attr("transform",function(){var e=t.viz.rect_height-n;return"translate(0,"+e+")"}),d3.select(t.root+" .col_top_hlight").attr("width",t.viz.clust.dim.height).attr("height",r).attr("transform",function(){var e=0,r=-(t.viz.clust.dim.height+t.viz.cat_room.col+t.viz.uni_margin);return"translate("+r+","+e+")"}),d3.select(t.root+" .col_bottom_hlight").attr("width",t.viz.clust.dim.height).attr("height",r).attr("transform",function(){var e=t.viz.rect_width-r,n=-(t.viz.clust.dim.height+t.viz.cat_room.col+t.viz.uni_margin);return"translate("+n+","+e+")"})}},function(t,e){"use strict";t.exports=function(t,e){var r,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o={},i=t.viz.duration;n===!1?o.run_transition=!1:o=n,r=o.run_transition?e.transition().delay(o.update).duration(i):e,r.select(".row_cat_outer_container").attr("transform","translate("+t.viz.norm_labels.width.row+",0)").select("white_bars").attr("width",t.viz.cat_room.row+"px").attr("height",function(){var e=t.viz.clust.dim.height;return e});var a=t.viz.clust.margin.left+t.viz.clust.dim.width,s=t.viz.clust.margin.top;r.select(".row_dendro_outer_container").attr("transform","translate("+a+","+s+")"),a=t.viz.clust.margin.left,s=t.viz.clust.margin.top+t.viz.clust.dim.height,r.select(" .col_dendro_outer_container").attr("transform",function(){return"translate("+a+","+s+")"})}},function(t,e,r){"use strict";var n=r(3);t.exports=function(t,e){var r,o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i={},a=t.viz.duration,s=t.network_data.col_nodes,l=t.network_data.col_nodes_names;o===!1?i.run_transition=!1:i=o,i.run_transition?(r=e.transition().delay(i.update).duration(a),e.selectAll(".col_label_text").data(s,function(t){return t.name}).transition().delay(i.update).duration(a).attr("transform",function(e){var r=n.indexOf(l,e.name);return"translate("+t.viz.x_scale(r)+", 0) rotate(-90)"})):(r=e,e.selectAll(".col_label_text").data(s,function(t){return t.name}).attr("transform",function(e){var r=n.indexOf(l,e.name);return"translate("+t.viz.x_scale(r)+", 0) rotate(-90)"}));var u=t.viz.x_scale.rangeBand()/2+t.viz.border_width.x;r.select(t.root+" .col_container").attr("transform","translate("+t.viz.clust.margin.left+","+t.viz.norm_labels.margin.top+")"),r.select(t.root+" .col_container").select(".white_bars").attr("width",30*t.viz.clust.dim.width+"px").attr("height",t.viz.label_background.col),r.select(t.root+" .col_container").select(".col_label_outer_container").attr("transform","translate(0,"+t.viz.norm_labels.width.col+")"),r.selectAll(".col_label_group").attr("transform","translate("+t.viz.x_scale.rangeBand()/2+","+u+") rotate(45)"),r.selectAll(".col_label_group").select("text").attr("y",.6*t.viz.x_scale.rangeBand()).attr("dx",2*t.viz.border_width.x)}},function(t,e,r){"use strict";var n=r(2);t.exports=function(t,e){e.selectAll(".col_label_group").select("text").style("font-size",t.labels.default_fs_col+"px").text(function(t){return n.normal_name(t)}),e.selectAll(".col_label_group").each(function(){d3.select(this).select("text")[0][0].getBBox()})}},function(t,e,r){"use strict";var n=r(140);t.exports=function(t,e){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=e.selectAll(".col_label_group").select("path"),i={},a=t.viz.duration;r===!1?i.run_transition=!1:i=r;var s;s=i.run_transition?o.transition().delay(i.update).duration(a):o,s.attr("d",function(){return n(t)}).attr("fill","#eee")}},function(t,e,r){"use strict";var n=r(2);t.exports=function(t,e){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o={};r===!1?o.run_transition=!1:o=r,n.has(t.network_data.col_nodes[0],"value")&&e.selectAll(".col_bars").data(t.network_data.col_nodes,function(t){return t.name}).attr("width",function(e){var r=0;return e.value>0&&(r=t.labels.bar_scale_col(e.value)),r}).attr("height",.66*t.viz.rect_width)}},function(t,e,r){"use strict";var n=r(71),o=r(74),i=r(73),a=r(83),s=r(82),l=r(3);t.exports=function(t){if(t=n(t),t.viz=i(t.viz),t.viz=o(t.viz),t.sim_mat&&(t.viz.clust.dim.width<=t.viz.clust.dim.height?t.viz.clust.dim.height=t.viz.clust.dim.width:t.viz.clust.dim.width=t.viz.clust.dim.height),t.viz=s(t.viz),t.viz.x_scale.rangeBands([0,t.viz.clust.dim.width]),t.viz.y_scale.rangeBands([0,t.viz.clust.dim.height]),t.viz.border_width.x=t.viz.x_scale.rangeBand()/t.viz.border_fraction,t.viz.border_width.y=t.viz.y_scale.rangeBand()/t.viz.border_fraction,t.viz.rect_width=t.viz.x_scale.rangeBand()-t.viz.border_width.x,t.viz.rect_height=t.viz.y_scale.rangeBand()-t.viz.border_width.y,null!=t.viz.ds)for(var e;e<t.viz.ds.length;e++)t.viz.ds[e].rect_height=t.viz.ds[e].y_scale.rangeBand()-t.viz.border_width.y;return t.viz.ds_num_levels>0&&l.each(t.viz.ds,function(e){e.y_scale=d3.scale.ordinal().rangeBands([0,t.viz.clust.dim.height]),e.y_scale.domain(d3.range(e.num_rows+1)),e.rect_height=e.y_scale.rangeBand()-t.viz.border_width.y}),t.viz.square_zoom=t.viz.norm_labels.width.col/(t.viz.rect_width/2),t=a(t)}},function(t,e,r){"use strict";var n=r(95),o=r(96),i=r(99),a=r(3);t.exports=function(t,e){var r=t.network_data.row_nodes_names;if(t.viz.ds_level===-1)e.selectAll(".row").attr("transform",function(e){var n=a.indexOf(r,e.name),o=t.viz.y_scale(n);return"translate(0,"+o+")"}),e.selectAll(".row").selectAll(".tile").attr("transform",function(e){return i(t,e)}).attr("width",t.viz.rect_width).attr("height",t.viz.rect_height),e.selectAll(".row").selectAll(".tile_up").attr("d",function(){return n(t)}).attr("transform",function(e){return i(t,e)}),e.selectAll(".row").selectAll(".tile_dn").attr("d",function(){return o(t)}).attr("transform",function(e){return i(t,e)});else{var s=t.viz.ds_level,l=".ds"+String(s)+"_row",u=t.viz.ds[s].rect_height;e.selectAll(l).attr("transform",function(e){var r=t.viz.ds[s].y_scale(e.row_index);return"translate(0,"+r+")"}),e.selectAll(l).selectAll(".tile").attr("transform",function(e){return i(t,e)}).attr("width",t.viz.rect_width).attr("height",u)}}},function(t,e,r){"use strict";var n=r(75);t.exports=function(t,e){var r=t.params;r=n(r),e.selectAll(".row_bars").attr("width",function(t){var e=0;return e=r.labels.bar_scale_row(Math.abs(t.value))}).attr("x",function(t){var e=0;return e=-r.labels.bar_scale_row(Math.abs(t.value))}).attr("height",r.viz.y_scale.rangeBand())}},function(t,e){"use strict";t.exports=function(t){var e=d3.select(t.root+" .clust_container").attr("transform"),r=Number(e.split("(")[1].split(",")[0]),n=Number(e.split(",")[1].replace(")","")),o=r+t.viz.clust.dim.width/2,i=n+t.viz.clust.dim.height/2;d3.select(t.root+" .play_button").attr("transform",function(){return"translate("+o+","+i+")"})}},function(t,e){"use strict";t.exports=function(t){var e,r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"row",o=t.params.viz;if("row"===n){var i=o.svg_dim.width-3*o.uni_margin;e=o.clust.margin.left+o.clust.dim.width+5.25*o.dendro_room.row+2,e>i&&(e=i),r=o.clust.margin.top+3*o.uni_margin+30}else e=2*o.uni_margin,r=o.clust.margin.top+o.clust.dim.height+o.dendro_room.col-2*o.uni_margin;d3.select(t.params.root+" ."+n+"_slider_group").attr("transform",function(){var t;return"row"===n?(e+=.8*o.dendro_room.row,t="translate("+e+","+r+")"):t="translate("+e+","+r+"), rotate(-90)",t}).style("opacity",1)}},function(t,e){"use strict";t.exports=function(t){var e,r,n=t.params.viz,o=n.svg_dim.width-3*n.uni_margin;e=n.clust.margin.left+n.clust.dim.width+5.25*n.dendro_room.row,e>o&&(e=o),r=n.clust.margin.top+3*n.uni_margin+90,d3.select(t.params.root+" .tree_icon").attr("transform",function(){var t;return r-=75,t="translate("+e+","+r+")"}).style("opacity",1)}},function(t,e){"use strict";t.exports=function(t){var e,r,n=t.params.viz,o=n.svg_dim.width-3*n.uni_margin;e=n.clust.margin.left+n.clust.dim.width+4*n.dendro_room.row+7,e>o&&(e=o),r=n.clust.margin.top+3*n.uni_margin+152,d3.select(t.params.root+" .filter_icon").attr("transform",function(){var t;return r-=75,t="translate("+e+","+r+")"}).style("opacity",1)}},function(t,e){"use strict";t.exports=function(t){var e=t.params;if(d3.select(e.root+" .tree_menu").empty()===!1){var r=t.params.viz.tree_menu_width;d3.select(e.root+" .tree_menu").attr("transform",function(){var t={};return t.x=e.viz.clust.dim.width+e.viz.clust.margin.left-r+30,t.y=e.viz.clust.margin.top+15,"translate("+t.x+", "+t.y+")"})}}},function(t,e){"use strict";t.exports=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=0;e>0&&(r=2e3);var n=d3.selectAll(t.root+" .horz_lines"),o=d3.selectAll(t.root+" .vert_lines");n.style("opacity",0).attr("transform",function(e){var r=e.row_index,n=t.viz.y_scale(r);return"translate(  0,"+n+") rotate(0)"}).transition().duration(e).delay(r).style("opacity",1),n.append("line").attr("x1",0).attr("x2",t.viz.clust.dim.width).style("stroke-width",function(){var e=t.viz.border_width.y;return e+"px"}),o.style("opacity",0).attr("transform",function(e){var r=e.col_index,n=t.viz.x_scale(r);return"translate("+n+") rotate(-90)"}).transition().duration(e).delay(r).style("opacity",1),o.append("line").attr("x1",0).attr("x2",-t.viz.clust.dim.height).style("stroke-width",function(){var e=t.viz.border_width.x;return e+"px"})}},function(t,e,r){"use strict";var n=r(186),o=r(100),i=r(187),a=r(188),s=r(189),l=r(3);t.exports=function(t){var e=t.params;d3.select(e.root+" .col_cat_outer_container").empty()?d3.select(e.root+" .col_container").append("g").attr("class","col_cat_outer_container").attr("transform",function(){var t=e.viz.norm_labels.width.col+2;return"translate(0,"+t+")"}).append("g").attr("class","col_cat_container"):d3.select(e.root+" .col_container").select("col_cat_outer_container").attr("transform",function(){var t=e.viz.norm_labels.width.col+2;return"translate(0,"+t+")"}),d3.selectAll(e.viz.root_tips+"_col_cat_tip").remove();var r=o().attr("class",function(){var t=e.viz.root_tips.replace(".",""),r=t+" d3-tip "+t+"_col_cat_tip";return r}).direction("s").offset([5,0]).style("display","none").html(function(t){return n(e,t,this,"col")});d3.select(e.root+" .col_cat_container").selectAll("g").data(e.network_data.col_nodes,function(t){return t.name}).enter().append("g").attr("class","col_cat_group").attr("transform",function(t){var r=l.indexOf(e.network_data.col_nodes_names,t.name);return"translate("+e.viz.x_scale(r)+",0)"}),d3.select(e.root+" .col_cat_container").selectAll(".col_cat_group").call(r),d3.selectAll(e.root+" .col_cat_group").each(function(){var t,n=this;l.each(e.viz.all_cats.col,function(o){var l=parseInt(o.split("-")[1],10),u="col_cat_rect_"+String(l);t=d3.select(n).select("."+u).empty()?d3.select(n).append("rect").attr("class",u).attr("cat",o).attr("transform",function(){var t=e.viz.cat_room.symbol_width+e.viz.cat_room.separation,r=l*t;return"translate(0,"+r+")"}).on("click",function(t){if(d3.select(this).classed("cat_strings")){var r=s(e,t,this,"col");$(e.root+" .dendro_info").modal("toggle");var n=r.join(", ");d3.select(e.root+" .dendro_info input").attr("value",n)}}):d3.select(n).select("."+u),t.attr("width",e.viz.x_scale.rangeBand()).attr("height",e.viz.cat_room.symbol_width).style("fill",function(t){var r=t[o],n=e.viz.cat_colors.col[o][r];return n}).on("mouseover",r.show).on("mouseout",function(){r.hide(this),i(e),d3.select(this).classed("hovering",!1),d3.selectAll(".d3-tip").style("display","none")}),a(e.viz,"col",t,o)})})}},function(t,e,r){"use strict";var n=r(143),o=r(3);t.exports=function(t,e,r,i){function a(){var e=!1;if(d3.select(r).classed("hovering")){var n=[i];t.viz.sim_mat&&(n=["row","col"]),o.each(n,function(r){"string"==typeof u&&u.indexOf("Not ")<0&&"false"!=u&&(e=!0),e&&d3.selectAll(t.root+" ."+r+"_cat_group").selectAll("rect").style("opacity",function(e){var r=d3.select(this).style("opacity");if(d3.select(this).classed("cat_strings")&&d3.select(this).classed("filtered_cat")===!1){var n,o=d3.select(this).attr("cat");n=e[o].indexOf(": ")>=0?e[o].split(": ")[1]:e[o],r=o===s&&n===u?t.viz.cat_colors.active_opacity:t.viz.cat_colors.opacity/4}return r})})}}d3.selectAll(t.viz.root_tips+"_col_cat_tip").style("display","block"),d3.selectAll(t.viz.root_tips+"_row_cat_tip").style("display","block");var s=d3.select(r).attr("cat"),l=n(t.viz,s,i),u=e[s];"string"==typeof u&&u.indexOf(": ")>=0&&(u=u.split(": ")[1]);var c="<div>"+l+": "+u+"</div> <div> <br>Click for Category Menu </div>";return d3.select(r).classed("hovering",!0),setTimeout(a,500),c}},function(t,e,r){"use strict";var n=r(3);t.exports=function(t){n.each(["row","col"],function(e){d3.selectAll(t.root+" ."+e+"_cat_group").selectAll("rect").style("opacity",function(){var e=d3.select(this).style("opacity");return d3.select(this).classed("cat_strings")&&d3.select(this).classed("filtered_cat")===!1&&(e=t.viz.cat_colors.opacity),e})})}},function(t,e){"use strict";t.exports=function(t,e,r,n){function o(t){"string"==typeof t&&t.indexOf(a)>-1&&(t=t.split(a)[1]);var e=parseFloat(t);return e}var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=": ",s=t.cat_info[e][n].type;"cat_strings"===s?i?r.classed("cat_strings",!0).style("opacity",0).transition().duration(1e3).style("opacity",t.cat_colors.opacity):r.classed("cat_strings",!0).style("opacity",t.cat_colors.opacity):r.classed("cat_values",!0).style("opacity",function(r){var i=r[n],a=o(i);return t.cat_info[e][n].cat_scale(Math.abs(a))}).style("fill",function(e){var r,i=o(e[n]);return r=i>0?t.cat_value_colors[0]:t.cat_value_colors[1]})}},function(t,e,r){"use strict";var n=r(2),o=r(3);t.exports=function(t,e,r,i){var a=d3.select(r).attr("cat"),s=e[a],l=t.network_data[i+"_nodes"],u=o.filter(l,function(t){return t[a]==s}),c=n.pluck(u,"name");return c}},function(t,e,r){"use strict";var n=r(186),o=r(100),i=r(187),a=r(188),s=r(189),l=r(3);t.exports=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=t.params;d3.select(r.root+" .row_cat_outer_container").empty()?d3.select(r.root+" .row_container").append("g").attr("class","row_cat_outer_container").attr("transform","translate("+r.viz.norm_labels.width.row+",0)").append("g").attr("class","row_cat_container"):d3.select(r.root+" .row_container").select("row_cat_outer_container").attr("transform","translate("+r.viz.norm_labels.width.row+",0)"),d3.select(r.root+" .row_cat_container").select(".white_bars").empty()?d3.select(r.root+" .row_cat_container").append("rect").attr("class","white_bars").attr("fill",r.viz.background_color).attr("width",r.viz.cat_room.row+"px").attr("height",function(){var t=r.viz.clust.dim.height;return t}):d3.select(r.root+" .row_cat_container").select(".white_bars").attr("fill",r.viz.background_color).attr("width",r.viz.cat_room.row+"px").attr("height",function(){var t=r.viz.clust.dim.height;return t}),d3.selectAll(r.viz.root_tips+"_row_cat_tip").remove();var u=o().attr("class",function(){var t=r.viz.root_tips.replace(".",""),e=t+" d3-tip "+t+"_row_cat_tip";return e}).direction("e").offset([5,0]).style("display","none").html(function(t){return n(r,t,this,"row")});d3.select(r.root+" .row_cat_container").selectAll("g").data(r.network_data.row_nodes,function(t){return t.name}).enter().append("g").attr("class","row_cat_group").attr("transform",function(t){var e=l.indexOf(r.network_data.row_nodes_names,t.name);return"translate(0, "+r.viz.y_scale(e)+")"}),d3.select(r.root+" .row_cat_container").selectAll(".row_cat_group").call(u);var c,f;d3.selectAll(r.root+" .row_cat_group rect").remove(),r.viz.show_categories.row&&d3.selectAll(r.root+" .row_cat_group").each(function(){f=this,l.each(r.viz.all_cats.row,function(t){var n=parseInt(t.split("-")[1],10),o="row_cat_rect_"+String(n);c=d3.select(f).select("."+o).empty()?d3.select(f).append("rect").attr("class",o).attr("cat",t):d3.select(f).select("."+o),c.attr("width",r.viz.cat_room.symbol_width).attr("height",r.viz.y_scale.rangeBand()).style("fill",function(e){var n=e[t],o=r.viz.cat_colors.row[t][n];return o}).attr("x",function(){var t=r.viz.cat_room.symbol_width+r.viz.uni_margin/2;return t+"px"}).attr("transform",function(){var t=r.viz.cat_room.symbol_width+r.viz.cat_room.separation,e=n*t;return"translate("+e+",0)"}).on("click",function(t){if(d3.select(this).classed("cat_strings")){var e=s(r,t,this,"row");$(r.root+" .dendro_info").modal("toggle");var n=e.join(", ");d3.select(r.root+" .dendro_info input").attr("value",n)}}).on("mouseover",u.show).on("mouseout",function(){u.hide(this),i(r),d3.select(this).classed("hovering",!1),d3.selectAll(".d3-tip").style("display","none")}),a(r.viz,"row",c,t,e)})})}},function(t,e,r){"use strict";var n=r(107);t.exports=function(t){var e=t.params,r=e.viz.dendro_room.row+e.viz.uni_margin,o=e.viz.clust.margin.left+e.viz.clust.dim.width,i=e.viz.clust.margin.top;d3.select(e.root+" .row_dendro_outer_container").empty()?(d3.select(e.root+" .viz_svg").append("g").attr("class","row_dendro_outer_container").attr("transform","translate("+o+","+i+")"),d3.select(e.root+" .row_dendro_outer_container").append("rect").classed("row_dendro_spillover",!0).attr("fill",e.viz.background_color).attr("width",r+"px").attr("height",e.viz.svg_dim.height),d3.select(e.root+" .row_dendro_outer_container").append("g").attr("class","row_dendro_container").attr("transform","translate("+e.viz.uni_margin/2+",0)")):(d3.select(e.root+" .viz_svg").select("row_dendro_outer_container").attr("transform","translate("+o+","+i+")"),d3.select(e.root+" .row_dendro_outer_container").select(".row_dendro_spillover").attr("width",r+"px").attr("height",e.viz.svg_dim.height)),n(t,"row",!1),"clust"!=e.viz.inst_order.col&&d3.selectAll(e.root+" .row_dendro_group").remove()}},function(t,e,r){"use strict";var n=r(107);t.exports=function(t){var e=t.params,r=e.viz.clust.margin.left,o=e.viz.clust.margin.top+e.viz.clust.dim.height,i=e.viz.dendro_room.col+e.viz.uni_margin;d3.select(e.root+" .col_dendro_outer_container").empty()?(d3.select(e.root+" .viz_svg").append("g").attr("class","col_dendro_outer_container").attr("transform","translate("+r+","+o+")"),d3.select(e.root+" .col_dendro_outer_container").append("rect").classed("col_dendro_spillover",!0).attr("fill",e.viz.background_color).attr("width",e.viz.svg_dim.width).attr("height",i+"px"),d3.select(e.root+" .col_dendro_outer_container").append("g").attr("class","col_dendro_container").attr("transform","translate(0,"+e.viz.uni_margin/2+")"),d3.select(e.root+" .col_dendro_outer_container").append("rect").classed("col_dendro_spillover_top",!0).attr("fill",e.viz.background_color).attr("width",e.viz.svg_dim.width).attr("height",e.viz.svg_dim.height).attr("transform","translate(0,"+e.viz.dendro_room.col+")")):(d3.select(e.root+" .viz_svg").select("col_dendro_outer_container").attr("transform","translate("+r+","+o+")"),d3.select(e.root+" .col_dendro_outer_container").select(".col_dendro_spillover").attr("width",e.viz.svg_dim.width).attr("height",i+"px")),n(t,"col",!1),"clust"!=e.viz.inst_order.row&&d3.selectAll(e.root+" .col_dendro_group").remove();
}},function(t,e,r){"use strict";var n=r(194);t.exports=function(t){n(t,"row"),n(t,"col")}},function(t,e,r){"use strict";var n=r(195),o=r(180);t.exports=function(t,e){function r(){t.params.is_slider_drag=!0;var r=d3.event.y;r<0&&(r=0),r>a&&(r=a),this.nextSibling&&this.parentNode.appendChild(this),r=d3.round(r,-1);var o=10-r/10;d3.select(this).attr("transform","translate(0, "+r+")"),n(t,e,o)}function i(){var r=d3.mouse(this),o=d3.round(r[1],-1);d3.select(t.params.root+" ."+e+"_group_circle").attr("transform","translate(0, "+o+")");var i=10-o/10;n(t,e,i)}var a=100,s=d3.behavior.drag().on("drag",r).on("dragend",function(){t.params.is_slider_drag=!1}),l=d3.select(t.params.root+" .viz_svg").append("g").classed(e+"_slider_group",!0);o(t,e);var u=a+20,c=30;l.append("rect").classed(e+"_slider_background",!0).attr("height",u+"px").attr("width",c+"px").attr("fill",t.params.viz.background_color).attr("transform",function(){var t="translate(-10, -5)";return t}).style("opacity",0),l.append("line").style("stroke-width",a/7+"px").style("stroke","black").style("stroke-linecap","round").style("opacity",0).attr("y1",0).attr("y2",function(){return a-2}).on("click",i);var f=-a/40;l.append("path").style("fill","black").attr("transform","translate("+f+", 0)").attr("d",function(){var t=0,e=0,r=0,n=a,o=a/10,i=0,s="M"+t+","+e+" L"+r+", "+n+" L"+o+","+i+" Z";return s}).style("opacity",.35).on("click",i);var d=.35,h=.6;l.append("circle").classed(e+"_group_circle",!0).attr("r",.08*a).attr("transform",function(){return"translate(0, "+a/2+")"}).style("fill","blue").style("opacity",d).on("mouseover",function(){d3.select(this).style("opacity",h)}).on("mouseout",function(){d3.select(this).style("opacity",d)}).call(s)}},function(t,e,r){"use strict";var n=r(107);t.exports=function(t,e,r){var o=t.params;"row"===e?o.group_level.row=r:"col"===e&&(o.group_level.col=r);var i=!0;n(t,e,i)}},function(t,e,r){"use strict";var n=r(112);t.exports=function(t){var e=t.params.viz,r=e.clust.margin.left+e.clust.dim.width+e.uni_margin+e.dendro_room.row,o=d3.select(e.viz_svg).append("g").classed("right_spillover_container",!0).attr("transform",function(){return"translate("+r+", 0)"}),i=e.norm_labels.margin.top+e.norm_labels.width.col;o.append("rect").attr("fill",e.background_color).attr("width",10*e.clust.dim.width).attr("height",e.svg_dim.height+"px").attr("class","white_bars").attr("class","right_spillover").attr("transform",function(){return"translate( 0,"+i+")"});var a=0,s=e.clust.margin.top;o.append("g").classed("row_dendro_icons_container",!0).attr("transform","translate("+a+","+s+")").append("g").classed("row_dendro_icons_group",!0),n(t,"row"),a=e.clust.margin.left+e.clust.dim.width,s=i;var l=e.dendro_room.row+e.uni_margin,u=e.cat_room.col+e.uni_margin;d3.select(e.viz_svg).append("rect").attr("fill",e.background_color).attr("width",l).attr("height",u).attr("transform",function(){return"translate("+a+","+s+")"}).classed("white_bars",!0).classed("dendro_row_spillover",!0)}},function(t,e,r){"use strict";var n=r(198),o=r(199),i=r(201),a=r(202),s=r(204),l=r(205),u=r(207),c=r(208),f=r(231),d=r(232),h=r(233),p=r(234),v=r(235),_=r(236);t.exports=function(){var t=this,e=t.params;if(d3.select(e.root+" .running_demo").empty()){d3.select(e.root+" .play_button").classed("running_demo",!0),v(e,!1),$.blockUI({css:{border:"none",padding:"15px",backgroundColor:"#000","-webkit-border-radius":"10px","-moz-border-radius":"10px",opacity:0,color:"#fff",cursor:"default"}}),d3.selectAll(".blockUI").style("opacity",0);var r=750;t.params.viz.is_expand===!1&&(r=n(e,r,f),r-=1500),r=n(e,r,o),r=n(e,r,i),r=n(t,r,a),r=n(e,r,h),r=n(e,r,s),r=n(e,r,_),r=n(e,r,d),r=n(e,r,l),r=n(e,r,u),r=n(t,r,c),r=n(e,r,f),r=n(e,r,p)}}},function(t,e){"use strict";t.exports=function(t,e,r){var n=(setTimeout(r().run,e,t),r().get_duration());return e+=n}},function(t,e,r){"use strict";var n=r(200);t.exports=function(){function t(t){var e="Clustergrammer allows users to generate\ninteractive and sharable visualizations\nby uploading a matrix",o="This demo will quickly overview some\nof Clustergrammer's interactive features";setTimeout(n,0,t,e,4500/r),setTimeout(n,4500/r,t,o,4500/r)}function e(){return 1e4/r}var r=1;return{run:t,get_duration:e}}},function(t,e){"use strict";t.exports=function(t,e,r){var n=e.split("\n");n.length<3&&n.push(""),d3.select(t.root+" .demo_group").style("opacity",0).transition().duration(250).style("opacity",1).transition().duration(250).delay(r).style("opacity",0);for(var o=0;o<n.length;o++){var i=o+1,a=d3.select(t.root+" .demo_group").select("#text_"+i).text(n[o]),s=a[0][0].getBBox(),l=.9,u=Number(d3.select(".demo_group").select("text").style("font-size").replace("px","")),c=1.3*u;d3.select(t.root+" .demo_group").select(".rect_"+i).style("fill","white").attr("width",s.width+20).attr("height",s.height).attr("x",-10).attr("y",s.y+o*c).style("opacity",l)}}},function(t,e,r){"use strict";var n=r(200),o=r(146);t.exports=function(){function t(t){var e=t.params,r="Zoom and pan by\nscrolling and dragging";n(e,r,4e3),setTimeout(o,1500,t,0,0,4)}function e(){return 4e3}return{run:t,get_duration:e}}},function(t,e,r){"use strict";var n=r(200),o=r(146),i=r(203);t.exports=function(){function t(t){var e=t.params,r="Reset zoom by double-clicking\n";n(e,r,4e3),setTimeout(i,2e3,e,"double",300,300),setTimeout(o,2400,t,0,0,1)}function e(){return 4500}return{run:t,get_duration:e}}},function(t,e){"use strict";t.exports=function(t,e,r,n){var o=200,i=d3.select(t.root+" .viz_svg").append("circle").attr("cx",r).attr("cy",n).attr("r",25).style("stroke","black").style("stroke-width","3px").style("fill","#007f00").style("opacity",.5);"double"===e?i.transition().duration(o).style("opacity",0).transition().duration(50).style("opacity",.5).transition().duration(o).style("opacity",0).remove():i.transition().duration(o).style("opacity",0).transition().duration(250).remove()}},function(t,e,r){"use strict";var n=r(200),o=r(203);t.exports=function(){function t(t){var e="Reorder the matrix based on a single\nrow or column by double-clicking a\nlabel";n(t,e,7e3);var a=r(t,"EGFR"),s=d3.select(a).attr("transform"),l=d3.select(t.root+" .clust_container").attr("transform").split(",")[1].replace(")",""),u=.9*t.viz.norm_labels.width.row,c=s.split(",")[1].replace(")",""),f=String(Number(c)+Number(l)+t.viz.rect_height/2),d=4e3;setTimeout(o,d,t,"double",u,f);var h=d+300;setTimeout(i,h,t,a)}function e(){return 8e3}function r(t,e){var r=d3.selectAll(t.root+" .row_label_group").filter(function(){var t=this.__data__;return t.name==e})[0][0];return r}function i(t,e){$(e).d3DblClick()}return jQuery.fn.d3DblClick=function(){this.each(function(t,e){var r=document.createEvent("MouseEvents");r.initMouseEvent("dblclick",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),e.dispatchEvent(r)})},{run:t,get_duration:e}}},function(t,e,r){"use strict";var n=r(200),o=r(206);t.exports=function(){function t(t){var e="Reorder all rows and columns\nby clicking the reorder\n buttons";n(t,e,9e3),setTimeout(o,3e3,t,"toggle_col_order"),setTimeout(r,3500,t,"col","rank"),setTimeout(o,7e3,t,"toggle_row_order"),setTimeout(r,7500,t,"row","rank")}function e(){return 11e3}function r(t,e,r){var n=d3.selectAll(".toggle_"+e+"_order .btn").filter(function(){return this.__data__==r})[0];$(n).click()}return{run:t,get_duration:e}}},function(t,e){"use strict";t.exports=function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4e3;e.indexOf("slider")<0?d3.select(t.root+" ."+e).style("background","#007f00").style("box-shadow","0px 0px 10px 5px #007f00").transition().duration(1).delay(r).style("background","#FFFFFF").style("box-shadow","none"):d3.select(t.root+" ."+e).style("box-shadow","0px 0px 10px 5px #007f00").transition().duration(1).delay(r).style("box-shadow","none")}},function(t,e,r){"use strict";var n=r(200),o=r(206),i=r(146);t.exports=function(){function t(t){var e=t.params,s="Search for rows using\nthe search box";n(e,s,5e3);var l=2500;setTimeout(o,l,e,"gene_search_container"),setTimeout(r,l+1e3,e,"E"),setTimeout(r,l+1500,e,"EG"),setTimeout(r,l+2e3,e,"EGF"),setTimeout(r,l+2500,e,"EGFR"),setTimeout(a,5500,e),setTimeout(i,7500,t,0,0,1)}function e(){return 1e4}function r(t,e){$(t.root+" .gene_search_box").val(e),$(t.root+" .gene_search_box").autocomplete("search",e)}function a(t){$(t.root+" .submit_gene_button").click(),$(t.root+" .gene_search_box").autocomplete("search","")}return{run:t,get_duration:e}}},function(t,e,r){"use strict";var n=r(200),o=r(206),i=r(209);t.exports=function(){function t(t){var e=t.params,i="Filter rows based on sum or\nvariance using the sliders";n(e,i,4e3);var a="N_row_sum";setTimeout(o,5e3,e,"slider_"+a,13e3),i="Filter: Top 20 rows by sum",setTimeout(n,5e3,e,i,4e3),setTimeout(r,5300,t,a,20,1),i="Filter: Top 10 rows by sum",setTimeout(n,1e4,e,i,4e3),setTimeout(r,10300,t,a,10,2),i="Filter: All rows",setTimeout(n,15e3,e,i,4e3),setTimeout(r,15300,t,a,"all",0)}function e(){return 19500}function r(t,e,r,n){var o=t.params,a={};a[e]=r,i(t,a),$(o.root+" .slider_"+e).slider("value",n);var s;s="N_row_sum"===e?"sum":"variance",d3.select(o.root+" .title_"+e).text("Top rows "+s+": "+r)}return{run:t,get_duration:e}}},function(t,e,r){"use strict";var n=r(11),o=r(210),i=r(211),a=r(3);t.exports=function(t,e){o(t.params);var r=n(t.config,t.params,e);d3.select(t.params.root+" .crop_button").style("color","#337ab7").classed("fa-crop",!0).classed("fa-undo",!1).classed("active_cropping",!1),a.each(["row","col"],function(e){d3.select(t.params.root+" ."+e+"_dendro_icons_group").classed("ran_filter",!1),d3.select(t.params.root+" ."+e+"_dendro_icons_container").style("display","block")}),i(t,r)}},function(t,e){"use strict";t.exports=function(t){d3.selectAll(t.root+" .btn").attr("disabled",!0),d3.select(t.viz.viz_svg).style("opacity",.7)}},function(t,e,r){"use strict";var n=r(10),o=r(212),i=r(213),a=r(153),s=r(185),l=r(190),u=r(191),c=r(192),f=r(224),d=r(226),h=r(163),p=r(227),v=r(152),_=r(228),m=r(155),g=r(230),y=r(84);t.exports=function(t,e){function r(){d3.selectAll(".dendro_shadow").remove()}function w(){d3.select(t.params.viz.viz_svg).transition().duration(250).style("opacity",1),setTimeout(x,1e3)}function x(){d3.select(t.params.viz.viz_svg).classed("running_update",!1)}d3.select(t.params.viz.viz_svg).classed("running_update",!0),d3.selectAll(t.params.root+" .ds"+String(t.params.viz.ds_level)+"_row").remove(),null!=t.params.matrix_update_callback&&t.params.matrix_update_callback();var b=t.params.matrix.distance_metric,z=t.params.matrix.linkage_type,M=t.params.matrix.filter_state,k=t.params.matrix.normalization_state,A=t.params.group_level,E=t.params.crop_filter_nodes,N=jQuery.extend(!0,{},t.config),S=null;if(null!=t.params.new_row_cats){_(t.params.new_row_cats,e.row_nodes),S=t.params.new_row_cats,t.params.new_row_cats=S;var C=!0;t.params.viz=y(t.params,t.params.viz,C)}N.network_data=e,N.inst_order=t.params.viz.inst_order,N.input_domain=t.params.matrix.opacity_scale.domain()[1],p(N,t.params),N.ini_view=null,N.current_col_cat=t.params.current_col_cat,N.cat_colors=t.params.viz.cat_colors;var T=n(N),O=o(t.params,T);t.params=T,t.params.zoom_behavior=d3.behavior.zoom().scaleExtent([1,t.params.viz.square_zoom*t.params.viz.zoom_ratio.x]).on("zoom",function(){m(t)}),t.params.matrix.distance_metric=b,t.params.matrix.linkage_type=z,t.params.matrix.filter_state=M,t.params.matrix.normalization_state=k,t.params.group_level=A,t.params.crop_filter_nodes=E,0===t.params.viz.ds_num_levels?i(t,e,O):g(t),d3.select(t.params.viz.viz_svg).style("opacity",.7),l(t),v(t),t.params.viz.show_categories.col&&s(t),t.params.viz.show_dendrogram&&(u(t),c(t)),a(t),d3.select(t.params.viz.viz_svg).call(t.params.zoom_behavior),h(t),f(t),t.params.viz.run_trans=!0,setTimeout(d,2500,t.params),setTimeout(r,50),setTimeout(r,100),setTimeout(r,500),setTimeout(r,1e3),setTimeout(r,1500),setTimeout(w,O.enter)}},function(t,e,r){"use strict";var n=r(3);t.exports=function(t,e){var r=t.network_data.row_nodes,o=t.network_data.col_nodes,i=n.map(r,function(t){return t.name}),a=n.map(o,function(t){return t.name}),s=i.concat(a),l=e.network_data.row_nodes,u=e.network_data.col_nodes,c=n.map(l,function(t){return t.name}),f=n.map(u,function(t){return t.name}),d=c.concat(f),h=n.difference(s,d).length,p=n.difference(d,s).length,v={};h>0?v.update=1e3:v.update=0,p>0?v.enter=1e3:v.enter=0,v.enter=v.enter+v.update,v.run_transition=!0;var _=t.network_data.links.length,m=e.network_data.links.length,g=.5*e.matrix.def_large_matrix;return(_>g||m>g)&&(v.run_transition=!1,v.update=0,v.enter=0),v}},function(t,e,r){"use strict";var n=r(214),o=r(101),i=r(133),a=r(215),s=r(219),l=r(91),u=r(220),c=r(223),f=r(147),d=r(100);t.exports=function(t,e,r){var h=t.params;d3.selectAll(h.viz.root_tips).remove();var p=d().attr("class",function(){var t=h.viz.root_tips.replace(".",""),e=t+" d3-tip "+t+"_tile_tip";return e}).direction("nw").offset([0,0]).style("display","none").html(function(t){var e,r=String(t.value.toFixed(3));if(h.keep_orig){var n=String(t.value_orig.toFixed(3));e="<p>"+t.row_name+" and "+t.col_name+"</p><p> normalized value: "+r+"</p><div> original value: "+n+"</div>"}else e="<p>"+t.row_name+" and "+t.col_name+"</p><div> value: "+r+"</div>";return e});d3.select(h.root+" .clust_group").call(p),c(h);for(var v=1e3,_=e.row_nodes,m=e.col_nodes,g=e.links,y=g,w=0;w<y.length;w++){var x=y[w];y[w].name=_[x.source].name+"_"+m[x.target].name}var b=d3.select(h.root+" .clust_group").selectAll(".row").data(h.matrix.matrix,function(t){return t.name});r.run_transition?b.transition().delay(r.update).duration(v).attr("transform",function(t){var e=t.row_index;return"translate(0,"+h.viz.y_scale(e)+")"}):b.attr("transform",function(t){var e=t.row_index;return"translate(0,"+h.viz.y_scale(e)+")"}),d3.select(h.root+" .clust_group").selectAll(".row").each(function(t){var e=this;a(h,t,r,v,e,p)}),d3.selectAll(h.root+" .horz_lines").remove(),d3.selectAll(h.root+" .vert_lines").remove(),s(h,r,v),n(t,v,r),u(h,r,v,p),o(t,v),i(t,v),l(h,r,v),setTimeout(f,2e3,h)}},function(t,e,r){"use strict";var n=r(2),o=r(74),i=r(71),a=r(73),s=r(164),l=r(165),u=r(166),c=r(167),f=r(169),d=r(171),h=r(172),p=r(173),v=r(174),_=r(175),m=r(178),g=r(83),y=r(82),w=r(88),x=r(3);t.exports=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;null===r&&(r={},r.enter=0,r.update=0,r.run_transition=!1);var b=t.params,z=t.params.network_data.row_nodes;b.zoom_info=w();var M=b.network_data.row_nodes_names;s(b),b=i(b),b.viz=a(b.viz),b.viz=o(b.viz),b.sim_mat&&(b.viz.clust.dim.width<=b.viz.clust.dim.height?b.viz.clust.dim.height=b.viz.clust.dim.width:b.viz.clust.dim.width=b.viz.clust.dim.height),b.viz=y(b.viz),b.viz.x_scale.rangeBands([0,b.viz.clust.dim.width]),b.viz.y_scale.rangeBands([0,b.viz.clust.dim.height]),b.viz.square_zoom=b.viz.norm_labels.width.col/(b.viz.x_scale.rangeBand()/2),b.zoom_behavior.scaleExtent([1,b.viz.square_zoom*b.viz.zoom_ratio.x]),b.viz.border_width.x=b.viz.x_scale.rangeBand()/b.viz.border_fraction,b.viz.border_width.y=b.viz.y_scale.rangeBand()/b.viz.border_fraction,b=g(b);var k=d3.select(b.viz.viz_wrapper).select("svg");k.select(b.root+" .grey_background").transition().delay(r.update).duration(e).attr("width",b.viz.clust.dim.width).attr("height",b.viz.clust.dim.height),f(b,k,r),k.selectAll(".row_label_group").select("text").style("font-size",b.labels.default_fs_row+"px").text(function(t){return n.normal_name(t)}),k.selectAll(".row_label_group").each(function(){var t=d3.select(this).select("text")[0][0].getBBox();d3.select(this).select("rect").attr("x",t.x).attr("y",0).attr("width",t.width).attr("height",b.viz.y_scale.rangeBand()).style("fill","yellow").style("opacity",function(t){var e=0;return 1===t.target&&(e=1),e})}),d(b,k,r),r.run_transition?(k.selectAll(".row_label_group").select("text").transition().delay(r.update).duration(e).attr("y",.5*b.viz.rect_height+.35*b.labels.default_fs_row),k.selectAll(".row_cat_group").data(z,function(t){return t.name}).transition().delay(r.update).duration(e).attr("transform",function(t){var e=x.indexOf(M,t.name);return"translate(0, "+b.viz.y_scale(e)+")"}),k.selectAll(".row_cat_group").select("path").transition().delay(r.update).duration(e).attr("d",function(){var t=b.viz.cat_room.symbol_width-1,e=0,r=1,n=b.viz.y_scale.rangeBand()/2,o=b.viz.cat_room.symbol_width-1,i=b.viz.y_scale.rangeBand(),a="M "+t+","+e+" L "+r+","+n+" L "+o+","+i+" Z";return a}),k.selectAll(".row_dendro_group").data(z,function(t){return t.name}).transition().delay(r.update).duration(e).attr("transform",function(t){var e=x.indexOf(M,t.name);return"translate(0, "+b.viz.y_scale(e)+")"})):(k.selectAll(".row_label_group").select("text").attr("y",.5*b.viz.rect_height+.35*b.labels.default_fs_row),k.selectAll(".row_cat_group").data(z,function(t){return t.name}).attr("transform",function(t){var e=x.indexOf(M,t.name);return"translate(0, "+b.viz.y_scale(e)+")"}),k.selectAll(".row_cat_group").select("path").attr("d",function(){var t=b.viz.cat_room.symbol_width-1,e=0,r=1,n=b.viz.y_scale.rangeBand()/2,o=b.viz.cat_room.symbol_width-1,i=b.viz.y_scale.rangeBand(),a="M "+t+","+e+" L "+r+","+n+" L "+o+","+i+" Z";return a}),k.selectAll(".row_dendro_group").data(z,function(t){return t.name}).attr("transform",function(t){var e=x.indexOf(M,t.name);return"translate(0, "+b.viz.y_scale(e)+")"})),n.has(b.network_data.row_nodes[0],"value")&&m(t,k),h(b,k,r),p(b,k),v(b,k,r),_(b,k,r),l(b,k,r),u(b,k,r),c(b.viz,k,r),b.zoom_behavior.scale(1).translate([b.viz.clust.margin.left,b.viz.clust.margin.top])}},function(t,e,r){"use strict";var n=r(216),o=r(217),i=r(218),a=r(97),s=r(98),l=r(99),u=r(3);t.exports=function(t,e,r,c,f,d){var h=e.row_data,p=u.filter(h,function(t){return 0!=t.value}),v=d3.select(f).selectAll(".tile").data(p,function(t){return t.col_name});n(t,r,v,h,f);var _=v.on("mouseover",function(){for(var e=arguments.length,r=Array(e),n=0;n<e;n++)r[n]=arguments[n];a(t,this,d,r)}).on("mouseout",function(){s(t,this,d)}),m=t.network_data.col_nodes_names;r.run_transition?_.transition().delay(r.update).duration(c).attr("width",t.viz.rect_width).attr("height",t.viz.rect_height).attr("transform",function(e){return u.contains(m,e.col_name)?l(t,e):"translate(0,0)"}):_.attr("width",t.viz.rect_width).attr("height",t.viz.rect_height).attr("transform",function(e){return u.contains(m,e.col_name)?l(t,e):"translate(0,0)"}),"updn"==t.matrix.tile_type&&i(t,h,f,r,c,v,d),o(t,r,c,v,d)}},function(t,e,r){"use strict";var n=r(3);t.exports=function(t,e,r,o,i){if(e.run_transition?r.exit().transition().duration(300).attr("fill-opacity",0).remove():r.exit().attr("fill-opacity",0).remove(),"updn"==t.matrix.tile_type){var a=n.filter(o,function(t){return 0!=t.value_up||0!=t.value_dn}),s=d3.select(i).selectAll(".tile_up").data(a,function(t){return t.col_name});e.run_transition?s.exit().transition().duration(300).attr("fill","0").remove():s.exit().attr("fill",0).remove();var l=d3.select(i).selectAll(".tile_dn").data(a,function(t){return t.col_name});e.run_transition?l.exit().transition().duration(300).attr("fill",0).remove():l.exit().attr("fill",0).remove()}}},function(t,e,r){"use strict";var n=r(97),o=r(98),i=r(99);t.exports=function(t,e,r,a,s){var l=a.enter().append("rect").attr("class","tile row_tile").attr("width",t.viz.rect_width).attr("height",t.viz.rect_height).on("mouseover",function(){for(var e=arguments.length,r=Array(e),o=0;o<e;o++)r[o]=arguments[o];n(t,this,s,r)}).on("mouseout",function(){o(t,this,s)}).attr("fill-opacity",0).attr("transform",function(e){return i(t,e)});e.run_transition?l.transition().delay(e.enter).duration(r).style("fill",function(e){return e.value>0?t.matrix.tile_colors[0]:t.matrix.tile_colors[1]}).attr("fill-opacity",function(e){var r=t.matrix.opacity_scale(Math.abs(e.value));return r}):l.style("fill",function(e){return e.value>0?t.matrix.tile_colors[0]:t.matrix.tile_colors[1]}).attr("fill-opacity",function(e){var r=t.matrix.opacity_scale(Math.abs(e.value));return r}),l.each(function(t){Math.abs(t.value_up)>0&&Math.abs(t.value_dn)>0&&d3.select(this).remove()})}},function(t,e,r){"use strict";var n=r(95),o=r(96),i=r(97),a=r(98),s=r(99),l=r(3);t.exports=function(t,e,r,u,c,f,d){var h=l.filter(e,function(t){return 0!=t.value_up||0!=t.value_dn}),p=d3.select(r).selectAll(".tile_up").data(h,function(t){return t.col_name}),v=p.on("mouseover",function(){for(var e=arguments.length,r=Array(e),n=0;n<e;n++)r[n]=arguments[n];i(t,this,d,r)}).on("mouseout",function(){a(t,this,d)});u.run_transition?v.transition().delay(u.update).duration(c).attr("d",function(){return n(t)}).attr("transform",function(e){return s(t,e)}):v.attr("d",function(){return n(t)}).attr("transform",function(e){return s(t,e)});var _=d3.select(r).selectAll(".tile_dn").data(h,function(t){return t.col_name}),m=_.on("mouseover",function(){for(var e=arguments.length,r=Array(e),n=0;n<e;n++)r[n]=arguments[n];i(t,this,d,r)}).on("mouseout",function(){a(t,this,d)});u.run_transition?m.transition().delay(u.update).duration(c).attr("d",function(){return o(t)}).attr("transform",function(e){return s(t,e)}):m.attr("d",function(){return o(t)}).attr("transform",function(e){return s(t,e)}),f.selectAll(".tile").each(function(t){Math.abs(t.value_up)>0&&Math.abs(t.value_dn)>0&&d3.select(this).remove()})}},function(t,e){"use strict";t.exports=function(t,e,r){var n=t.network_data.row_nodes,o=t.network_data.col_nodes,i=d3.select(t.root+" .clust_group").selectAll(".row").data(t.matrix.matrix,function(t){return t.name}).exit();e.run_transition?i.transition().duration(r).style("opacity",0).remove():i.style("opacity",0).remove(),d3.selectAll(t.root+" .row_label_group").data(n,function(t){return t.name}).exit().transition().duration(r).style("opacity",0).remove(),d3.selectAll(t.root+" .col_label_group").data(o,function(t){return t.name}).exit().transition().duration(r).style("opacity",0).remove(),d3.selectAll(t.root+" .row_cat_group").data(n,function(t){return t.name}).exit().transition().duration(r).style("opacity",0).remove(),d3.selectAll(t.root+" .row_dendro_group").data(n,function(t){return t.name}).exit().transition().duration(r).style("opacity",0).remove(),d3.selectAll(t.root+" .col_label_text").data(o,function(t){return t.name}).exit().transition().duration(r).style("opacity",0).remove(),d3.selectAll(t.root+" .horz_lines").data(n,function(t){return t.name}).exit().transition().duration(r).style("opacity",0).remove(),d3.selectAll(t.root+" .vert_lines").data(o,function(t){return t.name}).exit().transition().duration(r).style("opacity",0).remove(),d3.selectAll(t.root+" .col_cat_group").data(o,function(t){return t.name}).exit().transition().duration(r).style("opacity",0).remove(),d3.selectAll(t.root+" .col_dendro_group").data(o,function(t){return t.name}).exit().transition().duration(r).style("opacity",0).remove()}},function(t,e,r){"use strict";var n=r(221);t.exports=function(t,e,r,o){var i=d3.select(t.root+" .clust_group").selectAll(".row").data(t.matrix.matrix,function(t){return t.name}).enter().append("g").classed("row",!0).attr("transform",function(e){return"translate(0,"+t.viz.y_scale(e.row_index)+")"});i.each(function(i){n(t,i,e,r,o,this)})}},function(t,e,r){"use strict";var n=r(222),o=r(97),i=r(98),a=r(99),s=r(3);t.exports=function(t,e,r,l,u,c){var f=e.row_data,d=s.filter(f,function(t){return 0!==t.value}),h=d3.select(c).selectAll("rect").data(d,function(t){return t.col_name}).enter().append("rect").attr("class","tile row_tile").attr("width",t.viz.rect_width).attr("height",t.viz.rect_height).style("fill",function(e){return e.value>0?t.matrix.tile_colors[0]:t.matrix.tile_colors[1]}).on("mouseover",function(){for(var e=arguments.length,r=Array(e),n=0;n<e;n++)r[n]=arguments[n];o(t,this,u,r)}).on("mouseout",function(){i(t,this,u)});h.style("fill-opacity",0).transition().delay(r.enter).duration(l).style("fill-opacity",function(e){var r=t.matrix.opacity_scale(Math.abs(e.value));return r}),h.attr("transform",function(e){return a(t,e)}),"updn"==t.matrix.tile_type&&n(t,f,c,u,r,l,h)}},function(t,e,r){"use strict";var n=r(95),o=r(96),i=r(99),a=r(3);t.exports=function(t,e,r,s,l,u,c){var f=a.filter(e,function(t){return 0!=t.value_up||0!=t.value_dn}),d=d3.select(r).selectAll(".tile_up").data(f,function(t){return t.col_name}).enter().append("path").attr("class","tile_up").attr("d",function(){return n(t)}).attr("transform",function(e){return i(t,e)}).style("fill",function(){return t.matrix.tile_colors[0]}).on("mouseover",function(e){d3.selectAll(t.root+" .row_label_group text").classed("active",function(t){return e.row_name===t.name}),d3.selectAll(t.root+" .col_label_text text").classed("active",function(t){return e.col_name===t.name}),t.matrix.show_tile_tooltips&&s.show(e)}).on("mouseout",function(){d3.selectAll(t.root+" text").classed("active",!1),t.matrix.show_tile_tooltips&&s.hide()});d.style("fill-opacity",0).transition().delay(l.enter).duration(u).style("fill-opacity",function(e){var r=0;return Math.abs(e.value_dn)>0&&(r=t.matrix.opacity_scale(Math.abs(e.value_up))),r});var h=d3.select(r).selectAll(".tile_dn").data(f,function(t){return t.col_name}).enter().append("path").attr("class","tile_dn").attr("d",function(){return o(t)}).attr("transform",function(e){return i(t,e)}).style("fill",function(){return t.matrix.tile_colors[1]}).on("mouseover",function(e){d3.selectAll(t.root+" .row_label_group text").classed("active",function(t){return e.row_name===t.name}),d3.selectAll(t.root+" .col_label_text text").classed("active",function(t){return e.col_name===t.name}),t.matrix.show_tile_tooltips&&s.show(e)}).on("mouseout",function(){d3.selectAll(t.root+" text").classed("active",!1),t.matrix.show_tile_tooltips&&s.hide()});h.style("fill-opacity",0).transition().delay(l.enter).duration(u).style("fill-opacity",function(e){var r=0;return Math.abs(e.value_up)>0&&(r=t.matrix.opacity_scale(Math.abs(e.value_dn))),r}),c.each(function(t){Math.abs(t.value_up)>0&&Math.abs(t.value_dn)>0&&d3.select(this).remove()})}},function(t,e){"use strict";t.exports=function(t){d3.select(t.root+" .clust_container").attr("transform","translate("+t.viz.clust.margin.left+","+t.viz.clust.margin.top+")"),d3.select(t.root+" .col_label_outer_container").attr("transform","translate(0,"+t.viz.norm_labels.width.col+")"),d3.select(t.root+" .col_cat_outer_container").attr("transform",function(){var e=t.viz.norm_labels.width.col+2;return"translate(0,"+e+")"})}},function(t,e,r){"use strict";var n=(r(195),r(145)),o=r(144),i=r(225),a=r(3);t.exports=function(t){function e(e,r){var n=2-r,o=t.params.matrix.abs_max_val*n;t.params.matrix.opacity_scale.domain([0,o]),d3.selectAll(t.params.root+" .tile").style("fill-opacity",function(e){var r=t.params.matrix.opacity_scale(Math.abs(e.value));return r})}var r=t.params,s=d3.select(r.root+" .gene_search_box")[0][0],l=new Awesomplete(s,{minChars:1,maxItems:15}),u=t.params.network_data.row_nodes_names;l.list=u,d3.selectAll(".awesomplete ul").style("z-index",99),$(r.root+" .gene_search_box").keyup(function(e){if(13===e.keyCode){var n=$(r.root+" .gene_search_box").val();i(t,n,u)}}),$(r.root+" .submit_gene_button").off().click(function(){var e=$(r.root+" .gene_search_box").val();i(t,e,u)});var c;if(c=r.sim_mat?["both"]:["row","col"],a.each(c,function(e){$(r.root+" .toggle_"+e+"_order .btn").off().click(function(o){var i=$(o.target).attr("name").replace("_row","").replace("_col","");d3.selectAll(r.root+" .toggle_"+e+"_order .btn").classed("active",!1),d3.select(this).classed("active",!0),"both"!=e?n(t,i,e):(n(t,i,"row"),n(t,i,"col"))})}),o(t),d3.select(t.params.root+" .opacity_slider").select("#handle-one").empty()){var f=d3.slider().snap(!0).value(1).min(.1).max(1.9).step(.1).on("slide",function(t,r){e(t,r)});d3.select(t.params.root+" .opacity_slider").call(f)}}},function(t,e,r){"use strict";var n=r(146),o=r(3);t.exports=function(t,e,r){var i="name";if(r.indexOf(e)!==-1){d3.selectAll(t.params.root+" .row_label_group").select("rect").style("opacity",0);var a=o.indexOf(r,e),s=t.params.viz.y_scale(a),l=t.params.viz.clust.dim.height/2-s,u=t.params.viz.zoom_ratio.x;n(t,0,l,u),t.params.zoom_info.zoom_y=u,d3.selectAll(t.params.root+" .row_label_group").filter(function(t){return t[i]===e}).select("rect").style("opacity",1)}}},function(t,e){"use strict";t.exports=function(t){t.dendro_filter.row===!1&&"clust"===t.viz.inst_order.col&&d3.select(t.root+" .row_slider_group").style("opacity",1).style("pointer-events","all"),d3.selectAll(t.root+" .toggle_row_order .btn").attr("disabled",null),t.dendro_filter.col===!1&&"clust"===t.viz.inst_order.row&&d3.select(t.root+" .col_slider_group").style("opacity",1).style("pointer-events","all"),d3.selectAll(t.root+" .toggle_col_order .btn").attr("disabled",null),d3.selectAll(t.root+" .gene_search_button .btn").attr("disabled",null),t.viz.run_trans=!1}},function(t,e,r){"use strict";var n=r(3);t.exports=function(t,e){n.each(["row","col"],function(r){var n;n="row"===r?"col":"row",d3.selectAll(e.root+" .toggle_"+n+"_order .btn").filter(function(){return d3.select(this).attr("name")===t.inst_order[r]}).classed("active",!0)})}},function(t,e,r){"use strict";var n=r(229),o=r(2),i=r(3);t.exports=function(t,e){var r,a,s,l,u,c,f,d,h=arguments.length>2&&void 0!==arguments[2]&&arguments[2],p=0,v=0;i.each(e,function(e){l=e.name,h===!0&&(l.indexOf(" ")?l=l.split(" ")[0]:l.indexOf("_")&&(l=l.split("_")[0])),p=0,n(e),i.each(t,function(t){if(r=t.cat_title,a=t.cats,u="false",v=-1,d=0,i.each(a,function(t){c=t.cat_name,s=t.members,i.contains(s,l)&&(u=c,v=d),d+=1}),o.has(t,"pval")){var n=t.pval.toExponential();f=r+": "+u+"<p> Pval "+String(n)+"</p>"}else f=r.indexOf("cat-")===-1?r+": "+u:u;e["cat-"+String(p)]=f,e["cat_"+String(p)+"_index"]=v,p+=1})})}},function(t,e,r){"use strict";var n=r(3);t.exports=function(t){var e=n.keys(t);n.each(e,function(e){e.indexOf("cat-")>-1&&delete t[e],e.indexOf("cat_")>-1&&delete t[e]})}},function(t,e,r){"use strict";var n=r(214),o=r(133),i=r(136),a=r(223);t.exports=function(t){d3.selectAll(t.params.root+" .row_cat_group").remove(),d3.selectAll(t.params.root+" .row_label_group").remove(),d3.selectAll(t.params.root+" .row").remove();var e=!0,r=!0,s=!0;i(t,e,r,s),o(t);var l=t.params.network_data.col_nodes;d3.selectAll(t.params.root+" .col_label_group").data(l,function(t){return t.name}).exit().style("opacity",0).remove(),d3.selectAll(t.params.root+" .col_label_text").data(l,function(t){return t.name}).exit().style("opacity",0).remove(),d3.selectAll(t.params.root+" .col_cat_group").data(l,function(t){return t.name}).exit().style("opacity",0).remove(),d3.selectAll(t.params.root+" .col_dendro_group").data(l,function(t){return t.name}).exit().style("opacity",0).remove(),a(t.params);var u={};u.enter=0,u.update=0,u.run_transition=!1;var c=0;n(t,c,u)}},function(t,e,r){"use strict";var n=r(203);t.exports=function(){function t(t){var e=Number(d3.select(t.root+" .expand_button").attr("x").replace("px","")),i=Number(d3.select(t.root+" .expand_button").attr("y").replace("px","")),a=0,s=400;setTimeout(n,a,t,"single",e,i),setTimeout(r,s,t),setTimeout(o,1500,t)}function e(){return 3500}function r(t){$(t.root+" .expand_button").d3Click()}function o(t){i(t,"row","clust"),i(t,"col","clust")}function i(t,e,r){var n=d3.selectAll(".toggle_"+e+"_order .btn").filter(function(){return this.__data__==r})[0];$(n).click()}return jQuery.fn.d3Click=function(){this.each(function(t,e){var r=document.createEvent("MouseEvents");r.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),e.dispatchEvent(r)})},{run:t,get_duration:e}}},function(t,e,r){"use strict";var n=r(200),o=r(206),i=r(195);t.exports=function(){function t(t){var e="Identify row and column groups\nof varying sizes using  the\nsliders and dendrogram";n(t,e,1e4),setTimeout(o,3e3,t,"slider_col",7e3),setTimeout(r,4e3,t,"row",3),setTimeout(r,5e3,t,"row",4),setTimeout(r,6e3,t,"row",5),setTimeout(r,7e3,t,"row",6),setTimeout(r,8e3,t,"row",7),setTimeout(r,9e3,t,"row",5)}function e(){return 11e3}function r(t,e,r){$(cgm.params.root+" .slider_col").slider("value",r/10),i(cgm,e,r)}return{run:t,get_duration:e}}},function(t,e,r){
"use strict";var n=r(200),o=r(203);t.exports=function(){function t(t){var e="Row and column categories\ncan be use to reorder\nby double-clicking";n(t,e,7e3);var i=d3.selectAll(t.root+" .col_cat_super").filter(function(){return"cat-1"===this.__data__})[0],a=d3.select(".col_cat_super").attr("transform"),s=Number(a.split("(")[1].split(",")[0].replace(")",""))+20,l=Number(a.split(",")[1].replace(")","")),u=4e3;setTimeout(o,u,t,"double",s,l);var c=u+300;setTimeout(r,c,t,i)}function e(){return 8e3}function r(t,e){$(e).d3DblClick()}return jQuery.fn.d3DblClick=function(){this.each(function(t,e){var r=document.createEvent("MouseEvents");r.initMouseEvent("dblclick",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),e.dispatchEvent(r)})},{run:t,get_duration:e}}},function(t,e,r){"use strict";var n=r(200),o=r(235);t.exports=function(){function t(t){var r="Clustergrammer is built with gene\nexpression data in mind and interfaces\nwith several Ma'ayan lab web tools",o="The example data being visualized is\ngene expression data obtained from the\nCancer Cell Line Encyclopedia",i="For more information please view\nthe help documentation";setTimeout(n,0,t,r,4500),setTimeout(n,4500,t,o,4500),setTimeout(n,9e3,t,i,4500),setTimeout(e,14e3,t)}function e(t){d3.select(t.root+" .play_button").classed("running_demo",!1),o(t,!0)}function r(){return 12e3}return{run:t,get_duration:r}}},function(t,e){"use strict";t.exports=function(t,e){e===!1?d3.select(t.root+" .play_button").transition().duration(500).style("opacity",0):(d3.select(t.root+" .play_button").transition().duration(500).style("opacity",1),$.unblockUI())}},function(t,e,r){"use strict";var n=r(200),o=r(203);t.exports=function(){function t(t){var e="View additional controls\nby clicking the menu button";n(t,e,4e3);var i=Number(d3.select(t.root+" .expand_button").attr("x").replace("px","")),a=Number(d3.select(t.root+" .expand_button").attr("y").replace("px","")),s=3e3,l=3400;setTimeout(o,s,t,"single",i,a),setTimeout(r,l,t)}function e(){return 5e3}function r(t){$(t.root+" .expand_button").d3Click()}return jQuery.fn.d3Click=function(){this.each(function(t,e){var r=document.createEvent("MouseEvents");r.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),e.dispatchEvent(r)})},jQuery.fn.d3DblClick=function(){this.each(function(t,e){var r=document.createEvent("MouseEvents");r.initMouseEvent("dblclick",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),e.dispatchEvent(r)})},{run:t,get_duration:e}}},function(t,e,r){"use strict";var n=r(238),o=r(239);t.exports=function(){var t=this,e=t.params;n(t);var r=30;o(e,r)}},function(t,e,r){"use strict";var n=r(179);t.exports=function(t){var e=t.params;if(d3.select(e.root+" .play_button").empty()){var r=d3.select(e.root+" .viz_svg").append("g").classed("play_button",!0).classed("running_demo",!1);n(e),r.append("circle").style("r",45).style("fill","white").style("stroke","black").style("stroke-width","3px").style("opacity",.5),r.append("path").attr("d",function(){var t=40,e=22,r=15;return"M-"+r+",-"+e+" l "+t+","+e+" l -"+t+","+e+" z "}).style("fill","black").style("opacity",.5),r.on("mouseover",function(){d3.select(this).select("path").style("fill","red").style("opacity",1),d3.select(this).select("circle").style("opacity",1)}).on("mouseout",function(){d3.select(this).select("path").style("fill","black").style("opacity",.5),d3.select(this).select("circle").style("opacity",.5)}).on("click",function(){t.play_demo()})}}},function(t,e){"use strict";t.exports=function(t,e){if(d3.select(t.root+" .demo_group").empty()){var r=d3.select(t.root+" .clust_container").attr("transform"),n=Number(r.split("(")[1].split(",")[0]),o=Number(r.split(",")[1].replace(")","")),i=d3.select(t.root+" .viz_svg").append("g").classed("demo_group",!0).attr("transform",function(){var t=n+20,e=o+40;return"translate("+t+","+e+")"});i.append("rect").classed("rect_1",!0),i.append("rect").classed("rect_2",!0),i.append("rect").classed("rect_3",!0);var a=1.3*e;i.append("text").attr("id","text_1").attr("font-size",e+"px").attr("font-weight",1e3).attr("font-family",'"Helvetica Neue", Helvetica, Arial, sans-serif'),i.append("text").attr("id","text_2").attr("font-size",e+"px").attr("font-weight",1e3).attr("font-family",'"Helvetica Neue", Helvetica, Arial, sans-serif').attr("transform",function(){return"translate(0,"+String(a)+")"}),i.append("text").attr("id","text_3").attr("font-size",e+"px").attr("font-weight",1e3).attr("font-family",'"Helvetica Neue", Helvetica, Arial, sans-serif').attr("transform",function(){return"translate(0,"+String(2*a)+")"})}}},function(t,e,r){"use strict";var n=r(12),o=r(211);t.exports=function(t){var e=n(this.config,t);o(this,e)}},function(t,e,r){"use strict";var n=r(12),o=r(211),i=r(3);t.exports=function(t){var e,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e=r===!1?this:r;var a,s=e.params,l={};i.each(["row","col"],function(e){var r=s.inst_nodes[e+"_nodes"];if(_.has(t,e))if(t[e].length>0){var n=t[e];a=$.grep(r,function(t){return $.inArray(t.name,n)>-1})}else a=r;else a=r;l[e+"_nodes"]=a});var u=e.params.network_data.row_nodes,c=e.params.network_data.col_nodes,f=n(e.config,l);o(e,f),u.length>e.params.inst_nodes.row_nodes.length&&(e.params.inst_nodes.row_nodes=u),c.length>e.params.inst_nodes.col_nodes.length&&(e.params.inst_nodes.col_nodes=c)}},function(t,e,r){"use strict";var n=r(190),o=r(67),i=r(154),a=r(228);t.exports=function(t,e){null!=t.params.cat_update_callback&&t.params.cat_update_callback(this);var r=t.params.viz.cat_colors.col;a(e,t.params.network_data.row_nodes,!0),a(e,t.params.inst_nodes.row_nodes,!0),t.params=o(t.params,!1),n(t,!0),i(t),t.params.new_row_cats=e,t.params.viz.cat_colors.col=r}},function(t,e,r){"use strict";var n=r(190),o=r(67),i=r(154),a=r(228),s=r(244);t.exports=function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=this,r=s(e),l=e.params.viz.cat_colors.col;if(a(r,e.params.network_data.row_nodes),a(r,e.params.inst_nodes.row_nodes),e.params.new_row_cats=r,e.params.viz.cat_colors.col=l,t){var u=!0;e.params=o(e.params,u),n(e,!0),i(e)}}},function(t,e,r){"use strict";var n=r(3);t.exports=function(t){function e(t,e,n){r={},r.cat_title=t,r.cats=[],o={},o.cat_name=e,o.members=[],o.members.push(n),r.cats.push(o),h.push(r)}var r,o,i,a,s,l,u,c,f=t.config.network_data.row_nodes,d=": ",h=[],p=f[0],v=n.keys(p),_={};n.each(v,function(t){t.indexOf("cat-")>=0&&(l=p[t],c=parseInt(t.split("cat-")[1],10),u=l.indexOf(d)>=0?l.split(d)[0]:t,_[c]=u)});var m,g=n.keys(_).sort();return n.each(g,function(t){m={},m.cat_title=_[t],m.cats=[],h.push(m)}),n.each(f,function(t){var r=n.keys(t);n.each(r,function(r){if(r.indexOf("cat-")>-1){s=t[r],c=parseInt(r.split("cat-")[1],10);var l=r;s=t[r];var u=t[r],f=t.name;u.indexOf(d)>-1?(l=u.split(d)[0],s=u.split(d)[1]):(l=r,s=u),0===h.length?e(l,s,f):(i=!1,n.each(h,function(t){l===t.cat_title&&(i=!0,a=!1,n.each(t.cats,function(t){s===t.cat_name&&(a=!0,t.members.push(f))}),a===!1&&(o={},o.cat_name=s,o.members=[],o.members.push(f),t.cats.push(o)))}))}})}),h}},function(t,e,r){"use strict";var n=r(209),o=r(246);t.exports=function(t,e,r){var i={};i[e]=r,n(t,i),o(t,e,r)}},function(t,e,r){"use strict";var n=r(247),o=r(3);t.exports=function(t,e,r){var i,a,s=t.params;d3.select(s.root+" .slider_"+e).attr("current_state",r),o.each(o.keys(s.viz.possible_filters),function(r){if(i=e.indexOf("row")>-1?"row":e.indexOf("col")>-1?"col":"neither",a=r.indexOf("row")>-1?"row":r.indexOf("col")>-1?"col":"neither",e!=r&&"neither"!=i&&i==a){var o=n(s,r);t.slider_functions[r].value(0),d3.select(s.root+" .title_"+r).text(o.text+o.state),d3.select(s.root+" .slider_"+r).attr("current_state",o.state)}});var l=n(s,e);d3.select(s.root+" .title_"+e).text(l.text+r+l.suffix)}},function(t,e,r){"use strict";var n=r(6),o=r(3);t.exports=function(t,e){var r={},i={},a={};return r.state=n(t.viz.filter_data,e),a.top=e.split("_")[0],a.node=e.split("_")[1],a.measure=e.split("_")[2],"row"===a.node?i.node="rows":i.node="columns","N"===a.top&&(r.suffix=""),"pct"===a.top&&(r.suffix="%"),"sum"==a.measure?i.measure="sum":"var"==a.measure&&(i.measure="variance"),"sum"===a.measure&&(r.text="Top "+i.node+" "+i.measure+": "),"var"===a.measure&&(r.text="Top "+i.node+" "+i.measure+": "),o.keys(t.viz.possible_filters).indexOf("enr_score_type")>-1&&"col"===a.node&&(r.text="Top Enriched Terms: ",r.suffix=""),r}},function(t,e,r){"use strict";var n=r(249),o=r(250);t.exports=function(){var t=n(),e=this.params,r=o(e),i=new Blob([r],{type:"text/plain;charset=utf-8"});t(i,"clustergrammer.txt")}},function(t,e){"use strict";t.exports=function(){/*! @source http://purl.eligrey.com/github/FileSaver.js/blob/master/FileSaver.js */
var t=t||navigator.msSaveBlob&&navigator.msSaveBlob.bind(navigator)||function(t){var e=t.document,r=function(){return t.URL||t.webkitURL||t},n=t.URL||t.webkitURL||t,o=e.createElementNS("http://www.w3.org/1999/xhtml","a"),i="download"in o,a=function(r){var n=e.createEvent("MouseEvents");n.initMouseEvent("click",!0,!1,t,0,0,0,0,0,!1,!1,!1,!1,0,null),r.dispatchEvent(n)},s=t.webkitRequestFileSystem,l=t.requestFileSystem||s||t.mozRequestFileSystem,u=function(e){(t.setImmediate||t.setTimeout)(function(){throw e},0)},c="application/octet-stream",f=0,d=[],h=function(){for(var t=d.length;t--;){var e=d[t];"string"==typeof e?n.revokeObjectURL(e):e.remove()}d.length=0},p=function(t,e,r){e=[].concat(e);for(var n=e.length;n--;){var o=t["on"+e[n]];if("function"==typeof o)try{o.call(t,r||t)}catch(t){u(t)}}},v=function(e,n){var u,h,v,_=this,m=e.type,g=!1,y=function(){var t=r().createObjectURL(e);return d.push(t),t},w=function(){p(_,"writestart progress write writeend".split(" "))},x=function(){!g&&u||(u=y(e)),h&&(h.location.href=u),_.readyState=_.DONE,w()},b=function(t){return function(){if(_.readyState!==_.DONE)return t.apply(this,arguments)}},z={create:!0,exclusive:!1};return _.readyState=_.INIT,n||(n="download"),i?(u=y(e),o.href=u,o.download=n,a(o),_.readyState=_.DONE,void w()):(t.chrome&&m&&m!==c&&(v=e.slice||e.webkitSlice,e=v.call(e,0,e.size,c),g=!0),s&&"download"!==n&&(n+=".download"),h=m===c||s?t:t.open(),l?(f+=e.size,void l(t.TEMPORARY,f,b(function(t){t.root.getDirectory("saved",z,b(function(t){var r=function(){t.getFile(n,z,b(function(t){t.createWriter(b(function(r){r.onwriteend=function(e){h.location.href=t.toURL(),d.push(t),_.readyState=_.DONE,p(_,"writeend",e)},r.onerror=function(){var t=r.error;t.code!==t.ABORT_ERR&&x()},"writestart progress write abort".split(" ").forEach(function(t){r["on"+t]=_["on"+t]}),r.write(e),_.abort=function(){r.abort(),_.readyState=_.DONE},_.readyState=_.WRITING}),x)}),x)};t.getFile(n,{create:!1},b(function(t){t.remove(),r()}),b(function(t){t.code===t.NOT_FOUND_ERR?r():x()}))}),x)}),x)):void x())},_=v.prototype,m=function(t,e){return new v(t,e)};return _.abort=function(){var t=this;t.readyState=t.DONE,p(t,"abort")},_.readyState=_.INIT=0,_.WRITING=1,_.DONE=2,_.error=_.onwritestart=_.onprogress=_.onwrite=_.onabort=_.onerror=_.onwriteend=null,t.addEventListener("unload",h,!1),m}(self);return t}},function(t,e,r){"use strict";var n=r(251),o=r(3);t.exports=function(t){var e,r=t.matrix,i={};o.each(["row","col"],function(n){var o;o="row"===n?"col":"row",e=t.inst_order[n],i[o]=r.orders[e+"_"+n]});for(var a="\t",s=t.network_data.row_nodes,l=t.network_data.col_nodes,u=0;u<i.col.length;u++){var c=i.col[u],f=l[c],d=n(t,f,"col");u<i.col.length-1?a=a+d+"\t":a+=d}var h;return a+="\n",o.each(i.row,function(e){h=r.matrix[e].row_data;var o=s[e],l=n(t,o,"row");a=a+l+"\t";for(var u=0;u<i.col.length;u++){var c=i.col[u];u<i.col.length-1?a=a+String(h[c].value)+"\t":a+=String(h[c].value)}a+="\n"}),a}},function(t,e){"use strict";t.exports=function(t,e,r){var n,o=e.name,i=t.viz.all_cats[r].length;if(i>0){o="('"+o+"'";for(var a=0;a<i;a++)n="cat-"+String(a),o=o+", '"+String(e[n])+"'";o+=")"}else o=String(o);return o}},function(t,e,r){"use strict";var n=r(253),o=r(3);t.exports=function(){function t(){d3.select(r.params.root+" .col_dendro_icons_container").style("display","none"),d3.select(r.params.root+" .row_dendro_icons_container").style("display","none");var t=c.extent(),o=t[0],a=t[1],s=o[0],l=a[0],u=o[1],f=a[1];if(s!=l&&u!=f){setTimeout(n,500,r);var d=e(s,l,u,f,o,a);r.filter_viz_using_names(d),d3.select(i.root+" .crop_button").style("color","#337ab7").classed("fa-crop",!1).classed("fa-undo",!0)}}function e(t,e,r,n,a,s){t>e&&(t=s[0],e=a[0]),r>n&&(r=s[1],n=a[1]),r-=i.viz.rect_height,t-=i.viz.rect_width;var l={};return l.row=[],l.col=[],o.each(i.matrix.matrix,function(t){var e=i.viz.y_scale(t.row_index);e>r&&e<n&&l.row.push(t.name)}),d3.selectAll(i.root+" .col_label_text").each(function(r){var n=d3.select(this).attr("transform"),o=Number(n.split(",")[0].split("(")[1]);o>t&&o<e&&l.col.push(r.name)}),l}var r=this,i=r.params,a=i.viz.clust.dim.width,s=i.viz.clust.dim.height,l=d3.scale.linear().domain([0,a]).range([0,a]),u=d3.scale.linear().domain([0,s]).range([0,s]);d3.select(i.root+" .clust_container").append("g").classed("brush_group",!0),r.params.is_cropping=!0;var c=d3.svg.brush().x(l).y(u).on("brushend",t);d3.select(i.root+" .brush_group").call(c),d3.selectAll(i.root+" .extent").style("opacity",.2).style("fill","black")}},function(t,e){"use strict";t.exports=function(t){d3.select(t.params.root+" .brush_group").transition().style("opacity",0).remove(),t.params.is_cropping=!1}},function(t,e,r){var n,o,i;"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(a,s){o=[r(255)],n=s,i="function"==typeof n?n.apply(e,o):n,!(void 0!==i&&(t.exports=i))}(void 0,function(t){return function(){"use strict";function e(e){e.each(function(){function e(e){"boolean"==typeof m&&(m=t.svg.axis().ticks(Math.round(f/100)).tickFormat(z).orient("horizontal"===_?"bottom":"right")),l=s.ticks?s.copy().range([0,f]):s.copy().rangePoints([0,f],.5),m.scale(l);var r=e.append("svg").classed("d3-slider-axis d3-slider-axis-"+m.orient(),!0).on("click",A),n=r.append("g");"horizontal"===_?(r.style("margin-left",-g+"px"),r.attr({width:f+2*g,height:g}),"top"===m.orient()?(r.style("top",-g+"px"),n.attr("transform","translate("+g+","+g+")")):n.attr("transform","translate("+g+",0)")):(r.style("top",-g+"px"),r.attr({width:g,height:f+2*g}),"left"===m.orient()?(r.style("left",-g+"px"),n.attr("transform","translate("+g+","+g+")")):n.attr("transform","translate(0,"+g+")")),n.call(m)}function p(){if("array"!=i(a)){var e=Math.max(0,Math.min(f,t.event.offsetX||t.event.layerX));r(s.invert?n(s.invert(e/f)):o(e/f))}}function v(){if("array"!=i(a)){var e=f-Math.max(0,Math.min(f,t.event.offsetY||t.event.layerY));r(s.invert?n(s.invert(e/f)):o(e/f))}}function w(){"handle-one"===t.event.sourceEvent.target.id?y=1:"handle-two"==t.event.sourceEvent.target.id&&(y=2);var e=Math.max(0,Math.min(f,t.event.x));r(s.invert?n(s.invert(e/f)):o(e/f))}function k(){"handle-one"===t.event.sourceEvent.target.id?y=1:"handle-two"==t.event.sourceEvent.target.id&&(y=2);var e=f-Math.max(0,Math.min(f,t.event.y));r(s.invert?n(s.invert(e/f)):o(e/f))}function A(){t.event.stopPropagation()}s||(s=t.scale.linear().domain([d,h])),a=a||s.domain()[0];var E=t.select(this).classed("d3-slider d3-slider-"+_,!0),N=t.behavior.drag();if(N.on("dragend",function(){x.slideend(t.event,a)}),"array"==i(a)&&2==a.length?(u=E.append("a").classed("d3-slider-handle",!0).attr("xlink:href","#").attr("id","handle-one").on("click",A).call(N),M=E.append("a").classed("d3-slider-handle",!0).attr("id","handle-two").attr("xlink:href","#").on("click",A).call(N)):u=E.append("a").classed("d3-slider-handle",!0).attr("xlink:href","#").attr("id","handle-one").on("click",A).call(N),"horizontal"===_){if(E.on("click",p),"array"==i(a)&&2==a.length){c=t.select(this).append("div").classed("d3-slider-range",!0),u.style("left",b(s(a[0]))),c.style("left",b(s(a[0]))),N.on("drag",w);var S=100-parseFloat(b(s(a[1])));M.style("left",b(s(a[1]))),c.style("right",S+"%"),N.on("drag",w)}else u.style("left",b(s(a))),N.on("drag",w);f=parseInt(E.style("width"),10)}else{if(E.on("click",v),N.on("drag",k),"array"==i(a)&&2==a.length){c=t.select(this).append("div").classed("d3-slider-range-vertical",!0),u.style("bottom",b(s(a[0]))),c.style("bottom",b(s(a[0]))),N.on("drag",k);var C=100-parseFloat(b(s(a[1])));M.style("bottom",b(s(a[1]))),c.style("top",C+"%"),N.on("drag",k)}else u.style("bottom",b(s(a))),N.on("drag",k);f=parseInt(E.style("height"),10)}m&&e(E)})}function r(e){var r="array"==i(a)&&2==a.length?a[y-1]:a,o=b(s(n(r))),l=b(s(n(e))),f="horizontal"===_?"left":"bottom";if(o!==l){if("array"==i(a)&&2==a.length?(a[y-1]=e,t.event&&x.slide(t.event,a)):t.event&&x.slide(t.event.sourceEvent||t.event,a=e),a[0]>=a[1])return;if(1===y)"array"==i(a)&&2==a.length&&("left"===f?c.style("left",l):c.style("bottom",l)),v?u.transition().styleTween(f,function(){return t.interpolate(o,l)}).duration("number"==typeof v?v:250):u.style(f,l);else{var d=100-parseFloat(l),h=100-parseFloat(l);"left"===f?c.style("right",d+"%"):c.style("top",h+"%"),v?M.transition().styleTween(f,function(){return t.interpolate(o,l)}).duration("number"==typeof v?v:250):M.style(f,l)}}}function n(t){if(t===s.domain()[0]||t===s.domain()[1])return t;var e=t;if(w)e=o(s(t));else{var r=(t-s.domain()[0])%p;e=t-r,2*Math.abs(r)>=p&&(e+=r>0?p:-p)}return e}function o(t){var e=s.ticks?s.ticks():s.domain(),r=e.map(function(e){return t-s(e)}),n=-1,o=0,i=s.ticks?s.range()[1]:s.rangeExtent()[1];do n++,Math.abs(r[n])<i&&(i=Math.abs(r[n]),o=n);while(r[n]>0&&n<r.length-1);return e[o]}function i(t){return{}.toString.call(t).match(/\s([a-zA-Z]+)/)[1].toLowerCase()}var a,s,l,u,c,f,d=0,h=100,p=.01,v=!1,_="horizontal",m=!1,g=50,y=1,w=!1,x=t.dispatch("slide","slideend"),b=t.format(".2%"),z=t.format(".0"),M=null;return e.min=function(t){return arguments.length?(d=t,e):d},e.max=function(t){return arguments.length?(h=t,e):h},e.step=function(t){return arguments.length?(p=t,e):p},e.animate=function(t){return arguments.length?(v=t,e):v},e.orientation=function(t){return arguments.length?(_=t,e):_},e.axis=function(t){return arguments.length?(m=t,e):m},e.margin=function(t){return arguments.length?(g=t,e):g},e.value=function(t){return arguments.length?(a&&r(n(t)),a=t,e):a},e.snap=function(t){return arguments.length?(w=t,e):w},e.scale=function(t){return arguments.length?(s=t,e):s},t.rebind(e,x,"on"),e}})},function(t,e,r){var n,o;!function(){function i(t){return t&&(t.ownerDocument||t.document||t).documentElement}function a(t){return t&&(t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView)}function s(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function l(t){return null===t?NaN:+t}function u(t){return!isNaN(t)}function c(t){return{left:function(e,r,n,o){for(arguments.length<3&&(n=0),arguments.length<4&&(o=e.length);n<o;){var i=n+o>>>1;t(e[i],r)<0?n=i+1:o=i}return n},right:function(e,r,n,o){for(arguments.length<3&&(n=0),arguments.length<4&&(o=e.length);n<o;){var i=n+o>>>1;t(e[i],r)>0?o=i:n=i+1}return n}}}function f(t){return t.length}function d(t){for(var e=1;t*e%1;)e*=10;return e}function h(t,e){for(var r in e)Object.defineProperty(t.prototype,r,{value:e[r],enumerable:!1})}function p(){this._=Object.create(null)}function v(t){return(t+="")===Ma||t[0]===ka?ka+t:t}function _(t){return(t+="")[0]===ka?t.slice(1):t}function m(t){return v(t)in this._}function g(t){return(t=v(t))in this._&&delete this._[t]}function y(){var t=[];for(var e in this._)t.push(_(e));return t}function w(){var t=0;for(var e in this._)++t;return t}function x(){for(var t in this._)return!1;return!0}function b(){this._=Object.create(null)}function z(t){return t}function M(t,e,r){return function(){var n=r.apply(e,arguments);return n===e?t:n}}function k(t,e){if(e in t)return e;e=e.charAt(0).toUpperCase()+e.slice(1);for(var r=0,n=Aa.length;r<n;++r){var o=Aa[r]+e;if(o in t)return o}}function A(){}function E(){}function N(t){function e(){for(var e,n=r,o=-1,i=n.length;++o<i;)(e=n[o].on)&&e.apply(this,arguments);return t}var r=[],n=new p;return e.on=function(e,o){var i,a=n.get(e);return arguments.length<2?a&&a.on:(a&&(a.on=null,r=r.slice(0,i=r.indexOf(a)).concat(r.slice(i+1)),n.remove(e)),o&&r.push(n.set(e,{on:o})),t)},e}function S(){ha.event.preventDefault()}function C(){for(var t,e=ha.event;t=e.sourceEvent;)e=t;return e}function T(t){for(var e=new E,r=0,n=arguments.length;++r<n;)e[arguments[r]]=N(e);return e.of=function(r,n){return function(o){try{var i=o.sourceEvent=ha.event;o.target=t,ha.event=o,e[o.type].apply(r,n)}finally{ha.event=i}}},e}function O(t){return Na(t,Oa),t}function B(t){return"function"==typeof t?t:function(){return Sa(t,this)}}function F(t){return"function"==typeof t?t:function(){return Ca(t,this)}}function j(t,e){function r(){this.removeAttribute(t)}function n(){this.removeAttributeNS(t.space,t.local)}function o(){this.setAttribute(t,e)}function i(){this.setAttributeNS(t.space,t.local,e)}function a(){var r=e.apply(this,arguments);null==r?this.removeAttribute(t):this.setAttribute(t,r)}function s(){var r=e.apply(this,arguments);null==r?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,r)}return t=ha.ns.qualify(t),null==e?t.local?n:r:"function"==typeof e?t.local?s:a:t.local?i:o}function L(t){return t.trim().replace(/\s+/g," ")}function R(t){return new RegExp("(?:^|\\s+)"+ha.requote(t)+"(?:\\s+|$)","g")}function I(t){return(t+"").trim().split(/^|\s+/)}function D(t,e){function r(){for(var r=-1;++r<o;)t[r](this,e)}function n(){for(var r=-1,n=e.apply(this,arguments);++r<o;)t[r](this,n)}t=I(t).map(q);var o=t.length;return"function"==typeof e?n:r}function q(t){var e=R(t);return function(r,n){if(o=r.classList)return n?o.add(t):o.remove(t);var o=r.getAttribute("class")||"";n?(e.lastIndex=0,e.test(o)||r.setAttribute("class",L(o+" "+t))):r.setAttribute("class",L(o.replace(e," ")))}}function P(t,e,r){function n(){this.style.removeProperty(t)}function o(){this.style.setProperty(t,e,r)}function i(){var n=e.apply(this,arguments);null==n?this.style.removeProperty(t):this.style.setProperty(t,n,r)}return null==e?n:"function"==typeof e?i:o}function U(t,e){function r(){delete this[t]}function n(){this[t]=e}function o(){var r=e.apply(this,arguments);null==r?delete this[t]:this[t]=r}return null==e?r:"function"==typeof e?o:n}function H(t){function e(){var e=this.ownerDocument,r=this.namespaceURI;return r===Ba&&e.documentElement.namespaceURI===Ba?e.createElement(t):e.createElementNS(r,t)}function r(){return this.ownerDocument.createElementNS(t.space,t.local)}return"function"==typeof t?t:(t=ha.ns.qualify(t)).local?r:e}function $(){var t=this.parentNode;t&&t.removeChild(this)}function Z(t){return{__data__:t}}function V(t){return function(){return Ta(this,t)}}function Y(t){return arguments.length||(t=s),function(e,r){return e&&r?t(e.__data__,r.__data__):!e-!r}}function W(t,e){for(var r=0,n=t.length;r<n;r++)for(var o,i=t[r],a=0,s=i.length;a<s;a++)(o=i[a])&&e(o,a,r);return t}function G(t){return Na(t,ja),t}function X(t){var e,r;return function(n,o,i){var a,s=t[i].update,l=s.length;for(i!=r&&(r=i,e=0),o>=e&&(e=o+1);!(a=s[e])&&++e<l;);return a}}function J(t,e,r){function n(){var e=this[a];e&&(this.removeEventListener(t,e,e.$),delete this[a])}function o(){var o=l(e,va(arguments));n.call(this),this.addEventListener(t,this[a]=o,o.$=r),o._=e}function i(){var e,r=new RegExp("^__on([^.]+)"+ha.requote(t)+"$");for(var n in this)if(e=n.match(r)){var o=this[n];this.removeEventListener(e[1],o,o.$),delete this[n]}}var a="__on"+t,s=t.indexOf("."),l=K;s>0&&(t=t.slice(0,s));var u=La.get(t);return u&&(t=u,l=Q),s?e?o:n:e?A:i}function K(t,e){return function(r){var n=ha.event;ha.event=r,e[0]=this.__data__;try{t.apply(this,e)}finally{ha.event=n}}}function Q(t,e){var r=K(t,e);return function(t){var e=this,n=t.relatedTarget;n&&(n===e||8&n.compareDocumentPosition(e))||r.call(e,t)}}function tt(t){var e=".dragsuppress-"+ ++Ia,r="click"+e,n=ha.select(a(t)).on("touchmove"+e,S).on("dragstart"+e,S).on("selectstart"+e,S);if(null==Ra&&(Ra=!("onselectstart"in t)&&k(t.style,"userSelect")),Ra){var o=i(t).style,s=o[Ra];o[Ra]="none"}return function(t){if(n.on(e,null),Ra&&(o[Ra]=s),t){var i=function(){n.on(r,null)};n.on(r,function(){S(),i()},!0),setTimeout(i,0)}}}function et(t,e){e.changedTouches&&(e=e.changedTouches[0]);var r=t.ownerSVGElement||t;if(r.createSVGPoint){var n=r.createSVGPoint();if(Da<0){var o=a(t);if(o.scrollX||o.scrollY){r=ha.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var i=r[0][0].getScreenCTM();Da=!(i.f||i.e),r.remove()}}return Da?(n.x=e.pageX,n.y=e.pageY):(n.x=e.clientX,n.y=e.clientY),n=n.matrixTransform(t.getScreenCTM().inverse()),[n.x,n.y]}var s=t.getBoundingClientRect();return[e.clientX-s.left-t.clientLeft,e.clientY-s.top-t.clientTop]}function rt(){return ha.event.changedTouches[0].identifier}function nt(t){return t>0?1:t<0?-1:0}function ot(t,e,r){return(e[0]-t[0])*(r[1]-t[1])-(e[1]-t[1])*(r[0]-t[0])}function it(t){return t>1?0:t<-1?Ua:Math.acos(t)}function at(t){return t>1?Za:t<-1?-Za:Math.asin(t)}function st(t){return((t=Math.exp(t))-1/t)/2}function lt(t){return((t=Math.exp(t))+1/t)/2}function ut(t){return((t=Math.exp(2*t))-1)/(t+1)}function ct(t){return(t=Math.sin(t/2))*t}function ft(){}function dt(t,e,r){return this instanceof dt?(this.h=+t,this.s=+e,void(this.l=+r)):arguments.length<2?t instanceof dt?new dt(t.h,t.s,t.l):At(""+t,Et,dt):new dt(t,e,r)}function ht(t,e,r){function n(t){return t>360?t-=360:t<0&&(t+=360),t<60?i+(a-i)*t/60:t<180?a:t<240?i+(a-i)*(240-t)/60:i}function o(t){return Math.round(255*n(t))}var i,a;return t=isNaN(t)?0:(t%=360)<0?t+360:t,e=isNaN(e)?0:e<0?0:e>1?1:e,r=r<0?0:r>1?1:r,a=r<=.5?r*(1+e):r+e-r*e,i=2*r-a,new bt(o(t+120),o(t),o(t-120))}function pt(t,e,r){return this instanceof pt?(this.h=+t,this.c=+e,void(this.l=+r)):arguments.length<2?t instanceof pt?new pt(t.h,t.c,t.l):t instanceof _t?gt(t.l,t.a,t.b):gt((t=Nt((t=ha.rgb(t)).r,t.g,t.b)).l,t.a,t.b):new pt(t,e,r)}function vt(t,e,r){return isNaN(t)&&(t=0),isNaN(e)&&(e=0),new _t(r,Math.cos(t*=Va)*e,Math.sin(t)*e)}function _t(t,e,r){return this instanceof _t?(this.l=+t,this.a=+e,void(this.b=+r)):arguments.length<2?t instanceof _t?new _t(t.l,t.a,t.b):t instanceof pt?vt(t.h,t.c,t.l):Nt((t=bt(t)).r,t.g,t.b):new _t(t,e,r)}function mt(t,e,r){var n=(t+16)/116,o=n+e/500,i=n-r/200;return o=yt(o)*ns,n=yt(n)*os,i=yt(i)*is,new bt(xt(3.2404542*o-1.5371385*n-.4985314*i),xt(-.969266*o+1.8760108*n+.041556*i),xt(.0556434*o-.2040259*n+1.0572252*i))}function gt(t,e,r){return t>0?new pt(Math.atan2(r,e)*Ya,Math.sqrt(e*e+r*r),t):new pt(NaN,NaN,t)}function yt(t){return t>.206893034?t*t*t:(t-4/29)/7.787037}function wt(t){return t>.008856?Math.pow(t,1/3):7.787037*t+4/29}function xt(t){return Math.round(255*(t<=.00304?12.92*t:1.055*Math.pow(t,1/2.4)-.055))}function bt(t,e,r){return this instanceof bt?(this.r=~~t,this.g=~~e,void(this.b=~~r)):arguments.length<2?t instanceof bt?new bt(t.r,t.g,t.b):At(""+t,bt,ht):new bt(t,e,r)}function zt(t){return new bt(t>>16,t>>8&255,255&t)}function Mt(t){return zt(t)+""}function kt(t){return t<16?"0"+Math.max(0,t).toString(16):Math.min(255,t).toString(16)}function At(t,e,r){var n,o,i,a=0,s=0,l=0;if(n=/([a-z]+)\((.*)\)/.exec(t=t.toLowerCase()))switch(o=n[2].split(","),n[1]){case"hsl":return r(parseFloat(o[0]),parseFloat(o[1])/100,parseFloat(o[2])/100);case"rgb":return e(Ct(o[0]),Ct(o[1]),Ct(o[2]))}return(i=ls.get(t))?e(i.r,i.g,i.b):(null==t||"#"!==t.charAt(0)||isNaN(i=parseInt(t.slice(1),16))||(4===t.length?(a=(3840&i)>>4,a|=a>>4,s=240&i,s|=s>>4,l=15&i,l|=l<<4):7===t.length&&(a=(16711680&i)>>16,s=(65280&i)>>8,l=255&i)),e(a,s,l))}function Et(t,e,r){var n,o,i=Math.min(t/=255,e/=255,r/=255),a=Math.max(t,e,r),s=a-i,l=(a+i)/2;return s?(o=l<.5?s/(a+i):s/(2-a-i),n=t==a?(e-r)/s+(e<r?6:0):e==a?(r-t)/s+2:(t-e)/s+4,n*=60):(n=NaN,o=l>0&&l<1?0:n),new dt(n,o,l)}function Nt(t,e,r){t=St(t),e=St(e),r=St(r);var n=wt((.4124564*t+.3575761*e+.1804375*r)/ns),o=wt((.2126729*t+.7151522*e+.072175*r)/os),i=wt((.0193339*t+.119192*e+.9503041*r)/is);return _t(116*o-16,500*(n-o),200*(o-i))}function St(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Ct(t){var e=parseFloat(t);return"%"===t.charAt(t.length-1)?Math.round(2.55*e):e}function Tt(t){return"function"==typeof t?t:function(){return t}}function Ot(t){return function(e,r,n){return 2===arguments.length&&"function"==typeof r&&(n=r,r=null),Bt(e,r,t,n)}}function Bt(t,e,r,n){function o(){var t,e=l.status;if(!e&&jt(l)||e>=200&&e<300||304===e){try{t=r.call(i,l)}catch(t){return void a.error.call(i,t)}a.load.call(i,t)}else a.error.call(i,l)}var i={},a=ha.dispatch("beforesend","progress","load","error"),s={},l=new XMLHttpRequest,u=null;return!this.XDomainRequest||"withCredentials"in l||!/^(http(s)?:)?\/\//.test(t)||(l=new XDomainRequest),"onload"in l?l.onload=l.onerror=o:l.onreadystatechange=function(){l.readyState>3&&o()},l.onprogress=function(t){var e=ha.event;ha.event=t;try{a.progress.call(i,l)}finally{ha.event=e}},i.header=function(t,e){return t=(t+"").toLowerCase(),arguments.length<2?s[t]:(null==e?delete s[t]:s[t]=e+"",i)},i.mimeType=function(t){return arguments.length?(e=null==t?null:t+"",i):e},i.responseType=function(t){return arguments.length?(u=t,i):u},i.response=function(t){return r=t,i},["get","post"].forEach(function(t){i[t]=function(){return i.send.apply(i,[t].concat(va(arguments)))}}),i.send=function(r,n,o){if(2===arguments.length&&"function"==typeof n&&(o=n,n=null),l.open(r,t,!0),null==e||"accept"in s||(s.accept=e+",*/*"),l.setRequestHeader)for(var c in s)l.setRequestHeader(c,s[c]);return null!=e&&l.overrideMimeType&&l.overrideMimeType(e),null!=u&&(l.responseType=u),null!=o&&i.on("error",o).on("load",function(t){o(null,t)}),a.beforesend.call(i,l),l.send(null==n?null:n),i},i.abort=function(){return l.abort(),i},ha.rebind(i,a,"on"),null==n?i:i.get(Ft(n))}function Ft(t){return 1===t.length?function(e,r){t(null==e?r:null)}:t}function jt(t){var e=t.responseType;return e&&"text"!==e?t.response:t.responseText}function Lt(t,e,r){var n=arguments.length;n<2&&(e=0),n<3&&(r=Date.now());var o=r+e,i={c:t,t:o,n:null};return cs?cs.n=i:us=i,cs=i,fs||(ds=clearTimeout(ds),fs=1,hs(Rt)),i}function Rt(){var t=It(),e=Dt()-t;e>24?(isFinite(e)&&(clearTimeout(ds),ds=setTimeout(Rt,e)),fs=0):(fs=1,hs(Rt))}function It(){for(var t=Date.now(),e=us;e;)t>=e.t&&e.c(t-e.t)&&(e.c=null),e=e.n;return t}function Dt(){for(var t,e=us,r=1/0;e;)e.c?(e.t<r&&(r=e.t),e=(t=e).n):e=t?t.n=e.n:us=e.n;return cs=t,r}function qt(t,e){return e-(t?Math.ceil(Math.log(t)/Math.LN10):1)}function Pt(t,e){var r=Math.pow(10,3*za(8-e));return{scale:e>8?function(t){return t/r}:function(t){return t*r},symbol:t}}function Ut(t){var e=t.decimal,r=t.thousands,n=t.grouping,o=t.currency,i=n&&r?function(t,e){for(var o=t.length,i=[],a=0,s=n[0],l=0;o>0&&s>0&&(l+s+1>e&&(s=Math.max(1,e-l)),i.push(t.substring(o-=s,o+s)),!((l+=s+1)>e));)s=n[a=(a+1)%n.length];return i.reverse().join(r)}:z;return function(t){var r=vs.exec(t),n=r[1]||" ",a=r[2]||">",s=r[3]||"-",l=r[4]||"",u=r[5],c=+r[6],f=r[7],d=r[8],h=r[9],p=1,v="",_="",m=!1,g=!0;switch(d&&(d=+d.substring(1)),(u||"0"===n&&"="===a)&&(u=n="0",a="="),h){case"n":f=!0,h="g";break;case"%":p=100,_="%",h="f";break;case"p":p=100,_="%",h="r";break;case"b":case"o":case"x":case"X":"#"===l&&(v="0"+h.toLowerCase());case"c":g=!1;case"d":m=!0,d=0;break;case"s":p=-1,h="r"}"$"===l&&(v=o[0],_=o[1]),"r"!=h||d||(h="g"),null!=d&&("g"==h?d=Math.max(1,Math.min(21,d)):"e"!=h&&"f"!=h||(d=Math.max(0,Math.min(20,d)))),h=_s.get(h)||Ht;var y=u&&f;return function(t){var r=_;if(m&&t%1)return"";var o=t<0||0===t&&1/t<0?(t=-t,"-"):"-"===s?"":s;if(p<0){var l=ha.formatPrefix(t,d);t=l.scale(t),r=l.symbol+_}else t*=p;t=h(t,d);var w,x,b=t.lastIndexOf(".");if(b<0){var z=g?t.lastIndexOf("e"):-1;z<0?(w=t,x=""):(w=t.substring(0,z),x=t.substring(z))}else w=t.substring(0,b),x=e+t.substring(b+1);!u&&f&&(w=i(w,1/0));var M=v.length+w.length+x.length+(y?0:o.length),k=M<c?new Array(M=c-M+1).join(n):"";return y&&(w=i(k+w,k.length?c-x.length:1/0)),o+=v,t=w+x,("<"===a?o+t+k:">"===a?k+o+t:"^"===a?k.substring(0,M>>=1)+o+t+k.substring(M):o+(y?t:k+t))+r}}}function Ht(t){return t+""}function $t(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}function Zt(t,e,r){function n(e){var r=t(e),n=i(r,1);return e-r<n-e?r:n}function o(r){return e(r=t(new gs(r-1)),1),r}function i(t,r){return e(t=new gs(+t),r),t}function a(t,n,i){var a=o(t),s=[];if(i>1)for(;a<n;)r(a)%i||s.push(new Date(+a)),e(a,1);else for(;a<n;)s.push(new Date(+a)),e(a,1);return s}function s(t,e,r){try{gs=$t;var n=new $t;return n._=t,a(n,e,r)}finally{gs=Date}}t.floor=t,t.round=n,t.ceil=o,t.offset=i,t.range=a;var l=t.utc=Vt(t);return l.floor=l,l.round=Vt(n),l.ceil=Vt(o),l.offset=Vt(i),l.range=s,t}function Vt(t){return function(e,r){try{gs=$t;var n=new $t;return n._=e,t(n,r)._}finally{gs=Date}}}function Yt(t){function e(t){function e(e){for(var r,o,i,a=[],s=-1,l=0;++s<n;)37===t.charCodeAt(s)&&(a.push(t.slice(l,s)),null!=(o=ws[r=t.charAt(++s)])&&(r=t.charAt(++s)),(i=N[r])&&(r=i(e,null==o?"e"===r?" ":"0":o)),a.push(r),l=s+1);return a.push(t.slice(l,s)),a.join("")}var n=t.length;return e.parse=function(e){var n={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null},o=r(n,t,e,0);if(o!=e.length)return null;"p"in n&&(n.H=n.H%12+12*n.p);var i=null!=n.Z&&gs!==$t,a=new(i?$t:gs);return"j"in n?a.setFullYear(n.y,0,n.j):"W"in n||"U"in n?("w"in n||(n.w="W"in n?1:0),a.setFullYear(n.y,0,1),a.setFullYear(n.y,0,"W"in n?(n.w+6)%7+7*n.W-(a.getDay()+5)%7:n.w+7*n.U-(a.getDay()+6)%7)):a.setFullYear(n.y,n.m,n.d),a.setHours(n.H+(n.Z/100|0),n.M+n.Z%100,n.S,n.L),i?a._:a},e.toString=function(){return t},e}function r(t,e,r,n){for(var o,i,a,s=0,l=e.length,u=r.length;s<l;){if(n>=u)return-1;if(o=e.charCodeAt(s++),37===o){if(a=e.charAt(s++),i=S[a in ws?e.charAt(s++):a],!i||(n=i(t,r,n))<0)return-1}else if(o!=r.charCodeAt(n++))return-1}return n}function n(t,e,r){b.lastIndex=0;var n=b.exec(e.slice(r));return n?(t.w=z.get(n[0].toLowerCase()),r+n[0].length):-1}function o(t,e,r){w.lastIndex=0;var n=w.exec(e.slice(r));return n?(t.w=x.get(n[0].toLowerCase()),r+n[0].length):-1}function i(t,e,r){A.lastIndex=0;var n=A.exec(e.slice(r));return n?(t.m=E.get(n[0].toLowerCase()),r+n[0].length):-1}function a(t,e,r){M.lastIndex=0;var n=M.exec(e.slice(r));return n?(t.m=k.get(n[0].toLowerCase()),r+n[0].length):-1}function s(t,e,n){return r(t,N.c.toString(),e,n)}function l(t,e,n){return r(t,N.x.toString(),e,n)}function u(t,e,n){return r(t,N.X.toString(),e,n)}function c(t,e,r){var n=y.get(e.slice(r,r+=2).toLowerCase());return null==n?-1:(t.p=n,r)}var f=t.dateTime,d=t.date,h=t.time,p=t.periods,v=t.days,_=t.shortDays,m=t.months,g=t.shortMonths;e.utc=function(t){function r(t){try{gs=$t;var e=new gs;return e._=t,n(e)}finally{gs=Date}}var n=e(t);return r.parse=function(t){try{gs=$t;var e=n.parse(t);return e&&e._}finally{gs=Date}},r.toString=n.toString,r},e.multi=e.utc.multi=he;var y=ha.map(),w=Gt(v),x=Xt(v),b=Gt(_),z=Xt(_),M=Gt(m),k=Xt(m),A=Gt(g),E=Xt(g);p.forEach(function(t,e){y.set(t.toLowerCase(),e)});var N={a:function(t){return _[t.getDay()]},A:function(t){return v[t.getDay()]},b:function(t){return g[t.getMonth()]},B:function(t){return m[t.getMonth()]},c:e(f),d:function(t,e){return Wt(t.getDate(),e,2)},e:function(t,e){return Wt(t.getDate(),e,2)},H:function(t,e){return Wt(t.getHours(),e,2)},I:function(t,e){return Wt(t.getHours()%12||12,e,2)},j:function(t,e){return Wt(1+ms.dayOfYear(t),e,3)},L:function(t,e){return Wt(t.getMilliseconds(),e,3)},m:function(t,e){return Wt(t.getMonth()+1,e,2)},M:function(t,e){return Wt(t.getMinutes(),e,2)},p:function(t){return p[+(t.getHours()>=12)]},S:function(t,e){return Wt(t.getSeconds(),e,2)},U:function(t,e){return Wt(ms.sundayOfYear(t),e,2)},w:function(t){return t.getDay()},W:function(t,e){return Wt(ms.mondayOfYear(t),e,2)},x:e(d),X:e(h),y:function(t,e){return Wt(t.getFullYear()%100,e,2)},Y:function(t,e){return Wt(t.getFullYear()%1e4,e,4)},Z:fe,"%":function(){return"%"}},S={a:n,A:o,b:i,B:a,c:s,d:ie,e:ie,H:se,I:se,j:ae,L:ce,m:oe,M:le,p:c,S:ue,U:Kt,w:Jt,W:Qt,x:l,X:u,y:ee,Y:te,Z:re,"%":de};return e}function Wt(t,e,r){var n=t<0?"-":"",o=(n?-t:t)+"",i=o.length;return n+(i<r?new Array(r-i+1).join(e)+o:o)}function Gt(t){return new RegExp("^(?:"+t.map(ha.requote).join("|")+")","i")}function Xt(t){for(var e=new p,r=-1,n=t.length;++r<n;)e.set(t[r].toLowerCase(),r);return e}function Jt(t,e,r){xs.lastIndex=0;var n=xs.exec(e.slice(r,r+1));return n?(t.w=+n[0],r+n[0].length):-1}function Kt(t,e,r){xs.lastIndex=0;var n=xs.exec(e.slice(r));return n?(t.U=+n[0],r+n[0].length):-1}function Qt(t,e,r){xs.lastIndex=0;var n=xs.exec(e.slice(r));return n?(t.W=+n[0],r+n[0].length):-1}function te(t,e,r){xs.lastIndex=0;var n=xs.exec(e.slice(r,r+4));return n?(t.y=+n[0],r+n[0].length):-1}function ee(t,e,r){xs.lastIndex=0;var n=xs.exec(e.slice(r,r+2));return n?(t.y=ne(+n[0]),r+n[0].length):-1}function re(t,e,r){return/^[+-]\d{4}$/.test(e=e.slice(r,r+5))?(t.Z=-e,r+5):-1}function ne(t){return t+(t>68?1900:2e3)}function oe(t,e,r){xs.lastIndex=0;var n=xs.exec(e.slice(r,r+2));return n?(t.m=n[0]-1,r+n[0].length):-1}function ie(t,e,r){xs.lastIndex=0;var n=xs.exec(e.slice(r,r+2));return n?(t.d=+n[0],r+n[0].length):-1}function ae(t,e,r){xs.lastIndex=0;var n=xs.exec(e.slice(r,r+3));return n?(t.j=+n[0],r+n[0].length):-1}function se(t,e,r){xs.lastIndex=0;var n=xs.exec(e.slice(r,r+2));return n?(t.H=+n[0],r+n[0].length):-1}function le(t,e,r){xs.lastIndex=0;var n=xs.exec(e.slice(r,r+2));return n?(t.M=+n[0],r+n[0].length):-1}function ue(t,e,r){xs.lastIndex=0;var n=xs.exec(e.slice(r,r+2));return n?(t.S=+n[0],r+n[0].length):-1}function ce(t,e,r){xs.lastIndex=0;var n=xs.exec(e.slice(r,r+3));return n?(t.L=+n[0],r+n[0].length):-1}function fe(t){var e=t.getTimezoneOffset(),r=e>0?"-":"+",n=za(e)/60|0,o=za(e)%60;return r+Wt(n,"0",2)+Wt(o,"0",2)}function de(t,e,r){bs.lastIndex=0;var n=bs.exec(e.slice(r,r+1));return n?r+n[0].length:-1}function he(t){for(var e=t.length,r=-1;++r<e;)t[r][0]=this(t[r][0]);return function(e){for(var r=0,n=t[r];!n[1](e);)n=t[++r];return n[0](e)}}function pe(){}function ve(t,e,r){var n=r.s=t+e,o=n-t,i=n-o;r.t=t-i+(e-o)}function _e(t,e){t&&As.hasOwnProperty(t.type)&&As[t.type](t,e)}function me(t,e,r){var n,o=-1,i=t.length-r;for(e.lineStart();++o<i;)n=t[o],e.point(n[0],n[1],n[2]);e.lineEnd()}function ge(t,e){var r=-1,n=t.length;for(e.polygonStart();++r<n;)me(t[r],e,1);e.polygonEnd()}function ye(){function t(t,e){t*=Va,e=e*Va/2+Ua/4;var r=t-n,a=r>=0?1:-1,s=a*r,l=Math.cos(e),u=Math.sin(e),c=i*u,f=o*l+c*Math.cos(s),d=c*a*Math.sin(s);Ns.add(Math.atan2(d,f)),n=t,o=l,i=u}var e,r,n,o,i;Ss.point=function(a,s){Ss.point=t,n=(e=a)*Va,o=Math.cos(s=(r=s)*Va/2+Ua/4),i=Math.sin(s)},Ss.lineEnd=function(){t(e,r)}}function we(t){var e=t[0],r=t[1],n=Math.cos(r);return[n*Math.cos(e),n*Math.sin(e),Math.sin(r)]}function xe(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function be(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function ze(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function Me(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function ke(t){var e=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function Ae(t){return[Math.atan2(t[1],t[0]),at(t[2])]}function Ee(t,e){return za(t[0]-e[0])<qa&&za(t[1]-e[1])<qa}function Ne(t,e){t*=Va;var r=Math.cos(e*=Va);Se(r*Math.cos(t),r*Math.sin(t),Math.sin(e))}function Se(t,e,r){++Cs,Os+=(t-Os)/Cs,Bs+=(e-Bs)/Cs,Fs+=(r-Fs)/Cs}function Ce(){function t(t,o){t*=Va;var i=Math.cos(o*=Va),a=i*Math.cos(t),s=i*Math.sin(t),l=Math.sin(o),u=Math.atan2(Math.sqrt((u=r*l-n*s)*u+(u=n*a-e*l)*u+(u=e*s-r*a)*u),e*a+r*s+n*l);Ts+=u,js+=u*(e+(e=a)),Ls+=u*(r+(r=s)),Rs+=u*(n+(n=l)),Se(e,r,n)}var e,r,n;Ps.point=function(o,i){o*=Va;var a=Math.cos(i*=Va);e=a*Math.cos(o),r=a*Math.sin(o),n=Math.sin(i),Ps.point=t,Se(e,r,n)}}function Te(){Ps.point=Ne}function Oe(){function t(t,e){t*=Va;var r=Math.cos(e*=Va),a=r*Math.cos(t),s=r*Math.sin(t),l=Math.sin(e),u=o*l-i*s,c=i*a-n*l,f=n*s-o*a,d=Math.sqrt(u*u+c*c+f*f),h=n*a+o*s+i*l,p=d&&-it(h)/d,v=Math.atan2(d,h);Is+=p*u,Ds+=p*c,qs+=p*f,Ts+=v,js+=v*(n+(n=a)),Ls+=v*(o+(o=s)),Rs+=v*(i+(i=l)),Se(n,o,i)}var e,r,n,o,i;Ps.point=function(a,s){e=a,r=s,Ps.point=t,a*=Va;var l=Math.cos(s*=Va);n=l*Math.cos(a),o=l*Math.sin(a),i=Math.sin(s),Se(n,o,i)},Ps.lineEnd=function(){t(e,r),Ps.lineEnd=Te,Ps.point=Ne}}function Be(t,e){function r(r,n){return r=t(r,n),e(r[0],r[1])}return t.invert&&e.invert&&(r.invert=function(r,n){return r=e.invert(r,n),r&&t.invert(r[0],r[1])}),r}function Fe(){return!0}function je(t,e,r,n,o){var i=[],a=[];if(t.forEach(function(t){if(!((e=t.length-1)<=0)){var e,r=t[0],n=t[e];if(Ee(r,n)){o.lineStart();for(var s=0;s<e;++s)o.point((r=t[s])[0],r[1]);return void o.lineEnd()}var l=new Re(r,t,null,!0),u=new Re(r,null,l,!1);
l.o=u,i.push(l),a.push(u),l=new Re(n,t,null,!1),u=new Re(n,null,l,!0),l.o=u,i.push(l),a.push(u)}}),a.sort(e),Le(i),Le(a),i.length){for(var s=0,l=r,u=a.length;s<u;++s)a[s].e=l=!l;for(var c,f,d=i[0];;){for(var h=d,p=!0;h.v;)if((h=h.n)===d)return;c=h.z,o.lineStart();do{if(h.v=h.o.v=!0,h.e){if(p)for(var s=0,u=c.length;s<u;++s)o.point((f=c[s])[0],f[1]);else n(h.x,h.n.x,1,o);h=h.n}else{if(p){c=h.p.z;for(var s=c.length-1;s>=0;--s)o.point((f=c[s])[0],f[1])}else n(h.x,h.p.x,-1,o);h=h.p}h=h.o,c=h.z,p=!p}while(!h.v);o.lineEnd()}}}function Le(t){if(e=t.length){for(var e,r,n=0,o=t[0];++n<e;)o.n=r=t[n],r.p=o,o=r;o.n=r=t[0],r.p=o}}function Re(t,e,r,n){this.x=t,this.z=e,this.o=r,this.e=n,this.v=!1,this.n=this.p=null}function Ie(t,e,r,n){return function(o,i){function a(e,r){var n=o(e,r);t(e=n[0],r=n[1])&&i.point(e,r)}function s(t,e){var r=o(t,e);_.point(r[0],r[1])}function l(){g.point=s,_.lineStart()}function u(){g.point=a,_.lineEnd()}function c(t,e){v.push([t,e]);var r=o(t,e);w.point(r[0],r[1])}function f(){w.lineStart(),v=[]}function d(){c(v[0][0],v[0][1]),w.lineEnd();var t,e=w.clean(),r=y.buffer(),n=r.length;if(v.pop(),p.push(v),v=null,n)if(1&e){t=r[0];var o,n=t.length-1,a=-1;if(n>0){for(x||(i.polygonStart(),x=!0),i.lineStart();++a<n;)i.point((o=t[a])[0],o[1]);i.lineEnd()}}else n>1&&2&e&&r.push(r.pop().concat(r.shift())),h.push(r.filter(De))}var h,p,v,_=e(i),m=o.invert(n[0],n[1]),g={point:a,lineStart:l,lineEnd:u,polygonStart:function(){g.point=c,g.lineStart=f,g.lineEnd=d,h=[],p=[]},polygonEnd:function(){g.point=a,g.lineStart=l,g.lineEnd=u,h=ha.merge(h);var t=Ze(m,p);h.length?(x||(i.polygonStart(),x=!0),je(h,Pe,t,r,i)):t&&(x||(i.polygonStart(),x=!0),i.lineStart(),r(null,null,1,i),i.lineEnd()),x&&(i.polygonEnd(),x=!1),h=p=null},sphere:function(){i.polygonStart(),i.lineStart(),r(null,null,1,i),i.lineEnd(),i.polygonEnd()}},y=qe(),w=e(y),x=!1;return g}}function De(t){return t.length>1}function qe(){var t,e=[];return{lineStart:function(){e.push(t=[])},point:function(e,r){t.push([e,r])},lineEnd:A,buffer:function(){var r=e;return e=[],t=null,r},rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))}}}function Pe(t,e){return((t=t.x)[0]<0?t[1]-Za-qa:Za-t[1])-((e=e.x)[0]<0?e[1]-Za-qa:Za-e[1])}function Ue(t){var e,r=NaN,n=NaN,o=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(i,a){var s=i>0?Ua:-Ua,l=za(i-r);za(l-Ua)<qa?(t.point(r,n=(n+a)/2>0?Za:-Za),t.point(o,n),t.lineEnd(),t.lineStart(),t.point(s,n),t.point(i,n),e=0):o!==s&&l>=Ua&&(za(r-o)<qa&&(r-=o*qa),za(i-s)<qa&&(i-=s*qa),n=He(r,n,i,a),t.point(o,n),t.lineEnd(),t.lineStart(),t.point(s,n),e=0),t.point(r=i,n=a),o=s},lineEnd:function(){t.lineEnd(),r=n=NaN},clean:function(){return 2-e}}}function He(t,e,r,n){var o,i,a=Math.sin(t-r);return za(a)>qa?Math.atan((Math.sin(e)*(i=Math.cos(n))*Math.sin(r)-Math.sin(n)*(o=Math.cos(e))*Math.sin(t))/(o*i*a)):(e+n)/2}function $e(t,e,r,n){var o;if(null==t)o=r*Za,n.point(-Ua,o),n.point(0,o),n.point(Ua,o),n.point(Ua,0),n.point(Ua,-o),n.point(0,-o),n.point(-Ua,-o),n.point(-Ua,0),n.point(-Ua,o);else if(za(t[0]-e[0])>qa){var i=t[0]<e[0]?Ua:-Ua;o=r*i/2,n.point(-i,o),n.point(0,o),n.point(i,o)}else n.point(e[0],e[1])}function Ze(t,e){var r=t[0],n=t[1],o=[Math.sin(r),-Math.cos(r),0],i=0,a=0;Ns.reset();for(var s=0,l=e.length;s<l;++s){var u=e[s],c=u.length;if(c)for(var f=u[0],d=f[0],h=f[1]/2+Ua/4,p=Math.sin(h),v=Math.cos(h),_=1;;){_===c&&(_=0),t=u[_];var m=t[0],g=t[1]/2+Ua/4,y=Math.sin(g),w=Math.cos(g),x=m-d,b=x>=0?1:-1,z=b*x,M=z>Ua,k=p*y;if(Ns.add(Math.atan2(k*b*Math.sin(z),v*w+k*Math.cos(z))),i+=M?x+b*Ha:x,M^d>=r^m>=r){var A=be(we(f),we(t));ke(A);var E=be(o,A);ke(E);var N=(M^x>=0?-1:1)*at(E[2]);(n>N||n===N&&(A[0]||A[1]))&&(a+=M^x>=0?1:-1)}if(!_++)break;d=m,p=y,v=w,f=t}}return(i<-qa||i<qa&&Ns<-qa)^1&a}function Ve(t){function e(t,e){return Math.cos(t)*Math.cos(e)>i}function r(t){var r,i,l,u,c;return{lineStart:function(){u=l=!1,c=1},point:function(f,d){var h,p=[f,d],v=e(f,d),_=a?v?0:o(f,d):v?o(f+(f<0?Ua:-Ua),d):0;if(!r&&(u=l=v)&&t.lineStart(),v!==l&&(h=n(r,p),(Ee(r,h)||Ee(p,h))&&(p[0]+=qa,p[1]+=qa,v=e(p[0],p[1]))),v!==l)c=0,v?(t.lineStart(),h=n(p,r),t.point(h[0],h[1])):(h=n(r,p),t.point(h[0],h[1]),t.lineEnd()),r=h;else if(s&&r&&a^v){var m;_&i||!(m=n(p,r,!0))||(c=0,a?(t.lineStart(),t.point(m[0][0],m[0][1]),t.point(m[1][0],m[1][1]),t.lineEnd()):(t.point(m[1][0],m[1][1]),t.lineEnd(),t.lineStart(),t.point(m[0][0],m[0][1])))}!v||r&&Ee(r,p)||t.point(p[0],p[1]),r=p,l=v,i=_},lineEnd:function(){l&&t.lineEnd(),r=null},clean:function(){return c|(u&&l)<<1}}}function n(t,e,r){var n=we(t),o=we(e),a=[1,0,0],s=be(n,o),l=xe(s,s),u=s[0],c=l-u*u;if(!c)return!r&&t;var f=i*l/c,d=-i*u/c,h=be(a,s),p=Me(a,f),v=Me(s,d);ze(p,v);var _=h,m=xe(p,_),g=xe(_,_),y=m*m-g*(xe(p,p)-1);if(!(y<0)){var w=Math.sqrt(y),x=Me(_,(-m-w)/g);if(ze(x,p),x=Ae(x),!r)return x;var b,z=t[0],M=e[0],k=t[1],A=e[1];M<z&&(b=z,z=M,M=b);var E=M-z,N=za(E-Ua)<qa,S=N||E<qa;if(!N&&A<k&&(b=k,k=A,A=b),S?N?k+A>0^x[1]<(za(x[0]-z)<qa?k:A):k<=x[1]&&x[1]<=A:E>Ua^(z<=x[0]&&x[0]<=M)){var C=Me(_,(-m+w)/g);return ze(C,p),[x,Ae(C)]}}}function o(e,r){var n=a?t:Ua-t,o=0;return e<-n?o|=1:e>n&&(o|=2),r<-n?o|=4:r>n&&(o|=8),o}var i=Math.cos(t),a=i>0,s=za(i)>qa,l=yr(t,6*Va);return Ie(e,r,l,a?[0,-t]:[-Ua,t-Ua])}function Ye(t,e,r,n){return function(o){var i,a=o.a,s=o.b,l=a.x,u=a.y,c=s.x,f=s.y,d=0,h=1,p=c-l,v=f-u;if(i=t-l,p||!(i>0)){if(i/=p,p<0){if(i<d)return;i<h&&(h=i)}else if(p>0){if(i>h)return;i>d&&(d=i)}if(i=r-l,p||!(i<0)){if(i/=p,p<0){if(i>h)return;i>d&&(d=i)}else if(p>0){if(i<d)return;i<h&&(h=i)}if(i=e-u,v||!(i>0)){if(i/=v,v<0){if(i<d)return;i<h&&(h=i)}else if(v>0){if(i>h)return;i>d&&(d=i)}if(i=n-u,v||!(i<0)){if(i/=v,v<0){if(i>h)return;i>d&&(d=i)}else if(v>0){if(i<d)return;i<h&&(h=i)}return d>0&&(o.a={x:l+d*p,y:u+d*v}),h<1&&(o.b={x:l+h*p,y:u+h*v}),o}}}}}}function We(t,e,r,n){function o(n,o){return za(n[0]-t)<qa?o>0?0:3:za(n[0]-r)<qa?o>0?2:1:za(n[1]-e)<qa?o>0?1:0:o>0?3:2}function i(t,e){return a(t.x,e.x)}function a(t,e){var r=o(t,1),n=o(e,1);return r!==n?r-n:0===r?e[1]-t[1]:1===r?t[0]-e[0]:2===r?t[1]-e[1]:e[0]-t[0]}return function(s){function l(t){for(var e=0,r=_.length,n=t[1],o=0;o<r;++o)for(var i,a=1,s=_[o],l=s.length,u=s[0];a<l;++a)i=s[a],u[1]<=n?i[1]>n&&ot(u,i,t)>0&&++e:i[1]<=n&&ot(u,i,t)<0&&--e,u=i;return 0!==e}function u(i,s,l,u){var c=0,f=0;if(null==i||(c=o(i,l))!==(f=o(s,l))||a(i,s)<0^l>0){do u.point(0===c||3===c?t:r,c>1?n:e);while((c=(c+l+4)%4)!==f)}else u.point(s[0],s[1])}function c(o,i){return t<=o&&o<=r&&e<=i&&i<=n}function f(t,e){c(t,e)&&s.point(t,e)}function d(){S.point=p,_&&_.push(m=[]),M=!0,z=!1,x=b=NaN}function h(){v&&(p(g,y),w&&z&&E.rejoin(),v.push(E.buffer())),S.point=f,z&&s.lineEnd()}function p(t,e){t=Math.max(-Hs,Math.min(Hs,t)),e=Math.max(-Hs,Math.min(Hs,e));var r=c(t,e);if(_&&m.push([t,e]),M)g=t,y=e,w=r,M=!1,r&&(s.lineStart(),s.point(t,e));else if(r&&z)s.point(t,e);else{var n={a:{x:x,y:b},b:{x:t,y:e}};N(n)?(z||(s.lineStart(),s.point(n.a.x,n.a.y)),s.point(n.b.x,n.b.y),r||s.lineEnd(),k=!1):r&&(s.lineStart(),s.point(t,e),k=!1)}x=t,b=e,z=r}var v,_,m,g,y,w,x,b,z,M,k,A=s,E=qe(),N=Ye(t,e,r,n),S={point:f,lineStart:d,lineEnd:h,polygonStart:function(){s=E,v=[],_=[],k=!0},polygonEnd:function(){s=A,v=ha.merge(v);var e=l([t,n]),r=k&&e,o=v.length;(r||o)&&(s.polygonStart(),r&&(s.lineStart(),u(null,null,1,s),s.lineEnd()),o&&je(v,i,e,u,s),s.polygonEnd()),v=_=m=null}};return S}}function Ge(t){var e=0,r=Ua/3,n=fr(t),o=n(e,r);return o.parallels=function(t){return arguments.length?n(e=t[0]*Ua/180,r=t[1]*Ua/180):[e/Ua*180,r/Ua*180]},o}function Xe(t,e){function r(t,e){var r=Math.sqrt(i-2*o*Math.sin(e))/o;return[r*Math.sin(t*=o),a-r*Math.cos(t)]}var n=Math.sin(t),o=(n+Math.sin(e))/2,i=1+n*(2*o-n),a=Math.sqrt(i)/o;return r.invert=function(t,e){var r=a-e;return[Math.atan2(t,r)/o,at((i-(t*t+r*r)*o*o)/(2*o))]},r}function Je(){function t(t,e){Zs+=o*t-n*e,n=t,o=e}var e,r,n,o;Xs.point=function(i,a){Xs.point=t,e=n=i,r=o=a},Xs.lineEnd=function(){t(e,r)}}function Ke(t,e){t<Vs&&(Vs=t),t>Ws&&(Ws=t),e<Ys&&(Ys=e),e>Gs&&(Gs=e)}function Qe(){function t(t,e){a.push("M",t,",",e,i)}function e(t,e){a.push("M",t,",",e),s.point=r}function r(t,e){a.push("L",t,",",e)}function n(){s.point=t}function o(){a.push("Z")}var i=tr(4.5),a=[],s={point:t,lineStart:function(){s.point=e},lineEnd:n,polygonStart:function(){s.lineEnd=o},polygonEnd:function(){s.lineEnd=n,s.point=t},pointRadius:function(t){return i=tr(t),s},result:function(){if(a.length){var t=a.join("");return a=[],t}}};return s}function tr(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}function er(t,e){Os+=t,Bs+=e,++Fs}function rr(){function t(t,n){var o=t-e,i=n-r,a=Math.sqrt(o*o+i*i);js+=a*(e+t)/2,Ls+=a*(r+n)/2,Rs+=a,er(e=t,r=n)}var e,r;Ks.point=function(n,o){Ks.point=t,er(e=n,r=o)}}function nr(){Ks.point=er}function or(){function t(t,e){var r=t-n,i=e-o,a=Math.sqrt(r*r+i*i);js+=a*(n+t)/2,Ls+=a*(o+e)/2,Rs+=a,a=o*t-n*e,Is+=a*(n+t),Ds+=a*(o+e),qs+=3*a,er(n=t,o=e)}var e,r,n,o;Ks.point=function(i,a){Ks.point=t,er(e=n=i,r=o=a)},Ks.lineEnd=function(){t(e,r)}}function ir(t){function e(e,r){t.moveTo(e+a,r),t.arc(e,r,a,0,Ha)}function r(e,r){t.moveTo(e,r),s.point=n}function n(e,r){t.lineTo(e,r)}function o(){s.point=e}function i(){t.closePath()}var a=4.5,s={point:e,lineStart:function(){s.point=r},lineEnd:o,polygonStart:function(){s.lineEnd=i},polygonEnd:function(){s.lineEnd=o,s.point=e},pointRadius:function(t){return a=t,s},result:A};return s}function ar(t){function e(t){return(s?n:r)(t)}function r(e){return ur(e,function(r,n){r=t(r,n),e.point(r[0],r[1])})}function n(e){function r(r,n){r=t(r,n),e.point(r[0],r[1])}function n(){y=NaN,M.point=i,e.lineStart()}function i(r,n){var i=we([r,n]),a=t(r,n);o(y,w,g,x,b,z,y=a[0],w=a[1],g=r,x=i[0],b=i[1],z=i[2],s,e),e.point(y,w)}function a(){M.point=r,e.lineEnd()}function l(){n(),M.point=u,M.lineEnd=c}function u(t,e){i(f=t,d=e),h=y,p=w,v=x,_=b,m=z,M.point=i}function c(){o(y,w,g,x,b,z,h,p,f,v,_,m,s,e),M.lineEnd=a,a()}var f,d,h,p,v,_,m,g,y,w,x,b,z,M={point:r,lineStart:n,lineEnd:a,polygonStart:function(){e.polygonStart(),M.lineStart=l},polygonEnd:function(){e.polygonEnd(),M.lineStart=n}};return M}function o(e,r,n,s,l,u,c,f,d,h,p,v,_,m){var g=c-e,y=f-r,w=g*g+y*y;if(w>4*i&&_--){var x=s+h,b=l+p,z=u+v,M=Math.sqrt(x*x+b*b+z*z),k=Math.asin(z/=M),A=za(za(z)-1)<qa||za(n-d)<qa?(n+d)/2:Math.atan2(b,x),E=t(A,k),N=E[0],S=E[1],C=N-e,T=S-r,O=y*C-g*T;(O*O/w>i||za((g*C+y*T)/w-.5)>.3||s*h+l*p+u*v<a)&&(o(e,r,n,s,l,u,N,S,A,x/=M,b/=M,z,_,m),m.point(N,S),o(N,S,A,x,b,z,c,f,d,h,p,v,_,m))}}var i=.5,a=Math.cos(30*Va),s=16;return e.precision=function(t){return arguments.length?(s=(i=t*t)>0&&16,e):Math.sqrt(i)},e}function sr(t){var e=ar(function(e,r){return t([e*Ya,r*Ya])});return function(t){return dr(e(t))}}function lr(t){this.stream=t}function ur(t,e){return{point:e,sphere:function(){t.sphere()},lineStart:function(){t.lineStart()},lineEnd:function(){t.lineEnd()},polygonStart:function(){t.polygonStart()},polygonEnd:function(){t.polygonEnd()}}}function cr(t){return fr(function(){return t})()}function fr(t){function e(t){return t=s(t[0]*Va,t[1]*Va),[t[0]*d+l,u-t[1]*d]}function r(t){return t=s.invert((t[0]-l)/d,(u-t[1])/d),t&&[t[0]*Ya,t[1]*Ya]}function n(){s=Be(a=vr(m,g,y),i);var t=i(v,_);return l=h-t[0]*d,u=p+t[1]*d,o()}function o(){return c&&(c.valid=!1,c=null),e}var i,a,s,l,u,c,f=ar(function(t,e){return t=i(t,e),[t[0]*d+l,u-t[1]*d]}),d=150,h=480,p=250,v=0,_=0,m=0,g=0,y=0,w=Us,x=z,b=null,M=null;return e.stream=function(t){return c&&(c.valid=!1),c=dr(w(a,f(x(t)))),c.valid=!0,c},e.clipAngle=function(t){return arguments.length?(w=null==t?(b=t,Us):Ve((b=+t)*Va),o()):b},e.clipExtent=function(t){return arguments.length?(M=t,x=t?We(t[0][0],t[0][1],t[1][0],t[1][1]):z,o()):M},e.scale=function(t){return arguments.length?(d=+t,n()):d},e.translate=function(t){return arguments.length?(h=+t[0],p=+t[1],n()):[h,p]},e.center=function(t){return arguments.length?(v=t[0]%360*Va,_=t[1]%360*Va,n()):[v*Ya,_*Ya]},e.rotate=function(t){return arguments.length?(m=t[0]%360*Va,g=t[1]%360*Va,y=t.length>2?t[2]%360*Va:0,n()):[m*Ya,g*Ya,y*Ya]},ha.rebind(e,f,"precision"),function(){return i=t.apply(this,arguments),e.invert=i.invert&&r,n()}}function dr(t){return ur(t,function(e,r){t.point(e*Va,r*Va)})}function hr(t,e){return[t,e]}function pr(t,e){return[t>Ua?t-Ha:t<-Ua?t+Ha:t,e]}function vr(t,e,r){return t?e||r?Be(mr(t),gr(e,r)):mr(t):e||r?gr(e,r):pr}function _r(t){return function(e,r){return e+=t,[e>Ua?e-Ha:e<-Ua?e+Ha:e,r]}}function mr(t){var e=_r(t);return e.invert=_r(-t),e}function gr(t,e){function r(t,e){var r=Math.cos(e),s=Math.cos(t)*r,l=Math.sin(t)*r,u=Math.sin(e),c=u*n+s*o;return[Math.atan2(l*i-c*a,s*n-u*o),at(c*i+l*a)]}var n=Math.cos(t),o=Math.sin(t),i=Math.cos(e),a=Math.sin(e);return r.invert=function(t,e){var r=Math.cos(e),s=Math.cos(t)*r,l=Math.sin(t)*r,u=Math.sin(e),c=u*i-l*a;return[Math.atan2(l*i+u*a,s*n+c*o),at(c*n-s*o)]},r}function yr(t,e){var r=Math.cos(t),n=Math.sin(t);return function(o,i,a,s){var l=a*e;null!=o?(o=wr(r,o),i=wr(r,i),(a>0?o<i:o>i)&&(o+=a*Ha)):(o=t+a*Ha,i=t-.5*l);for(var u,c=o;a>0?c>i:c<i;c-=l)s.point((u=Ae([r,-n*Math.cos(c),-n*Math.sin(c)]))[0],u[1])}}function wr(t,e){var r=we(e);r[0]-=t,ke(r);var n=it(-r[1]);return((-r[2]<0?-n:n)+2*Math.PI-qa)%(2*Math.PI)}function xr(t,e,r){var n=ha.range(t,e-qa,r).concat(e);return function(t){return n.map(function(e){return[t,e]})}}function br(t,e,r){var n=ha.range(t,e-qa,r).concat(e);return function(t){return n.map(function(e){return[e,t]})}}function zr(t){return t.source}function Mr(t){return t.target}function kr(t,e,r,n){var o=Math.cos(e),i=Math.sin(e),a=Math.cos(n),s=Math.sin(n),l=o*Math.cos(t),u=o*Math.sin(t),c=a*Math.cos(r),f=a*Math.sin(r),d=2*Math.asin(Math.sqrt(ct(n-e)+o*a*ct(r-t))),h=1/Math.sin(d),p=d?function(t){var e=Math.sin(t*=d)*h,r=Math.sin(d-t)*h,n=r*l+e*c,o=r*u+e*f,a=r*i+e*s;return[Math.atan2(o,n)*Ya,Math.atan2(a,Math.sqrt(n*n+o*o))*Ya]}:function(){return[t*Ya,e*Ya]};return p.distance=d,p}function Ar(){function t(t,o){var i=Math.sin(o*=Va),a=Math.cos(o),s=za((t*=Va)-e),l=Math.cos(s);Qs+=Math.atan2(Math.sqrt((s=a*Math.sin(s))*s+(s=n*i-r*a*l)*s),r*i+n*a*l),e=t,r=i,n=a}var e,r,n;tl.point=function(o,i){e=o*Va,r=Math.sin(i*=Va),n=Math.cos(i),tl.point=t},tl.lineEnd=function(){tl.point=tl.lineEnd=A}}function Er(t,e){function r(e,r){var n=Math.cos(e),o=Math.cos(r),i=t(n*o);return[i*o*Math.sin(e),i*Math.sin(r)]}return r.invert=function(t,r){var n=Math.sqrt(t*t+r*r),o=e(n),i=Math.sin(o),a=Math.cos(o);return[Math.atan2(t*i,n*a),Math.asin(n&&r*i/n)]},r}function Nr(t,e){function r(t,e){a>0?e<-Za+qa&&(e=-Za+qa):e>Za-qa&&(e=Za-qa);var r=a/Math.pow(o(e),i);return[r*Math.sin(i*t),a-r*Math.cos(i*t)]}var n=Math.cos(t),o=function(t){return Math.tan(Ua/4+t/2)},i=t===e?Math.sin(t):Math.log(n/Math.cos(e))/Math.log(o(e)/o(t)),a=n*Math.pow(o(t),i)/i;return i?(r.invert=function(t,e){var r=a-e,n=nt(i)*Math.sqrt(t*t+r*r);return[Math.atan2(t,r)/i,2*Math.atan(Math.pow(a/n,1/i))-Za]},r):Cr}function Sr(t,e){function r(t,e){var r=i-e;return[r*Math.sin(o*t),i-r*Math.cos(o*t)]}var n=Math.cos(t),o=t===e?Math.sin(t):(n-Math.cos(e))/(e-t),i=n/o+t;return za(o)<qa?hr:(r.invert=function(t,e){var r=i-e;return[Math.atan2(t,r)/o,i-nt(o)*Math.sqrt(t*t+r*r)]},r)}function Cr(t,e){return[t,Math.log(Math.tan(Ua/4+e/2))]}function Tr(t){var e,r=cr(t),n=r.scale,o=r.translate,i=r.clipExtent;return r.scale=function(){var t=n.apply(r,arguments);return t===r?e?r.clipExtent(null):r:t},r.translate=function(){var t=o.apply(r,arguments);return t===r?e?r.clipExtent(null):r:t},r.clipExtent=function(t){var a=i.apply(r,arguments);if(a===r){if(e=null==t){var s=Ua*n(),l=o();i([[l[0]-s,l[1]-s],[l[0]+s,l[1]+s]])}}else e&&(a=null);return a},r.clipExtent(null)}function Or(t,e){return[Math.log(Math.tan(Ua/4+e/2)),-t]}function Br(t){return t[0]}function Fr(t){return t[1]}function jr(t){for(var e=t.length,r=[0,1],n=2,o=2;o<e;o++){for(;n>1&&ot(t[r[n-2]],t[r[n-1]],t[o])<=0;)--n;r[n++]=o}return r.slice(0,n)}function Lr(t,e){return t[0]-e[0]||t[1]-e[1]}function Rr(t,e,r){return(r[0]-e[0])*(t[1]-e[1])<(r[1]-e[1])*(t[0]-e[0])}function Ir(t,e,r,n){var o=t[0],i=r[0],a=e[0]-o,s=n[0]-i,l=t[1],u=r[1],c=e[1]-l,f=n[1]-u,d=(s*(l-u)-f*(o-i))/(f*a-s*c);return[o+d*a,l+d*c]}function Dr(t){var e=t[0],r=t[t.length-1];return!(e[0]-r[0]||e[1]-r[1])}function qr(){ln(this),this.edge=this.site=this.circle=null}function Pr(t){var e=dl.pop()||new qr;return e.site=t,e}function Ur(t){Kr(t),ul.remove(t),dl.push(t),ln(t)}function Hr(t){var e=t.circle,r=e.x,n=e.cy,o={x:r,y:n},i=t.P,a=t.N,s=[t];Ur(t);for(var l=i;l.circle&&za(r-l.circle.x)<qa&&za(n-l.circle.cy)<qa;)i=l.P,s.unshift(l),Ur(l),l=i;s.unshift(l),Kr(l);for(var u=a;u.circle&&za(r-u.circle.x)<qa&&za(n-u.circle.cy)<qa;)a=u.N,s.push(u),Ur(u),u=a;s.push(u),Kr(u);var c,f=s.length;for(c=1;c<f;++c)u=s[c],l=s[c-1],on(u.edge,l.site,u.site,o);l=s[0],u=s[f-1],u.edge=rn(l.site,u.site,null,o),Jr(l),Jr(u)}function $r(t){for(var e,r,n,o,i=t.x,a=t.y,s=ul._;s;)if(n=Zr(s,a)-i,n>qa)s=s.L;else{if(o=i-Vr(s,a),!(o>qa)){n>-qa?(e=s.P,r=s):o>-qa?(e=s,r=s.N):e=r=s;break}if(!s.R){e=s;break}s=s.R}var l=Pr(t);if(ul.insert(e,l),e||r){if(e===r)return Kr(e),r=Pr(e.site),ul.insert(l,r),l.edge=r.edge=rn(e.site,l.site),Jr(e),void Jr(r);if(!r)return void(l.edge=rn(e.site,l.site));Kr(e),Kr(r);var u=e.site,c=u.x,f=u.y,d=t.x-c,h=t.y-f,p=r.site,v=p.x-c,_=p.y-f,m=2*(d*_-h*v),g=d*d+h*h,y=v*v+_*_,w={x:(_*g-h*y)/m+c,y:(d*y-v*g)/m+f};on(r.edge,u,p,w),l.edge=rn(u,t,null,w),r.edge=rn(t,p,null,w),Jr(e),Jr(r)}}function Zr(t,e){var r=t.site,n=r.x,o=r.y,i=o-e;if(!i)return n;var a=t.P;if(!a)return-(1/0);r=a.site;var s=r.x,l=r.y,u=l-e;if(!u)return s;var c=s-n,f=1/i-1/u,d=c/u;return f?(-d+Math.sqrt(d*d-2*f*(c*c/(-2*u)-l+u/2+o-i/2)))/f+n:(n+s)/2}function Vr(t,e){var r=t.N;if(r)return Zr(r,e);var n=t.site;return n.y===e?n.x:1/0}function Yr(t){this.site=t,this.edges=[]}function Wr(t){for(var e,r,n,o,i,a,s,l,u,c,f=t[0][0],d=t[1][0],h=t[0][1],p=t[1][1],v=ll,_=v.length;_--;)if(i=v[_],i&&i.prepare())for(s=i.edges,l=s.length,a=0;a<l;)c=s[a].end(),n=c.x,o=c.y,u=s[++a%l].start(),e=u.x,r=u.y,(za(n-e)>qa||za(o-r)>qa)&&(s.splice(a,0,new an(nn(i.site,c,za(n-f)<qa&&p-o>qa?{x:f,y:za(e-f)<qa?r:p}:za(o-p)<qa&&d-n>qa?{x:za(r-p)<qa?e:d,y:p}:za(n-d)<qa&&o-h>qa?{x:d,y:za(e-d)<qa?r:h}:za(o-h)<qa&&n-f>qa?{x:za(r-h)<qa?e:f,y:h}:null),i.site,null)),++l)}function Gr(t,e){return e.angle-t.angle}function Xr(){ln(this),this.x=this.y=this.arc=this.site=this.cy=null}function Jr(t){var e=t.P,r=t.N;if(e&&r){var n=e.site,o=t.site,i=r.site;if(n!==i){var a=o.x,s=o.y,l=n.x-a,u=n.y-s,c=i.x-a,f=i.y-s,d=2*(l*f-u*c);if(!(d>=-Pa)){var h=l*l+u*u,p=c*c+f*f,v=(f*h-u*p)/d,_=(l*p-c*h)/d,f=_+s,m=hl.pop()||new Xr;m.arc=t,m.site=o,m.x=v+a,m.y=f+Math.sqrt(v*v+_*_),m.cy=f,t.circle=m;for(var g=null,y=fl._;y;)if(m.y<y.y||m.y===y.y&&m.x<=y.x){if(!y.L){g=y.P;break}y=y.L}else{if(!y.R){g=y;break}y=y.R}fl.insert(g,m),g||(cl=m)}}}}function Kr(t){var e=t.circle;e&&(e.P||(cl=e.N),fl.remove(e),hl.push(e),ln(e),t.circle=null)}function Qr(t){for(var e,r=sl,n=Ye(t[0][0],t[0][1],t[1][0],t[1][1]),o=r.length;o--;)e=r[o],(!tn(e,t)||!n(e)||za(e.a.x-e.b.x)<qa&&za(e.a.y-e.b.y)<qa)&&(e.a=e.b=null,r.splice(o,1))}function tn(t,e){var r=t.b;if(r)return!0;var n,o,i=t.a,a=e[0][0],s=e[1][0],l=e[0][1],u=e[1][1],c=t.l,f=t.r,d=c.x,h=c.y,p=f.x,v=f.y,_=(d+p)/2,m=(h+v)/2;if(v===h){if(_<a||_>=s)return;if(d>p){if(i){if(i.y>=u)return}else i={x:_,y:l};r={x:_,y:u}}else{if(i){if(i.y<l)return}else i={x:_,y:u};r={x:_,y:l}}}else if(n=(d-p)/(v-h),o=m-n*_,n<-1||n>1)if(d>p){if(i){if(i.y>=u)return}else i={x:(l-o)/n,y:l};r={x:(u-o)/n,y:u}}else{if(i){if(i.y<l)return}else i={x:(u-o)/n,y:u};r={x:(l-o)/n,y:l}}else if(h<v){if(i){if(i.x>=s)return}else i={x:a,y:n*a+o};r={x:s,y:n*s+o}}else{if(i){if(i.x<a)return}else i={x:s,y:n*s+o};r={x:a,y:n*a+o}}return t.a=i,t.b=r,!0}function en(t,e){this.l=t,this.r=e,this.a=this.b=null}function rn(t,e,r,n){var o=new en(t,e);return sl.push(o),r&&on(o,t,e,r),n&&on(o,e,t,n),ll[t.i].edges.push(new an(o,t,e)),ll[e.i].edges.push(new an(o,e,t)),o}function nn(t,e,r){var n=new en(t,null);return n.a=e,n.b=r,sl.push(n),n}function on(t,e,r,n){t.a||t.b?t.l===r?t.b=n:t.a=n:(t.a=n,t.l=e,t.r=r)}function an(t,e,r){var n=t.a,o=t.b;this.edge=t,this.site=e,this.angle=r?Math.atan2(r.y-e.y,r.x-e.x):t.l===e?Math.atan2(o.x-n.x,n.y-o.y):Math.atan2(n.x-o.x,o.y-n.y)}function sn(){this._=null}function ln(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function un(t,e){var r=e,n=e.R,o=r.U;o?o.L===r?o.L=n:o.R=n:t._=n,n.U=o,r.U=n,r.R=n.L,r.R&&(r.R.U=r),n.L=r}function cn(t,e){var r=e,n=e.L,o=r.U;o?o.L===r?o.L=n:o.R=n:t._=n,n.U=o,r.U=n,r.L=n.R,r.L&&(r.L.U=r),n.R=r}function fn(t){for(;t.L;)t=t.L;return t}function dn(t,e){var r,n,o,i=t.sort(hn).pop();for(sl=[],ll=new Array(t.length),ul=new sn,fl=new sn;;)if(o=cl,i&&(!o||i.y<o.y||i.y===o.y&&i.x<o.x))i.x===r&&i.y===n||(ll[i.i]=new Yr(i),$r(i),r=i.x,n=i.y),i=t.pop();else{if(!o)break;Hr(o.arc)}e&&(Qr(e),Wr(e));var a={cells:ll,edges:sl};return ul=fl=sl=ll=null,a}function hn(t,e){return e.y-t.y||e.x-t.x}function pn(t,e,r){return(t.x-r.x)*(e.y-t.y)-(t.x-e.x)*(r.y-t.y)}function vn(t){return t.x}function _n(t){return t.y}function mn(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function gn(t,e,r,n,o,i){if(!t(e,r,n,o,i)){var a=.5*(r+o),s=.5*(n+i),l=e.nodes;l[0]&&gn(t,l[0],r,n,a,s),l[1]&&gn(t,l[1],a,n,o,s),l[2]&&gn(t,l[2],r,s,a,i),l[3]&&gn(t,l[3],a,s,o,i)}}function yn(t,e,r,n,o,i,a){var s,l=1/0;return function t(u,c,f,d,h){if(!(c>i||f>a||d<n||h<o)){if(p=u.point){var p,v=e-u.x,_=r-u.y,m=v*v+_*_;if(m<l){var g=Math.sqrt(l=m);n=e-g,o=r-g,i=e+g,a=r+g,s=p}}for(var y=u.nodes,w=.5*(c+d),x=.5*(f+h),b=e>=w,z=r>=x,M=z<<1|b,k=M+4;M<k;++M)if(u=y[3&M])switch(3&M){case 0:t(u,c,f,w,x);break;case 1:t(u,w,f,d,x);break;case 2:t(u,c,x,w,h);break;case 3:t(u,w,x,d,h)}}}(t,n,o,i,a),s}function wn(t,e){t=ha.rgb(t),e=ha.rgb(e);var r=t.r,n=t.g,o=t.b,i=e.r-r,a=e.g-n,s=e.b-o;return function(t){return"#"+kt(Math.round(r+i*t))+kt(Math.round(n+a*t))+kt(Math.round(o+s*t))}}function xn(t,e){var r,n={},o={};for(r in t)r in e?n[r]=Mn(t[r],e[r]):o[r]=t[r];for(r in e)r in t||(o[r]=e[r]);return function(t){for(r in n)o[r]=n[r](t);return o}}function bn(t,e){return t=+t,e=+e,function(r){return t*(1-r)+e*r}}function zn(t,e){var r,n,o,i=vl.lastIndex=_l.lastIndex=0,a=-1,s=[],l=[];for(t+="",e+="";(r=vl.exec(t))&&(n=_l.exec(e));)(o=n.index)>i&&(o=e.slice(i,o),s[a]?s[a]+=o:s[++a]=o),(r=r[0])===(n=n[0])?s[a]?s[a]+=n:s[++a]=n:(s[++a]=null,l.push({i:a,x:bn(r,n)})),i=_l.lastIndex;return i<e.length&&(o=e.slice(i),s[a]?s[a]+=o:s[++a]=o),s.length<2?l[0]?(e=l[0].x,function(t){return e(t)+""}):function(){return e}:(e=l.length,function(t){for(var r,n=0;n<e;++n)s[(r=l[n]).i]=r.x(t);return s.join("")})}function Mn(t,e){for(var r,n=ha.interpolators.length;--n>=0&&!(r=ha.interpolators[n](t,e)););return r}function kn(t,e){var r,n=[],o=[],i=t.length,a=e.length,s=Math.min(t.length,e.length);for(r=0;r<s;++r)n.push(Mn(t[r],e[r]));for(;r<i;++r)o[r]=t[r];for(;r<a;++r)o[r]=e[r];return function(t){for(r=0;r<s;++r)o[r]=n[r](t);return o}}function An(t){return function(e){return e<=0?0:e>=1?1:t(e)}}function En(t){return function(e){return 1-t(1-e)}}function Nn(t){return function(e){return.5*(e<.5?t(2*e):2-t(2-2*e))}}function Sn(t){return t*t}function Cn(t){return t*t*t}function Tn(t){if(t<=0)return 0;if(t>=1)return 1;var e=t*t,r=e*t;return 4*(t<.5?r:3*(t-e)+r-.75)}function On(t){return function(e){return Math.pow(e,t)}}function Bn(t){return 1-Math.cos(t*Za)}function Fn(t){return Math.pow(2,10*(t-1))}function jn(t){return 1-Math.sqrt(1-t*t)}function Ln(t,e){var r;return arguments.length<2&&(e=.45),arguments.length?r=e/Ha*Math.asin(1/t):(t=1,r=e/4),function(n){return 1+t*Math.pow(2,-10*n)*Math.sin((n-r)*Ha/e)}}function Rn(t){return t||(t=1.70158),function(e){return e*e*((t+1)*e-t)}}function In(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}function Dn(t,e){t=ha.hcl(t),e=ha.hcl(e);var r=t.h,n=t.c,o=t.l,i=e.h-r,a=e.c-n,s=e.l-o;return isNaN(a)&&(a=0,n=isNaN(n)?e.c:n),isNaN(i)?(i=0,r=isNaN(r)?e.h:r):i>180?i-=360:i<-180&&(i+=360),function(t){return vt(r+i*t,n+a*t,o+s*t)+""}}function qn(t,e){t=ha.hsl(t),e=ha.hsl(e);var r=t.h,n=t.s,o=t.l,i=e.h-r,a=e.s-n,s=e.l-o;return isNaN(a)&&(a=0,n=isNaN(n)?e.s:n),isNaN(i)?(i=0,r=isNaN(r)?e.h:r):i>180?i-=360:i<-180&&(i+=360),function(t){return ht(r+i*t,n+a*t,o+s*t)+""}}function Pn(t,e){t=ha.lab(t),e=ha.lab(e);var r=t.l,n=t.a,o=t.b,i=e.l-r,a=e.a-n,s=e.b-o;return function(t){return mt(r+i*t,n+a*t,o+s*t)+""}}function Un(t,e){return e-=t,function(r){return Math.round(t+e*r)}}function Hn(t){var e=[t.a,t.b],r=[t.c,t.d],n=Zn(e),o=$n(e,r),i=Zn(Vn(r,e,-o))||0;e[0]*r[1]<r[0]*e[1]&&(e[0]*=-1,e[1]*=-1,n*=-1,o*=-1),this.rotate=(n?Math.atan2(e[1],e[0]):Math.atan2(-r[0],r[1]))*Ya,this.translate=[t.e,t.f],this.scale=[n,i],this.skew=i?Math.atan2(o,i)*Ya:0}function $n(t,e){return t[0]*e[0]+t[1]*e[1]}function Zn(t){var e=Math.sqrt($n(t,t));return e&&(t[0]/=e,t[1]/=e),e}function Vn(t,e,r){return t[0]+=r*e[0],t[1]+=r*e[1],t}function Yn(t){return t.length?t.pop()+",":""}function Wn(t,e,r,n){if(t[0]!==e[0]||t[1]!==e[1]){var o=r.push("translate(",null,",",null,")");n.push({i:o-4,x:bn(t[0],e[0])},{i:o-2,x:bn(t[1],e[1])})}else(e[0]||e[1])&&r.push("translate("+e+")")}function Gn(t,e,r,n){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),n.push({i:r.push(Yn(r)+"rotate(",null,")")-2,x:bn(t,e)})):e&&r.push(Yn(r)+"rotate("+e+")")}function Xn(t,e,r,n){t!==e?n.push({i:r.push(Yn(r)+"skewX(",null,")")-2,x:bn(t,e)}):e&&r.push(Yn(r)+"skewX("+e+")")}function Jn(t,e,r,n){if(t[0]!==e[0]||t[1]!==e[1]){var o=r.push(Yn(r)+"scale(",null,",",null,")");n.push({i:o-4,x:bn(t[0],e[0])},{i:o-2,x:bn(t[1],e[1])})}else 1===e[0]&&1===e[1]||r.push(Yn(r)+"scale("+e+")")}function Kn(t,e){var r=[],n=[];return t=ha.transform(t),e=ha.transform(e),Wn(t.translate,e.translate,r,n),Gn(t.rotate,e.rotate,r,n),Xn(t.skew,e.skew,r,n),Jn(t.scale,e.scale,r,n),t=e=null,function(t){for(var e,o=-1,i=n.length;++o<i;)r[(e=n[o]).i]=e.x(t);return r.join("")}}function Qn(t,e){return e=(e-=t=+t)||1/e,function(r){return(r-t)/e}}function to(t,e){return e=(e-=t=+t)||1/e,function(r){return Math.max(0,Math.min(1,(r-t)/e))}}function eo(t){for(var e=t.source,r=t.target,n=no(e,r),o=[e];e!==n;)e=e.parent,o.push(e);for(var i=o.length;r!==n;)o.splice(i,0,r),r=r.parent;return o}function ro(t){for(var e=[],r=t.parent;null!=r;)e.push(t),t=r,r=r.parent;return e.push(t),e}function no(t,e){if(t===e)return t;for(var r=ro(t),n=ro(e),o=r.pop(),i=n.pop(),a=null;o===i;)a=o,o=r.pop(),i=n.pop();return a}function oo(t){t.fixed|=2}function io(t){t.fixed&=-7}function ao(t){t.fixed|=4,t.px=t.x,t.py=t.y}function so(t){t.fixed&=-5}function lo(t,e,r){var n=0,o=0;if(t.charge=0,!t.leaf)for(var i,a=t.nodes,s=a.length,l=-1;++l<s;)i=a[l],null!=i&&(lo(i,e,r),t.charge+=i.charge,n+=i.charge*i.cx,o+=i.charge*i.cy);if(t.point){t.leaf||(t.point.x+=Math.random()-.5,t.point.y+=Math.random()-.5);var u=e*r[t.point.index];t.charge+=t.pointCharge=u,n+=u*t.point.x,o+=u*t.point.y}t.cx=n/t.charge,t.cy=o/t.charge}function uo(t,e){return ha.rebind(t,e,"sort","children","value"),t.nodes=t,t.links=_o,t}function co(t,e){for(var r=[t];null!=(t=r.pop());)if(e(t),(o=t.children)&&(n=o.length))for(var n,o;--n>=0;)r.push(o[n])}function fo(t,e){for(var r=[t],n=[];null!=(t=r.pop());)if(n.push(t),(i=t.children)&&(o=i.length))for(var o,i,a=-1;++a<o;)r.push(i[a]);for(;null!=(t=n.pop());)e(t)}function ho(t){return t.children}function po(t){return t.value}function vo(t,e){return e.value-t.value}function _o(t){return ha.merge(t.map(function(t){return(t.children||[]).map(function(e){return{source:t,target:e}})}))}function mo(t){return t.x}function go(t){return t.y}function yo(t,e,r){t.y0=e,t.y=r}function wo(t){return ha.range(t.length)}function xo(t){for(var e=-1,r=t[0].length,n=[];++e<r;)n[e]=0;return n}function bo(t){for(var e,r=1,n=0,o=t[0][1],i=t.length;r<i;++r)(e=t[r][1])>o&&(n=r,o=e);return n}function zo(t){return t.reduce(Mo,0)}function Mo(t,e){return t+e[1]}function ko(t,e){return Ao(t,Math.ceil(Math.log(e.length)/Math.LN2+1))}function Ao(t,e){for(var r=-1,n=+t[0],o=(t[1]-n)/e,i=[];++r<=e;)i[r]=o*r+n;return i}function Eo(t){return[ha.min(t),ha.max(t)]}function No(t,e){return t.value-e.value}function So(t,e){var r=t._pack_next;t._pack_next=e,e._pack_prev=t,e._pack_next=r,r._pack_prev=e}function Co(t,e){t._pack_next=e,e._pack_prev=t}function To(t,e){var r=e.x-t.x,n=e.y-t.y,o=t.r+e.r;return.999*o*o>r*r+n*n}function Oo(t){function e(t){c=Math.min(t.x-t.r,c),f=Math.max(t.x+t.r,f),d=Math.min(t.y-t.r,d),h=Math.max(t.y+t.r,h)}if((r=t.children)&&(u=r.length)){var r,n,o,i,a,s,l,u,c=1/0,f=-(1/0),d=1/0,h=-(1/0);if(r.forEach(Bo),n=r[0],n.x=-n.r,n.y=0,e(n),u>1&&(o=r[1],o.x=o.r,o.y=0,e(o),u>2))for(i=r[2],Lo(n,o,i),e(i),So(n,i),n._pack_prev=i,So(i,o),o=n._pack_next,a=3;a<u;a++){Lo(n,o,i=r[a]);var p=0,v=1,_=1;for(s=o._pack_next;s!==o;s=s._pack_next,v++)if(To(s,i)){p=1;break}if(1==p)for(l=n._pack_prev;l!==s._pack_prev&&!To(l,i);l=l._pack_prev,_++);p?(v<_||v==_&&o.r<n.r?Co(n,o=s):Co(n=l,o),a--):(So(n,i),o=i,e(i))}var m=(c+f)/2,g=(d+h)/2,y=0;for(a=0;a<u;a++)i=r[a],i.x-=m,i.y-=g,y=Math.max(y,i.r+Math.sqrt(i.x*i.x+i.y*i.y));t.r=y,r.forEach(Fo)}}function Bo(t){t._pack_next=t._pack_prev=t}function Fo(t){delete t._pack_next,delete t._pack_prev}function jo(t,e,r,n){var o=t.children;if(t.x=e+=n*t.x,t.y=r+=n*t.y,t.r*=n,o)for(var i=-1,a=o.length;++i<a;)jo(o[i],e,r,n)}function Lo(t,e,r){var n=t.r+r.r,o=e.x-t.x,i=e.y-t.y;if(n&&(o||i)){var a=e.r+r.r,s=o*o+i*i;a*=a,n*=n;var l=.5+(n-a)/(2*s),u=Math.sqrt(Math.max(0,2*a*(n+s)-(n-=s)*n-a*a))/(2*s);r.x=t.x+l*o+u*i,r.y=t.y+l*i-u*o}else r.x=t.x+n,r.y=t.y}function Ro(t,e){return t.parent==e.parent?1:2}function Io(t){var e=t.children;return e.length?e[0]:t.t}function Do(t){var e,r=t.children;return(e=r.length)?r[e-1]:t.t}function qo(t,e,r){var n=r/(e.i-t.i);e.c-=n,e.s+=r,t.c+=n,e.z+=r,e.m+=r}function Po(t){for(var e,r=0,n=0,o=t.children,i=o.length;--i>=0;)e=o[i],e.z+=r,e.m+=r,r+=e.s+(n+=e.c)}function Uo(t,e,r){return t.a.parent===e.parent?t.a:r}function Ho(t){return 1+ha.max(t,function(t){return t.y})}function $o(t){return t.reduce(function(t,e){return t+e.x},0)/t.length}function Zo(t){var e=t.children;return e&&e.length?Zo(e[0]):t}function Vo(t){var e,r=t.children;return r&&(e=r.length)?Vo(r[e-1]):t}function Yo(t){return{x:t.x,y:t.y,dx:t.dx,dy:t.dy}}function Wo(t,e){var r=t.x+e[3],n=t.y+e[0],o=t.dx-e[1]-e[3],i=t.dy-e[0]-e[2];return o<0&&(r+=o/2,o=0),i<0&&(n+=i/2,i=0),{x:r,y:n,dx:o,dy:i}}function Go(t){var e=t[0],r=t[t.length-1];return e<r?[e,r]:[r,e]}function Xo(t){return t.rangeExtent?t.rangeExtent():Go(t.range())}function Jo(t,e,r,n){var o=r(t[0],t[1]),i=n(e[0],e[1]);return function(t){return i(o(t))}}function Ko(t,e){var r,n=0,o=t.length-1,i=t[n],a=t[o];return a<i&&(r=n,n=o,o=r,r=i,i=a,a=r),t[n]=e.floor(i),t[o]=e.ceil(a),t}function Qo(t){return t?{floor:function(e){return Math.floor(e/t)*t},ceil:function(e){return Math.ceil(e/t)*t}}:El}function ti(t,e,r,n){var o=[],i=[],a=0,s=Math.min(t.length,e.length)-1;for(t[s]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<=s;)o.push(r(t[a-1],t[a])),i.push(n(e[a-1],e[a]));return function(e){var r=ha.bisect(t,e,1,s)-1;return i[r](o[r](e))}}function ei(t,e,r,n){function o(){var o=Math.min(t.length,e.length)>2?ti:Jo,l=n?to:Qn;return a=o(t,e,l,r),s=o(e,t,l,Mn),i}function i(t){return a(t)}var a,s;return i.invert=function(t){return s(t)},i.domain=function(e){return arguments.length?(t=e.map(Number),o()):t},i.range=function(t){return arguments.length?(e=t,o()):e},i.rangeRound=function(t){return i.range(t).interpolate(Un)},i.clamp=function(t){return arguments.length?(n=t,o()):n},i.interpolate=function(t){return arguments.length?(r=t,o()):r},i.ticks=function(e){return ii(t,e)},i.tickFormat=function(e,r){return ai(t,e,r)},i.nice=function(e){return ni(t,e),o()},i.copy=function(){return ei(t,e,r,n)},o()}function ri(t,e){return ha.rebind(t,e,"range","rangeRound","interpolate","clamp")}function ni(t,e){return Ko(t,Qo(oi(t,e)[2])),Ko(t,Qo(oi(t,e)[2])),t}function oi(t,e){null==e&&(e=10);var r=Go(t),n=r[1]-r[0],o=Math.pow(10,Math.floor(Math.log(n/e)/Math.LN10)),i=e/n*o;return i<=.15?o*=10:i<=.35?o*=5:i<=.75&&(o*=2),r[0]=Math.ceil(r[0]/o)*o,
r[1]=Math.floor(r[1]/o)*o+.5*o,r[2]=o,r}function ii(t,e){return ha.range.apply(ha,oi(t,e))}function ai(t,e,r){var n=oi(t,e);if(r){var o=vs.exec(r);if(o.shift(),"s"===o[8]){var i=ha.formatPrefix(Math.max(za(n[0]),za(n[1])));return o[7]||(o[7]="."+si(i.scale(n[2]))),o[8]="f",r=ha.format(o.join("")),function(t){return r(i.scale(t))+i.symbol}}o[7]||(o[7]="."+li(o[8],n)),r=o.join("")}else r=",."+si(n[2])+"f";return ha.format(r)}function si(t){return-Math.floor(Math.log(t)/Math.LN10+.01)}function li(t,e){var r=si(e[2]);return t in Nl?Math.abs(r-si(Math.max(za(e[0]),za(e[1]))))+ +("e"!==t):r-2*("%"===t)}function ui(t,e,r,n){function o(t){return(r?Math.log(t<0?0:t):-Math.log(t>0?0:-t))/Math.log(e)}function i(t){return r?Math.pow(e,t):-Math.pow(e,-t)}function a(e){return t(o(e))}return a.invert=function(e){return i(t.invert(e))},a.domain=function(e){return arguments.length?(r=e[0]>=0,t.domain((n=e.map(Number)).map(o)),a):n},a.base=function(r){return arguments.length?(e=+r,t.domain(n.map(o)),a):e},a.nice=function(){var e=Ko(n.map(o),r?Math:Cl);return t.domain(e),n=e.map(i),a},a.ticks=function(){var t=Go(n),a=[],s=t[0],l=t[1],u=Math.floor(o(s)),c=Math.ceil(o(l)),f=e%1?2:e;if(isFinite(c-u)){if(r){for(;u<c;u++)for(var d=1;d<f;d++)a.push(i(u)*d);a.push(i(u))}else for(a.push(i(u));u++<c;)for(var d=f-1;d>0;d--)a.push(i(u)*d);for(u=0;a[u]<s;u++);for(c=a.length;a[c-1]>l;c--);a=a.slice(u,c)}return a},a.tickFormat=function(t,r){if(!arguments.length)return Sl;arguments.length<2?r=Sl:"function"!=typeof r&&(r=ha.format(r));var n=Math.max(1,e*t/a.ticks().length);return function(t){var a=t/i(Math.round(o(t)));return a*e<e-.5&&(a*=e),a<=n?r(t):""}},a.copy=function(){return ui(t.copy(),e,r,n)},ri(a,t)}function ci(t,e,r){function n(e){return t(o(e))}var o=fi(e),i=fi(1/e);return n.invert=function(e){return i(t.invert(e))},n.domain=function(e){return arguments.length?(t.domain((r=e.map(Number)).map(o)),n):r},n.ticks=function(t){return ii(r,t)},n.tickFormat=function(t,e){return ai(r,t,e)},n.nice=function(t){return n.domain(ni(r,t))},n.exponent=function(a){return arguments.length?(o=fi(e=a),i=fi(1/e),t.domain(r.map(o)),n):e},n.copy=function(){return ci(t.copy(),e,r)},ri(n,t)}function fi(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function di(t,e){function r(r){return i[((o.get(r)||("range"===e.t?o.set(r,t.push(r)):NaN))-1)%i.length]}function n(e,r){return ha.range(t.length).map(function(t){return e+r*t})}var o,i,a;return r.domain=function(n){if(!arguments.length)return t;t=[],o=new p;for(var i,a=-1,s=n.length;++a<s;)o.has(i=n[a])||o.set(i,t.push(i));return r[e.t].apply(r,e.a)},r.range=function(t){return arguments.length?(i=t,a=0,e={t:"range",a:arguments},r):i},r.rangePoints=function(o,s){arguments.length<2&&(s=0);var l=o[0],u=o[1],c=t.length<2?(l=(l+u)/2,0):(u-l)/(t.length-1+s);return i=n(l+c*s/2,c),a=0,e={t:"rangePoints",a:arguments},r},r.rangeRoundPoints=function(o,s){arguments.length<2&&(s=0);var l=o[0],u=o[1],c=t.length<2?(l=u=Math.round((l+u)/2),0):(u-l)/(t.length-1+s)|0;return i=n(l+Math.round(c*s/2+(u-l-(t.length-1+s)*c)/2),c),a=0,e={t:"rangeRoundPoints",a:arguments},r},r.rangeBands=function(o,s,l){arguments.length<2&&(s=0),arguments.length<3&&(l=s);var u=o[1]<o[0],c=o[u-0],f=o[1-u],d=(f-c)/(t.length-s+2*l);return i=n(c+d*l,d),u&&i.reverse(),a=d*(1-s),e={t:"rangeBands",a:arguments},r},r.rangeRoundBands=function(o,s,l){arguments.length<2&&(s=0),arguments.length<3&&(l=s);var u=o[1]<o[0],c=o[u-0],f=o[1-u],d=Math.floor((f-c)/(t.length-s+2*l));return i=n(c+Math.round((f-c-(t.length-s)*d)/2),d),u&&i.reverse(),a=Math.round(d*(1-s)),e={t:"rangeRoundBands",a:arguments},r},r.rangeBand=function(){return a},r.rangeExtent=function(){return Go(e.a[0])},r.copy=function(){return di(t,e)},r.domain(t)}function hi(t,e){function r(){var r=0,i=e.length;for(o=[];++r<i;)o[r-1]=ha.quantile(t,r/i);return n}function n(t){if(!isNaN(t=+t))return e[ha.bisect(o,t)]}var o;return n.domain=function(e){return arguments.length?(t=e.map(l).filter(u).sort(s),r()):t},n.range=function(t){return arguments.length?(e=t,r()):e},n.quantiles=function(){return o},n.invertExtent=function(r){return r=e.indexOf(r),r<0?[NaN,NaN]:[r>0?o[r-1]:t[0],r<o.length?o[r]:t[t.length-1]]},n.copy=function(){return hi(t,e)},r()}function pi(t,e,r){function n(e){return r[Math.max(0,Math.min(a,Math.floor(i*(e-t))))]}function o(){return i=r.length/(e-t),a=r.length-1,n}var i,a;return n.domain=function(r){return arguments.length?(t=+r[0],e=+r[r.length-1],o()):[t,e]},n.range=function(t){return arguments.length?(r=t,o()):r},n.invertExtent=function(e){return e=r.indexOf(e),e=e<0?NaN:e/i+t,[e,e+1/i]},n.copy=function(){return pi(t,e,r)},o()}function vi(t,e){function r(r){if(r<=r)return e[ha.bisect(t,r)]}return r.domain=function(e){return arguments.length?(t=e,r):t},r.range=function(t){return arguments.length?(e=t,r):e},r.invertExtent=function(r){return r=e.indexOf(r),[t[r-1],t[r]]},r.copy=function(){return vi(t,e)},r}function _i(t){function e(t){return+t}return e.invert=e,e.domain=e.range=function(r){return arguments.length?(t=r.map(e),e):t},e.ticks=function(e){return ii(t,e)},e.tickFormat=function(e,r){return ai(t,e,r)},e.copy=function(){return _i(t)},e}function mi(){return 0}function gi(t){return t.innerRadius}function yi(t){return t.outerRadius}function wi(t){return t.startAngle}function xi(t){return t.endAngle}function bi(t){return t&&t.padAngle}function zi(t,e,r,n){return(t-r)*e-(e-n)*t>0?0:1}function Mi(t,e,r,n,o){var i=t[0]-e[0],a=t[1]-e[1],s=(o?n:-n)/Math.sqrt(i*i+a*a),l=s*a,u=-s*i,c=t[0]+l,f=t[1]+u,d=e[0]+l,h=e[1]+u,p=(c+d)/2,v=(f+h)/2,_=d-c,m=h-f,g=_*_+m*m,y=r-n,w=c*h-d*f,x=(m<0?-1:1)*Math.sqrt(Math.max(0,y*y*g-w*w)),b=(w*m-_*x)/g,z=(-w*_-m*x)/g,M=(w*m+_*x)/g,k=(-w*_+m*x)/g,A=b-p,E=z-v,N=M-p,S=k-v;return A*A+E*E>N*N+S*S&&(b=M,z=k),[[b-l,z-u],[b*r/y,z*r/y]]}function ki(t){function e(e){function a(){u.push("M",i(t(c),s))}for(var l,u=[],c=[],f=-1,d=e.length,h=Tt(r),p=Tt(n);++f<d;)o.call(this,l=e[f],f)?c.push([+h.call(this,l,f),+p.call(this,l,f)]):c.length&&(a(),c=[]);return c.length&&a(),u.length?u.join(""):null}var r=Br,n=Fr,o=Fe,i=Ai,a=i.key,s=.7;return e.x=function(t){return arguments.length?(r=t,e):r},e.y=function(t){return arguments.length?(n=t,e):n},e.defined=function(t){return arguments.length?(o=t,e):o},e.interpolate=function(t){return arguments.length?(a="function"==typeof t?i=t:(i=Ll.get(t)||Ai).key,e):a},e.tension=function(t){return arguments.length?(s=t,e):s},e}function Ai(t){return t.length>1?t.join("L"):t+"Z"}function Ei(t){return t.join("L")+"Z"}function Ni(t){for(var e=0,r=t.length,n=t[0],o=[n[0],",",n[1]];++e<r;)o.push("H",(n[0]+(n=t[e])[0])/2,"V",n[1]);return r>1&&o.push("H",n[0]),o.join("")}function Si(t){for(var e=0,r=t.length,n=t[0],o=[n[0],",",n[1]];++e<r;)o.push("V",(n=t[e])[1],"H",n[0]);return o.join("")}function Ci(t){for(var e=0,r=t.length,n=t[0],o=[n[0],",",n[1]];++e<r;)o.push("H",(n=t[e])[0],"V",n[1]);return o.join("")}function Ti(t,e){return t.length<4?Ai(t):t[1]+Fi(t.slice(1,-1),ji(t,e))}function Oi(t,e){return t.length<3?Ei(t):t[0]+Fi((t.push(t[0]),t),ji([t[t.length-2]].concat(t,[t[1]]),e))}function Bi(t,e){return t.length<3?Ai(t):t[0]+Fi(t,ji(t,e))}function Fi(t,e){if(e.length<1||t.length!=e.length&&t.length!=e.length+2)return Ai(t);var r=t.length!=e.length,n="",o=t[0],i=t[1],a=e[0],s=a,l=1;if(r&&(n+="Q"+(i[0]-2*a[0]/3)+","+(i[1]-2*a[1]/3)+","+i[0]+","+i[1],o=t[1],l=2),e.length>1){s=e[1],i=t[l],l++,n+="C"+(o[0]+a[0])+","+(o[1]+a[1])+","+(i[0]-s[0])+","+(i[1]-s[1])+","+i[0]+","+i[1];for(var u=2;u<e.length;u++,l++)i=t[l],s=e[u],n+="S"+(i[0]-s[0])+","+(i[1]-s[1])+","+i[0]+","+i[1]}if(r){var c=t[l];n+="Q"+(i[0]+2*s[0]/3)+","+(i[1]+2*s[1]/3)+","+c[0]+","+c[1]}return n}function ji(t,e){for(var r,n=[],o=(1-e)/2,i=t[0],a=t[1],s=1,l=t.length;++s<l;)r=i,i=a,a=t[s],n.push([o*(a[0]-r[0]),o*(a[1]-r[1])]);return n}function Li(t){if(t.length<3)return Ai(t);var e=1,r=t.length,n=t[0],o=n[0],i=n[1],a=[o,o,o,(n=t[1])[0]],s=[i,i,i,n[1]],l=[o,",",i,"L",qi(Dl,a),",",qi(Dl,s)];for(t.push(t[r-1]);++e<=r;)n=t[e],a.shift(),a.push(n[0]),s.shift(),s.push(n[1]),Pi(l,a,s);return t.pop(),l.push("L",n),l.join("")}function Ri(t){if(t.length<4)return Ai(t);for(var e,r=[],n=-1,o=t.length,i=[0],a=[0];++n<3;)e=t[n],i.push(e[0]),a.push(e[1]);for(r.push(qi(Dl,i)+","+qi(Dl,a)),--n;++n<o;)e=t[n],i.shift(),i.push(e[0]),a.shift(),a.push(e[1]),Pi(r,i,a);return r.join("")}function Ii(t){for(var e,r,n=-1,o=t.length,i=o+4,a=[],s=[];++n<4;)r=t[n%o],a.push(r[0]),s.push(r[1]);for(e=[qi(Dl,a),",",qi(Dl,s)],--n;++n<i;)r=t[n%o],a.shift(),a.push(r[0]),s.shift(),s.push(r[1]),Pi(e,a,s);return e.join("")}function Di(t,e){var r=t.length-1;if(r)for(var n,o,i=t[0][0],a=t[0][1],s=t[r][0]-i,l=t[r][1]-a,u=-1;++u<=r;)n=t[u],o=u/r,n[0]=e*n[0]+(1-e)*(i+o*s),n[1]=e*n[1]+(1-e)*(a+o*l);return Li(t)}function qi(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function Pi(t,e,r){t.push("C",qi(Rl,e),",",qi(Rl,r),",",qi(Il,e),",",qi(Il,r),",",qi(Dl,e),",",qi(Dl,r))}function Ui(t,e){return(e[1]-t[1])/(e[0]-t[0])}function Hi(t){for(var e=0,r=t.length-1,n=[],o=t[0],i=t[1],a=n[0]=Ui(o,i);++e<r;)n[e]=(a+(a=Ui(o=i,i=t[e+1])))/2;return n[e]=a,n}function $i(t){for(var e,r,n,o,i=[],a=Hi(t),s=-1,l=t.length-1;++s<l;)e=Ui(t[s],t[s+1]),za(e)<qa?a[s]=a[s+1]=0:(r=a[s]/e,n=a[s+1]/e,o=r*r+n*n,o>9&&(o=3*e/Math.sqrt(o),a[s]=o*r,a[s+1]=o*n));for(s=-1;++s<=l;)o=(t[Math.min(l,s+1)][0]-t[Math.max(0,s-1)][0])/(6*(1+a[s]*a[s])),i.push([o||0,a[s]*o||0]);return i}function Zi(t){return t.length<3?Ai(t):t[0]+Fi(t,$i(t))}function Vi(t){for(var e,r,n,o=-1,i=t.length;++o<i;)e=t[o],r=e[0],n=e[1]-Za,e[0]=r*Math.cos(n),e[1]=r*Math.sin(n);return t}function Yi(t){function e(e){function l(){v.push("M",s(t(m),f),c,u(t(_.reverse()),f),"Z")}for(var d,h,p,v=[],_=[],m=[],g=-1,y=e.length,w=Tt(r),x=Tt(o),b=r===n?function(){return h}:Tt(n),z=o===i?function(){return p}:Tt(i);++g<y;)a.call(this,d=e[g],g)?(_.push([h=+w.call(this,d,g),p=+x.call(this,d,g)]),m.push([+b.call(this,d,g),+z.call(this,d,g)])):_.length&&(l(),_=[],m=[]);return _.length&&l(),v.length?v.join(""):null}var r=Br,n=Br,o=0,i=Fr,a=Fe,s=Ai,l=s.key,u=s,c="L",f=.7;return e.x=function(t){return arguments.length?(r=n=t,e):n},e.x0=function(t){return arguments.length?(r=t,e):r},e.x1=function(t){return arguments.length?(n=t,e):n},e.y=function(t){return arguments.length?(o=i=t,e):i},e.y0=function(t){return arguments.length?(o=t,e):o},e.y1=function(t){return arguments.length?(i=t,e):i},e.defined=function(t){return arguments.length?(a=t,e):a},e.interpolate=function(t){return arguments.length?(l="function"==typeof t?s=t:(s=Ll.get(t)||Ai).key,u=s.reverse||s,c=s.closed?"M":"L",e):l},e.tension=function(t){return arguments.length?(f=t,e):f},e}function Wi(t){return t.radius}function Gi(t){return[t.x,t.y]}function Xi(t){return function(){var e=t.apply(this,arguments),r=e[0],n=e[1]-Za;return[r*Math.cos(n),r*Math.sin(n)]}}function Ji(){return 64}function Ki(){return"circle"}function Qi(t){var e=Math.sqrt(t/Ua);return"M0,"+e+"A"+e+","+e+" 0 1,1 0,"+-e+"A"+e+","+e+" 0 1,1 0,"+e+"Z"}function ta(t){return function(){var e,r,n;(e=this[t])&&(n=e[r=e.active])&&(n.timer.c=null,n.timer.t=NaN,--e.count?delete e[r]:delete this[t],e.active+=.5,n.event&&n.event.interrupt.call(this,this.__data__,n.index))}}function ea(t,e,r){return Na(t,Vl),t.namespace=e,t.id=r,t}function ra(t,e,r,n){var o=t.id,i=t.namespace;return W(t,"function"==typeof r?function(t,a,s){t[i][o].tween.set(e,n(r.call(t,t.__data__,a,s)))}:(r=n(r),function(t){t[i][o].tween.set(e,r)}))}function na(t){return null==t&&(t=""),function(){this.textContent=t}}function oa(t){return null==t?"__transition__":"__transition_"+t+"__"}function ia(t,e,r,n,o){function i(t){var e=v.delay;return u.t=e+l,e<=t?a(t-e):void(u.c=a)}function a(r){var o=h.active,i=h[o];i&&(i.timer.c=null,i.timer.t=NaN,--h.count,delete h[o],i.event&&i.event.interrupt.call(t,t.__data__,i.index));for(var a in h)if(+a<n){var p=h[a];p.timer.c=null,p.timer.t=NaN,--h.count,delete h[a]}u.c=s,Lt(function(){return u.c&&s(r||1)&&(u.c=null,u.t=NaN),1},0,l),h.active=n,v.event&&v.event.start.call(t,t.__data__,e),d=[],v.tween.forEach(function(r,n){(n=n.call(t,t.__data__,e))&&d.push(n)}),f=v.ease,c=v.duration}function s(o){for(var i=o/c,a=f(i),s=d.length;s>0;)d[--s].call(t,a);if(i>=1)return v.event&&v.event.end.call(t,t.__data__,e),--h.count?delete h[n]:delete t[r],1}var l,u,c,f,d,h=t[r]||(t[r]={active:0,count:0}),v=h[n];v||(l=o.time,u=Lt(i,0,l),v=h[n]={tween:new p,time:l,timer:u,delay:o.delay,duration:o.duration,ease:o.ease,index:e},o=null,++h.count)}function aa(t,e,r){t.attr("transform",function(t){var n=e(t);return"translate("+(isFinite(n)?n:r(t))+",0)"})}function sa(t,e,r){t.attr("transform",function(t){var n=e(t);return"translate(0,"+(isFinite(n)?n:r(t))+")"})}function la(t){return t.toISOString()}function ua(t,e,r){function n(e){return t(e)}function o(t,r){var n=t[1]-t[0],o=n/r,i=ha.bisect(eu,o);return i==eu.length?[e.year,oi(t.map(function(t){return t/31536e6}),r)[2]]:i?e[o/eu[i-1]<eu[i]/o?i-1:i]:[ou,oi(t,r)[2]]}return n.invert=function(e){return ca(t.invert(e))},n.domain=function(e){return arguments.length?(t.domain(e),n):t.domain().map(ca)},n.nice=function(t,e){function r(r){return!isNaN(r)&&!t.range(r,ca(+r+1),e).length}var i=n.domain(),a=Go(i),s=null==t?o(a,10):"number"==typeof t&&o(a,t);return s&&(t=s[0],e=s[1]),n.domain(Ko(i,e>1?{floor:function(e){for(;r(e=t.floor(e));)e=ca(e-1);return e},ceil:function(e){for(;r(e=t.ceil(e));)e=ca(+e+1);return e}}:t))},n.ticks=function(t,e){var r=Go(n.domain()),i=null==t?o(r,10):"number"==typeof t?o(r,t):!t.range&&[{range:t},e];return i&&(t=i[0],e=i[1]),t.range(r[0],ca(+r[1]+1),e<1?1:e)},n.tickFormat=function(){return r},n.copy=function(){return ua(t.copy(),e,r)},ri(n,t)}function ca(t){return new Date(t)}function fa(t){return JSON.parse(t.responseText)}function da(t){var e=_a.createRange();return e.selectNode(_a.body),e.createContextualFragment(t.responseText)}var ha={version:"3.5.17"},pa=[].slice,va=function(t){return pa.call(t)},_a=this.document;if(_a)try{va(_a.documentElement.childNodes)[0].nodeType}catch(t){va=function(t){for(var e=t.length,r=new Array(e);e--;)r[e]=t[e];return r}}if(Date.now||(Date.now=function(){return+new Date}),_a)try{_a.createElement("DIV").style.setProperty("opacity",0,"")}catch(t){var ma=this.Element.prototype,ga=ma.setAttribute,ya=ma.setAttributeNS,wa=this.CSSStyleDeclaration.prototype,xa=wa.setProperty;ma.setAttribute=function(t,e){ga.call(this,t,e+"")},ma.setAttributeNS=function(t,e,r){ya.call(this,t,e,r+"")},wa.setProperty=function(t,e,r){xa.call(this,t,e+"",r)}}ha.ascending=s,ha.descending=function(t,e){return e<t?-1:e>t?1:e>=t?0:NaN},ha.min=function(t,e){var r,n,o=-1,i=t.length;if(1===arguments.length){for(;++o<i;)if(null!=(n=t[o])&&n>=n){r=n;break}for(;++o<i;)null!=(n=t[o])&&r>n&&(r=n)}else{for(;++o<i;)if(null!=(n=e.call(t,t[o],o))&&n>=n){r=n;break}for(;++o<i;)null!=(n=e.call(t,t[o],o))&&r>n&&(r=n)}return r},ha.max=function(t,e){var r,n,o=-1,i=t.length;if(1===arguments.length){for(;++o<i;)if(null!=(n=t[o])&&n>=n){r=n;break}for(;++o<i;)null!=(n=t[o])&&n>r&&(r=n)}else{for(;++o<i;)if(null!=(n=e.call(t,t[o],o))&&n>=n){r=n;break}for(;++o<i;)null!=(n=e.call(t,t[o],o))&&n>r&&(r=n)}return r},ha.extent=function(t,e){var r,n,o,i=-1,a=t.length;if(1===arguments.length){for(;++i<a;)if(null!=(n=t[i])&&n>=n){r=o=n;break}for(;++i<a;)null!=(n=t[i])&&(r>n&&(r=n),o<n&&(o=n))}else{for(;++i<a;)if(null!=(n=e.call(t,t[i],i))&&n>=n){r=o=n;break}for(;++i<a;)null!=(n=e.call(t,t[i],i))&&(r>n&&(r=n),o<n&&(o=n))}return[r,o]},ha.sum=function(t,e){var r,n=0,o=t.length,i=-1;if(1===arguments.length)for(;++i<o;)u(r=+t[i])&&(n+=r);else for(;++i<o;)u(r=+e.call(t,t[i],i))&&(n+=r);return n},ha.mean=function(t,e){var r,n=0,o=t.length,i=-1,a=o;if(1===arguments.length)for(;++i<o;)u(r=l(t[i]))?n+=r:--a;else for(;++i<o;)u(r=l(e.call(t,t[i],i)))?n+=r:--a;if(a)return n/a},ha.quantile=function(t,e){var r=(t.length-1)*e+1,n=Math.floor(r),o=+t[n-1],i=r-n;return i?o+i*(t[n]-o):o},ha.median=function(t,e){var r,n=[],o=t.length,i=-1;if(1===arguments.length)for(;++i<o;)u(r=l(t[i]))&&n.push(r);else for(;++i<o;)u(r=l(e.call(t,t[i],i)))&&n.push(r);if(n.length)return ha.quantile(n.sort(s),.5)},ha.variance=function(t,e){var r,n,o=t.length,i=0,a=0,s=-1,c=0;if(1===arguments.length)for(;++s<o;)u(r=l(t[s]))&&(n=r-i,i+=n/++c,a+=n*(r-i));else for(;++s<o;)u(r=l(e.call(t,t[s],s)))&&(n=r-i,i+=n/++c,a+=n*(r-i));if(c>1)return a/(c-1)},ha.deviation=function(){var t=ha.variance.apply(this,arguments);return t?Math.sqrt(t):t};var ba=c(s);ha.bisectLeft=ba.left,ha.bisect=ha.bisectRight=ba.right,ha.bisector=function(t){return c(1===t.length?function(e,r){return s(t(e),r)}:t)},ha.shuffle=function(t,e,r){(i=arguments.length)<3&&(r=t.length,i<2&&(e=0));for(var n,o,i=r-e;i;)o=Math.random()*i--|0,n=t[i+e],t[i+e]=t[o+e],t[o+e]=n;return t},ha.permute=function(t,e){for(var r=e.length,n=new Array(r);r--;)n[r]=t[e[r]];return n},ha.pairs=function(t){for(var e,r=0,n=t.length-1,o=t[0],i=new Array(n<0?0:n);r<n;)i[r]=[e=o,o=t[++r]];return i},ha.transpose=function(t){if(!(o=t.length))return[];for(var e=-1,r=ha.min(t,f),n=new Array(r);++e<r;)for(var o,i=-1,a=n[e]=new Array(o);++i<o;)a[i]=t[i][e];return n},ha.zip=function(){return ha.transpose(arguments)},ha.keys=function(t){var e=[];for(var r in t)e.push(r);return e},ha.values=function(t){var e=[];for(var r in t)e.push(t[r]);return e},ha.entries=function(t){var e=[];for(var r in t)e.push({key:r,value:t[r]});return e},ha.merge=function(t){for(var e,r,n,o=t.length,i=-1,a=0;++i<o;)a+=t[i].length;for(r=new Array(a);--o>=0;)for(n=t[o],e=n.length;--e>=0;)r[--a]=n[e];return r};var za=Math.abs;ha.range=function(t,e,r){if(arguments.length<3&&(r=1,arguments.length<2&&(e=t,t=0)),(e-t)/r===1/0)throw new Error("infinite range");var n,o=[],i=d(za(r)),a=-1;if(t*=i,e*=i,r*=i,r<0)for(;(n=t+r*++a)>e;)o.push(n/i);else for(;(n=t+r*++a)<e;)o.push(n/i);return o},ha.map=function(t,e){var r=new p;if(t instanceof p)t.forEach(function(t,e){r.set(t,e)});else if(Array.isArray(t)){var n,o=-1,i=t.length;if(1===arguments.length)for(;++o<i;)r.set(o,t[o]);else for(;++o<i;)r.set(e.call(t,n=t[o],o),n)}else for(var a in t)r.set(a,t[a]);return r};var Ma="__proto__",ka="\0";h(p,{has:m,get:function(t){return this._[v(t)]},set:function(t,e){return this._[v(t)]=e},remove:g,keys:y,values:function(){var t=[];for(var e in this._)t.push(this._[e]);return t},entries:function(){var t=[];for(var e in this._)t.push({key:_(e),value:this._[e]});return t},size:w,empty:x,forEach:function(t){for(var e in this._)t.call(this,_(e),this._[e])}}),ha.nest=function(){function t(e,a,s){if(s>=i.length)return n?n.call(o,a):r?a.sort(r):a;for(var l,u,c,f,d=-1,h=a.length,v=i[s++],_=new p;++d<h;)(f=_.get(l=v(u=a[d])))?f.push(u):_.set(l,[u]);return e?(u=e(),c=function(r,n){u.set(r,t(e,n,s))}):(u={},c=function(r,n){u[r]=t(e,n,s)}),_.forEach(c),u}function e(t,r){if(r>=i.length)return t;var n=[],o=a[r++];return t.forEach(function(t,o){n.push({key:t,values:e(o,r)})}),o?n.sort(function(t,e){return o(t.key,e.key)}):n}var r,n,o={},i=[],a=[];return o.map=function(e,r){return t(r,e,0)},o.entries=function(r){return e(t(ha.map,r,0),0)},o.key=function(t){return i.push(t),o},o.sortKeys=function(t){return a[i.length-1]=t,o},o.sortValues=function(t){return r=t,o},o.rollup=function(t){return n=t,o},o},ha.set=function(t){var e=new b;if(t)for(var r=0,n=t.length;r<n;++r)e.add(t[r]);return e},h(b,{has:m,add:function(t){return this._[v(t+="")]=!0,t},remove:g,values:y,size:w,empty:x,forEach:function(t){for(var e in this._)t.call(this,_(e))}}),ha.behavior={},ha.rebind=function(t,e){for(var r,n=1,o=arguments.length;++n<o;)t[r=arguments[n]]=M(t,e,e[r]);return t};var Aa=["webkit","ms","moz","Moz","o","O"];ha.dispatch=function(){for(var t=new E,e=-1,r=arguments.length;++e<r;)t[arguments[e]]=N(t);return t},E.prototype.on=function(t,e){var r=t.indexOf("."),n="";if(r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),t)return arguments.length<2?this[t].on(n):this[t].on(n,e);if(2===arguments.length){if(null==e)for(t in this)this.hasOwnProperty(t)&&this[t].on(n,null);return this}},ha.event=null,ha.requote=function(t){return t.replace(Ea,"\\$&")};var Ea=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,Na={}.__proto__?function(t,e){t.__proto__=e}:function(t,e){for(var r in e)t[r]=e[r]},Sa=function(t,e){return e.querySelector(t)},Ca=function(t,e){return e.querySelectorAll(t)},Ta=function(t,e){var r=t.matches||t[k(t,"matchesSelector")];return(Ta=function(t,e){return r.call(t,e)})(t,e)};"function"==typeof Sizzle&&(Sa=function(t,e){return Sizzle(t,e)[0]||null},Ca=Sizzle,Ta=Sizzle.matchesSelector),ha.selection=function(){return ha.select(_a.documentElement)};var Oa=ha.selection.prototype=[];Oa.select=function(t){var e,r,n,o,i=[];t=B(t);for(var a=-1,s=this.length;++a<s;){i.push(e=[]),e.parentNode=(n=this[a]).parentNode;for(var l=-1,u=n.length;++l<u;)(o=n[l])?(e.push(r=t.call(o,o.__data__,l,a)),r&&"__data__"in o&&(r.__data__=o.__data__)):e.push(null)}return O(i)},Oa.selectAll=function(t){var e,r,n=[];t=F(t);for(var o=-1,i=this.length;++o<i;)for(var a=this[o],s=-1,l=a.length;++s<l;)(r=a[s])&&(n.push(e=va(t.call(r,r.__data__,s,o))),e.parentNode=r);return O(n)};var Ba="http://www.w3.org/1999/xhtml",Fa={svg:"http://www.w3.org/2000/svg",xhtml:Ba,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};ha.ns={prefix:Fa,qualify:function(t){var e=t.indexOf(":"),r=t;return e>=0&&"xmlns"!==(r=t.slice(0,e))&&(t=t.slice(e+1)),Fa.hasOwnProperty(r)?{space:Fa[r],local:t}:t}},Oa.attr=function(t,e){if(arguments.length<2){if("string"==typeof t){var r=this.node();return t=ha.ns.qualify(t),t.local?r.getAttributeNS(t.space,t.local):r.getAttribute(t)}for(e in t)this.each(j(e,t[e]));return this}return this.each(j(t,e))},Oa.classed=function(t,e){if(arguments.length<2){if("string"==typeof t){var r=this.node(),n=(t=I(t)).length,o=-1;if(e=r.classList){for(;++o<n;)if(!e.contains(t[o]))return!1}else for(e=r.getAttribute("class");++o<n;)if(!R(t[o]).test(e))return!1;return!0}for(e in t)this.each(D(e,t[e]));return this}return this.each(D(t,e))},Oa.style=function(t,e,r){var n=arguments.length;if(n<3){if("string"!=typeof t){n<2&&(e="");for(r in t)this.each(P(r,t[r],e));return this}if(n<2){var o=this.node();return a(o).getComputedStyle(o,null).getPropertyValue(t)}r=""}return this.each(P(t,e,r))},Oa.property=function(t,e){if(arguments.length<2){if("string"==typeof t)return this.node()[t];for(e in t)this.each(U(e,t[e]));return this}return this.each(U(t,e))},Oa.text=function(t){return arguments.length?this.each("function"==typeof t?function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}:null==t?function(){this.textContent=""}:function(){this.textContent=t}):this.node().textContent},Oa.html=function(t){return arguments.length?this.each("function"==typeof t?function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}:null==t?function(){this.innerHTML=""}:function(){this.innerHTML=t}):this.node().innerHTML},Oa.append=function(t){return t=H(t),this.select(function(){return this.appendChild(t.apply(this,arguments))})},Oa.insert=function(t,e){return t=H(t),e=B(e),this.select(function(){return this.insertBefore(t.apply(this,arguments),e.apply(this,arguments)||null)})},Oa.remove=function(){return this.each($)},Oa.data=function(t,e){function r(t,r){var n,o,i,a=t.length,c=r.length,f=Math.min(a,c),d=new Array(c),h=new Array(c),v=new Array(a);if(e){var _,m=new p,g=new Array(a);for(n=-1;++n<a;)(o=t[n])&&(m.has(_=e.call(o,o.__data__,n))?v[n]=o:m.set(_,o),g[n]=_);for(n=-1;++n<c;)(o=m.get(_=e.call(r,i=r[n],n)))?o!==!0&&(d[n]=o,o.__data__=i):h[n]=Z(i),m.set(_,!0);for(n=-1;++n<a;)n in g&&m.get(g[n])!==!0&&(v[n]=t[n])}else{for(n=-1;++n<f;)o=t[n],i=r[n],o?(o.__data__=i,d[n]=o):h[n]=Z(i);for(;n<c;++n)h[n]=Z(r[n]);for(;n<a;++n)v[n]=t[n]}h.update=d,h.parentNode=d.parentNode=v.parentNode=t.parentNode,s.push(h),l.push(d),u.push(v)}var n,o,i=-1,a=this.length;if(!arguments.length){for(t=new Array(a=(n=this[0]).length);++i<a;)(o=n[i])&&(t[i]=o.__data__);return t}var s=G([]),l=O([]),u=O([]);if("function"==typeof t)for(;++i<a;)r(n=this[i],t.call(n,n.parentNode.__data__,i));else for(;++i<a;)r(n=this[i],t);return l.enter=function(){return s},l.exit=function(){return u},l},Oa.datum=function(t){return arguments.length?this.property("__data__",t):this.property("__data__")},Oa.filter=function(t){var e,r,n,o=[];"function"!=typeof t&&(t=V(t));for(var i=0,a=this.length;i<a;i++){o.push(e=[]),e.parentNode=(r=this[i]).parentNode;for(var s=0,l=r.length;s<l;s++)(n=r[s])&&t.call(n,n.__data__,s,i)&&e.push(n)}return O(o)},Oa.order=function(){for(var t=-1,e=this.length;++t<e;)for(var r,n=this[t],o=n.length-1,i=n[o];--o>=0;)(r=n[o])&&(i&&i!==r.nextSibling&&i.parentNode.insertBefore(r,i),i=r);return this},Oa.sort=function(t){t=Y.apply(this,arguments);for(var e=-1,r=this.length;++e<r;)this[e].sort(t);return this.order()},Oa.each=function(t){return W(this,function(e,r,n){t.call(e,e.__data__,r,n)})},Oa.call=function(t){var e=va(arguments);return t.apply(e[0]=this,e),this},Oa.empty=function(){return!this.node()},Oa.node=function(){for(var t=0,e=this.length;t<e;t++)for(var r=this[t],n=0,o=r.length;n<o;n++){var i=r[n];if(i)return i}return null},Oa.size=function(){var t=0;return W(this,function(){++t}),t};var ja=[];ha.selection.enter=G,ha.selection.enter.prototype=ja,ja.append=Oa.append,ja.empty=Oa.empty,ja.node=Oa.node,ja.call=Oa.call,ja.size=Oa.size,ja.select=function(t){for(var e,r,n,o,i,a=[],s=-1,l=this.length;++s<l;){n=(o=this[s]).update,a.push(e=[]),e.parentNode=o.parentNode;for(var u=-1,c=o.length;++u<c;)(i=o[u])?(e.push(n[u]=r=t.call(o.parentNode,i.__data__,u,s)),r.__data__=i.__data__):e.push(null)}return O(a)},ja.insert=function(t,e){return arguments.length<2&&(e=X(this)),Oa.insert.call(this,t,e)},ha.select=function(t){var e;return"string"==typeof t?(e=[Sa(t,_a)],e.parentNode=_a.documentElement):(e=[t],e.parentNode=i(t)),O([e])},ha.selectAll=function(t){var e;return"string"==typeof t?(e=va(Ca(t,_a)),e.parentNode=_a.documentElement):(e=va(t),e.parentNode=null),O([e])},Oa.on=function(t,e,r){var n=arguments.length;if(n<3){if("string"!=typeof t){n<2&&(e=!1);for(r in t)this.each(J(r,t[r],e));return this}if(n<2)return(n=this.node()["__on"+t])&&n._;r=!1}return this.each(J(t,e,r))};var La=ha.map({mouseenter:"mouseover",mouseleave:"mouseout"});_a&&La.forEach(function(t){"on"+t in _a&&La.remove(t)});var Ra,Ia=0;ha.mouse=function(t){return et(t,C())};var Da=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;ha.touch=function(t,e,r){if(arguments.length<3&&(r=e,e=C().changedTouches),e)for(var n,o=0,i=e.length;o<i;++o)if((n=e[o]).identifier===r)return et(t,n)},ha.behavior.drag=function(){function t(){this.on("mousedown.drag",o).on("touchstart.drag",i)}function e(t,e,o,i,a){return function(){function s(){var t,r,n=e(d,v);n&&(t=n[0]-y[0],r=n[1]-y[1],p|=t|r,y=n,h({type:"drag",x:n[0]+u[0],y:n[1]+u[1],dx:t,dy:r}))}function l(){e(d,v)&&(m.on(i+_,null).on(a+_,null),g(p),h({type:"dragend"}))}var u,c=this,f=ha.event.target.correspondingElement||ha.event.target,d=c.parentNode,h=r.of(c,arguments),p=0,v=t(),_=".drag"+(null==v?"":"-"+v),m=ha.select(o(f)).on(i+_,s).on(a+_,l),g=tt(f),y=e(d,v);n?(u=n.apply(c,arguments),u=[u.x-y[0],u.y-y[1]]):u=[0,0],h({type:"dragstart"})}}var r=T(t,"drag","dragstart","dragend"),n=null,o=e(A,ha.mouse,a,"mousemove","mouseup"),i=e(rt,ha.touch,z,"touchmove","touchend");return t.origin=function(e){return arguments.length?(n=e,t):n},ha.rebind(t,r,"on")},ha.touches=function(t,e){return arguments.length<2&&(e=C().touches),e?va(e).map(function(e){var r=et(t,e);return r.identifier=e.identifier,r}):[]};var qa=1e-6,Pa=qa*qa,Ua=Math.PI,Ha=2*Ua,$a=Ha-qa,Za=Ua/2,Va=Ua/180,Ya=180/Ua,Wa=Math.SQRT2,Ga=2,Xa=4;ha.interpolateZoom=function(t,e){var r,n,o=t[0],i=t[1],a=t[2],s=e[0],l=e[1],u=e[2],c=s-o,f=l-i,d=c*c+f*f;if(d<Pa)n=Math.log(u/a)/Wa,r=function(t){return[o+t*c,i+t*f,a*Math.exp(Wa*t*n)]};else{var h=Math.sqrt(d),p=(u*u-a*a+Xa*d)/(2*a*Ga*h),v=(u*u-a*a-Xa*d)/(2*u*Ga*h),_=Math.log(Math.sqrt(p*p+1)-p),m=Math.log(Math.sqrt(v*v+1)-v);n=(m-_)/Wa,r=function(t){var e=t*n,r=lt(_),s=a/(Ga*h)*(r*ut(Wa*e+_)-st(_));return[o+s*c,i+s*f,a*r/lt(Wa*e+_)]}}return r.duration=1e3*n,r},ha.behavior.zoom=function(){function t(t){t.on(C,f).on(Ka+".zoom",h).on("dblclick.zoom",p).on(F,d)}function e(t){return[(t[0]-M.x)/M.k,(t[1]-M.y)/M.k]}function r(t){return[t[0]*M.k+M.x,t[1]*M.k+M.y]}function n(t){M.k=Math.max(A[0],Math.min(A[1],t))}function o(t,e){e=r(e),M.x+=t[0]-e[0],M.y+=t[1]-e[1]}function i(e,r,i,a){e.__chart__={x:M.x,y:M.y,k:M.k},n(Math.pow(2,a)),o(_=r,i),e=ha.select(e),E>0&&(e=e.transition().duration(E)),e.call(t.event)}function s(){x&&x.domain(w.range().map(function(t){return(t-M.x)/M.k}).map(w.invert)),z&&z.domain(b.range().map(function(t){return(t-M.y)/M.k}).map(b.invert))}function l(t){N++||t({type:"zoomstart"})}function u(t){s(),t({type:"zoom",scale:M.k,translate:[M.x,M.y]})}function c(t){--N||(t({type:"zoomend"}),_=null)}function f(){function t(){s=1,o(ha.mouse(n),d),u(i)}function r(){f.on(O,null).on(B,null),h(s),c(i)}var n=this,i=j.of(n,arguments),s=0,f=ha.select(a(n)).on(O,t).on(B,r),d=e(ha.mouse(n)),h=tt(n);Zl.call(n),l(i)}function d(){function t(){var t=ha.touches(p);return h=M.k,t.forEach(function(t){t.identifier in _&&(_[t.identifier]=e(t))}),t}function r(){var e=ha.event.target;ha.select(e).on(w,a).on(x,s),b.push(e);for(var r=ha.event.changedTouches,n=0,o=r.length;n<o;++n)_[r[n].identifier]=null;var l=t(),u=Date.now();if(1===l.length){if(u-y<500){var c=l[0];i(p,c,_[c.identifier],Math.floor(Math.log(M.k)/Math.LN2)+1),S()}y=u}else if(l.length>1){var c=l[0],f=l[1],d=c[0]-f[0],h=c[1]-f[1];m=d*d+h*h}}function a(){var t,e,r,i,a=ha.touches(p);Zl.call(p);for(var s=0,l=a.length;s<l;++s,i=null)if(r=a[s],i=_[r.identifier]){if(e)break;t=r,e=i}if(i){var c=(c=r[0]-t[0])*c+(c=r[1]-t[1])*c,f=m&&Math.sqrt(c/m);t=[(t[0]+r[0])/2,(t[1]+r[1])/2],e=[(e[0]+i[0])/2,(e[1]+i[1])/2],n(f*h)}y=null,o(t,e),u(v)}function s(){if(ha.event.touches.length){for(var e=ha.event.changedTouches,r=0,n=e.length;r<n;++r)delete _[e[r].identifier];for(var o in _)return void t()}ha.selectAll(b).on(g,null),z.on(C,f).on(F,d),k(),c(v)}var h,p=this,v=j.of(p,arguments),_={},m=0,g=".zoom-"+ha.event.changedTouches[0].identifier,w="touchmove"+g,x="touchend"+g,b=[],z=ha.select(p),k=tt(p);r(),l(v),z.on(C,null).on(F,r)}function h(){var t=j.of(this,arguments);g?clearTimeout(g):(Zl.call(this),v=e(_=m||ha.mouse(this)),l(t)),g=setTimeout(function(){g=null,c(t)},50),S(),n(Math.pow(2,.002*Ja())*M.k),o(_,v),u(t)}function p(){var t=ha.mouse(this),r=Math.log(M.k)/Math.LN2;i(this,t,e(t),ha.event.shiftKey?Math.ceil(r)-1:Math.floor(r)+1)}var v,_,m,g,y,w,x,b,z,M={x:0,y:0,k:1},k=[960,500],A=Qa,E=250,N=0,C="mousedown.zoom",O="mousemove.zoom",B="mouseup.zoom",F="touchstart.zoom",j=T(t,"zoomstart","zoom","zoomend");return Ka||(Ka="onwheel"in _a?(Ja=function(){return-ha.event.deltaY*(ha.event.deltaMode?120:1)},"wheel"):"onmousewheel"in _a?(Ja=function(){return ha.event.wheelDelta},"mousewheel"):(Ja=function(){return-ha.event.detail},"MozMousePixelScroll")),t.event=function(t){t.each(function(){var t=j.of(this,arguments),e=M;Hl?ha.select(this).transition().each("start.zoom",function(){M=this.__chart__||{x:0,y:0,k:1},l(t)}).tween("zoom:zoom",function(){var r=k[0],n=k[1],o=_?_[0]:r/2,i=_?_[1]:n/2,a=ha.interpolateZoom([(o-M.x)/M.k,(i-M.y)/M.k,r/M.k],[(o-e.x)/e.k,(i-e.y)/e.k,r/e.k]);return function(e){var n=a(e),s=r/n[2];this.__chart__=M={x:o-n[0]*s,y:i-n[1]*s,k:s},u(t)}}).each("interrupt.zoom",function(){c(t)}).each("end.zoom",function(){c(t)}):(this.__chart__=M,l(t),u(t),c(t))})},t.translate=function(e){return arguments.length?(M={x:+e[0],y:+e[1],k:M.k},s(),t):[M.x,M.y]},t.scale=function(e){return arguments.length?(M={x:M.x,y:M.y,k:null},n(+e),s(),t):M.k},t.scaleExtent=function(e){return arguments.length?(A=null==e?Qa:[+e[0],+e[1]],t):A},t.center=function(e){return arguments.length?(m=e&&[+e[0],+e[1]],t):m},t.size=function(e){return arguments.length?(k=e&&[+e[0],+e[1]],t):k},t.duration=function(e){return arguments.length?(E=+e,t):E},t.x=function(e){return arguments.length?(x=e,
w=e.copy(),M={x:0,y:0,k:1},t):x},t.y=function(e){return arguments.length?(z=e,b=e.copy(),M={x:0,y:0,k:1},t):z},ha.rebind(t,j,"on")};var Ja,Ka,Qa=[0,1/0];ha.color=ft,ft.prototype.toString=function(){return this.rgb()+""},ha.hsl=dt;var ts=dt.prototype=new ft;ts.brighter=function(t){return t=Math.pow(.7,arguments.length?t:1),new dt(this.h,this.s,this.l/t)},ts.darker=function(t){return t=Math.pow(.7,arguments.length?t:1),new dt(this.h,this.s,t*this.l)},ts.rgb=function(){return ht(this.h,this.s,this.l)},ha.hcl=pt;var es=pt.prototype=new ft;es.brighter=function(t){return new pt(this.h,this.c,Math.min(100,this.l+rs*(arguments.length?t:1)))},es.darker=function(t){return new pt(this.h,this.c,Math.max(0,this.l-rs*(arguments.length?t:1)))},es.rgb=function(){return vt(this.h,this.c,this.l).rgb()},ha.lab=_t;var rs=18,ns=.95047,os=1,is=1.08883,as=_t.prototype=new ft;as.brighter=function(t){return new _t(Math.min(100,this.l+rs*(arguments.length?t:1)),this.a,this.b)},as.darker=function(t){return new _t(Math.max(0,this.l-rs*(arguments.length?t:1)),this.a,this.b)},as.rgb=function(){return mt(this.l,this.a,this.b)},ha.rgb=bt;var ss=bt.prototype=new ft;ss.brighter=function(t){t=Math.pow(.7,arguments.length?t:1);var e=this.r,r=this.g,n=this.b,o=30;return e||r||n?(e&&e<o&&(e=o),r&&r<o&&(r=o),n&&n<o&&(n=o),new bt(Math.min(255,e/t),Math.min(255,r/t),Math.min(255,n/t))):new bt(o,o,o)},ss.darker=function(t){return t=Math.pow(.7,arguments.length?t:1),new bt(t*this.r,t*this.g,t*this.b)},ss.hsl=function(){return Et(this.r,this.g,this.b)},ss.toString=function(){return"#"+kt(this.r)+kt(this.g)+kt(this.b)};var ls=ha.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});ls.forEach(function(t,e){ls.set(t,zt(e))}),ha.functor=Tt,ha.xhr=Ot(z),ha.dsv=function(t,e){function r(t,r,i){arguments.length<3&&(i=r,r=null);var a=Bt(t,e,null==r?n:o(r),i);return a.row=function(t){return arguments.length?a.response(null==(r=t)?n:o(t)):r},a}function n(t){return r.parse(t.responseText)}function o(t){return function(e){return r.parse(e.responseText,t)}}function i(e){return e.map(a).join(t)}function a(t){return s.test(t)?'"'+t.replace(/\"/g,'""')+'"':t}var s=new RegExp('["'+t+"\n]"),l=t.charCodeAt(0);return r.parse=function(t,e){var n;return r.parseRows(t,function(t,r){if(n)return n(t,r-1);var o=new Function("d","return {"+t.map(function(t,e){return JSON.stringify(t)+": d["+e+"]"}).join(",")+"}");n=e?function(t,r){return e(o(t),r)}:o})},r.parseRows=function(t,e){function r(){if(c>=u)return a;if(o)return o=!1,i;var e=c;if(34===t.charCodeAt(e)){for(var r=e;r++<u;)if(34===t.charCodeAt(r)){if(34!==t.charCodeAt(r+1))break;++r}c=r+2;var n=t.charCodeAt(r+1);return 13===n?(o=!0,10===t.charCodeAt(r+2)&&++c):10===n&&(o=!0),t.slice(e+1,r).replace(/""/g,'"')}for(;c<u;){var n=t.charCodeAt(c++),s=1;if(10===n)o=!0;else if(13===n)o=!0,10===t.charCodeAt(c)&&(++c,++s);else if(n!==l)continue;return t.slice(e,c-s)}return t.slice(e)}for(var n,o,i={},a={},s=[],u=t.length,c=0,f=0;(n=r())!==a;){for(var d=[];n!==i&&n!==a;)d.push(n),n=r();e&&null==(d=e(d,f++))||s.push(d)}return s},r.format=function(e){if(Array.isArray(e[0]))return r.formatRows(e);var n=new b,o=[];return e.forEach(function(t){for(var e in t)n.has(e)||o.push(n.add(e))}),[o.map(a).join(t)].concat(e.map(function(e){return o.map(function(t){return a(e[t])}).join(t)})).join("\n")},r.formatRows=function(t){return t.map(i).join("\n")},r},ha.csv=ha.dsv(",","text/csv"),ha.tsv=ha.dsv("\t","text/tab-separated-values");var us,cs,fs,ds,hs=this[k(this,"requestAnimationFrame")]||function(t){setTimeout(t,17)};ha.timer=function(){Lt.apply(this,arguments)},ha.timer.flush=function(){It(),Dt()},ha.round=function(t,e){return e?Math.round(t*(e=Math.pow(10,e)))/e:Math.round(t)};var ps=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"].map(Pt);ha.formatPrefix=function(t,e){var r=0;return(t=+t)&&(t<0&&(t*=-1),e&&(t=ha.round(t,qt(t,e))),r=1+Math.floor(1e-12+Math.log(t)/Math.LN10),r=Math.max(-24,Math.min(24,3*Math.floor((r-1)/3)))),ps[8+r/3]};var vs=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,_s=ha.map({b:function(t){return t.toString(2)},c:function(t){return String.fromCharCode(t)},o:function(t){return t.toString(8)},x:function(t){return t.toString(16)},X:function(t){return t.toString(16).toUpperCase()},g:function(t,e){return t.toPrecision(e)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},r:function(t,e){return(t=ha.round(t,qt(t,e))).toFixed(Math.max(0,Math.min(20,qt(t*(1+1e-15),e))))}}),ms=ha.time={},gs=Date;$t.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){ys.setUTCDate.apply(this._,arguments)},setDay:function(){ys.setUTCDay.apply(this._,arguments)},setFullYear:function(){ys.setUTCFullYear.apply(this._,arguments)},setHours:function(){ys.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){ys.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){ys.setUTCMinutes.apply(this._,arguments)},setMonth:function(){ys.setUTCMonth.apply(this._,arguments)},setSeconds:function(){ys.setUTCSeconds.apply(this._,arguments)},setTime:function(){ys.setTime.apply(this._,arguments)}};var ys=Date.prototype;ms.year=Zt(function(t){return t=ms.day(t),t.setMonth(0,1),t},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t){return t.getFullYear()}),ms.years=ms.year.range,ms.years.utc=ms.year.utc.range,ms.day=Zt(function(t){var e=new gs(2e3,0);return e.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),e},function(t,e){t.setDate(t.getDate()+e)},function(t){return t.getDate()-1}),ms.days=ms.day.range,ms.days.utc=ms.day.utc.range,ms.dayOfYear=function(t){var e=ms.year(t);return Math.floor((t-e-6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(t,e){e=7-e;var r=ms[t]=Zt(function(t){return(t=ms.day(t)).setDate(t.getDate()-(t.getDay()+e)%7),t},function(t,e){t.setDate(t.getDate()+7*Math.floor(e))},function(t){var r=ms.year(t).getDay();return Math.floor((ms.dayOfYear(t)+(r+e)%7)/7)-(r!==e)});ms[t+"s"]=r.range,ms[t+"s"].utc=r.utc.range,ms[t+"OfYear"]=function(t){var r=ms.year(t).getDay();return Math.floor((ms.dayOfYear(t)+(r+e)%7)/7)}}),ms.week=ms.sunday,ms.weeks=ms.sunday.range,ms.weeks.utc=ms.sunday.utc.range,ms.weekOfYear=ms.sundayOfYear;var ws={"-":"",_:" ",0:"0"},xs=/^\s*\d+/,bs=/^%/;ha.locale=function(t){return{numberFormat:Ut(t),timeFormat:Yt(t)}};var zs=ha.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});ha.format=zs.numberFormat,ha.geo={},pe.prototype={s:0,t:0,add:function(t){ve(t,this.t,Ms),ve(Ms.s,this.s,this),this.s?this.t+=Ms.t:this.s=Ms.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var Ms=new pe;ha.geo.stream=function(t,e){t&&ks.hasOwnProperty(t.type)?ks[t.type](t,e):_e(t,e)};var ks={Feature:function(t,e){_e(t.geometry,e)},FeatureCollection:function(t,e){for(var r=t.features,n=-1,o=r.length;++n<o;)_e(r[n].geometry,e)}},As={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var r=t.coordinates,n=-1,o=r.length;++n<o;)t=r[n],e.point(t[0],t[1],t[2])},LineString:function(t,e){me(t.coordinates,e,0)},MultiLineString:function(t,e){for(var r=t.coordinates,n=-1,o=r.length;++n<o;)me(r[n],e,0)},Polygon:function(t,e){ge(t.coordinates,e)},MultiPolygon:function(t,e){for(var r=t.coordinates,n=-1,o=r.length;++n<o;)ge(r[n],e)},GeometryCollection:function(t,e){for(var r=t.geometries,n=-1,o=r.length;++n<o;)_e(r[n],e)}};ha.geo.area=function(t){return Es=0,ha.geo.stream(t,Ss),Es};var Es,Ns=new pe,Ss={sphere:function(){Es+=4*Ua},point:A,lineStart:A,lineEnd:A,polygonStart:function(){Ns.reset(),Ss.lineStart=ye},polygonEnd:function(){var t=2*Ns;Es+=t<0?4*Ua+t:t,Ss.lineStart=Ss.lineEnd=Ss.point=A}};ha.geo.bounds=function(){function t(t,e){y.push(w=[c=t,d=t]),e<f&&(f=e),e>h&&(h=e)}function e(e,r){var n=we([e*Va,r*Va]);if(m){var o=be(m,n),i=[o[1],-o[0],0],a=be(i,o);ke(a),a=Ae(a);var l=e-p,u=l>0?1:-1,v=a[0]*Ya*u,_=za(l)>180;if(_^(u*p<v&&v<u*e)){var g=a[1]*Ya;g>h&&(h=g)}else if(v=(v+360)%360-180,_^(u*p<v&&v<u*e)){var g=-a[1]*Ya;g<f&&(f=g)}else r<f&&(f=r),r>h&&(h=r);_?e<p?s(c,e)>s(c,d)&&(d=e):s(e,d)>s(c,d)&&(c=e):d>=c?(e<c&&(c=e),e>d&&(d=e)):e>p?s(c,e)>s(c,d)&&(d=e):s(e,d)>s(c,d)&&(c=e)}else t(e,r);m=n,p=e}function r(){x.point=e}function n(){w[0]=c,w[1]=d,x.point=t,m=null}function o(t,r){if(m){var n=t-p;g+=za(n)>180?n+(n>0?360:-360):n}else v=t,_=r;Ss.point(t,r),e(t,r)}function i(){Ss.lineStart()}function a(){o(v,_),Ss.lineEnd(),za(g)>qa&&(c=-(d=180)),w[0]=c,w[1]=d,m=null}function s(t,e){return(e-=t)<0?e+360:e}function l(t,e){return t[0]-e[0]}function u(t,e){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}var c,f,d,h,p,v,_,m,g,y,w,x={point:t,lineStart:r,lineEnd:n,polygonStart:function(){x.point=o,x.lineStart=i,x.lineEnd=a,g=0,Ss.polygonStart()},polygonEnd:function(){Ss.polygonEnd(),x.point=t,x.lineStart=r,x.lineEnd=n,Ns<0?(c=-(d=180),f=-(h=90)):g>qa?h=90:g<-qa&&(f=-90),w[0]=c,w[1]=d}};return function(t){h=d=-(c=f=1/0),y=[],ha.geo.stream(t,x);var e=y.length;if(e){y.sort(l);for(var r,n=1,o=y[0],i=[o];n<e;++n)r=y[n],u(r[0],o)||u(r[1],o)?(s(o[0],r[1])>s(o[0],o[1])&&(o[1]=r[1]),s(r[0],o[1])>s(o[0],o[1])&&(o[0]=r[0])):i.push(o=r);for(var a,r,p=-(1/0),e=i.length-1,n=0,o=i[e];n<=e;o=r,++n)r=i[n],(a=s(o[1],r[0]))>p&&(p=a,c=r[0],d=o[1])}return y=w=null,c===1/0||f===1/0?[[NaN,NaN],[NaN,NaN]]:[[c,f],[d,h]]}}(),ha.geo.centroid=function(t){Cs=Ts=Os=Bs=Fs=js=Ls=Rs=Is=Ds=qs=0,ha.geo.stream(t,Ps);var e=Is,r=Ds,n=qs,o=e*e+r*r+n*n;return o<Pa&&(e=js,r=Ls,n=Rs,Ts<qa&&(e=Os,r=Bs,n=Fs),o=e*e+r*r+n*n,o<Pa)?[NaN,NaN]:[Math.atan2(r,e)*Ya,at(n/Math.sqrt(o))*Ya]};var Cs,Ts,Os,Bs,Fs,js,Ls,Rs,Is,Ds,qs,Ps={sphere:A,point:Ne,lineStart:Ce,lineEnd:Te,polygonStart:function(){Ps.lineStart=Oe},polygonEnd:function(){Ps.lineStart=Ce}},Us=Ie(Fe,Ue,$e,[-Ua,-Ua/2]),Hs=1e9;ha.geo.clipExtent=function(){var t,e,r,n,o,i,a={stream:function(t){return o&&(o.valid=!1),o=i(t),o.valid=!0,o},extent:function(s){return arguments.length?(i=We(t=+s[0][0],e=+s[0][1],r=+s[1][0],n=+s[1][1]),o&&(o.valid=!1,o=null),a):[[t,e],[r,n]]}};return a.extent([[0,0],[960,500]])},(ha.geo.conicEqualArea=function(){return Ge(Xe)}).raw=Xe,ha.geo.albers=function(){return ha.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},ha.geo.albersUsa=function(){function t(t){var i=t[0],a=t[1];return e=null,r(i,a),e||(n(i,a),e)||o(i,a),e}var e,r,n,o,i=ha.geo.albers(),a=ha.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s=ha.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),l={point:function(t,r){e=[t,r]}};return t.invert=function(t){var e=i.scale(),r=i.translate(),n=(t[0]-r[0])/e,o=(t[1]-r[1])/e;return(o>=.12&&o<.234&&n>=-.425&&n<-.214?a:o>=.166&&o<.234&&n>=-.214&&n<-.115?s:i).invert(t)},t.stream=function(t){var e=i.stream(t),r=a.stream(t),n=s.stream(t);return{point:function(t,o){e.point(t,o),r.point(t,o),n.point(t,o)},sphere:function(){e.sphere(),r.sphere(),n.sphere()},lineStart:function(){e.lineStart(),r.lineStart(),n.lineStart()},lineEnd:function(){e.lineEnd(),r.lineEnd(),n.lineEnd()},polygonStart:function(){e.polygonStart(),r.polygonStart(),n.polygonStart()},polygonEnd:function(){e.polygonEnd(),r.polygonEnd(),n.polygonEnd()}}},t.precision=function(e){return arguments.length?(i.precision(e),a.precision(e),s.precision(e),t):i.precision()},t.scale=function(e){return arguments.length?(i.scale(e),a.scale(.35*e),s.scale(e),t.translate(i.translate())):i.scale()},t.translate=function(e){if(!arguments.length)return i.translate();var u=i.scale(),c=+e[0],f=+e[1];return r=i.translate(e).clipExtent([[c-.455*u,f-.238*u],[c+.455*u,f+.238*u]]).stream(l).point,n=a.translate([c-.307*u,f+.201*u]).clipExtent([[c-.425*u+qa,f+.12*u+qa],[c-.214*u-qa,f+.234*u-qa]]).stream(l).point,o=s.translate([c-.205*u,f+.212*u]).clipExtent([[c-.214*u+qa,f+.166*u+qa],[c-.115*u-qa,f+.234*u-qa]]).stream(l).point,t},t.scale(1070)};var $s,Zs,Vs,Ys,Ws,Gs,Xs={point:A,lineStart:A,lineEnd:A,polygonStart:function(){Zs=0,Xs.lineStart=Je},polygonEnd:function(){Xs.lineStart=Xs.lineEnd=Xs.point=A,$s+=za(Zs/2)}},Js={point:Ke,lineStart:A,lineEnd:A,polygonStart:A,polygonEnd:A},Ks={point:er,lineStart:rr,lineEnd:nr,polygonStart:function(){Ks.lineStart=or},polygonEnd:function(){Ks.point=er,Ks.lineStart=rr,Ks.lineEnd=nr}};ha.geo.path=function(){function t(t){return t&&("function"==typeof s&&i.pointRadius(+s.apply(this,arguments)),a&&a.valid||(a=o(i)),ha.geo.stream(t,a)),i.result()}function e(){return a=null,t}var r,n,o,i,a,s=4.5;return t.area=function(t){return $s=0,ha.geo.stream(t,o(Xs)),$s},t.centroid=function(t){return Os=Bs=Fs=js=Ls=Rs=Is=Ds=qs=0,ha.geo.stream(t,o(Ks)),qs?[Is/qs,Ds/qs]:Rs?[js/Rs,Ls/Rs]:Fs?[Os/Fs,Bs/Fs]:[NaN,NaN]},t.bounds=function(t){return Ws=Gs=-(Vs=Ys=1/0),ha.geo.stream(t,o(Js)),[[Vs,Ys],[Ws,Gs]]},t.projection=function(t){return arguments.length?(o=(r=t)?t.stream||sr(t):z,e()):r},t.context=function(t){return arguments.length?(i=null==(n=t)?new Qe:new ir(t),"function"!=typeof s&&i.pointRadius(s),e()):n},t.pointRadius=function(e){return arguments.length?(s="function"==typeof e?e:(i.pointRadius(+e),+e),t):s},t.projection(ha.geo.albersUsa()).context(null)},ha.geo.transform=function(t){return{stream:function(e){var r=new lr(e);for(var n in t)r[n]=t[n];return r}}},lr.prototype={point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},ha.geo.projection=cr,ha.geo.projectionMutator=fr,(ha.geo.equirectangular=function(){return cr(hr)}).raw=hr.invert=hr,ha.geo.rotation=function(t){function e(e){return e=t(e[0]*Va,e[1]*Va),e[0]*=Ya,e[1]*=Ya,e}return t=vr(t[0]%360*Va,t[1]*Va,t.length>2?t[2]*Va:0),e.invert=function(e){return e=t.invert(e[0]*Va,e[1]*Va),e[0]*=Ya,e[1]*=Ya,e},e},pr.invert=hr,ha.geo.circle=function(){function t(){var t="function"==typeof n?n.apply(this,arguments):n,e=vr(-t[0]*Va,-t[1]*Va,0).invert,o=[];return r(null,null,1,{point:function(t,r){o.push(t=e(t,r)),t[0]*=Ya,t[1]*=Ya}}),{type:"Polygon",coordinates:[o]}}var e,r,n=[0,0],o=6;return t.origin=function(e){return arguments.length?(n=e,t):n},t.angle=function(n){return arguments.length?(r=yr((e=+n)*Va,o*Va),t):e},t.precision=function(n){return arguments.length?(r=yr(e*Va,(o=+n)*Va),t):o},t.angle(90)},ha.geo.distance=function(t,e){var r,n=(e[0]-t[0])*Va,o=t[1]*Va,i=e[1]*Va,a=Math.sin(n),s=Math.cos(n),l=Math.sin(o),u=Math.cos(o),c=Math.sin(i),f=Math.cos(i);return Math.atan2(Math.sqrt((r=f*a)*r+(r=u*c-l*f*s)*r),l*c+u*f*s)},ha.geo.graticule=function(){function t(){return{type:"MultiLineString",coordinates:e()}}function e(){return ha.range(Math.ceil(i/_)*_,o,_).map(d).concat(ha.range(Math.ceil(u/m)*m,l,m).map(h)).concat(ha.range(Math.ceil(n/p)*p,r,p).filter(function(t){return za(t%_)>qa}).map(c)).concat(ha.range(Math.ceil(s/v)*v,a,v).filter(function(t){return za(t%m)>qa}).map(f))}var r,n,o,i,a,s,l,u,c,f,d,h,p=10,v=p,_=90,m=360,g=2.5;return t.lines=function(){return e().map(function(t){return{type:"LineString",coordinates:t}})},t.outline=function(){return{type:"Polygon",coordinates:[d(i).concat(h(l).slice(1),d(o).reverse().slice(1),h(u).reverse().slice(1))]}},t.extent=function(e){return arguments.length?t.majorExtent(e).minorExtent(e):t.minorExtent()},t.majorExtent=function(e){return arguments.length?(i=+e[0][0],o=+e[1][0],u=+e[0][1],l=+e[1][1],i>o&&(e=i,i=o,o=e),u>l&&(e=u,u=l,l=e),t.precision(g)):[[i,u],[o,l]]},t.minorExtent=function(e){return arguments.length?(n=+e[0][0],r=+e[1][0],s=+e[0][1],a=+e[1][1],n>r&&(e=n,n=r,r=e),s>a&&(e=s,s=a,a=e),t.precision(g)):[[n,s],[r,a]]},t.step=function(e){return arguments.length?t.majorStep(e).minorStep(e):t.minorStep()},t.majorStep=function(e){return arguments.length?(_=+e[0],m=+e[1],t):[_,m]},t.minorStep=function(e){return arguments.length?(p=+e[0],v=+e[1],t):[p,v]},t.precision=function(e){return arguments.length?(g=+e,c=xr(s,a,90),f=br(n,r,g),d=xr(u,l,90),h=br(i,o,g),t):g},t.majorExtent([[-180,-90+qa],[180,90-qa]]).minorExtent([[-180,-80-qa],[180,80+qa]])},ha.geo.greatArc=function(){function t(){return{type:"LineString",coordinates:[e||n.apply(this,arguments),r||o.apply(this,arguments)]}}var e,r,n=zr,o=Mr;return t.distance=function(){return ha.geo.distance(e||n.apply(this,arguments),r||o.apply(this,arguments))},t.source=function(r){return arguments.length?(n=r,e="function"==typeof r?null:r,t):n},t.target=function(e){return arguments.length?(o=e,r="function"==typeof e?null:e,t):o},t.precision=function(){return arguments.length?t:0},t},ha.geo.interpolate=function(t,e){return kr(t[0]*Va,t[1]*Va,e[0]*Va,e[1]*Va)},ha.geo.length=function(t){return Qs=0,ha.geo.stream(t,tl),Qs};var Qs,tl={sphere:A,point:A,lineStart:Ar,lineEnd:A,polygonStart:A,polygonEnd:A},el=Er(function(t){return Math.sqrt(2/(1+t))},function(t){return 2*Math.asin(t/2)});(ha.geo.azimuthalEqualArea=function(){return cr(el)}).raw=el;var rl=Er(function(t){var e=Math.acos(t);return e&&e/Math.sin(e)},z);(ha.geo.azimuthalEquidistant=function(){return cr(rl)}).raw=rl,(ha.geo.conicConformal=function(){return Ge(Nr)}).raw=Nr,(ha.geo.conicEquidistant=function(){return Ge(Sr)}).raw=Sr;var nl=Er(function(t){return 1/t},Math.atan);(ha.geo.gnomonic=function(){return cr(nl)}).raw=nl,Cr.invert=function(t,e){return[t,2*Math.atan(Math.exp(e))-Za]},(ha.geo.mercator=function(){return Tr(Cr)}).raw=Cr;var ol=Er(function(){return 1},Math.asin);(ha.geo.orthographic=function(){return cr(ol)}).raw=ol;var il=Er(function(t){return 1/(1+t)},function(t){return 2*Math.atan(t)});(ha.geo.stereographic=function(){return cr(il)}).raw=il,Or.invert=function(t,e){return[-e,2*Math.atan(Math.exp(t))-Za]},(ha.geo.transverseMercator=function(){var t=Tr(Or),e=t.center,r=t.rotate;return t.center=function(t){return t?e([-t[1],t[0]]):(t=e(),[t[1],-t[0]])},t.rotate=function(t){return t?r([t[0],t[1],t.length>2?t[2]+90:90]):(t=r(),[t[0],t[1],t[2]-90])},r([0,0,90])}).raw=Or,ha.geom={},ha.geom.hull=function(t){function e(t){if(t.length<3)return[];var e,o=Tt(r),i=Tt(n),a=t.length,s=[],l=[];for(e=0;e<a;e++)s.push([+o.call(this,t[e],e),+i.call(this,t[e],e),e]);for(s.sort(Lr),e=0;e<a;e++)l.push([s[e][0],-s[e][1]]);var u=jr(s),c=jr(l),f=c[0]===u[0],d=c[c.length-1]===u[u.length-1],h=[];for(e=u.length-1;e>=0;--e)h.push(t[s[u[e]][2]]);for(e=+f;e<c.length-d;++e)h.push(t[s[c[e]][2]]);return h}var r=Br,n=Fr;return arguments.length?e(t):(e.x=function(t){return arguments.length?(r=t,e):r},e.y=function(t){return arguments.length?(n=t,e):n},e)},ha.geom.polygon=function(t){return Na(t,al),t};var al=ha.geom.polygon.prototype=[];al.area=function(){for(var t,e=-1,r=this.length,n=this[r-1],o=0;++e<r;)t=n,n=this[e],o+=t[1]*n[0]-t[0]*n[1];return.5*o},al.centroid=function(t){var e,r,n=-1,o=this.length,i=0,a=0,s=this[o-1];for(arguments.length||(t=-1/(6*this.area()));++n<o;)e=s,s=this[n],r=e[0]*s[1]-s[0]*e[1],i+=(e[0]+s[0])*r,a+=(e[1]+s[1])*r;return[i*t,a*t]},al.clip=function(t){for(var e,r,n,o,i,a,s=Dr(t),l=-1,u=this.length-Dr(this),c=this[u-1];++l<u;){for(e=t.slice(),t.length=0,o=this[l],i=e[(n=e.length-s)-1],r=-1;++r<n;)a=e[r],Rr(a,c,o)?(Rr(i,c,o)||t.push(Ir(i,a,c,o)),t.push(a)):Rr(i,c,o)&&t.push(Ir(i,a,c,o)),i=a;s&&t.push(t[0]),c=o}return t};var sl,ll,ul,cl,fl,dl=[],hl=[];Yr.prototype.prepare=function(){for(var t,e=this.edges,r=e.length;r--;)t=e[r].edge,t.b&&t.a||e.splice(r,1);return e.sort(Gr),e.length},an.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},sn.prototype={insert:function(t,e){var r,n,o;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;r=t}else this._?(t=fn(this._),e.P=null,e.N=t,t.P=t.L=e,r=t):(e.P=e.N=null,this._=e,r=null);for(e.L=e.R=null,e.U=r,e.C=!0,t=e;r&&r.C;)n=r.U,r===n.L?(o=n.R,o&&o.C?(r.C=o.C=!1,n.C=!0,t=n):(t===r.R&&(un(this,r),t=r,r=t.U),r.C=!1,n.C=!0,cn(this,n))):(o=n.L,o&&o.C?(r.C=o.C=!1,n.C=!0,t=n):(t===r.L&&(cn(this,r),t=r,r=t.U),r.C=!1,n.C=!0,un(this,n))),r=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,r,n,o=t.U,i=t.L,a=t.R;if(r=i?a?fn(a):i:a,o?o.L===t?o.L=r:o.R=r:this._=r,i&&a?(n=r.C,r.C=t.C,r.L=i,i.U=r,r!==a?(o=r.U,r.U=t.U,t=r.R,o.L=t,r.R=a,a.U=r):(r.U=o,o=r,t=r.R)):(n=t.C,t=r),t&&(t.U=o),!n){if(t&&t.C)return void(t.C=!1);do{if(t===this._)break;if(t===o.L){if(e=o.R,e.C&&(e.C=!1,o.C=!0,un(this,o),e=o.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,cn(this,e),e=o.R),e.C=o.C,o.C=e.R.C=!1,un(this,o),t=this._;break}}else if(e=o.L,e.C&&(e.C=!1,o.C=!0,cn(this,o),e=o.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,un(this,e),e=o.L),e.C=o.C,o.C=e.L.C=!1,cn(this,o),t=this._;break}e.C=!0,t=o,o=o.U}while(!t.C);t&&(t.C=!1)}}},ha.geom.voronoi=function(t){function e(t){var e=new Array(t.length),n=s[0][0],o=s[0][1],i=s[1][0],a=s[1][1];return dn(r(t),s).cells.forEach(function(r,s){var l=r.edges,u=r.site,c=e[s]=l.length?l.map(function(t){var e=t.start();return[e.x,e.y]}):u.x>=n&&u.x<=i&&u.y>=o&&u.y<=a?[[n,a],[i,a],[i,o],[n,o]]:[];c.point=t[s]}),e}function r(t){return t.map(function(t,e){return{x:Math.round(i(t,e)/qa)*qa,y:Math.round(a(t,e)/qa)*qa,i:e}})}var n=Br,o=Fr,i=n,a=o,s=pl;return t?e(t):(e.links=function(t){return dn(r(t)).edges.filter(function(t){return t.l&&t.r}).map(function(e){return{source:t[e.l.i],target:t[e.r.i]}})},e.triangles=function(t){var e=[];return dn(r(t)).cells.forEach(function(r,n){for(var o,i,a=r.site,s=r.edges.sort(Gr),l=-1,u=s.length,c=s[u-1].edge,f=c.l===a?c.r:c.l;++l<u;)o=c,i=f,c=s[l].edge,f=c.l===a?c.r:c.l,n<i.i&&n<f.i&&pn(a,i,f)<0&&e.push([t[n],t[i.i],t[f.i]])}),e},e.x=function(t){return arguments.length?(i=Tt(n=t),e):n},e.y=function(t){return arguments.length?(a=Tt(o=t),e):o},e.clipExtent=function(t){return arguments.length?(s=null==t?pl:t,e):s===pl?null:s},e.size=function(t){return arguments.length?e.clipExtent(t&&[[0,0],t]):s===pl?null:s&&s[1]},e)};var pl=[[-1e6,-1e6],[1e6,1e6]];ha.geom.delaunay=function(t){return ha.geom.voronoi().triangles(t)},ha.geom.quadtree=function(t,e,r,n,o){function i(t){function i(t,e,r,n,o,i,a,s){if(!isNaN(r)&&!isNaN(n))if(t.leaf){var l=t.x,c=t.y;if(null!=l)if(za(l-r)+za(c-n)<.01)u(t,e,r,n,o,i,a,s);else{var f=t.point;t.x=t.y=t.point=null,u(t,f,l,c,o,i,a,s),u(t,e,r,n,o,i,a,s)}else t.x=r,t.y=n,t.point=e}else u(t,e,r,n,o,i,a,s)}function u(t,e,r,n,o,a,s,l){var u=.5*(o+s),c=.5*(a+l),f=r>=u,d=n>=c,h=d<<1|f;t.leaf=!1,t=t.nodes[h]||(t.nodes[h]=mn()),f?o=u:s=u,d?a=c:l=c,i(t,e,r,n,o,a,s,l)}var c,f,d,h,p,v,_,m,g,y=Tt(s),w=Tt(l);if(null!=e)v=e,_=r,m=n,g=o;else if(m=g=-(v=_=1/0),f=[],d=[],p=t.length,a)for(h=0;h<p;++h)c=t[h],c.x<v&&(v=c.x),c.y<_&&(_=c.y),c.x>m&&(m=c.x),c.y>g&&(g=c.y),f.push(c.x),d.push(c.y);else for(h=0;h<p;++h){var x=+y(c=t[h],h),b=+w(c,h);x<v&&(v=x),b<_&&(_=b),x>m&&(m=x),b>g&&(g=b),f.push(x),d.push(b)}var z=m-v,M=g-_;z>M?g=_+z:m=v+M;var k=mn();if(k.add=function(t){i(k,t,+y(t,++h),+w(t,h),v,_,m,g)},k.visit=function(t){gn(t,k,v,_,m,g)},k.find=function(t){return yn(k,t[0],t[1],v,_,m,g)},h=-1,null==e){for(;++h<p;)i(k,t[h],f[h],d[h],v,_,m,g);--h}else t.forEach(k.add);return f=d=t=c=null,k}var a,s=Br,l=Fr;return(a=arguments.length)?(s=vn,l=_n,3===a&&(o=r,n=e,r=e=0),i(t)):(i.x=function(t){return arguments.length?(s=t,i):s},i.y=function(t){return arguments.length?(l=t,i):l},i.extent=function(t){return arguments.length?(null==t?e=r=n=o=null:(e=+t[0][0],r=+t[0][1],n=+t[1][0],o=+t[1][1]),i):null==e?null:[[e,r],[n,o]]},i.size=function(t){return arguments.length?(null==t?e=r=n=o=null:(e=r=0,n=+t[0],o=+t[1]),i):null==e?null:[n-e,o-r]},i)},ha.interpolateRgb=wn,ha.interpolateObject=xn,ha.interpolateNumber=bn,ha.interpolateString=zn;var vl=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,_l=new RegExp(vl.source,"g");ha.interpolate=Mn,ha.interpolators=[function(t,e){var r=typeof e;return("string"===r?ls.has(e.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(e)?wn:zn:e instanceof ft?wn:Array.isArray(e)?kn:"object"===r&&isNaN(e)?xn:bn)(t,e)}],ha.interpolateArray=kn;var ml=function(){return z},gl=ha.map({linear:ml,poly:On,quad:function(){return Sn},cubic:function(){return Cn},sin:function(){return Bn},exp:function(){return Fn},circle:function(){return jn},elastic:Ln,back:Rn,bounce:function(){return In}}),yl=ha.map({in:z,out:En,"in-out":Nn,"out-in":function(t){return Nn(En(t))}});ha.ease=function(t){var e=t.indexOf("-"),r=e>=0?t.slice(0,e):t,n=e>=0?t.slice(e+1):"in";return r=gl.get(r)||ml,n=yl.get(n)||z,An(n(r.apply(null,pa.call(arguments,1))))},ha.interpolateHcl=Dn,ha.interpolateHsl=qn,ha.interpolateLab=Pn,ha.interpolateRound=Un,ha.transform=function(t){var e=_a.createElementNS(ha.ns.prefix.svg,"g");return(ha.transform=function(t){if(null!=t){e.setAttribute("transform",t);var r=e.transform.baseVal.consolidate()}return new Hn(r?r.matrix:wl)})(t)},Hn.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var wl={a:1,b:0,c:0,d:1,e:0,f:0};ha.interpolateTransform=Kn,ha.layout={},ha.layout.bundle=function(){return function(t){for(var e=[],r=-1,n=t.length;++r<n;)e.push(eo(t[r]));return e}},ha.layout.chord=function(){function t(){var t,u,f,d,h,p={},v=[],_=ha.range(i),m=[];for(r=[],n=[],t=0,d=-1;++d<i;){for(u=0,h=-1;++h<i;)u+=o[d][h];v.push(u),m.push(ha.range(i)),t+=u}for(a&&_.sort(function(t,e){return a(v[t],v[e])}),s&&m.forEach(function(t,e){t.sort(function(t,r){return s(o[e][t],o[e][r])})}),t=(Ha-c*i)/t,u=0,d=-1;++d<i;){for(f=u,h=-1;++h<i;){var g=_[d],y=m[g][h],w=o[g][y],x=u,b=u+=w*t;p[g+"-"+y]={index:g,subindex:y,startAngle:x,endAngle:b,value:w}}n[g]={index:g,startAngle:f,endAngle:u,value:v[g]},u+=c}for(d=-1;++d<i;)for(h=d-1;++h<i;){var z=p[d+"-"+h],M=p[h+"-"+d];(z.value||M.value)&&r.push(z.value<M.value?{source:M,target:z}:{source:z,target:M})}l&&e()}function e(){r.sort(function(t,e){return l((t.source.value+t.target.value)/2,(e.source.value+e.target.value)/2)})}var r,n,o,i,a,s,l,u={},c=0;return u.matrix=function(t){return arguments.length?(i=(o=t)&&o.length,r=n=null,u):o},u.padding=function(t){return arguments.length?(c=t,r=n=null,u):c},u.sortGroups=function(t){return arguments.length?(a=t,r=n=null,u):a},u.sortSubgroups=function(t){return arguments.length?(s=t,r=null,u):s},u.sortChords=function(t){return arguments.length?(l=t,r&&e(),u):l},u.chords=function(){return r||t(),r},u.groups=function(){return n||t(),n},u},ha.layout.force=function(){function t(t){return function(e,r,n,o){if(e.point!==t){var i=e.cx-t.x,a=e.cy-t.y,s=o-r,l=i*i+a*a;if(s*s/m<l){if(l<v){var u=e.charge/l;t.px-=i*u,t.py-=a*u}return!0}if(e.point&&l&&l<v){var u=e.pointCharge/l;t.px-=i*u,t.py-=a*u}}return!e.charge}}function e(t){t.px=ha.event.x,t.py=ha.event.y,l.resume()}var r,n,o,i,a,s,l={},u=ha.dispatch("start","tick","end"),c=[1,1],f=.9,d=xl,h=bl,p=-30,v=zl,_=.1,m=.64,g=[],y=[];return l.tick=function(){if((o*=.99)<.005)return r=null,u.end({type:"end",alpha:o=0}),!0;var e,n,l,d,h,v,m,w,x,b=g.length,z=y.length;for(n=0;n<z;++n)l=y[n],d=l.source,h=l.target,w=h.x-d.x,x=h.y-d.y,(v=w*w+x*x)&&(v=o*a[n]*((v=Math.sqrt(v))-i[n])/v,w*=v,x*=v,h.x-=w*(m=d.weight+h.weight?d.weight/(d.weight+h.weight):.5),h.y-=x*m,d.x+=w*(m=1-m),d.y+=x*m);if((m=o*_)&&(w=c[0]/2,x=c[1]/2,n=-1,m))for(;++n<b;)l=g[n],l.x+=(w-l.x)*m,l.y+=(x-l.y)*m;if(p)for(lo(e=ha.geom.quadtree(g),o,s),n=-1;++n<b;)(l=g[n]).fixed||e.visit(t(l));for(n=-1;++n<b;)l=g[n],l.fixed?(l.x=l.px,l.y=l.py):(l.x-=(l.px-(l.px=l.x))*f,l.y-=(l.py-(l.py=l.y))*f);u.tick({type:"tick",alpha:o})},l.nodes=function(t){return arguments.length?(g=t,l):g},l.links=function(t){return arguments.length?(y=t,l):y},l.size=function(t){return arguments.length?(c=t,l):c},l.linkDistance=function(t){return arguments.length?(d="function"==typeof t?t:+t,l):d},l.distance=l.linkDistance,l.linkStrength=function(t){return arguments.length?(h="function"==typeof t?t:+t,l):h},l.friction=function(t){return arguments.length?(f=+t,l):f},l.charge=function(t){return arguments.length?(p="function"==typeof t?t:+t,l):p},l.chargeDistance=function(t){return arguments.length?(v=t*t,l):Math.sqrt(v)},l.gravity=function(t){return arguments.length?(_=+t,l):_},l.theta=function(t){return arguments.length?(m=t*t,l):Math.sqrt(m)},l.alpha=function(t){return arguments.length?(t=+t,o?t>0?o=t:(r.c=null,r.t=NaN,r=null,u.end({type:"end",alpha:o=0})):t>0&&(u.start({type:"start",alpha:o=t}),r=Lt(l.tick)),l):o},l.start=function(){
function t(t,n){if(!r){for(r=new Array(o),l=0;l<o;++l)r[l]=[];for(l=0;l<u;++l){var i=y[l];r[i.source.index].push(i.target),r[i.target.index].push(i.source)}}for(var a,s=r[e],l=-1,c=s.length;++l<c;)if(!isNaN(a=s[l][t]))return a;return Math.random()*n}var e,r,n,o=g.length,u=y.length,f=c[0],v=c[1];for(e=0;e<o;++e)(n=g[e]).index=e,n.weight=0;for(e=0;e<u;++e)n=y[e],"number"==typeof n.source&&(n.source=g[n.source]),"number"==typeof n.target&&(n.target=g[n.target]),++n.source.weight,++n.target.weight;for(e=0;e<o;++e)n=g[e],isNaN(n.x)&&(n.x=t("x",f)),isNaN(n.y)&&(n.y=t("y",v)),isNaN(n.px)&&(n.px=n.x),isNaN(n.py)&&(n.py=n.y);if(i=[],"function"==typeof d)for(e=0;e<u;++e)i[e]=+d.call(this,y[e],e);else for(e=0;e<u;++e)i[e]=d;if(a=[],"function"==typeof h)for(e=0;e<u;++e)a[e]=+h.call(this,y[e],e);else for(e=0;e<u;++e)a[e]=h;if(s=[],"function"==typeof p)for(e=0;e<o;++e)s[e]=+p.call(this,g[e],e);else for(e=0;e<o;++e)s[e]=p;return l.resume()},l.resume=function(){return l.alpha(.1)},l.stop=function(){return l.alpha(0)},l.drag=function(){return n||(n=ha.behavior.drag().origin(z).on("dragstart.force",oo).on("drag.force",e).on("dragend.force",io)),arguments.length?void this.on("mouseover.force",ao).on("mouseout.force",so).call(n):n},ha.rebind(l,u,"on")};var xl=20,bl=1,zl=1/0;ha.layout.hierarchy=function(){function t(o){var i,a=[o],s=[];for(o.depth=0;null!=(i=a.pop());)if(s.push(i),(u=r.call(t,i,i.depth))&&(l=u.length)){for(var l,u,c;--l>=0;)a.push(c=u[l]),c.parent=i,c.depth=i.depth+1;n&&(i.value=0),i.children=u}else n&&(i.value=+n.call(t,i,i.depth)||0),delete i.children;return fo(o,function(t){var r,o;e&&(r=t.children)&&r.sort(e),n&&(o=t.parent)&&(o.value+=t.value)}),s}var e=vo,r=ho,n=po;return t.sort=function(r){return arguments.length?(e=r,t):e},t.children=function(e){return arguments.length?(r=e,t):r},t.value=function(e){return arguments.length?(n=e,t):n},t.revalue=function(e){return n&&(co(e,function(t){t.children&&(t.value=0)}),fo(e,function(e){var r;e.children||(e.value=+n.call(t,e,e.depth)||0),(r=e.parent)&&(r.value+=e.value)})),e},t},ha.layout.partition=function(){function t(e,r,n,o){var i=e.children;if(e.x=r,e.y=e.depth*o,e.dx=n,e.dy=o,i&&(a=i.length)){var a,s,l,u=-1;for(n=e.value?n/e.value:0;++u<a;)t(s=i[u],r,l=s.value*n,o),r+=l}}function e(t){var r=t.children,n=0;if(r&&(o=r.length))for(var o,i=-1;++i<o;)n=Math.max(n,e(r[i]));return 1+n}function r(r,i){var a=n.call(this,r,i);return t(a[0],0,o[0],o[1]/e(a[0])),a}var n=ha.layout.hierarchy(),o=[1,1];return r.size=function(t){return arguments.length?(o=t,r):o},uo(r,n)},ha.layout.pie=function(){function t(a){var s,l=a.length,u=a.map(function(r,n){return+e.call(t,r,n)}),c=+("function"==typeof n?n.apply(this,arguments):n),f=("function"==typeof o?o.apply(this,arguments):o)-c,d=Math.min(Math.abs(f)/l,+("function"==typeof i?i.apply(this,arguments):i)),h=d*(f<0?-1:1),p=ha.sum(u),v=p?(f-l*h)/p:0,_=ha.range(l),m=[];return null!=r&&_.sort(r===Ml?function(t,e){return u[e]-u[t]}:function(t,e){return r(a[t],a[e])}),_.forEach(function(t){m[t]={data:a[t],value:s=u[t],startAngle:c,endAngle:c+=s*v+h,padAngle:d}}),m}var e=Number,r=Ml,n=0,o=Ha,i=0;return t.value=function(r){return arguments.length?(e=r,t):e},t.sort=function(e){return arguments.length?(r=e,t):r},t.startAngle=function(e){return arguments.length?(n=e,t):n},t.endAngle=function(e){return arguments.length?(o=e,t):o},t.padAngle=function(e){return arguments.length?(i=e,t):i},t};var Ml={};ha.layout.stack=function(){function t(s,l){if(!(d=s.length))return s;var u=s.map(function(r,n){return e.call(t,r,n)}),c=u.map(function(e){return e.map(function(e,r){return[i.call(t,e,r),a.call(t,e,r)]})}),f=r.call(t,c,l);u=ha.permute(u,f),c=ha.permute(c,f);var d,h,p,v,_=n.call(t,c,l),m=u[0].length;for(p=0;p<m;++p)for(o.call(t,u[0][p],v=_[p],c[0][p][1]),h=1;h<d;++h)o.call(t,u[h][p],v+=c[h-1][p][1],c[h][p][1]);return s}var e=z,r=wo,n=xo,o=yo,i=mo,a=go;return t.values=function(r){return arguments.length?(e=r,t):e},t.order=function(e){return arguments.length?(r="function"==typeof e?e:kl.get(e)||wo,t):r},t.offset=function(e){return arguments.length?(n="function"==typeof e?e:Al.get(e)||xo,t):n},t.x=function(e){return arguments.length?(i=e,t):i},t.y=function(e){return arguments.length?(a=e,t):a},t.out=function(e){return arguments.length?(o=e,t):o},t};var kl=ha.map({"inside-out":function(t){var e,r,n=t.length,o=t.map(bo),i=t.map(zo),a=ha.range(n).sort(function(t,e){return o[t]-o[e]}),s=0,l=0,u=[],c=[];for(e=0;e<n;++e)r=a[e],s<l?(s+=i[r],u.push(r)):(l+=i[r],c.push(r));return c.reverse().concat(u)},reverse:function(t){return ha.range(t.length).reverse()},default:wo}),Al=ha.map({silhouette:function(t){var e,r,n,o=t.length,i=t[0].length,a=[],s=0,l=[];for(r=0;r<i;++r){for(e=0,n=0;e<o;e++)n+=t[e][r][1];n>s&&(s=n),a.push(n)}for(r=0;r<i;++r)l[r]=(s-a[r])/2;return l},wiggle:function(t){var e,r,n,o,i,a,s,l,u,c=t.length,f=t[0],d=f.length,h=[];for(h[0]=l=u=0,r=1;r<d;++r){for(e=0,o=0;e<c;++e)o+=t[e][r][1];for(e=0,i=0,s=f[r][0]-f[r-1][0];e<c;++e){for(n=0,a=(t[e][r][1]-t[e][r-1][1])/(2*s);n<e;++n)a+=(t[n][r][1]-t[n][r-1][1])/s;i+=a*t[e][r][1]}h[r]=l-=o?i/o*s:0,l<u&&(u=l)}for(r=0;r<d;++r)h[r]-=u;return h},expand:function(t){var e,r,n,o=t.length,i=t[0].length,a=1/o,s=[];for(r=0;r<i;++r){for(e=0,n=0;e<o;e++)n+=t[e][r][1];if(n)for(e=0;e<o;e++)t[e][r][1]/=n;else for(e=0;e<o;e++)t[e][r][1]=a}for(r=0;r<i;++r)s[r]=0;return s},zero:xo});ha.layout.histogram=function(){function t(t,i){for(var a,s,l=[],u=t.map(r,this),c=n.call(this,u,i),f=o.call(this,c,u,i),i=-1,d=u.length,h=f.length-1,p=e?1:1/d;++i<h;)a=l[i]=[],a.dx=f[i+1]-(a.x=f[i]),a.y=0;if(h>0)for(i=-1;++i<d;)s=u[i],s>=c[0]&&s<=c[1]&&(a=l[ha.bisect(f,s,1,h)-1],a.y+=p,a.push(t[i]));return l}var e=!0,r=Number,n=Eo,o=ko;return t.value=function(e){return arguments.length?(r=e,t):r},t.range=function(e){return arguments.length?(n=Tt(e),t):n},t.bins=function(e){return arguments.length?(o="number"==typeof e?function(t){return Ao(t,e)}:Tt(e),t):o},t.frequency=function(r){return arguments.length?(e=!!r,t):e},t},ha.layout.pack=function(){function t(t,i){var a=r.call(this,t,i),s=a[0],l=o[0],u=o[1],c=null==e?Math.sqrt:"function"==typeof e?e:function(){return e};if(s.x=s.y=0,fo(s,function(t){t.r=+c(t.value)}),fo(s,Oo),n){var f=n*(e?1:Math.max(2*s.r/l,2*s.r/u))/2;fo(s,function(t){t.r+=f}),fo(s,Oo),fo(s,function(t){t.r-=f})}return jo(s,l/2,u/2,e?1:1/Math.max(2*s.r/l,2*s.r/u)),a}var e,r=ha.layout.hierarchy().sort(No),n=0,o=[1,1];return t.size=function(e){return arguments.length?(o=e,t):o},t.radius=function(r){return arguments.length?(e=null==r||"function"==typeof r?r:+r,t):e},t.padding=function(e){return arguments.length?(n=+e,t):n},uo(t,r)},ha.layout.tree=function(){function t(t,o){var c=a.call(this,t,o),f=c[0],d=e(f);if(fo(d,r),d.parent.m=-d.z,co(d,n),u)co(f,i);else{var h=f,p=f,v=f;co(f,function(t){t.x<h.x&&(h=t),t.x>p.x&&(p=t),t.depth>v.depth&&(v=t)});var _=s(h,p)/2-h.x,m=l[0]/(p.x+s(p,h)/2+_),g=l[1]/(v.depth||1);co(f,function(t){t.x=(t.x+_)*m,t.y=t.depth*g})}return c}function e(t){for(var e,r={A:null,children:[t]},n=[r];null!=(e=n.pop());)for(var o,i=e.children,a=0,s=i.length;a<s;++a)n.push((i[a]=o={_:i[a],parent:e,children:(o=i[a].children)&&o.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:a}).a=o);return r.children[0]}function r(t){var e=t.children,r=t.parent.children,n=t.i?r[t.i-1]:null;if(e.length){Po(t);var i=(e[0].z+e[e.length-1].z)/2;n?(t.z=n.z+s(t._,n._),t.m=t.z-i):t.z=i}else n&&(t.z=n.z+s(t._,n._));t.parent.A=o(t,n,t.parent.A||r[0])}function n(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function o(t,e,r){if(e){for(var n,o=t,i=t,a=e,l=o.parent.children[0],u=o.m,c=i.m,f=a.m,d=l.m;a=Do(a),o=Io(o),a&&o;)l=Io(l),i=Do(i),i.a=t,n=a.z+f-o.z-u+s(a._,o._),n>0&&(qo(Uo(a,t,r),t,n),u+=n,c+=n),f+=a.m,u+=o.m,d+=l.m,c+=i.m;a&&!Do(i)&&(i.t=a,i.m+=f-c),o&&!Io(l)&&(l.t=o,l.m+=u-d,r=t)}return r}function i(t){t.x*=l[0],t.y=t.depth*l[1]}var a=ha.layout.hierarchy().sort(null).value(null),s=Ro,l=[1,1],u=null;return t.separation=function(e){return arguments.length?(s=e,t):s},t.size=function(e){return arguments.length?(u=null==(l=e)?i:null,t):u?null:l},t.nodeSize=function(e){return arguments.length?(u=null==(l=e)?null:i,t):u?l:null},uo(t,a)},ha.layout.cluster=function(){function t(t,i){var a,s=e.call(this,t,i),l=s[0],u=0;fo(l,function(t){var e=t.children;e&&e.length?(t.x=$o(e),t.y=Ho(e)):(t.x=a?u+=r(t,a):0,t.y=0,a=t)});var c=Zo(l),f=Vo(l),d=c.x-r(c,f)/2,h=f.x+r(f,c)/2;return fo(l,o?function(t){t.x=(t.x-l.x)*n[0],t.y=(l.y-t.y)*n[1]}:function(t){t.x=(t.x-d)/(h-d)*n[0],t.y=(1-(l.y?t.y/l.y:1))*n[1]}),s}var e=ha.layout.hierarchy().sort(null).value(null),r=Ro,n=[1,1],o=!1;return t.separation=function(e){return arguments.length?(r=e,t):r},t.size=function(e){return arguments.length?(o=null==(n=e),t):o?null:n},t.nodeSize=function(e){return arguments.length?(o=null!=(n=e),t):o?n:null},uo(t,e)},ha.layout.treemap=function(){function t(t,e){for(var r,n,o=-1,i=t.length;++o<i;)n=(r=t[o]).value*(e<0?0:e),r.area=isNaN(n)||n<=0?0:n}function e(r){var i=r.children;if(i&&i.length){var a,s,l,u=f(r),c=[],d=i.slice(),p=1/0,v="slice"===h?u.dx:"dice"===h?u.dy:"slice-dice"===h?1&r.depth?u.dy:u.dx:Math.min(u.dx,u.dy);for(t(d,u.dx*u.dy/r.value),c.area=0;(l=d.length)>0;)c.push(a=d[l-1]),c.area+=a.area,"squarify"!==h||(s=n(c,v))<=p?(d.pop(),p=s):(c.area-=c.pop().area,o(c,v,u,!1),v=Math.min(u.dx,u.dy),c.length=c.area=0,p=1/0);c.length&&(o(c,v,u,!0),c.length=c.area=0),i.forEach(e)}}function r(e){var n=e.children;if(n&&n.length){var i,a=f(e),s=n.slice(),l=[];for(t(s,a.dx*a.dy/e.value),l.area=0;i=s.pop();)l.push(i),l.area+=i.area,null!=i.z&&(o(l,i.z?a.dx:a.dy,a,!s.length),l.length=l.area=0);n.forEach(r)}}function n(t,e){for(var r,n=t.area,o=0,i=1/0,a=-1,s=t.length;++a<s;)(r=t[a].area)&&(r<i&&(i=r),r>o&&(o=r));return n*=n,e*=e,n?Math.max(e*o*p/n,n/(e*i*p)):1/0}function o(t,e,r,n){var o,i=-1,a=t.length,s=r.x,u=r.y,c=e?l(t.area/e):0;if(e==r.dx){for((n||c>r.dy)&&(c=r.dy);++i<a;)o=t[i],o.x=s,o.y=u,o.dy=c,s+=o.dx=Math.min(r.x+r.dx-s,c?l(o.area/c):0);o.z=!0,o.dx+=r.x+r.dx-s,r.y+=c,r.dy-=c}else{for((n||c>r.dx)&&(c=r.dx);++i<a;)o=t[i],o.x=s,o.y=u,o.dx=c,u+=o.dy=Math.min(r.y+r.dy-u,c?l(o.area/c):0);o.z=!1,o.dy+=r.y+r.dy-u,r.x+=c,r.dx-=c}}function i(n){var o=a||s(n),i=o[0];return i.x=i.y=0,i.value?(i.dx=u[0],i.dy=u[1]):i.dx=i.dy=0,a&&s.revalue(i),t([i],i.dx*i.dy/i.value),(a?r:e)(i),d&&(a=o),o}var a,s=ha.layout.hierarchy(),l=Math.round,u=[1,1],c=null,f=Yo,d=!1,h="squarify",p=.5*(1+Math.sqrt(5));return i.size=function(t){return arguments.length?(u=t,i):u},i.padding=function(t){function e(e){var r=t.call(i,e,e.depth);return null==r?Yo(e):Wo(e,"number"==typeof r?[r,r,r,r]:r)}function r(e){return Wo(e,t)}if(!arguments.length)return c;var n;return f=null==(c=t)?Yo:"function"==(n=typeof t)?e:"number"===n?(t=[t,t,t,t],r):r,i},i.round=function(t){return arguments.length?(l=t?Math.round:Number,i):l!=Number},i.sticky=function(t){return arguments.length?(d=t,a=null,i):d},i.ratio=function(t){return arguments.length?(p=t,i):p},i.mode=function(t){return arguments.length?(h=t+"",i):h},uo(i,s)},ha.random={normal:function(t,e){var r=arguments.length;return r<2&&(e=1),r<1&&(t=0),function(){var r,n,o;do r=2*Math.random()-1,n=2*Math.random()-1,o=r*r+n*n;while(!o||o>1);return t+e*r*Math.sqrt(-2*Math.log(o)/o)}},logNormal:function(){var t=ha.random.normal.apply(ha,arguments);return function(){return Math.exp(t())}},bates:function(t){var e=ha.random.irwinHall(t);return function(){return e()/t}},irwinHall:function(t){return function(){for(var e=0,r=0;r<t;r++)e+=Math.random();return e}}},ha.scale={};var El={floor:z,ceil:z};ha.scale.linear=function(){return ei([0,1],[0,1],Mn,!1)};var Nl={s:1,g:1,p:1,r:1,e:1};ha.scale.log=function(){return ui(ha.scale.linear().domain([0,1]),10,!0,[1,10])};var Sl=ha.format(".0e"),Cl={floor:function(t){return-Math.ceil(-t)},ceil:function(t){return-Math.floor(-t)}};ha.scale.pow=function(){return ci(ha.scale.linear(),1,[0,1])},ha.scale.sqrt=function(){return ha.scale.pow().exponent(.5)},ha.scale.ordinal=function(){return di([],{t:"range",a:[[]]})},ha.scale.category10=function(){return ha.scale.ordinal().range(Tl)},ha.scale.category20=function(){return ha.scale.ordinal().range(Ol)},ha.scale.category20b=function(){return ha.scale.ordinal().range(Bl)},ha.scale.category20c=function(){return ha.scale.ordinal().range(Fl)};var Tl=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(Mt),Ol=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(Mt),Bl=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(Mt),Fl=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(Mt);ha.scale.quantile=function(){return hi([],[])},ha.scale.quantize=function(){return pi(0,1,[0,1])},ha.scale.threshold=function(){return vi([.5],[0,1])},ha.scale.identity=function(){return _i([0,1])},ha.svg={},ha.svg.arc=function(){function t(){var t=Math.max(0,+r.apply(this,arguments)),u=Math.max(0,+n.apply(this,arguments)),c=a.apply(this,arguments)-Za,f=s.apply(this,arguments)-Za,d=Math.abs(f-c),h=c>f?0:1;if(u<t&&(p=u,u=t,t=p),d>=$a)return e(u,h)+(t?e(t,1-h):"")+"Z";var p,v,_,m,g,y,w,x,b,z,M,k,A=0,E=0,N=[];if((m=(+l.apply(this,arguments)||0)/2)&&(_=i===jl?Math.sqrt(t*t+u*u):+i.apply(this,arguments),h||(E*=-1),u&&(E=at(_/u*Math.sin(m))),t&&(A=at(_/t*Math.sin(m)))),u){g=u*Math.cos(c+E),y=u*Math.sin(c+E),w=u*Math.cos(f-E),x=u*Math.sin(f-E);var S=Math.abs(f-c-2*E)<=Ua?0:1;if(E&&zi(g,y,w,x)===h^S){var C=(c+f)/2;g=u*Math.cos(C),y=u*Math.sin(C),w=x=null}}else g=y=0;if(t){b=t*Math.cos(f-A),z=t*Math.sin(f-A),M=t*Math.cos(c+A),k=t*Math.sin(c+A);var T=Math.abs(c-f+2*A)<=Ua?0:1;if(A&&zi(b,z,M,k)===1-h^T){var O=(c+f)/2;b=t*Math.cos(O),z=t*Math.sin(O),M=k=null}}else b=z=0;if(d>qa&&(p=Math.min(Math.abs(u-t)/2,+o.apply(this,arguments)))>.001){v=t<u^h?0:1;var B=p,F=p;if(d<Ua){var j=null==M?[b,z]:null==w?[g,y]:Ir([g,y],[M,k],[w,x],[b,z]),L=g-j[0],R=y-j[1],I=w-j[0],D=x-j[1],q=1/Math.sin(Math.acos((L*I+R*D)/(Math.sqrt(L*L+R*R)*Math.sqrt(I*I+D*D)))/2),P=Math.sqrt(j[0]*j[0]+j[1]*j[1]);F=Math.min(p,(t-P)/(q-1)),B=Math.min(p,(u-P)/(q+1))}if(null!=w){var U=Mi(null==M?[b,z]:[M,k],[g,y],u,B,h),H=Mi([w,x],[b,z],u,B,h);p===B?N.push("M",U[0],"A",B,",",B," 0 0,",v," ",U[1],"A",u,",",u," 0 ",1-h^zi(U[1][0],U[1][1],H[1][0],H[1][1]),",",h," ",H[1],"A",B,",",B," 0 0,",v," ",H[0]):N.push("M",U[0],"A",B,",",B," 0 1,",v," ",H[0])}else N.push("M",g,",",y);if(null!=M){var $=Mi([g,y],[M,k],t,-F,h),Z=Mi([b,z],null==w?[g,y]:[w,x],t,-F,h);p===F?N.push("L",Z[0],"A",F,",",F," 0 0,",v," ",Z[1],"A",t,",",t," 0 ",h^zi(Z[1][0],Z[1][1],$[1][0],$[1][1]),",",1-h," ",$[1],"A",F,",",F," 0 0,",v," ",$[0]):N.push("L",Z[0],"A",F,",",F," 0 0,",v," ",$[0])}else N.push("L",b,",",z)}else N.push("M",g,",",y),null!=w&&N.push("A",u,",",u," 0 ",S,",",h," ",w,",",x),N.push("L",b,",",z),null!=M&&N.push("A",t,",",t," 0 ",T,",",1-h," ",M,",",k);return N.push("Z"),N.join("")}function e(t,e){return"M0,"+t+"A"+t+","+t+" 0 1,"+e+" 0,"+-t+"A"+t+","+t+" 0 1,"+e+" 0,"+t}var r=gi,n=yi,o=mi,i=jl,a=wi,s=xi,l=bi;return t.innerRadius=function(e){return arguments.length?(r=Tt(e),t):r},t.outerRadius=function(e){return arguments.length?(n=Tt(e),t):n},t.cornerRadius=function(e){return arguments.length?(o=Tt(e),t):o},t.padRadius=function(e){return arguments.length?(i=e==jl?jl:Tt(e),t):i},t.startAngle=function(e){return arguments.length?(a=Tt(e),t):a},t.endAngle=function(e){return arguments.length?(s=Tt(e),t):s},t.padAngle=function(e){return arguments.length?(l=Tt(e),t):l},t.centroid=function(){var t=(+r.apply(this,arguments)+ +n.apply(this,arguments))/2,e=(+a.apply(this,arguments)+ +s.apply(this,arguments))/2-Za;return[Math.cos(e)*t,Math.sin(e)*t]},t};var jl="auto";ha.svg.line=function(){return ki(z)};var Ll=ha.map({linear:Ai,"linear-closed":Ei,step:Ni,"step-before":Si,"step-after":Ci,basis:Li,"basis-open":Ri,"basis-closed":Ii,bundle:Di,cardinal:Bi,"cardinal-open":Ti,"cardinal-closed":Oi,monotone:Zi});Ll.forEach(function(t,e){e.key=t,e.closed=/-closed$/.test(t)});var Rl=[0,2/3,1/3,0],Il=[0,1/3,2/3,0],Dl=[0,1/6,2/3,1/6];ha.svg.line.radial=function(){var t=ki(Vi);return t.radius=t.x,delete t.x,t.angle=t.y,delete t.y,t},Si.reverse=Ci,Ci.reverse=Si,ha.svg.area=function(){return Yi(z)},ha.svg.area.radial=function(){var t=Yi(Vi);return t.radius=t.x,delete t.x,t.innerRadius=t.x0,delete t.x0,t.outerRadius=t.x1,delete t.x1,t.angle=t.y,delete t.y,t.startAngle=t.y0,delete t.y0,t.endAngle=t.y1,delete t.y1,t},ha.svg.chord=function(){function t(t,s){var l=e(this,i,t,s),u=e(this,a,t,s);return"M"+l.p0+n(l.r,l.p1,l.a1-l.a0)+(r(l,u)?o(l.r,l.p1,l.r,l.p0):o(l.r,l.p1,u.r,u.p0)+n(u.r,u.p1,u.a1-u.a0)+o(u.r,u.p1,l.r,l.p0))+"Z"}function e(t,e,r,n){var o=e.call(t,r,n),i=s.call(t,o,n),a=l.call(t,o,n)-Za,c=u.call(t,o,n)-Za;return{r:i,a0:a,a1:c,p0:[i*Math.cos(a),i*Math.sin(a)],p1:[i*Math.cos(c),i*Math.sin(c)]}}function r(t,e){return t.a0==e.a0&&t.a1==e.a1}function n(t,e,r){return"A"+t+","+t+" 0 "+ +(r>Ua)+",1 "+e}function o(t,e,r,n){return"Q 0,0 "+n}var i=zr,a=Mr,s=Wi,l=wi,u=xi;return t.radius=function(e){return arguments.length?(s=Tt(e),t):s},t.source=function(e){return arguments.length?(i=Tt(e),t):i},t.target=function(e){return arguments.length?(a=Tt(e),t):a},t.startAngle=function(e){return arguments.length?(l=Tt(e),t):l},t.endAngle=function(e){return arguments.length?(u=Tt(e),t):u},t},ha.svg.diagonal=function(){function t(t,o){var i=e.call(this,t,o),a=r.call(this,t,o),s=(i.y+a.y)/2,l=[i,{x:i.x,y:s},{x:a.x,y:s},a];return l=l.map(n),"M"+l[0]+"C"+l[1]+" "+l[2]+" "+l[3]}var e=zr,r=Mr,n=Gi;return t.source=function(r){return arguments.length?(e=Tt(r),t):e},t.target=function(e){return arguments.length?(r=Tt(e),t):r},t.projection=function(e){return arguments.length?(n=e,t):n},t},ha.svg.diagonal.radial=function(){var t=ha.svg.diagonal(),e=Gi,r=t.projection;return t.projection=function(t){return arguments.length?r(Xi(e=t)):e},t},ha.svg.symbol=function(){function t(t,n){return(ql.get(e.call(this,t,n))||Qi)(r.call(this,t,n))}var e=Ki,r=Ji;return t.type=function(r){return arguments.length?(e=Tt(r),t):e},t.size=function(e){return arguments.length?(r=Tt(e),t):r},t};var ql=ha.map({circle:Qi,cross:function(t){var e=Math.sqrt(t/5)/2;return"M"+-3*e+","+-e+"H"+-e+"V"+-3*e+"H"+e+"V"+-e+"H"+3*e+"V"+e+"H"+e+"V"+3*e+"H"+-e+"V"+e+"H"+-3*e+"Z"},diamond:function(t){var e=Math.sqrt(t/(2*Ul)),r=e*Ul;return"M0,"+-e+"L"+r+",0 0,"+e+" "+-r+",0Z"},square:function(t){var e=Math.sqrt(t)/2;return"M"+-e+","+-e+"L"+e+","+-e+" "+e+","+e+" "+-e+","+e+"Z"},"triangle-down":function(t){var e=Math.sqrt(t/Pl),r=e*Pl/2;return"M0,"+r+"L"+e+","+-r+" "+-e+","+-r+"Z"},"triangle-up":function(t){var e=Math.sqrt(t/Pl),r=e*Pl/2;return"M0,"+-r+"L"+e+","+r+" "+-e+","+r+"Z"}});ha.svg.symbolTypes=ql.keys();var Pl=Math.sqrt(3),Ul=Math.tan(30*Va);Oa.transition=function(t){for(var e,r,n=Hl||++Yl,o=oa(t),i=[],a=$l||{time:Date.now(),ease:Tn,delay:0,duration:250},s=-1,l=this.length;++s<l;){i.push(e=[]);for(var u=this[s],c=-1,f=u.length;++c<f;)(r=u[c])&&ia(r,c,o,n,a),e.push(r)}return ea(i,o,n)},Oa.interrupt=function(t){return this.each(null==t?Zl:ta(oa(t)))};var Hl,$l,Zl=ta(oa()),Vl=[],Yl=0;Vl.call=Oa.call,Vl.empty=Oa.empty,Vl.node=Oa.node,Vl.size=Oa.size,ha.transition=function(t,e){return t&&t.transition?Hl?t.transition(e):t:ha.selection().transition(t)},ha.transition.prototype=Vl,Vl.select=function(t){var e,r,n,o=this.id,i=this.namespace,a=[];t=B(t);for(var s=-1,l=this.length;++s<l;){a.push(e=[]);for(var u=this[s],c=-1,f=u.length;++c<f;)(n=u[c])&&(r=t.call(n,n.__data__,c,s))?("__data__"in n&&(r.__data__=n.__data__),ia(r,c,i,o,n[i][o]),e.push(r)):e.push(null)}return ea(a,i,o)},Vl.selectAll=function(t){var e,r,n,o,i,a=this.id,s=this.namespace,l=[];t=F(t);for(var u=-1,c=this.length;++u<c;)for(var f=this[u],d=-1,h=f.length;++d<h;)if(n=f[d]){i=n[s][a],r=t.call(n,n.__data__,d,u),l.push(e=[]);for(var p=-1,v=r.length;++p<v;)(o=r[p])&&ia(o,p,s,a,i),e.push(o)}return ea(l,s,a)},Vl.filter=function(t){var e,r,n,o=[];"function"!=typeof t&&(t=V(t));for(var i=0,a=this.length;i<a;i++){o.push(e=[]);for(var r=this[i],s=0,l=r.length;s<l;s++)(n=r[s])&&t.call(n,n.__data__,s,i)&&e.push(n)}return ea(o,this.namespace,this.id)},Vl.tween=function(t,e){var r=this.id,n=this.namespace;return arguments.length<2?this.node()[n][r].tween.get(t):W(this,null==e?function(e){e[n][r].tween.remove(t)}:function(o){o[n][r].tween.set(t,e)})},Vl.attr=function(t,e){function r(){this.removeAttribute(s)}function n(){this.removeAttributeNS(s.space,s.local)}function o(t){return null==t?r:(t+="",function(){var e,r=this.getAttribute(s);return r!==t&&(e=a(r,t),function(t){this.setAttribute(s,e(t))})})}function i(t){return null==t?n:(t+="",function(){var e,r=this.getAttributeNS(s.space,s.local);return r!==t&&(e=a(r,t),function(t){this.setAttributeNS(s.space,s.local,e(t))})})}if(arguments.length<2){for(e in t)this.attr(e,t[e]);return this}var a="transform"==t?Kn:Mn,s=ha.ns.qualify(t);return ra(this,"attr."+t,e,s.local?i:o)},Vl.attrTween=function(t,e){function r(t,r){var n=e.call(this,t,r,this.getAttribute(o));return n&&function(t){this.setAttribute(o,n(t))}}function n(t,r){var n=e.call(this,t,r,this.getAttributeNS(o.space,o.local));return n&&function(t){this.setAttributeNS(o.space,o.local,n(t))}}var o=ha.ns.qualify(t);return this.tween("attr."+t,o.local?n:r)},Vl.style=function(t,e,r){function n(){this.style.removeProperty(t)}function o(e){return null==e?n:(e+="",function(){var n,o=a(this).getComputedStyle(this,null).getPropertyValue(t);return o!==e&&(n=Mn(o,e),function(e){this.style.setProperty(t,n(e),r)})})}var i=arguments.length;if(i<3){if("string"!=typeof t){i<2&&(e="");for(r in t)this.style(r,t[r],e);return this}r=""}return ra(this,"style."+t,e,o)},Vl.styleTween=function(t,e,r){function n(n,o){var i=e.call(this,n,o,a(this).getComputedStyle(this,null).getPropertyValue(t));return i&&function(e){this.style.setProperty(t,i(e),r)}}return arguments.length<3&&(r=""),this.tween("style."+t,n)},Vl.text=function(t){return ra(this,"text",t,na)},Vl.remove=function(){var t=this.namespace;return this.each("end.transition",function(){var e;this[t].count<2&&(e=this.parentNode)&&e.removeChild(this)})},Vl.ease=function(t){var e=this.id,r=this.namespace;return arguments.length<1?this.node()[r][e].ease:("function"!=typeof t&&(t=ha.ease.apply(ha,arguments)),W(this,function(n){n[r][e].ease=t}))},Vl.delay=function(t){var e=this.id,r=this.namespace;return arguments.length<1?this.node()[r][e].delay:W(this,"function"==typeof t?function(n,o,i){n[r][e].delay=+t.call(n,n.__data__,o,i)}:(t=+t,function(n){n[r][e].delay=t}))},Vl.duration=function(t){var e=this.id,r=this.namespace;return arguments.length<1?this.node()[r][e].duration:W(this,"function"==typeof t?function(n,o,i){n[r][e].duration=Math.max(1,t.call(n,n.__data__,o,i))}:(t=Math.max(1,t),function(n){n[r][e].duration=t}))},Vl.each=function(t,e){var r=this.id,n=this.namespace;if(arguments.length<2){var o=$l,i=Hl;try{Hl=r,W(this,function(e,o,i){$l=e[n][r],t.call(e,e.__data__,o,i)})}finally{$l=o,Hl=i}}else W(this,function(o){var i=o[n][r];(i.event||(i.event=ha.dispatch("start","end","interrupt"))).on(t,e)});return this},Vl.transition=function(){for(var t,e,r,n,o=this.id,i=++Yl,a=this.namespace,s=[],l=0,u=this.length;l<u;l++){s.push(t=[]);for(var e=this[l],c=0,f=e.length;c<f;c++)(r=e[c])&&(n=r[a][o],ia(r,c,a,i,{time:n.time,ease:n.ease,delay:n.delay+n.duration,duration:n.duration})),t.push(r)}return ea(s,a,i)},ha.svg.axis=function(){function t(t){t.each(function(){var t,u=ha.select(this),c=this.__chart__||r,f=this.__chart__=r.copy(),d=null==l?f.ticks?f.ticks.apply(f,s):f.domain():l,h=null==e?f.tickFormat?f.tickFormat.apply(f,s):z:e,p=u.selectAll(".tick").data(d,f),v=p.enter().insert("g",".domain").attr("class","tick").style("opacity",qa),_=ha.transition(p.exit()).style("opacity",qa).remove(),m=ha.transition(p.order()).style("opacity",1),g=Math.max(o,0)+a,y=Xo(f),w=u.selectAll(".domain").data([0]),x=(w.enter().append("path").attr("class","domain"),ha.transition(w));v.append("line"),v.append("text");var b,M,k,A,E=v.select("line"),N=m.select("line"),S=p.select("text").text(h),C=v.select("text"),T=m.select("text"),O="top"===n||"left"===n?-1:1;if("bottom"===n||"top"===n?(t=aa,b="x",k="y",M="x2",A="y2",S.attr("dy",O<0?"0em":".71em").style("text-anchor","middle"),x.attr("d","M"+y[0]+","+O*i+"V0H"+y[1]+"V"+O*i)):(t=sa,b="y",k="x",M="y2",A="x2",S.attr("dy",".32em").style("text-anchor",O<0?"end":"start"),x.attr("d","M"+O*i+","+y[0]+"H0V"+y[1]+"H"+O*i)),E.attr(A,O*o),C.attr(k,O*g),N.attr(M,0).attr(A,O*o),T.attr(b,0).attr(k,O*g),f.rangeBand){var B=f,F=B.rangeBand()/2;c=f=function(t){return B(t)+F}}else c.rangeBand?c=f:_.call(t,f,c);v.call(t,c,f),m.call(t,f,f)})}var e,r=ha.scale.linear(),n=Wl,o=6,i=6,a=3,s=[10],l=null;return t.scale=function(e){return arguments.length?(r=e,t):r},t.orient=function(e){return arguments.length?(n=e in Gl?e+"":Wl,t):n},t.ticks=function(){return arguments.length?(s=va(arguments),t):s},t.tickValues=function(e){return arguments.length?(l=e,t):l},t.tickFormat=function(r){return arguments.length?(e=r,t):e},t.tickSize=function(e){var r=arguments.length;return r?(o=+e,i=+arguments[r-1],t):o},t.innerTickSize=function(e){return arguments.length?(o=+e,t):o},t.outerTickSize=function(e){return arguments.length?(i=+e,t):i},t.tickPadding=function(e){return arguments.length?(a=+e,t):a},t.tickSubdivide=function(){return arguments.length&&t},t};var Wl="bottom",Gl={top:1,right:1,bottom:1,left:1};ha.svg.brush=function(){function t(i){i.each(function(){var i=ha.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",o).on("touchstart.brush",o),a=i.selectAll(".background").data([0]);a.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),i.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var s=i.selectAll(".resize").data(v,z);s.exit().remove(),s.enter().append("g").attr("class",function(t){return"resize "+t}).style("cursor",function(t){return Xl[t]}).append("rect").attr("x",function(t){return/[ew]$/.test(t)?-3:null}).attr("y",function(t){return/^[ns]/.test(t)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),s.style("display",t.empty()?"none":null);var l,f=ha.transition(i),d=ha.transition(a);u&&(l=Xo(u),d.attr("x",l[0]).attr("width",l[1]-l[0]),r(f)),c&&(l=Xo(c),d.attr("y",l[0]).attr("height",l[1]-l[0]),n(f)),e(f)})}function e(t){t.selectAll(".resize").attr("transform",function(t){return"translate("+f[+/e$/.test(t)]+","+d[+/^s/.test(t)]+")"})}function r(t){t.select(".extent").attr("x",f[0]),t.selectAll(".extent,.n>rect,.s>rect").attr("width",f[1]-f[0])}function n(t){t.select(".extent").attr("y",d[0]),t.selectAll(".extent,.e>rect,.w>rect").attr("height",d[1]-d[0])}function o(){function o(){32==ha.event.keyCode&&(N||(y=null,T[0]-=f[1],T[1]-=d[1],N=2),S())}function v(){32==ha.event.keyCode&&2==N&&(T[0]+=f[1],T[1]+=d[1],N=0,S())}function _(){var t=ha.mouse(x),o=!1;w&&(t[0]+=w[0],t[1]+=w[1]),N||(ha.event.altKey?(y||(y=[(f[0]+f[1])/2,(d[0]+d[1])/2]),T[0]=f[+(t[0]<y[0])],T[1]=d[+(t[1]<y[1])]):y=null),A&&m(t,u,0)&&(r(M),o=!0),E&&m(t,c,1)&&(n(M),o=!0),o&&(e(M),z({type:"brush",mode:N?"move":"resize"}))}function m(t,e,r){var n,o,a=Xo(e),l=a[0],u=a[1],c=T[r],v=r?d:f,_=v[1]-v[0];if(N&&(l-=c,u-=_+c),n=(r?p:h)?Math.max(l,Math.min(u,t[r])):t[r],N?o=(n+=c)+_:(y&&(c=Math.max(l,Math.min(u,2*y[r]-n))),c<n?(o=n,n=c):o=c),v[0]!=n||v[1]!=o)return r?s=null:i=null,v[0]=n,v[1]=o,!0}function g(){_(),M.style("pointer-events","all").selectAll(".resize").style("display",t.empty()?"none":null),ha.select("body").style("cursor",null),O.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),C(),z({type:"brushend"})}var y,w,x=this,b=ha.select(ha.event.target),z=l.of(x,arguments),M=ha.select(x),k=b.datum(),A=!/^(n|s)$/.test(k)&&u,E=!/^(e|w)$/.test(k)&&c,N=b.classed("extent"),C=tt(x),T=ha.mouse(x),O=ha.select(a(x)).on("keydown.brush",o).on("keyup.brush",v);if(ha.event.changedTouches?O.on("touchmove.brush",_).on("touchend.brush",g):O.on("mousemove.brush",_).on("mouseup.brush",g),M.interrupt().selectAll("*").interrupt(),N)T[0]=f[0]-T[0],T[1]=d[0]-T[1];else if(k){var B=+/w$/.test(k),F=+/^n/.test(k);w=[f[1-B]-T[0],d[1-F]-T[1]],T[0]=f[B],T[1]=d[F]}else ha.event.altKey&&(y=T.slice());M.style("pointer-events","none").selectAll(".resize").style("display",null),ha.select("body").style("cursor",b.style("cursor")),z({type:"brushstart"}),_()}var i,s,l=T(t,"brushstart","brush","brushend"),u=null,c=null,f=[0,0],d=[0,0],h=!0,p=!0,v=Jl[0];return t.event=function(t){t.each(function(){var t=l.of(this,arguments),e={x:f,y:d,i:i,j:s},r=this.__chart__||e;this.__chart__=e,Hl?ha.select(this).transition().each("start.brush",function(){i=r.i,s=r.j,f=r.x,d=r.y,t({type:"brushstart"})}).tween("brush:brush",function(){var r=kn(f,e.x),n=kn(d,e.y);return i=s=null,function(o){f=e.x=r(o),d=e.y=n(o),t({type:"brush",mode:"resize"})}}).each("end.brush",function(){i=e.i,s=e.j,t({type:"brush",mode:"resize"}),t({type:"brushend"})}):(t({type:"brushstart"}),t({type:"brush",mode:"resize"}),t({type:"brushend"}))})},t.x=function(e){return arguments.length?(u=e,v=Jl[!u<<1|!c],t):u},t.y=function(e){return arguments.length?(c=e,v=Jl[!u<<1|!c],t):c},t.clamp=function(e){return arguments.length?(u&&c?(h=!!e[0],p=!!e[1]):u?h=!!e:c&&(p=!!e),t):u&&c?[h,p]:u?h:c?p:null},t.extent=function(e){var r,n,o,a,l;return arguments.length?(u&&(r=e[0],n=e[1],c&&(r=r[0],n=n[0]),i=[r,n],u.invert&&(r=u(r),n=u(n)),n<r&&(l=r,r=n,n=l),r==f[0]&&n==f[1]||(f=[r,n])),c&&(o=e[0],a=e[1],u&&(o=o[1],a=a[1]),s=[o,a],c.invert&&(o=c(o),a=c(a)),a<o&&(l=o,o=a,a=l),o==d[0]&&a==d[1]||(d=[o,a])),t):(u&&(i?(r=i[0],n=i[1]):(r=f[0],n=f[1],u.invert&&(r=u.invert(r),n=u.invert(n)),n<r&&(l=r,r=n,n=l))),c&&(s?(o=s[0],a=s[1]):(o=d[0],a=d[1],c.invert&&(o=c.invert(o),a=c.invert(a)),a<o&&(l=o,o=a,a=l))),u&&c?[[r,o],[n,a]]:u?[r,n]:c&&[o,a])},t.clear=function(){return t.empty()||(f=[0,0],d=[0,0],i=s=null),t},t.empty=function(){return!!u&&f[0]==f[1]||!!c&&d[0]==d[1]},ha.rebind(t,l,"on")};var Xl={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Jl=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],Kl=ms.format=zs.timeFormat,Ql=Kl.utc,tu=Ql("%Y-%m-%dT%H:%M:%S.%LZ");Kl.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?la:tu,la.parse=function(t){var e=new Date(t);return isNaN(e)?null:e},la.toString=tu.toString,ms.second=Zt(function(t){return new gs(1e3*Math.floor(t/1e3))},function(t,e){t.setTime(t.getTime()+1e3*Math.floor(e))},function(t){return t.getSeconds()}),ms.seconds=ms.second.range,ms.seconds.utc=ms.second.utc.range,ms.minute=Zt(function(t){return new gs(6e4*Math.floor(t/6e4))},function(t,e){t.setTime(t.getTime()+6e4*Math.floor(e))},function(t){return t.getMinutes()}),ms.minutes=ms.minute.range,ms.minutes.utc=ms.minute.utc.range,ms.hour=Zt(function(t){var e=t.getTimezoneOffset()/60;return new gs(36e5*(Math.floor(t/36e5-e)+e))},function(t,e){t.setTime(t.getTime()+36e5*Math.floor(e))},function(t){return t.getHours()}),ms.hours=ms.hour.range,ms.hours.utc=ms.hour.utc.range,ms.month=Zt(function(t){return t=ms.day(t),t.setDate(1),t},function(t,e){t.setMonth(t.getMonth()+e)},function(t){return t.getMonth()}),ms.months=ms.month.range,ms.months.utc=ms.month.utc.range;var eu=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],ru=[[ms.second,1],[ms.second,5],[ms.second,15],[ms.second,30],[ms.minute,1],[ms.minute,5],[ms.minute,15],[ms.minute,30],[ms.hour,1],[ms.hour,3],[ms.hour,6],[ms.hour,12],[ms.day,1],[ms.day,2],[ms.week,1],[ms.month,1],[ms.month,3],[ms.year,1]],nu=Kl.multi([[".%L",function(t){
return t.getMilliseconds()}],[":%S",function(t){return t.getSeconds()}],["%I:%M",function(t){return t.getMinutes()}],["%I %p",function(t){return t.getHours()}],["%a %d",function(t){return t.getDay()&&1!=t.getDate()}],["%b %d",function(t){return 1!=t.getDate()}],["%B",function(t){return t.getMonth()}],["%Y",Fe]]),ou={range:function(t,e,r){return ha.range(Math.ceil(t/r)*r,+e,r).map(ca)},floor:z,ceil:z};ru.year=ms.year,ms.scale=function(){return ua(ha.scale.linear(),ru,nu)};var iu=ru.map(function(t){return[t[0].utc,t[1]]}),au=Ql.multi([[".%L",function(t){return t.getUTCMilliseconds()}],[":%S",function(t){return t.getUTCSeconds()}],["%I:%M",function(t){return t.getUTCMinutes()}],["%I %p",function(t){return t.getUTCHours()}],["%a %d",function(t){return t.getUTCDay()&&1!=t.getUTCDate()}],["%b %d",function(t){return 1!=t.getUTCDate()}],["%B",function(t){return t.getUTCMonth()}],["%Y",Fe]]);iu.year=ms.year.utc,ms.scale.utc=function(){return ua(ha.scale.linear(),iu,au)},ha.text=Ot(function(t){return t.responseText}),ha.json=function(t,e){return Bt(t,"application/json",fa,e)},ha.html=function(t,e){return Bt(t,"text/html",da,e)},ha.xml=Ot(function(t){return t.responseXML}),this.d3=ha,n=ha,o="function"==typeof n?n.call(e,r,e,t):n,!(void 0!==o&&(t.exports=o))}()},function(t,e){!function(){function e(t){var e=Array.isArray(t)?{label:t[0],value:t[1]}:"object"==typeof t&&"label"in t&&"value"in t?t:{label:t,value:t};this.label=e.label||e.value,this.value=e.value}function r(t,e,r){for(var n in e){var o=e[n],i=t.input.getAttribute("data-"+n.toLowerCase());"number"==typeof o?t[n]=parseInt(i):o===!1?t[n]=null!==i:o instanceof Function?t[n]=null:t[n]=i,t[n]||0===t[n]||(t[n]=n in r?r[n]:o)}}function n(t,e){return"string"==typeof t?(e||document).querySelector(t):t||null}function o(t,e){return s.call((e||document).querySelectorAll(t))}function i(){o("input.awesomplete").forEach(function(t){new a(t)})}var a=function(t,e){var o=this;this.input=n(t),this.input.setAttribute("autocomplete","off"),this.input.setAttribute("aria-autocomplete","list"),e=e||{},r(this,{minChars:2,maxItems:10,autoFirst:!1,data:a.DATA,filter:a.FILTER_CONTAINS,sort:a.SORT_BYLENGTH,item:a.ITEM,replace:a.REPLACE},e),this.index=-1,this.container=n.create("div",{className:"awesomplete",around:t}),this.ul=n.create("ul",{hidden:"hidden",inside:this.container}),this.status=n.create("span",{className:"visually-hidden",role:"status","aria-live":"assertive","aria-relevant":"additions",inside:this.container}),n.bind(this.input,{input:this.evaluate.bind(this),blur:this.close.bind(this,{reason:"blur"}),keydown:function(t){var e=t.keyCode;o.opened&&(13===e&&o.selected?(t.preventDefault(),o.select()):27===e?o.close({reason:"esc"}):38!==e&&40!==e||(t.preventDefault(),o[38===e?"previous":"next"]()))}}),n.bind(this.input.form,{submit:this.close.bind(this,{reason:"submit"})}),n.bind(this.ul,{mousedown:function(t){var e=t.target;if(e!==this){for(;e&&!/li/i.test(e.nodeName);)e=e.parentNode;e&&0===t.button&&(t.preventDefault(),o.select(e,t.target))}}}),this.input.hasAttribute("list")?(this.list="#"+this.input.getAttribute("list"),this.input.removeAttribute("list")):this.list=this.input.getAttribute("data-list")||e.list||[],a.all.push(this)};a.prototype={set list(t){if(Array.isArray(t))this._list=t;else if("string"==typeof t&&t.indexOf(",")>-1)this._list=t.split(/\s*,\s*/);else if(t=n(t),t&&t.children){var e=[];s.apply(t.children).forEach(function(t){if(!t.disabled){var r=t.textContent.trim(),n=t.value||r,o=t.label||r;""!==n&&e.push({label:o,value:n})}}),this._list=e}document.activeElement===this.input&&this.evaluate()},get selected(){return this.index>-1},get opened(){return!this.ul.hasAttribute("hidden")},close:function(t){this.opened&&(this.ul.setAttribute("hidden",""),this.index=-1,n.fire(this.input,"awesomplete-close",t||{}))},open:function(){this.ul.removeAttribute("hidden"),this.autoFirst&&this.index===-1&&this.goto(0),n.fire(this.input,"awesomplete-open")},next:function(){var t=this.ul.children.length;this.goto(this.index<t-1?this.index+1:-1)},previous:function(){var t=this.ul.children.length;this.goto(this.selected?this.index-1:t-1)},goto:function(t){var e=this.ul.children;this.selected&&e[this.index].setAttribute("aria-selected","false"),this.index=t,t>-1&&e.length>0&&(e[t].setAttribute("aria-selected","true"),this.status.textContent=e[t].textContent,n.fire(this.input,"awesomplete-highlight",{text:this.suggestions[this.index]}))},select:function(t,e){if(t?this.index=n.siblingIndex(t):t=this.ul.children[this.index],t){var r=this.suggestions[this.index],o=n.fire(this.input,"awesomplete-select",{text:r,origin:e||t});o&&(this.replace(r),this.close({reason:"select"}),n.fire(this.input,"awesomplete-selectcomplete",{text:r}))}},evaluate:function(){var t=this,r=this.input.value;r.length>=this.minChars&&this._list.length>0?(this.index=-1,this.ul.innerHTML="",this.suggestions=this._list.map(function(n){return new e(t.data(n,r))}).filter(function(e){return t.filter(e,r)}).sort(this.sort).slice(0,this.maxItems),this.suggestions.forEach(function(e){t.ul.appendChild(t.item(e,r))}),0===this.ul.children.length?this.close({reason:"nomatches"}):this.open()):this.close({reason:"nomatches"})}},a.all=[],a.FILTER_CONTAINS=function(t,e){return RegExp(n.regExpEscape(e.trim()),"i").test(t)},a.FILTER_STARTSWITH=function(t,e){return RegExp("^"+n.regExpEscape(e.trim()),"i").test(t)},a.SORT_BYLENGTH=function(t,e){return t.length!==e.length?t.length-e.length:t<e?-1:1},a.ITEM=function(t,e){var r=""===e?t:t.replace(RegExp(n.regExpEscape(e.trim()),"gi"),"<mark>$&</mark>");return n.create("li",{innerHTML:r,"aria-selected":"false"})},a.REPLACE=function(t){this.input.value=t.value},a.DATA=function(t){return t},Object.defineProperty(e.prototype=Object.create(String.prototype),"length",{get:function(){return this.label.length}}),e.prototype.toString=e.prototype.valueOf=function(){return""+this.label};var s=Array.prototype.slice;return n.create=function(t,e){var r=document.createElement(t);for(var o in e){var i=e[o];if("inside"===o)n(i).appendChild(r);else if("around"===o){var a=n(i);a.parentNode.insertBefore(r,a),r.appendChild(a)}else o in r?r[o]=i:r.setAttribute(o,i)}return r},n.bind=function(t,e){if(t)for(var r in e){var n=e[r];r.split(/\s+/).forEach(function(e){t.addEventListener(e,n)})}},n.fire=function(t,e,r){var n=document.createEvent("HTMLEvents");n.initEvent(e,!0,!0);for(var o in r)n[o]=r[o];return t.dispatchEvent(n)},n.regExpEscape=function(t){return t.replace(/[-\\^$*+?.()|[\]{}]/g,"\\$&")},n.siblingIndex=function(t){for(var e=0;t=t.previousElementSibling;e++);return e},"undefined"!=typeof Document&&("loading"!==document.readyState?i():document.addEventListener("DOMContentLoaded",i)),a.$=n,a.$$=o,"undefined"!=typeof self&&(self.Awesomplete=a),"object"==typeof t&&t.exports&&(t.exports=a),a}()},function(t,e,r){var n=r(258);"string"==typeof n&&(n=[[t.id,n,""]]);r(260)(n,{});n.locals&&(t.exports=n.locals)},function(t,e,r){e=t.exports=r(259)(),e.push([t.id,".d3-slider{position:relative;font-family:Verdana,Arial,sans-serif;font-size:1.1em;border:1px solid #aaa;z-index:2}.d3-slider-horizontal{height:.8em}.d3-slider-range{height:.8em}.d3-slider-range,.d3-slider-range-vertical{background:#2980b9;left:0;right:0;position:absolute}.d3-slider-range-vertical{top:0}.d3-slider-vertical{width:.8em;height:100px}.d3-slider-handle{position:absolute;width:1.2em;height:1.2em;border:1px solid #d3d3d3;border-radius:4px;background:#eee;background:linear-gradient(180deg,#eee 0,#ddd);z-index:3}.d3-slider-handle:hover{border:1px solid #999}.d3-slider-horizontal .d3-slider-handle{top:-.3em;margin-left:-.6em}.d3-slider-axis{position:relative;z-index:1}.d3-slider-axis-bottom{top:.8em}.d3-slider-axis-right{left:.8em}.d3-slider-axis path{stroke-width:0;fill:none}.d3-slider-axis line{fill:none;stroke:#aaa;shape-rendering:crispEdges}.d3-slider-axis text{font-size:11px}.d3-slider-vertical .d3-slider-handle{left:-.25em;margin-left:0;margin-bottom:-.6em}",""])},function(t,e){t.exports=function(){var t=[];return t.toString=function(){for(var t=[],e=0;e<this.length;e++){var r=this[e];r[2]?t.push("@media "+r[2]+"{"+r[1]+"}"):t.push(r[1])}return t.join("")},t.i=function(e,r){"string"==typeof e&&(e=[[null,e,""]]);for(var n={},o=0;o<this.length;o++){var i=this[o][0];"number"==typeof i&&(n[i]=!0)}for(o=0;o<e.length;o++){var a=e[o];"number"==typeof a[0]&&n[a[0]]||(r&&!a[2]?a[2]=r:r&&(a[2]="("+a[2]+") and ("+r+")"),t.push(a))}},t}},function(t,e,r){function n(t,e){for(var r=0;r<t.length;r++){var n=t[r],o=h[n.id];if(o){o.refs++;for(var i=0;i<o.parts.length;i++)o.parts[i](n.parts[i]);for(;i<n.parts.length;i++)o.parts.push(u(n.parts[i],e))}else{for(var a=[],i=0;i<n.parts.length;i++)a.push(u(n.parts[i],e));h[n.id]={id:n.id,refs:1,parts:a}}}}function o(t){for(var e=[],r={},n=0;n<t.length;n++){var o=t[n],i=o[0],a=o[1],s=o[2],l=o[3],u={css:a,media:s,sourceMap:l};r[i]?r[i].parts.push(u):e.push(r[i]={id:i,parts:[u]})}return e}function i(t,e){var r=_(),n=y[y.length-1];if("top"===t.insertAt)n?n.nextSibling?r.insertBefore(e,n.nextSibling):r.appendChild(e):r.insertBefore(e,r.firstChild),y.push(e);else{if("bottom"!==t.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");r.appendChild(e)}}function a(t){t.parentNode.removeChild(t);var e=y.indexOf(t);e>=0&&y.splice(e,1)}function s(t){var e=document.createElement("style");return e.type="text/css",i(t,e),e}function l(t){var e=document.createElement("link");return e.rel="stylesheet",i(t,e),e}function u(t,e){var r,n,o;if(e.singleton){var i=g++;r=m||(m=s(e)),n=c.bind(null,r,i,!1),o=c.bind(null,r,i,!0)}else t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(r=l(e),n=d.bind(null,r),o=function(){a(r),r.href&&URL.revokeObjectURL(r.href)}):(r=s(e),n=f.bind(null,r),o=function(){a(r)});return n(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;n(t=e)}else o()}}function c(t,e,r,n){var o=r?"":n.css;if(t.styleSheet)t.styleSheet.cssText=w(e,o);else{var i=document.createTextNode(o),a=t.childNodes;a[e]&&t.removeChild(a[e]),a.length?t.insertBefore(i,a[e]):t.appendChild(i)}}function f(t,e){var r=e.css,n=e.media;if(n&&t.setAttribute("media",n),t.styleSheet)t.styleSheet.cssText=r;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(r))}}function d(t,e){var r=e.css,n=e.sourceMap;n&&(r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(n))))+" */");var o=new Blob([r],{type:"text/css"}),i=t.href;t.href=URL.createObjectURL(o),i&&URL.revokeObjectURL(i)}var h={},p=function(t){var e;return function(){return"undefined"==typeof e&&(e=t.apply(this,arguments)),e}},v=p(function(){return/msie [6-9]\b/.test(self.navigator.userAgent.toLowerCase())}),_=p(function(){return document.head||document.getElementsByTagName("head")[0]}),m=null,g=0,y=[];t.exports=function(t,e){e=e||{},"undefined"==typeof e.singleton&&(e.singleton=v()),"undefined"==typeof e.insertAt&&(e.insertAt="bottom");var r=o(t);return n(r,e),function(t){for(var i=[],a=0;a<r.length;a++){var s=r[a],l=h[s.id];l.refs--,i.push(l)}if(t){var u=o(t);n(u,e)}for(var a=0;a<i.length;a++){var l=i[a];if(0===l.refs){for(var c=0;c<l.parts.length;c++)l.parts[c]();delete h[l.id]}}}};var w=function(){var t=[];return function(e,r){return t[e]=r,t.filter(Boolean).join("\n")}}()},function(t,e,r){var n=r(262);"string"==typeof n&&(n=[[t.id,n,""]]);r(260)(n,{});n.locals&&(t.exports=n.locals)},function(t,e,r){e=t.exports=r(259)(),e.push([t.id,'[hidden]{display:none}.visually-hidden{position:absolute;clip:rect(0,0,0,0)}div.awesomplete{display:inline-block;position:relative}div.awesomplete>input{display:block}div.awesomplete>ul{position:absolute;left:0;z-index:1;min-width:100%;box-sizing:border-box;list-style:none;padding:0;border-radius:.3em;margin:.2em 0 0;background:hsla(0,0%,100%,.9);background:linear-gradient(to bottom right,#fff,hsla(0,0%,100%,.8));border:1px solid rgba(0,0,0,.3);box-shadow:.05em .2em .6em rgba(0,0,0,.2);text-shadow:none}div.awesomplete>ul:empty,div.awesomplete>ul[hidden]{display:none}@supports (transform:scale(0)){div.awesomplete>ul{transition:.3s cubic-bezier(.4,.2,.5,1.4);transform-origin:1.43em -.43em}div.awesomplete>ul:empty,div.awesomplete>ul[hidden]{opacity:0;transform:scale(0);display:block;transition-timing-function:ease}}div.awesomplete>ul:before{content:"";position:absolute;top:-.43em;left:1em;width:0;height:0;padding:.4em;background:#fff;border:inherit;border-right:0;border-bottom:0;-webkit-transform:rotate(45deg);transform:rotate(45deg)}div.awesomplete>ul>li{position:relative;padding:.2em .5em;cursor:pointer}div.awesomplete>ul>li:hover{background:#b8d3e0;color:#000}div.awesomplete>ul>li[aria-selected=true]{background:#3d6d8f;color:#fff}div.awesomplete mark{background:#eaff00}div.awesomplete li:hover mark{background:#b5d100}div.awesomplete li[aria-selected=true] mark{background:#3d6b00;color:inherit}',""])},function(t,e,r){"use strict";var n=r(224),o=r(264),i=r(269),a=r(270),s=r(271),l=r(272),u=r(274),c=r(276),f=r(277),d=r(3);t.exports=function t(e){var r=e.params,t=d3.select(r.root+" .sidebar_wrapper");r.viz.is_expand&&t.style("display","none"),t.append("div").classed("title_section",!0),null!=r.sidebar.title&&t.select(".title_section").append("h4").style("margin-left","20px").style("margin-top","5px").style("margin-bottom","0px").text(r.sidebar.title),t.append("div").style("padding-right","2px").classed("about_section",!0),null!=r.sidebar.about&&t.select(".about_section").append("h5").classed("sidebar_text",!0).style("margin-left","7px").style("margin-top","5px").style("margin-bottom","2px").style("text-align","justify").html(r.sidebar.about),t.append("div").classed("icons_section",!0).style("text-align","center"),e.params.make_modals&&u(r),r.sidebar.icons&&l(e,t),a(r,t),i(t,r),c(t);var h=d.keys(r.viz.possible_filters);h.indexOf("enr_score_type")>-1&&h.sort(function(t,e){return t.toLowerCase().localeCompare(e.toLowerCase())}),e.slider_functions={},d.each(h,function(t){o(e,t)}),n(e),null!==r.ini_view&&(s(r),r.ini_view=null),f(e)}},function(t,e,r){"use strict";var n=r(265),o=r(268);t.exports=function(t,e){var r=t.params,i=d3.select(r.root+" .sidebar_wrapper").append("div").classed("div_filters",!0).style("padding-left","10px").style("padding-right","10px");"numerical"==r.viz.possible_filters[e]?n(t,e,i):"categorical"==r.viz.possible_filters[e]&&o(t,e,i)}},function(t,e,r){"use strict";var n=r(247),o=r(266),i=r(6),a=r(64);d3.slider=r(254);var s=r(3);t.exports=function(t,e,r){var l=t.params,u={},c=s.keys(l.viz.possible_filters);s.each(c,function(t){if(t!=e){var r=i(l.viz.filter_data,t);u[t]=r}});var f=n(l,e);r.append("div").classed("title_"+e,!0).classed("sidebar_text",!0).classed("slider_description",!0).style("margin-top","5px").style("margin-bottom","3px").text(f.text+f.state+f.suffix),r.append("div").classed("slider_"+e,!0).classed("slider",!0).attr("current_state",f.state);var d=l.network_data.views,h=a(l,d,u);h=h.sort(function(t,r){return r[e]-t[e]});var p=h.length-1,v=0;if(null!==l.requested_view&&e in l.requested_view){var _=l.requested_view[e];if("all"!=_){var m=h.map(function(t){return t[e]}).indexOf(_);m>0&&(v=m)}}var g=d3.slider().value(v).min(0).max(p).step(1).on("slide",function(r,n){y(t,e,h,n)}).on("slideend",function(r,n){y(t,e,h,n)});t.slider_functions[e]=g,d3.select(t.params.root+" .slider_"+e).call(g);var y=s.debounce(o,800)}},function(t,e,r){"use strict";var n=r(209),o=r(246),i=r(267),a=r(66),s=r(3);t.exports=function(t,e,r,l){if(d3.select(t.params.viz.viz_svg).classed("running_update")===!1){var u=t.params,c=r[l][e];o(t,e,c),u=i(u);var f={};if(f[e]=c,f=a(u,f),s.has(r[0],"enr_score_type")){var d=d3.select(u.root+" .toggle_enr_score_type").attr("current_state");f.enr_score_type=d}n(t,f)}}},function(t,e,r){"use strict";var n=r(3);t.exports=function(t){var e;return n.each(["row","col"],function(r){e="row"===r?"col":"row",d3.select(t.root+" .toggle_"+e+"_order .active").empty()===!1?t.viz.inst_order[r]=d3.select(t.root+" .toggle_"+e+"_order").select(".active").attr("name"):t.viz.inst_order[r]="clust"}),t}},function(t,e,r){"use strict";var n=r(66);t.exports=function(t,e,r,o){var i=o.append("div").classed("categorical_filter",!0).classed("toggle_"+r,!0).classed("btn-group-vertical",!0).style("width","100%").style("margin-top","10px").attr("current_state","combined_score"),a=e.viz.filter_data[r],s={combined_score:"Combined Score",pval:"P-Value",zscore:"Z-score"};i.selectAll("button").data(a).enter().append("button").attr("type","button").classed("btn",!0).classed("btn-primary",!0).classed(".filter_button",!0).classed("active",function(t){var e=!1;return"combined_score"==t&&(e=!0),e}).attr("name",function(t){return t}).html(function(t){return s[t]}),$(e.root+" .categorical_filter .btn").off().click(function(){d3.selectAll(e.root+" .categorical_filter .btn").classed("active",!1),d3.select(this).classed("active",!0);var t=d3.select(this).attr("name"),r={enr_score_type:t};n(e,r),d3.select(e.root+" .toggle_enr_score_type").attr("current_state",t)})}},function(t,e){"use strict";t.exports=function(t,e){var r=t.append("div").classed("gene_search_container",!0).style("padding-left","10px").style("padding-right","10px").style("margin-top","10px");r.append("input").classed("form-control",!0).classed("gene_search_box",!0).classed("sidebar_text",!0).attr("type","text").attr("placeholder",e.sidebar.row_search.placeholder).style("height",e.sidebar.row_search.box.height+"px").style("margin-top","10px"),r.append("div").classed("gene_search_button",!0).style("margin-top","5px").attr("data-toggle","buttons").append("button").classed("sidebar_text",!0).html("Search").attr("type","button").classed("btn",!0).classed("btn-primary",!0).classed("submit_gene_button",!0).style("width","100%").style("font-size","14px")}},function(t,e,r){"use strict";var n=r(3);t.exports=function(t,e){var r,o,i,a,s,l={row:"Row",col:"Column",both:""},u=e.append("div").style("padding-left","10px").style("padding-right","10px").classed("reorder_section",!0);s=t.sim_mat?["both"]:["row","col"],n.each(s,function(e){r={clust:"Cluster",rank:"Rank by Sum",rankvar:"Rank by Variance",ini:"Initial Order",alpha:"Alphabetically"};var s;s="row"===e?"col":"row",o=Object.keys(t.matrix.orders);var c=[];n.each(o,function(t){t.indexOf(s)>-1&&(t=t.replace("_row","").replace("_col",""),t.indexOf("cat_")<0&&c.push(t))}),n.keys(t.viz.filter_data).indexOf("enr_score_type")>-1&&(c=["clust","rank"]),c=n.uniq(c),c=c.sort();var f;f="both"!=e?" Order":"Reorder Matrix",u.append("div").classed("sidebar_button_text",!0).style("clear","both").style("margin-top","10px").html(l[e]+f),a=u.append("div").classed("btn-group-vertical",!0).style("width","100%").classed("toggle_"+e+"_order",!0).attr("role","group"),a.selectAll(".button").data(c).enter().append("button").attr("type","button").classed("btn",!0).classed("btn-primary",!0).classed("sidebar_button_text",!0).classed("active",function(e){return i=!1,e==t.viz.inst_order[s]&&(i=!0),i}).attr("name",function(t){return t}).html(function(t){return r[t]})})}},function(t,e,r){"use strict";var n=r(247),o=r(3);t.exports=function(t){o.each(o.keys(t.ini_view),function(e){var r=t.ini_view[e],o=t.viz.possible_filters[e];if("numerical"===o){"all"!=r&&(r=parseInt(r,10)),t.viz.filter_data[e].indexOf(r)<=-1&&(r="all");var i=n(t,e);d3.select(t.root+" .title_"+e).text(i.text+r+i.suffix),d3.select(t.root+" .slider_"+e).attr("current_state",r)}})}},function(t,e,r){"use strict";var n=r(249),o=r(146),i=r(253),a=r(273);t.exports=function(t,e){function r(){d3.select(s.root+" .expand_button").style("opacity",0);var t=d3.select(s.root+" .viz_svg").attr("title","test2").attr("version",1.1).attr("xmlns","http://www.w3.org/2000/svg").node().parentNode.innerHTML,e=new Blob([t],{type:"image/svg+xml"});l(e,"clustergrammer.svg"),d3.select(s.root+" .expand_button").style("opacity",.4)}var s=t.params,l=n(),u=e.select(".icons_section").style("margin-top","7px").style("margin-left","5%"),c="22%",f="0px",d="0px";u.append("div").classed("clust_icon",!0).style("float","left").style("width",c).style("padding-left",f).style("padding-right",d).append("i").classed("fa",!0).classed("fa-share-alt",!0).classed("icon_buttons",!0).style("font-size","25px").on("click",function(){$(s.root+" .share_info").modal("toggle"),$(".share_url").val(window.location.href)}).classed("sidebar_tooltip",!0).append("span").classed("sidebar_tooltip_text",!0).html("Share").style("left","0%"),u.append("div").classed("clust_icon",!0).style("float","left").style("width",c).style("padding-left",f).style("padding-right",d).append("i").classed("fa",!0).classed("fa-camera",!0).classed("icon_buttons",!0).style("font-size","25px").on("click",function(){$(s.root+" .picture_info").modal("toggle")}).classed("sidebar_tooltip",!0).append("span").classed("sidebar_tooltip_text",!0).html("Take snapshot").style("left","-100%"),u.append("div").classed("clust_icon",!0).style("float","left").style("width",c).style("padding-left",f).style("padding-right",d).append("i").classed("fa",!0).classed("fa fa-cloud-download",!0).classed("icon_buttons",!0).style("font-size","25px").on("click",function(){t.save_matrix()}).classed("sidebar_tooltip",!0).append("span").classed("sidebar_tooltip_text",!0).html("Download matrix").style("left","-200%"),u.append("div").classed("clust_icon",!0).style("float","left").style("width",c).style("padding-left",f).style("padding-right","-5px").append("i").classed("fa",!0).classed("fa-crop",!0).classed("crop_button",!0).classed("icon_buttons",!0).style("font-size","25px").on("click",function(){if(t.params.dendro_filter.row===!1&&t.params.dendro_filter.col===!1){var e=d3.select(this).classed("fa-crop"),r=d3.select(this).classed("fa-undo");e&&(t.params.crop_filter_nodes={},t.params.crop_filter_nodes.row_nodes=t.params.network_data.row_nodes,t.params.crop_filter_nodes.col_nodes=t.params.network_data.col_nodes,t.brush_crop_matrix(),d3.select(this).classed("active_cropping")===!1?d3.select(this).classed("active_cropping",!0).style("color","red"):(d3.select(this).classed("active_cropping",!1).style("color","#337ab7"),i(t))),r&&(d3.select(s.root+" .crop_button").style("color","#337ab7").classed("fa-crop",!0).classed("fa-undo",!1),t.filter_viz_using_nodes(t.params.crop_filter_nodes),d3.select(t.params.root+" .col_dendro_icons_container").style("display","block"),d3.select(t.params.root+" .row_dendro_icons_container").style("display","block")),o(t,0,0,1)}}).classed("sidebar_tooltip",!0).append("span").classed("sidebar_tooltip_text",!0).html("Crop matrix").style("left","-400%"),d3.select(s.root+" .download_buttons").append("p").append("a").html("Download SVG").on("click",function(){r()});var h="svg_"+s.root.replace("#","");d3.select(s.root+" .download_buttons").append("p").append("a").html("Download PNG").on("click",function(){d3.select(s.root+" .expand_button").style("opacity",0),a.saveSvgAsPng(document.getElementById(h),"clustergrammer.png"),d3.select(s.root+" .expand_button").style("opacity",.4)})}},function(t,e,r){var n;!function(){function o(t){return t instanceof HTMLElement||t instanceof SVGElement}function i(t){if(!o(t))throw new Error("an HTMLElement or SVGElement is required; got "+t)}function a(t){return t&&0==t.lastIndexOf("http",0)&&t.lastIndexOf(window.location.host)==-1}function s(t,e){i(t);var r=t.querySelectorAll("image"),n=r.length,o=function(){0===n&&e()};o();for(var s=0;s<r.length;s++)!function(t){var e=t.getAttributeNS("http://www.w3.org/1999/xlink","href");if(e&&a(e.value))return void console.warn("Cannot render embedded images linking to external hosts: "+e.value);var r=document.createElement("canvas"),i=r.getContext("2d"),s=new Image;s.crossOrigin="anonymous",e=e||t.getAttribute("href"),e?(s.src=e,s.onload=function(){r.width=s.width,r.height=s.height,i.drawImage(s,0,0),t.setAttributeNS("http://www.w3.org/1999/xlink","href",r.toDataURL("image/png")),n--,o()},s.onerror=function(){console.log("Could not load "+e),n--,o()}):(n--,o())}(r[s])}function l(t,e,r){function n(t){for(var e={woff2:"font/woff2",woff:"font/woff",otf:"application/x-font-opentype",ttf:"application/x-font-ttf",eot:"application/vnd.ms-fontobject",sfnt:"application/font-sfnt",svg:"image/svg+xml"},r=Object.keys(e),n=0;n<r.length;++n){var o=r[n];if(t.indexOf("."+o)>0)return e[o]}return console.error("Unknown font format for "+t+"; Fonts may not be working correctly"),"application/octet-stream"}function o(t){function e(e){function r(){var t=s.response,r=i(t);a(e,r)}function n(t){console.warn("Failed to load font from: "+e.url),console.warn(t),l+=e.text+"\n",o()}function a(e,r){var n='url("data:'+e.format+";base64,"+r+'")';l+=e.text.replace(e.fontUrlRegexp,n)+"\n",setTimeout(function(){o(t)},0)}var s=new XMLHttpRequest;s.addEventListener("load",r),s.addEventListener("error",n),s.addEventListener("abort",n),s.open("GET",e.url),s.responseType="arraybuffer",s.send()}if(t.length>0){var n=t.pop();e(n)}else r(l)}function i(t){for(var e="",r=new Uint8Array(t),n=r.byteLength,o=0;o<n;o++)e+=String.fromCharCode(r[o]);return window.btoa(e)}for(var a=e.selectorRemap,s=e.modifyStyle,l="",u=[],c=document.styleSheets,f=0;f<c.length;f++){try{var d=c[f].cssRules}catch(t){console.warn("Stylesheet could not be loaded: "+c[f].href);continue}if(null!=d)for(var h,p=0;p<d.length;p++,h=null){var v=d[p];if("undefined"!=typeof v.style){var _;try{_=v.selectorText}catch(t){console.warn('The following CSS rule has an invalid selector: "'+v+'"',t)}try{_&&(h=t.querySelector(_)||t.parentNode.querySelector(_))}catch(t){console.warn('Invalid CSS selector "'+_+'"',t)}if(h){var m=a?a(v.selectorText):v.selectorText,g=s?s(v.style.cssText):v.style.cssText;l+=m+" { "+g+" }\n"}else if(v.cssText.match(/^@font-face/)){var y=/url\(["']?(.+?)["']?\)/,w=v.cssText.match(y),x=w&&w[1]||"",b=x.match(/^data:/);b&&(x=""),x?(x.startsWith("../")?x=c[f].href+"/../"+x:x.startsWith("./")&&(x=c[f].href+"/."+x),u.push({text:v.cssText,fontUrlRegexp:y,format:n(x),url:x})):l+=v.cssText+"\n"}}}}o(u)}function u(t,e,r){var n=t.viewBox&&t.viewBox.baseVal&&t.viewBox.baseVal[r]||null!==e.getAttribute(r)&&!e.getAttribute(r).match(/%$/)&&parseInt(e.getAttribute(r))||t.getBoundingClientRect()[r]||parseInt(e.style[r])||parseInt(window.getComputedStyle(t).getPropertyValue(r));return"undefined"==typeof n||null===n||isNaN(parseFloat(n))?0:n}function c(t){return t=encodeURIComponent(t),t=t.replace(/%([0-9A-F]{2})/g,function(t,e){var r=String.fromCharCode("0x"+e);return"%"===r?"%25":r}),decodeURIComponent(t)}function f(t){for(var e=window.atob(t.split(",")[1]),r=t.split(",")[0].split(":")[1].split(";")[0],n=new ArrayBuffer(e.length),o=new Uint8Array(n),i=0;i<e.length;i++)o[i]=e.charCodeAt(i);return new Blob([n],{type:r})}var d="undefined"!=typeof e&&e||{}||this,h='<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd" [<!ENTITY nbsp "&#160;">]>';d.prepareSvg=function(t,e,r){i(t),e=e||{},e.scale=e.scale||1,e.responsive=e.responsive||!1;var n="http://www.w3.org/2000/xmlns/";s(t,function(){function o(t){var e=document.createElement("style");e.setAttribute("type","text/css"),e.innerHTML="<![CDATA[\n"+t+"\n]]>";var n=document.createElement("defs");if(n.appendChild(e),c.insertBefore(n,c.firstChild),r){var o=s.innerHTML;o=o.replace(/NS\d+:href/gi,'xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href'),r(o,i,a)}}var i,a,s=document.createElement("div"),c=t.cloneNode(!0);if("svg"==t.tagName)i=e.width||u(t,c,"width"),a=e.height||u(t,c,"height");else{if(!t.getBBox)return void console.error("Attempted to render non-SVG element",t);var f=t.getBBox();i=f.x+f.width,a=f.y+f.height,c.setAttribute("transform",c.getAttribute("transform").replace(/translate\(.*?\)/,""));var d=document.createElementNS("http://www.w3.org/2000/svg","svg");d.appendChild(c),c=d}c.setAttribute("version","1.1"),c.getAttribute("xmlns")||c.setAttributeNS(n,"xmlns","http://www.w3.org/2000/svg"),c.getAttribute("xmlns:xlink")||c.setAttributeNS(n,"xmlns:xlink","http://www.w3.org/1999/xlink"),e.responsive?(c.removeAttribute("width"),c.removeAttribute("height"),c.setAttribute("preserveAspectRatio","xMinYMin meet")):(c.setAttribute("width",i*e.scale),c.setAttribute("height",a*e.scale)),c.setAttribute("viewBox",[e.left||0,e.top||0,i,a].join(" "));for(var h=c.querySelectorAll("foreignObject > *"),p=0;p<h.length;p++)h[p].getAttribute("xmlns")||h[p].setAttributeNS(n,"xmlns","http://www.w3.org/1999/xhtml");s.appendChild(c),l(t,e,o)})},d.svgAsDataUri=function(t,e,r){d.prepareSvg(t,e,function(t){var e="data:image/svg+xml;base64,"+window.btoa(c(h+t));r&&r(e)})},d.svgAsPngUri=function(t,e,r){i(t),e=e||{},e.encoderType=e.encoderType||"image/png",e.encoderOptions=e.encoderOptions||.8;var n=function(t,n,o){var i=document.createElement("canvas"),a=i.getContext("2d");i.width=n,i.height=o,e.canvg?e.canvg(i,t):a.drawImage(t,0,0),e.backgroundColor&&(a.globalCompositeOperation="destination-over",a.fillStyle=e.backgroundColor,a.fillRect(0,0,i.width,i.height));var s;try{s=i.toDataURL(e.encoderType,e.encoderOptions)}catch(t){if("undefined"!=typeof SecurityError&&t instanceof SecurityError||"SecurityError"==t.name)return void console.error("Rendered SVG images cannot be downloaded in this browser.");throw t}r(s)};e.canvg?d.prepareSvg(t,e,n):d.svgAsDataUri(t,e,function(t){var e=new Image;e.onload=function(){n(e,e.width,e.height)},e.onerror=function(){console.error("There was an error loading the data URI as an image on the following SVG\n",window.atob(t.slice(26)),"\n","Open the following link to see browser's diagnosis\n",t)},e.src=t})},d.download=function(t,e){if(navigator.msSaveOrOpenBlob)navigator.msSaveOrOpenBlob(f(e),t);else{var r=document.createElement("a"),n="download"in r;if(n){r.download=t,r.style.display="none",document.body.appendChild(r);try{var o=f(e),i=URL.createObjectURL(o);r.href=i,r.onclick=function(){requestAnimationFrame(function(){URL.revokeObjectURL(i)})}}catch(t){console.warn("This browser does not support object URLs. Falling back to string URL."),r.href=e}r.click(),document.body.removeChild(r)}else window.open(e,"_temp","menubar=no,toolbar=no,status=no")}},d.saveSvg=function(t,e,r){i(t),r=r||{},d.svgAsDataUri(t,r,function(t){d.download(e,t)})},d.saveSvgAsPng=function(t,e,r){i(t),r=r||{},d.svgAsPngUri(t,r,function(t){d.download(e,t)})},n=function(){return d}.call(e,r,e,t),!(void 0!==n&&(t.exports=n))}()},function(t,e,r){"use strict";var n=r(275);t.exports=function(t){var e=n(t,"share_info");e.header.append("a").attr("target","_blank").attr("href","/clustergrammer/"),e.header.append("h4").classed("modal-title",!0).html("Share the visualization using the current URL:"),e.body.append("input").classed("bootstrap_highlight",!0).classed("share_url",!0);var r=n(t,"picture_info");r.header.append("h4").classed("modal-title",!0).html("Save a snapshot of the visualization"),r.body.append("div").classed("download_buttons",!0);var o=n(t,"dendro_info");o.header.append("h4").classed("modal-title",!0).html("Cluster Information"),o.body.append("g").classed("cluster_info_container",!0),o.body.append("div").classed("dendro_text",!0).append("input").classed("bootstrap_highlight",!0).classed("current_names",!0).style("width","100%")}},function(t,e){"use strict";t.exports=function(t,e){var r={},n=d3.select(t.root).append("div").classed("modal",!0).classed("fade",!0).classed(e,!0).attr("role","dialog"),o=n.append("div").classed("modal-dialog",!0),i=o.append("div").classed("modal-content",!0);return r.header=i.append("div").classed("modal-header",!0),r.header.append("button").attr("type","button").classed("close",!0).attr("data-dismiss","modal").html("&times;"),r.body=i.append("div").classed("modal-body",!0),r}},function(t,e){"use strict";t.exports=function(t){var e=t.append("div").classed("opacity_slider_container",!0).style("margin-top","5px").style("padding-left","10px").style("padding-right","10px");
e.append("div").classed("sidebar_text",!0).classed("opacity_slider_text",!0).style("margin-bottom","3px").text("Opacity Slider"),e.append("div").classed("slider",!0).classed("opacity_slider",!0)}},function(t,e,r){"use strict";var n=r(3);t.exports=function(t){var e=t.params;d3.select(e.root+" .sidebar_wrapper").append("div").classed("sidebar_text",!0).style("padding-left","10px").style("padding-top","5px").text("Matrix Values");var r=e.sidebar.width-20,o=13,i=3*o,a=1.2*r,s=10,l=33,u=r+10,c=10,f=3,d=e.network_data,h=n.max(d.links,function(t){return t.value}).value,p=n.min(d.links,function(t){return t.value}).value,v=d3.select(e.root+" .sidebar_wrapper").append("svg").attr("height",i+"px").attr("width",a+"px"),_=v.append("defs"),m=_.append("linearGradient").attr("id","linear-gradient"),g="none";p>=0?(m.append("stop").attr("offset","0%").attr("stop-color","white"),m.append("stop").attr("offset","100%").attr("stop-color","red"),g="all_postiive"):h<=0?(m.append("stop").attr("offset","0%").attr("stop-color","blue"),m.append("stop").attr("offset","100%").attr("stop-color","white"),g="all_negative"):(m.append("stop").attr("offset","0%").attr("stop-color","blue"),m.append("stop").attr("offset","50%").attr("stop-color","white"),m.append("stop").attr("offset","100%").attr("stop-color","red")),v.append("rect").classed("background",!0).attr("height",o+"px").attr("width",r+"px").attr("fill","url(#linear-gradient)").attr("transform","translate("+c+", "+f+")").attr("stroke","grey").attr("stroke-width","0.25px");var y=Math.abs(Math.round(10*e.matrix.max_link)/10),w=13;v.append("text").text(function(){var t;return t="all_postiive"===g?0:"-"+y.toLocaleString()}).style("font-family",'"Helvetica Neue", Helvetica, Arial, sans-serif').style("font-weight",300).style("font-size",w).attr("transform","translate("+s+","+l+")").attr("text-anchor","start"),v.append("text").text(y.toLocaleString()).text(function(){var t;return t="all_negative"===g?0:y.toLocaleString()}).style("font-family",'"Helvetica Neue", Helvetica, Arial, sans-serif').style("font-weight",300).style("font-size",w).attr("transform","translate("+u+","+l+")").attr("text-anchor","end")}}]);
//# sourceMappingURL=clustergrammer.min.js.map